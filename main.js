/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __typeError = (msg) => {
  throw TypeError(msg);
};
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
var __accessCheck = (obj, member, msg) => member.has(obj) || __typeError("Cannot " + msg);
var __privateGet = (obj, member, getter) => (__accessCheck(obj, member, "read from private field"), getter ? getter.call(obj) : member.get(obj));
var __privateAdd = (obj, member, value) => member.has(obj) ? __typeError("Cannot add the same private member more than once") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);
var __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, "write to private field"), setter ? setter.call(obj, value) : member.set(obj, value), value);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);

// src/index.ts
var import_obsidian2 = require("obsidian");

// src/ExampleView.ts
var import_obsidian = require("obsidian");

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/version.js
var PUBLIC_VERSION = "5";

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/disclose-version.js
if (typeof window !== "undefined")
  (window.__svelte || (window.__svelte = { v: /* @__PURE__ */ new Set() })).v.add(PUBLIC_VERSION);

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/flags/index.js
var legacy_mode_flag = false;
var tracing_mode_flag = false;
function enable_legacy_mode_flag() {
  legacy_mode_flag = true;
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/flags/legacy.js
enable_legacy_mode_flag();

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/constants.js
var EACH_INDEX_REACTIVE = 1 << 1;
var EACH_IS_CONTROLLED = 1 << 2;
var EACH_IS_ANIMATED = 1 << 3;
var EACH_ITEM_IMMUTABLE = 1 << 4;
var PROPS_IS_IMMUTABLE = 1;
var PROPS_IS_RUNES = 1 << 1;
var PROPS_IS_UPDATED = 1 << 2;
var PROPS_IS_BINDABLE = 1 << 3;
var PROPS_IS_LAZY_INITIAL = 1 << 4;
var TRANSITION_OUT = 1 << 1;
var TRANSITION_GLOBAL = 1 << 2;
var TEMPLATE_FRAGMENT = 1;
var TEMPLATE_USE_IMPORT_NODE = 1 << 1;
var HYDRATION_START = "[";
var HYDRATION_END = "]";
var HYDRATION_ERROR = {};
var ELEMENT_PRESERVE_ATTRIBUTE_CASE = 1 << 1;
var UNINITIALIZED = Symbol();
var FILENAME = Symbol("filename");
var HMR = Symbol("hmr");

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/utils.js
var DOM_BOOLEAN_ATTRIBUTES = [
  "allowfullscreen",
  "async",
  "autofocus",
  "autoplay",
  "checked",
  "controls",
  "default",
  "disabled",
  "formnovalidate",
  "hidden",
  "indeterminate",
  "ismap",
  "loop",
  "multiple",
  "muted",
  "nomodule",
  "novalidate",
  "open",
  "playsinline",
  "readonly",
  "required",
  "reversed",
  "seamless",
  "selected",
  "webkitdirectory"
];
var DOM_PROPERTIES = [
  ...DOM_BOOLEAN_ATTRIBUTES,
  "formNoValidate",
  "isMap",
  "noModule",
  "playsInline",
  "readOnly",
  "value",
  "inert",
  "volume",
  "defaultValue",
  "defaultChecked",
  "srcObject"
];
var PASSIVE_EVENTS = ["touchstart", "touchmove"];
function is_passive_event(name) {
  return PASSIVE_EVENTS.includes(name);
}

// node_modules/.pnpm/esm-env@1.2.1/node_modules/esm-env/dev-fallback.js
var _a, _b;
var node_env = (_b = (_a = globalThis.process) == null ? void 0 : _a.env) == null ? void 0 : _b.NODE_ENV;
if (!node_env) {
  console.warn("If bundling, conditions should include development or production. If not bundling, conditions or NODE_ENV should include development or production. See https://www.npmjs.com/package/esm-env for tips on setting conditions in popular bundlers and runtimes.");
}
var dev_fallback_default = node_env && !node_env.toLowerCase().includes("prod");

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/shared/utils.js
var is_array = Array.isArray;
var array_from = Array.from;
var object_keys = Object.keys;
var define_property = Object.defineProperty;
var get_descriptor = Object.getOwnPropertyDescriptor;
var object_prototype = Object.prototype;
var array_prototype = Array.prototype;
var get_prototype_of = Object.getPrototypeOf;
function run_all(arr) {
  for (var i = 0; i < arr.length; i++) {
    arr[i]();
  }
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/constants.js
var DERIVED = 1 << 1;
var EFFECT = 1 << 2;
var RENDER_EFFECT = 1 << 3;
var BLOCK_EFFECT = 1 << 4;
var BRANCH_EFFECT = 1 << 5;
var ROOT_EFFECT = 1 << 6;
var BOUNDARY_EFFECT = 1 << 7;
var UNOWNED = 1 << 8;
var DISCONNECTED = 1 << 9;
var CLEAN = 1 << 10;
var DIRTY = 1 << 11;
var MAYBE_DIRTY = 1 << 12;
var INERT = 1 << 13;
var DESTROYED = 1 << 14;
var EFFECT_RAN = 1 << 15;
var EFFECT_TRANSPARENT = 1 << 16;
var LEGACY_DERIVED_PROP = 1 << 17;
var INSPECT_EFFECT = 1 << 18;
var HEAD_EFFECT = 1 << 19;
var EFFECT_HAS_DERIVED = 1 << 20;
var STATE_SYMBOL = Symbol("$state");
var STATE_SYMBOL_METADATA = Symbol("$state metadata");
var LEGACY_PROPS = Symbol("legacy props");
var LOADING_ATTR_SYMBOL = Symbol("");

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/reactivity/equality.js
function equals(value) {
  return value === this.v;
}
function safe_not_equal(a, b) {
  return a != a ? b == b : a !== b || a !== null && typeof a === "object" || typeof a === "function";
}
function safe_equals(value) {
  return !safe_not_equal(value, this.v);
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/errors.js
function derived_references_self() {
  if (dev_fallback_default) {
    const error = new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);
    error.name = "Svelte error";
    throw error;
  } else {
    throw new Error(`https://svelte.dev/e/derived_references_self`);
  }
}
function effect_update_depth_exceeded() {
  if (dev_fallback_default) {
    const error = new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This can happen when a reactive block or effect repeatedly sets a new value. Svelte limits the number of nested updates to prevent infinite loops
https://svelte.dev/e/effect_update_depth_exceeded`);
    error.name = "Svelte error";
    throw error;
  } else {
    throw new Error(`https://svelte.dev/e/effect_update_depth_exceeded`);
  }
}
function hydration_failed() {
  if (dev_fallback_default) {
    const error = new Error(`hydration_failed
Failed to hydrate the application
https://svelte.dev/e/hydration_failed`);
    error.name = "Svelte error";
    throw error;
  } else {
    throw new Error(`https://svelte.dev/e/hydration_failed`);
  }
}
function props_invalid_value(key) {
  if (dev_fallback_default) {
    const error = new Error(`props_invalid_value
Cannot do \`bind:${key}={undefined}\` when \`${key}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);
    error.name = "Svelte error";
    throw error;
  } else {
    throw new Error(`https://svelte.dev/e/props_invalid_value`);
  }
}
function rune_outside_svelte(rune) {
  if (dev_fallback_default) {
    const error = new Error(`rune_outside_svelte
The \`${rune}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);
    error.name = "Svelte error";
    throw error;
  } else {
    throw new Error(`https://svelte.dev/e/rune_outside_svelte`);
  }
}
function state_descriptors_fixed() {
  if (dev_fallback_default) {
    const error = new Error(`state_descriptors_fixed
Property descriptors defined on \`$state\` objects must contain \`value\` and always be \`enumerable\`, \`configurable\` and \`writable\`.
https://svelte.dev/e/state_descriptors_fixed`);
    error.name = "Svelte error";
    throw error;
  } else {
    throw new Error(`https://svelte.dev/e/state_descriptors_fixed`);
  }
}
function state_prototype_fixed() {
  if (dev_fallback_default) {
    const error = new Error(`state_prototype_fixed
Cannot set prototype of \`$state\` object
https://svelte.dev/e/state_prototype_fixed`);
    error.name = "Svelte error";
    throw error;
  } else {
    throw new Error(`https://svelte.dev/e/state_prototype_fixed`);
  }
}
function state_unsafe_local_read() {
  if (dev_fallback_default) {
    const error = new Error(`state_unsafe_local_read
Reading state that was created inside the same derived is forbidden. Consider using \`untrack\` to read locally created state
https://svelte.dev/e/state_unsafe_local_read`);
    error.name = "Svelte error";
    throw error;
  } else {
    throw new Error(`https://svelte.dev/e/state_unsafe_local_read`);
  }
}
function state_unsafe_mutation() {
  if (dev_fallback_default) {
    const error = new Error(`state_unsafe_mutation
Updating state inside a derived or a template expression is forbidden. If the value should not be reactive, declare it without \`$state\`
https://svelte.dev/e/state_unsafe_mutation`);
    error.name = "Svelte error";
    throw error;
  } else {
    throw new Error(`https://svelte.dev/e/state_unsafe_mutation`);
  }
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dev/tracing.js
var tracing_expressions = null;
function get_stack(label) {
  let error = Error();
  const stack2 = error.stack;
  if (stack2) {
    const lines = stack2.split("\n");
    const new_lines = ["\n"];
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      if (line === "Error") {
        continue;
      }
      if (line.includes("validate_each_keys")) {
        return null;
      }
      if (line.includes("svelte/src/internal")) {
        continue;
      }
      new_lines.push(line);
    }
    if (new_lines.length === 1) {
      return null;
    }
    define_property(error, "stack", {
      value: new_lines.join("\n")
    });
    define_property(error, "name", {
      // 'Error' suffix is required for stack traces to be rendered properly
      value: `${label}Error`
    });
  }
  return error;
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/reactivity/sources.js
var inspect_effects = /* @__PURE__ */ new Set();
function set_inspect_effects(v) {
  inspect_effects = v;
}
function source(v, stack2) {
  var signal = {
    f: 0,
    // TODO ideally we could skip this altogether, but it causes type errors
    v,
    reactions: null,
    equals,
    version: 0
  };
  if (dev_fallback_default && tracing_mode_flag) {
    signal.created = stack2 != null ? stack2 : get_stack("CreatedAt");
    signal.debug = null;
  }
  return signal;
}
// @__NO_SIDE_EFFECTS__
function mutable_source(initial_value, immutable = false) {
  var _a2, _b2;
  const s = source(initial_value);
  if (!immutable) {
    s.equals = safe_equals;
  }
  if (legacy_mode_flag && component_context !== null && component_context.l !== null) {
    ((_b2 = (_a2 = component_context.l).s) != null ? _b2 : _a2.s = []).push(s);
  }
  return s;
}
function set(source2, value) {
  if (active_reaction !== null && is_runes() && (active_reaction.f & (DERIVED | BLOCK_EFFECT)) !== 0 && // If the source was created locally within the current derived, then
  // we allow the mutation.
  (derived_sources === null || !derived_sources.includes(source2))) {
    state_unsafe_mutation();
  }
  return internal_set(source2, value);
}
function internal_set(source2, value) {
  if (!source2.equals(value)) {
    source2.v = value;
    source2.version = increment_version();
    if (dev_fallback_default && tracing_mode_flag) {
      source2.updated = get_stack("UpdatedAt");
    }
    mark_reactions(source2, DIRTY);
    if (is_runes() && active_effect !== null && (active_effect.f & CLEAN) !== 0 && (active_effect.f & BRANCH_EFFECT) === 0) {
      if (new_deps !== null && new_deps.includes(source2)) {
        set_signal_status(active_effect, DIRTY);
        schedule_effect(active_effect);
      } else {
        if (untracked_writes === null) {
          set_untracked_writes([source2]);
        } else {
          untracked_writes.push(source2);
        }
      }
    }
    if (dev_fallback_default && inspect_effects.size > 0) {
      const inspects = Array.from(inspect_effects);
      var previously_flushing_effect = is_flushing_effect;
      set_is_flushing_effect(true);
      try {
        for (const effect2 of inspects) {
          if ((effect2.f & CLEAN) !== 0) {
            set_signal_status(effect2, MAYBE_DIRTY);
          }
          if (check_dirtiness(effect2)) {
            update_effect(effect2);
          }
        }
      } finally {
        set_is_flushing_effect(previously_flushing_effect);
      }
      inspect_effects.clear();
    }
  }
  return value;
}
function mark_reactions(signal, status) {
  var reactions = signal.reactions;
  if (reactions === null) return;
  var runes = is_runes();
  var length = reactions.length;
  for (var i = 0; i < length; i++) {
    var reaction = reactions[i];
    var flags = reaction.f;
    if ((flags & DIRTY) !== 0) continue;
    if (!runes && reaction === active_effect) continue;
    if (dev_fallback_default && (flags & INSPECT_EFFECT) !== 0) {
      inspect_effects.add(reaction);
      continue;
    }
    set_signal_status(reaction, status);
    if ((flags & (CLEAN | UNOWNED)) !== 0) {
      if ((flags & DERIVED) !== 0) {
        mark_reactions(
          /** @type {Derived} */
          reaction,
          MAYBE_DIRTY
        );
      } else {
        schedule_effect(
          /** @type {Effect} */
          reaction
        );
      }
    }
  }
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/warnings.js
var bold = "font-weight: bold";
var normal = "font-weight: normal";
function hydration_mismatch(location) {
  if (dev_fallback_default) {
    console.warn(`%c[svelte] hydration_mismatch
%c${location ? `Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${location}` : "Hydration failed because the initial UI does not match what was rendered on the server"}
https://svelte.dev/e/hydration_mismatch`, bold, normal);
  } else {
    console.warn(`https://svelte.dev/e/hydration_mismatch`);
  }
}
function lifecycle_double_unmount() {
  if (dev_fallback_default) {
    console.warn(`%c[svelte] lifecycle_double_unmount
%cTried to unmount a component that was not mounted
https://svelte.dev/e/lifecycle_double_unmount`, bold, normal);
  } else {
    console.warn(`https://svelte.dev/e/lifecycle_double_unmount`);
  }
}
function ownership_invalid_mutation(component2, owner) {
  if (dev_fallback_default) {
    console.warn(`%c[svelte] ownership_invalid_mutation
%c${component2 ? `${component2} mutated a value owned by ${owner}. This is strongly discouraged. Consider passing values to child components with \`bind:\`, or use a callback instead` : "Mutating a value outside the component that created it is strongly discouraged. Consider passing values to child components with `bind:`, or use a callback instead"}
https://svelte.dev/e/ownership_invalid_mutation`, bold, normal);
  } else {
    console.warn(`https://svelte.dev/e/ownership_invalid_mutation`);
  }
}
function state_proxy_equality_mismatch(operator) {
  if (dev_fallback_default) {
    console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${operator}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`, bold, normal);
  } else {
    console.warn(`https://svelte.dev/e/state_proxy_equality_mismatch`);
  }
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dom/hydration.js
var hydrating = false;
function set_hydrating(value) {
  hydrating = value;
}
var hydrate_node;
function set_hydrate_node(node) {
  if (node === null) {
    hydration_mismatch();
    throw HYDRATION_ERROR;
  }
  return hydrate_node = node;
}
function hydrate_next() {
  return set_hydrate_node(
    /** @type {TemplateNode} */
    get_next_sibling(hydrate_node)
  );
}
function reset(node) {
  if (!hydrating) return;
  if (get_next_sibling(hydrate_node) !== null) {
    hydration_mismatch();
    throw HYDRATION_ERROR;
  }
  hydrate_node = node;
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dev/ownership.js
var boundaries = {};
var chrome_pattern = /at (?:.+ \()?(.+):(\d+):(\d+)\)?$/;
var firefox_pattern = /@(.+):(\d+):(\d+)$/;
function get_stack2() {
  var _a2;
  const stack2 = new Error().stack;
  if (!stack2) return null;
  const entries = [];
  for (const line of stack2.split("\n")) {
    let match = (_a2 = chrome_pattern.exec(line)) != null ? _a2 : firefox_pattern.exec(line);
    if (match) {
      entries.push({
        file: match[1],
        line: +match[2],
        column: +match[3]
      });
    }
  }
  return entries;
}
function get_component() {
  var _a2;
  const stack2 = (_a2 = get_stack2()) == null ? void 0 : _a2.slice(4);
  if (!stack2) return null;
  for (let i = 0; i < stack2.length; i++) {
    const entry = stack2[i];
    const modules = boundaries[entry.file];
    if (!modules) {
      if (i === 0) return null;
      continue;
    }
    for (const module2 of modules) {
      if (module2.end == null) {
        return null;
      }
      if (module2.start.line < entry.line && module2.end.line > entry.line) {
        return module2.component;
      }
    }
  }
  return null;
}
var ADD_OWNER = Symbol("ADD_OWNER");
function widen_ownership(from, to) {
  if (to.owners === null) {
    return;
  }
  while (from) {
    if (from.owners === null) {
      to.owners = null;
      break;
    }
    for (const owner of from.owners) {
      to.owners.add(owner);
    }
    from = from.parent;
  }
}
function has_owner(metadata, component2) {
  if (metadata.owners === null) {
    return true;
  }
  return metadata.owners.has(component2) || metadata.parent !== null && has_owner(metadata.parent, component2);
}
function get_owner(metadata) {
  var _a2, _b2;
  return (_b2 = (_a2 = metadata == null ? void 0 : metadata.owners) == null ? void 0 : _a2.values().next().value) != null ? _b2 : get_owner(
    /** @type {ProxyMetadata} */
    metadata.parent
  );
}
var skip = false;
function check_ownership(metadata) {
  if (skip) return;
  const component2 = get_component();
  if (component2 && !has_owner(metadata, component2)) {
    let original = get_owner(metadata);
    if (original[FILENAME] !== component2[FILENAME]) {
      ownership_invalid_mutation(component2[FILENAME], original[FILENAME]);
    } else {
      ownership_invalid_mutation();
    }
  }
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/proxy.js
function proxy(value, parent = null, prev) {
  var _a2, _b2;
  var stack2 = null;
  if (dev_fallback_default && tracing_mode_flag) {
    stack2 = get_stack("CreatedAt");
  }
  if (typeof value !== "object" || value === null || STATE_SYMBOL in value) {
    return value;
  }
  const prototype = get_prototype_of(value);
  if (prototype !== object_prototype && prototype !== array_prototype) {
    return value;
  }
  var sources = /* @__PURE__ */ new Map();
  var is_proxied_array = is_array(value);
  var version = source(0);
  if (is_proxied_array) {
    sources.set("length", source(
      /** @type {any[]} */
      value.length,
      stack2
    ));
  }
  var metadata;
  if (dev_fallback_default) {
    metadata = {
      parent,
      owners: null
    };
    if (prev) {
      const prev_owners = (_b2 = (_a2 = prev.v) == null ? void 0 : _a2[STATE_SYMBOL_METADATA]) == null ? void 0 : _b2.owners;
      metadata.owners = prev_owners ? new Set(prev_owners) : null;
    } else {
      metadata.owners = parent === null ? component_context !== null ? /* @__PURE__ */ new Set([component_context.function]) : null : /* @__PURE__ */ new Set();
    }
  }
  return new Proxy(
    /** @type {any} */
    value,
    {
      defineProperty(_, prop2, descriptor) {
        if (!("value" in descriptor) || descriptor.configurable === false || descriptor.enumerable === false || descriptor.writable === false) {
          state_descriptors_fixed();
        }
        var s = sources.get(prop2);
        if (s === void 0) {
          s = source(descriptor.value, stack2);
          sources.set(prop2, s);
        } else {
          set(s, proxy(descriptor.value, metadata));
        }
        return true;
      },
      deleteProperty(target, prop2) {
        var s = sources.get(prop2);
        if (s === void 0) {
          if (prop2 in target) {
            sources.set(prop2, source(UNINITIALIZED, stack2));
          }
        } else {
          if (is_proxied_array && typeof prop2 === "string") {
            var ls = (
              /** @type {Source<number>} */
              sources.get("length")
            );
            var n = Number(prop2);
            if (Number.isInteger(n) && n < ls.v) {
              set(ls, n);
            }
          }
          set(s, UNINITIALIZED);
          update_version(version);
        }
        return true;
      },
      get(target, prop2, receiver) {
        var _a3;
        if (dev_fallback_default && prop2 === STATE_SYMBOL_METADATA) {
          return metadata;
        }
        if (prop2 === STATE_SYMBOL) {
          return value;
        }
        var s = sources.get(prop2);
        var exists = prop2 in target;
        if (s === void 0 && (!exists || ((_a3 = get_descriptor(target, prop2)) == null ? void 0 : _a3.writable))) {
          s = source(proxy(exists ? target[prop2] : UNINITIALIZED, metadata), stack2);
          sources.set(prop2, s);
        }
        if (s !== void 0) {
          var v = get(s);
          if (dev_fallback_default) {
            var prop_metadata = v == null ? void 0 : v[STATE_SYMBOL_METADATA];
            if (prop_metadata && (prop_metadata == null ? void 0 : prop_metadata.parent) !== metadata) {
              widen_ownership(metadata, prop_metadata);
            }
          }
          return v === UNINITIALIZED ? void 0 : v;
        }
        return Reflect.get(target, prop2, receiver);
      },
      getOwnPropertyDescriptor(target, prop2) {
        var descriptor = Reflect.getOwnPropertyDescriptor(target, prop2);
        if (descriptor && "value" in descriptor) {
          var s = sources.get(prop2);
          if (s) descriptor.value = get(s);
        } else if (descriptor === void 0) {
          var source2 = sources.get(prop2);
          var value2 = source2 == null ? void 0 : source2.v;
          if (source2 !== void 0 && value2 !== UNINITIALIZED) {
            return {
              enumerable: true,
              configurable: true,
              value: value2,
              writable: true
            };
          }
        }
        return descriptor;
      },
      has(target, prop2) {
        var _a3;
        if (dev_fallback_default && prop2 === STATE_SYMBOL_METADATA) {
          return true;
        }
        if (prop2 === STATE_SYMBOL) {
          return true;
        }
        var s = sources.get(prop2);
        var has = s !== void 0 && s.v !== UNINITIALIZED || Reflect.has(target, prop2);
        if (s !== void 0 || active_effect !== null && (!has || ((_a3 = get_descriptor(target, prop2)) == null ? void 0 : _a3.writable))) {
          if (s === void 0) {
            s = source(has ? proxy(target[prop2], metadata) : UNINITIALIZED, stack2);
            sources.set(prop2, s);
          }
          var value2 = get(s);
          if (value2 === UNINITIALIZED) {
            return false;
          }
        }
        return has;
      },
      set(target, prop2, value2, receiver) {
        var _a3;
        var s = sources.get(prop2);
        var has = prop2 in target;
        if (is_proxied_array && prop2 === "length") {
          for (var i = value2; i < /** @type {Source<number>} */
          s.v; i += 1) {
            var other_s = sources.get(i + "");
            if (other_s !== void 0) {
              set(other_s, UNINITIALIZED);
            } else if (i in target) {
              other_s = source(UNINITIALIZED, stack2);
              sources.set(i + "", other_s);
            }
          }
        }
        if (s === void 0) {
          if (!has || ((_a3 = get_descriptor(target, prop2)) == null ? void 0 : _a3.writable)) {
            s = source(void 0, stack2);
            set(s, proxy(value2, metadata));
            sources.set(prop2, s);
          }
        } else {
          has = s.v !== UNINITIALIZED;
          set(s, proxy(value2, metadata));
        }
        if (dev_fallback_default) {
          var prop_metadata = value2 == null ? void 0 : value2[STATE_SYMBOL_METADATA];
          if (prop_metadata && (prop_metadata == null ? void 0 : prop_metadata.parent) !== metadata) {
            widen_ownership(metadata, prop_metadata);
          }
          check_ownership(metadata);
        }
        var descriptor = Reflect.getOwnPropertyDescriptor(target, prop2);
        if (descriptor == null ? void 0 : descriptor.set) {
          descriptor.set.call(receiver, value2);
        }
        if (!has) {
          if (is_proxied_array && typeof prop2 === "string") {
            var ls = (
              /** @type {Source<number>} */
              sources.get("length")
            );
            var n = Number(prop2);
            if (Number.isInteger(n) && n >= ls.v) {
              set(ls, n + 1);
            }
          }
          update_version(version);
        }
        return true;
      },
      ownKeys(target) {
        get(version);
        var own_keys = Reflect.ownKeys(target).filter((key2) => {
          var source3 = sources.get(key2);
          return source3 === void 0 || source3.v !== UNINITIALIZED;
        });
        for (var [key, source2] of sources) {
          if (source2.v !== UNINITIALIZED && !(key in target)) {
            own_keys.push(key);
          }
        }
        return own_keys;
      },
      setPrototypeOf() {
        state_prototype_fixed();
      }
    }
  );
}
function update_version(signal, d = 1) {
  set(signal, signal.v + d);
}
function get_proxied_value(value) {
  if (value !== null && typeof value === "object" && STATE_SYMBOL in value) {
    return value[STATE_SYMBOL];
  }
  return value;
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dev/equality.js
function init_array_prototype_warnings() {
  const array_prototype2 = Array.prototype;
  const cleanup = Array.__svelte_cleanup;
  if (cleanup) {
    cleanup();
  }
  const { indexOf, lastIndexOf, includes } = array_prototype2;
  array_prototype2.indexOf = function(item, from_index) {
    const index2 = indexOf.call(this, item, from_index);
    if (index2 === -1) {
      for (let i = from_index != null ? from_index : 0; i < this.length; i += 1) {
        if (get_proxied_value(this[i]) === item) {
          state_proxy_equality_mismatch("array.indexOf(...)");
          break;
        }
      }
    }
    return index2;
  };
  array_prototype2.lastIndexOf = function(item, from_index) {
    const index2 = lastIndexOf.call(this, item, from_index != null ? from_index : this.length - 1);
    if (index2 === -1) {
      for (let i = 0; i <= (from_index != null ? from_index : this.length - 1); i += 1) {
        if (get_proxied_value(this[i]) === item) {
          state_proxy_equality_mismatch("array.lastIndexOf(...)");
          break;
        }
      }
    }
    return index2;
  };
  array_prototype2.includes = function(item, from_index) {
    const has = includes.call(this, item, from_index);
    if (!has) {
      for (let i = 0; i < this.length; i += 1) {
        if (get_proxied_value(this[i]) === item) {
          state_proxy_equality_mismatch("array.includes(...)");
          break;
        }
      }
    }
    return has;
  };
  Array.__svelte_cleanup = () => {
    array_prototype2.indexOf = indexOf;
    array_prototype2.lastIndexOf = lastIndexOf;
    array_prototype2.includes = includes;
  };
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dom/operations.js
var $window;
var $document;
var first_child_getter;
var next_sibling_getter;
function init_operations() {
  if ($window !== void 0) {
    return;
  }
  $window = window;
  $document = document;
  var element_prototype = Element.prototype;
  var node_prototype = Node.prototype;
  first_child_getter = get_descriptor(node_prototype, "firstChild").get;
  next_sibling_getter = get_descriptor(node_prototype, "nextSibling").get;
  element_prototype.__click = void 0;
  element_prototype.__className = "";
  element_prototype.__attributes = null;
  element_prototype.__styles = null;
  element_prototype.__e = void 0;
  Text.prototype.__t = void 0;
  if (dev_fallback_default) {
    element_prototype.__svelte_meta = null;
    init_array_prototype_warnings();
  }
}
function create_text(value = "") {
  return document.createTextNode(value);
}
// @__NO_SIDE_EFFECTS__
function get_first_child(node) {
  return first_child_getter.call(node);
}
// @__NO_SIDE_EFFECTS__
function get_next_sibling(node) {
  return next_sibling_getter.call(node);
}
function child(node, is_text) {
  if (!hydrating) {
    return /* @__PURE__ */ get_first_child(node);
  }
  var child2 = (
    /** @type {TemplateNode} */
    /* @__PURE__ */ get_first_child(hydrate_node)
  );
  if (child2 === null) {
    child2 = hydrate_node.appendChild(create_text());
  } else if (is_text && child2.nodeType !== 3) {
    var text2 = create_text();
    child2 == null ? void 0 : child2.before(text2);
    set_hydrate_node(text2);
    return text2;
  }
  set_hydrate_node(child2);
  return child2;
}
function clear_text_content(node) {
  node.textContent = "";
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/reactivity/deriveds.js
// @__NO_SIDE_EFFECTS__
function derived(fn) {
  var _a2;
  var flags = DERIVED | DIRTY;
  if (active_effect === null) {
    flags |= UNOWNED;
  } else {
    active_effect.f |= EFFECT_HAS_DERIVED;
  }
  var parent_derived = active_reaction !== null && (active_reaction.f & DERIVED) !== 0 ? (
    /** @type {Derived} */
    active_reaction
  ) : null;
  const signal = {
    children: null,
    ctx: component_context,
    deps: null,
    equals,
    f: flags,
    fn,
    reactions: null,
    v: (
      /** @type {V} */
      null
    ),
    version: 0,
    parent: parent_derived != null ? parent_derived : active_effect
  };
  if (dev_fallback_default && tracing_mode_flag) {
    signal.created = get_stack("CreatedAt");
  }
  if (parent_derived !== null) {
    ((_a2 = parent_derived.children) != null ? _a2 : parent_derived.children = []).push(signal);
  }
  return signal;
}
// @__NO_SIDE_EFFECTS__
function derived_safe_equal(fn) {
  const signal = /* @__PURE__ */ derived(fn);
  signal.equals = safe_equals;
  return signal;
}
function destroy_derived_children(derived2) {
  var children = derived2.children;
  if (children !== null) {
    derived2.children = null;
    for (var i = 0; i < children.length; i += 1) {
      var child2 = children[i];
      if ((child2.f & DERIVED) !== 0) {
        destroy_derived(
          /** @type {Derived} */
          child2
        );
      } else {
        destroy_effect(
          /** @type {Effect} */
          child2
        );
      }
    }
  }
}
var stack = [];
function get_derived_parent_effect(derived2) {
  var parent = derived2.parent;
  while (parent !== null) {
    if ((parent.f & DERIVED) === 0) {
      return (
        /** @type {Effect} */
        parent
      );
    }
    parent = parent.parent;
  }
  return null;
}
function execute_derived(derived2) {
  var value;
  var prev_active_effect = active_effect;
  set_active_effect(get_derived_parent_effect(derived2));
  if (dev_fallback_default) {
    let prev_inspect_effects = inspect_effects;
    set_inspect_effects(/* @__PURE__ */ new Set());
    try {
      if (stack.includes(derived2)) {
        derived_references_self();
      }
      stack.push(derived2);
      destroy_derived_children(derived2);
      value = update_reaction(derived2);
    } finally {
      set_active_effect(prev_active_effect);
      set_inspect_effects(prev_inspect_effects);
      stack.pop();
    }
  } else {
    try {
      destroy_derived_children(derived2);
      value = update_reaction(derived2);
    } finally {
      set_active_effect(prev_active_effect);
    }
  }
  return value;
}
function update_derived(derived2) {
  var value = execute_derived(derived2);
  var status = (skip_reaction || (derived2.f & UNOWNED) !== 0) && derived2.deps !== null ? MAYBE_DIRTY : CLEAN;
  set_signal_status(derived2, status);
  if (!derived2.equals(value)) {
    derived2.v = value;
    derived2.version = increment_version();
  }
}
function destroy_derived(derived2) {
  destroy_derived_children(derived2);
  remove_reactions(derived2, 0);
  set_signal_status(derived2, DESTROYED);
  derived2.v = derived2.children = derived2.deps = derived2.ctx = derived2.reactions = null;
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/reactivity/effects.js
function push_effect(effect2, parent_effect) {
  var parent_last = parent_effect.last;
  if (parent_last === null) {
    parent_effect.last = parent_effect.first = effect2;
  } else {
    parent_last.next = effect2;
    effect2.prev = parent_last;
    parent_effect.last = effect2;
  }
}
function create_effect(type, fn, sync, push2 = true) {
  var _a2;
  var is_root = (type & ROOT_EFFECT) !== 0;
  var parent_effect = active_effect;
  if (dev_fallback_default) {
    while (parent_effect !== null && (parent_effect.f & INSPECT_EFFECT) !== 0) {
      parent_effect = parent_effect.parent;
    }
  }
  var effect2 = {
    ctx: component_context,
    deps: null,
    deriveds: null,
    nodes_start: null,
    nodes_end: null,
    f: type | DIRTY,
    first: null,
    fn,
    last: null,
    next: null,
    parent: is_root ? null : parent_effect,
    prev: null,
    teardown: null,
    transitions: null,
    version: 0
  };
  if (dev_fallback_default) {
    effect2.component_function = dev_current_component_function;
  }
  if (sync) {
    var previously_flushing_effect = is_flushing_effect;
    try {
      set_is_flushing_effect(true);
      update_effect(effect2);
      effect2.f |= EFFECT_RAN;
    } catch (e) {
      destroy_effect(effect2);
      throw e;
    } finally {
      set_is_flushing_effect(previously_flushing_effect);
    }
  } else if (fn !== null) {
    schedule_effect(effect2);
  }
  var inert = sync && effect2.deps === null && effect2.first === null && effect2.nodes_start === null && effect2.teardown === null && (effect2.f & EFFECT_HAS_DERIVED) === 0;
  if (!inert && !is_root && push2) {
    if (parent_effect !== null) {
      push_effect(effect2, parent_effect);
    }
    if (active_reaction !== null && (active_reaction.f & DERIVED) !== 0) {
      var derived2 = (
        /** @type {Derived} */
        active_reaction
      );
      ((_a2 = derived2.children) != null ? _a2 : derived2.children = []).push(effect2);
    }
  }
  return effect2;
}
function effect_root(fn) {
  const effect2 = create_effect(ROOT_EFFECT, fn, true);
  return () => {
    destroy_effect(effect2);
  };
}
function component_root(fn) {
  const effect2 = create_effect(ROOT_EFFECT, fn, true);
  return (options = {}) => {
    return new Promise((fulfil) => {
      if (options.outro) {
        pause_effect(effect2, () => {
          destroy_effect(effect2);
          fulfil(void 0);
        });
      } else {
        destroy_effect(effect2);
        fulfil(void 0);
      }
    });
  };
}
function effect(fn) {
  return create_effect(EFFECT, fn, false);
}
function render_effect(fn) {
  return create_effect(RENDER_EFFECT, fn, true);
}
function template_effect(fn) {
  if (dev_fallback_default) {
    define_property(fn, "name", {
      value: "{expression}"
    });
  }
  return block(fn);
}
function block(fn, flags = 0) {
  return create_effect(RENDER_EFFECT | BLOCK_EFFECT | flags, fn, true);
}
function branch(fn, push2 = true) {
  return create_effect(RENDER_EFFECT | BRANCH_EFFECT, fn, true, push2);
}
function execute_effect_teardown(effect2) {
  var teardown2 = effect2.teardown;
  if (teardown2 !== null) {
    const previously_destroying_effect = is_destroying_effect;
    const previous_reaction = active_reaction;
    set_is_destroying_effect(true);
    set_active_reaction(null);
    try {
      teardown2.call(null);
    } finally {
      set_is_destroying_effect(previously_destroying_effect);
      set_active_reaction(previous_reaction);
    }
  }
}
function destroy_effect_deriveds(signal) {
  var deriveds = signal.deriveds;
  if (deriveds !== null) {
    signal.deriveds = null;
    for (var i = 0; i < deriveds.length; i += 1) {
      destroy_derived(deriveds[i]);
    }
  }
}
function destroy_effect_children(signal, remove_dom = false) {
  var effect2 = signal.first;
  signal.first = signal.last = null;
  while (effect2 !== null) {
    var next2 = effect2.next;
    destroy_effect(effect2, remove_dom);
    effect2 = next2;
  }
}
function destroy_block_effect_children(signal) {
  var effect2 = signal.first;
  while (effect2 !== null) {
    var next2 = effect2.next;
    if ((effect2.f & BRANCH_EFFECT) === 0) {
      destroy_effect(effect2);
    }
    effect2 = next2;
  }
}
function destroy_effect(effect2, remove_dom = true) {
  var removed = false;
  if ((remove_dom || (effect2.f & HEAD_EFFECT) !== 0) && effect2.nodes_start !== null) {
    var node = effect2.nodes_start;
    var end = effect2.nodes_end;
    while (node !== null) {
      var next2 = node === end ? null : (
        /** @type {TemplateNode} */
        get_next_sibling(node)
      );
      node.remove();
      node = next2;
    }
    removed = true;
  }
  destroy_effect_children(effect2, remove_dom && !removed);
  destroy_effect_deriveds(effect2);
  remove_reactions(effect2, 0);
  set_signal_status(effect2, DESTROYED);
  var transitions = effect2.transitions;
  if (transitions !== null) {
    for (const transition2 of transitions) {
      transition2.stop();
    }
  }
  execute_effect_teardown(effect2);
  var parent = effect2.parent;
  if (parent !== null && parent.first !== null) {
    unlink_effect(effect2);
  }
  if (dev_fallback_default) {
    effect2.component_function = null;
  }
  effect2.next = effect2.prev = effect2.teardown = effect2.ctx = effect2.deps = effect2.fn = effect2.nodes_start = effect2.nodes_end = null;
}
function unlink_effect(effect2) {
  var parent = effect2.parent;
  var prev = effect2.prev;
  var next2 = effect2.next;
  if (prev !== null) prev.next = next2;
  if (next2 !== null) next2.prev = prev;
  if (parent !== null) {
    if (parent.first === effect2) parent.first = next2;
    if (parent.last === effect2) parent.last = prev;
  }
}
function pause_effect(effect2, callback) {
  var transitions = [];
  pause_children(effect2, transitions, true);
  run_out_transitions(transitions, () => {
    destroy_effect(effect2);
    if (callback) callback();
  });
}
function run_out_transitions(transitions, fn) {
  var remaining = transitions.length;
  if (remaining > 0) {
    var check = () => --remaining || fn();
    for (var transition2 of transitions) {
      transition2.out(check);
    }
  } else {
    fn();
  }
}
function pause_children(effect2, transitions, local) {
  if ((effect2.f & INERT) !== 0) return;
  effect2.f ^= INERT;
  if (effect2.transitions !== null) {
    for (const transition2 of effect2.transitions) {
      if (transition2.is_global || local) {
        transitions.push(transition2);
      }
    }
  }
  var child2 = effect2.first;
  while (child2 !== null) {
    var sibling2 = child2.next;
    var transparent = (child2.f & EFFECT_TRANSPARENT) !== 0 || (child2.f & BRANCH_EFFECT) !== 0;
    pause_children(child2, transitions, transparent ? local : false);
    child2 = sibling2;
  }
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dom/task.js
var is_micro_task_queued = false;
var is_idle_task_queued = false;
var current_queued_micro_tasks = [];
var current_queued_idle_tasks = [];
function process_micro_tasks() {
  is_micro_task_queued = false;
  const tasks = current_queued_micro_tasks.slice();
  current_queued_micro_tasks = [];
  run_all(tasks);
}
function process_idle_tasks() {
  is_idle_task_queued = false;
  const tasks = current_queued_idle_tasks.slice();
  current_queued_idle_tasks = [];
  run_all(tasks);
}
function queue_micro_task(fn) {
  if (!is_micro_task_queued) {
    is_micro_task_queued = true;
    queueMicrotask(process_micro_tasks);
  }
  current_queued_micro_tasks.push(fn);
}
function flush_tasks() {
  if (is_micro_task_queued) {
    process_micro_tasks();
  }
  if (is_idle_task_queued) {
    process_idle_tasks();
  }
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/runtime.js
var FLUSH_MICROTASK = 0;
var FLUSH_SYNC = 1;
var handled_errors = /* @__PURE__ */ new WeakSet();
var is_throwing_error = false;
var scheduler_mode = FLUSH_MICROTASK;
var is_micro_task_queued2 = false;
var last_scheduled_effect = null;
var is_flushing_effect = false;
var is_destroying_effect = false;
function set_is_flushing_effect(value) {
  is_flushing_effect = value;
}
function set_is_destroying_effect(value) {
  is_destroying_effect = value;
}
var queued_root_effects = [];
var flush_count = 0;
var dev_effect_stack = [];
var active_reaction = null;
function set_active_reaction(reaction) {
  active_reaction = reaction;
}
var active_effect = null;
function set_active_effect(effect2) {
  active_effect = effect2;
}
var derived_sources = null;
var new_deps = null;
var skipped_deps = 0;
var untracked_writes = null;
function set_untracked_writes(value) {
  untracked_writes = value;
}
var current_version = 1;
var skip_reaction = false;
var captured_signals = null;
var component_context = null;
var dev_current_component_function = null;
function increment_version() {
  return ++current_version;
}
function is_runes() {
  return !legacy_mode_flag || component_context !== null && component_context.l === null;
}
function check_dirtiness(reaction) {
  var _a2, _b2, _c, _d;
  var flags = reaction.f;
  if ((flags & DIRTY) !== 0) {
    return true;
  }
  if ((flags & MAYBE_DIRTY) !== 0) {
    var dependencies = reaction.deps;
    var is_unowned = (flags & UNOWNED) !== 0;
    if (dependencies !== null) {
      var i;
      if ((flags & DISCONNECTED) !== 0) {
        for (i = 0; i < dependencies.length; i++) {
          ((_b2 = (_a2 = dependencies[i]).reactions) != null ? _b2 : _a2.reactions = []).push(reaction);
        }
        reaction.f ^= DISCONNECTED;
      }
      for (i = 0; i < dependencies.length; i++) {
        var dependency = dependencies[i];
        if (check_dirtiness(
          /** @type {Derived} */
          dependency
        )) {
          update_derived(
            /** @type {Derived} */
            dependency
          );
        }
        if (is_unowned && active_effect !== null && !skip_reaction && !((_c = dependency == null ? void 0 : dependency.reactions) == null ? void 0 : _c.includes(reaction))) {
          ((_d = dependency.reactions) != null ? _d : dependency.reactions = []).push(reaction);
        }
        if (dependency.version > reaction.version) {
          return true;
        }
      }
    }
    if (!is_unowned || active_effect !== null && !skip_reaction) {
      set_signal_status(reaction, CLEAN);
    }
  }
  return false;
}
function propagate_error(error, effect2) {
  var current = effect2;
  while (current !== null) {
    if ((current.f & BOUNDARY_EFFECT) !== 0) {
      try {
        current.fn(error);
        return;
      } catch (e) {
        current.f ^= BOUNDARY_EFFECT;
      }
    }
    current = current.parent;
  }
  is_throwing_error = false;
  throw error;
}
function should_rethrow_error(effect2) {
  return (effect2.f & DESTROYED) === 0 && (effect2.parent === null || (effect2.parent.f & BOUNDARY_EFFECT) === 0);
}
function handle_error(error, effect2, previous_effect, component_context2) {
  var _a2, _b2;
  if (is_throwing_error) {
    if (previous_effect === null) {
      is_throwing_error = false;
    }
    if (should_rethrow_error(effect2)) {
      throw error;
    }
    return;
  }
  if (previous_effect !== null) {
    is_throwing_error = true;
  }
  if (!dev_fallback_default || component_context2 === null || !(error instanceof Error) || handled_errors.has(error)) {
    propagate_error(error, effect2);
    return;
  }
  handled_errors.add(error);
  const component_stack = [];
  const effect_name = (_a2 = effect2.fn) == null ? void 0 : _a2.name;
  if (effect_name) {
    component_stack.push(effect_name);
  }
  let current_context = component_context2;
  while (current_context !== null) {
    if (dev_fallback_default) {
      var filename = (_b2 = current_context.function) == null ? void 0 : _b2[FILENAME];
      if (filename) {
        const file = filename.split("/").pop();
        component_stack.push(file);
      }
    }
    current_context = current_context.p;
  }
  const indent = /Firefox/.test(navigator.userAgent) ? "  " : "	";
  define_property(error, "message", {
    value: error.message + `
${component_stack.map((name) => `
${indent}in ${name}`).join("")}
`
  });
  define_property(error, "component_stack", {
    value: component_stack
  });
  const stack2 = error.stack;
  if (stack2) {
    const lines = stack2.split("\n");
    const new_lines = [];
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      if (line.includes("svelte/src/internal")) {
        continue;
      }
      new_lines.push(line);
    }
    define_property(error, "stack", {
      value: new_lines.join("\n")
    });
  }
  propagate_error(error, effect2);
  if (should_rethrow_error(effect2)) {
    throw error;
  }
}
function update_reaction(reaction) {
  var _a2, _b2;
  var previous_deps = new_deps;
  var previous_skipped_deps = skipped_deps;
  var previous_untracked_writes = untracked_writes;
  var previous_reaction = active_reaction;
  var previous_skip_reaction = skip_reaction;
  var prev_derived_sources = derived_sources;
  var previous_component_context = component_context;
  var flags = reaction.f;
  new_deps = /** @type {null | Value[]} */
  null;
  skipped_deps = 0;
  untracked_writes = null;
  active_reaction = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) === 0 ? reaction : null;
  skip_reaction = !is_flushing_effect && (flags & UNOWNED) !== 0;
  derived_sources = null;
  component_context = reaction.ctx;
  try {
    var result = (
      /** @type {Function} */
      (0, reaction.fn)()
    );
    var deps = reaction.deps;
    if (new_deps !== null) {
      var i;
      remove_reactions(reaction, skipped_deps);
      if (deps !== null && skipped_deps > 0) {
        deps.length = skipped_deps + new_deps.length;
        for (i = 0; i < new_deps.length; i++) {
          deps[skipped_deps + i] = new_deps[i];
        }
      } else {
        reaction.deps = deps = new_deps;
      }
      if (!skip_reaction) {
        for (i = skipped_deps; i < deps.length; i++) {
          ((_b2 = (_a2 = deps[i]).reactions) != null ? _b2 : _a2.reactions = []).push(reaction);
        }
      }
    } else if (deps !== null && skipped_deps < deps.length) {
      remove_reactions(reaction, skipped_deps);
      deps.length = skipped_deps;
    }
    return result;
  } finally {
    new_deps = previous_deps;
    skipped_deps = previous_skipped_deps;
    untracked_writes = previous_untracked_writes;
    active_reaction = previous_reaction;
    skip_reaction = previous_skip_reaction;
    derived_sources = prev_derived_sources;
    component_context = previous_component_context;
  }
}
function remove_reaction(signal, dependency) {
  let reactions = dependency.reactions;
  if (reactions !== null) {
    var index2 = reactions.indexOf(signal);
    if (index2 !== -1) {
      var new_length = reactions.length - 1;
      if (new_length === 0) {
        reactions = dependency.reactions = null;
      } else {
        reactions[index2] = reactions[new_length];
        reactions.pop();
      }
    }
  }
  if (reactions === null && (dependency.f & DERIVED) !== 0 && // Destroying a child effect while updating a parent effect can cause a dependency to appear
  // to be unused, when in fact it is used by the currently-updating parent. Checking `new_deps`
  // allows us to skip the expensive work of disconnecting and immediately reconnecting it
  (new_deps === null || !new_deps.includes(dependency))) {
    set_signal_status(dependency, MAYBE_DIRTY);
    if ((dependency.f & (UNOWNED | DISCONNECTED)) === 0) {
      dependency.f ^= DISCONNECTED;
    }
    remove_reactions(
      /** @type {Derived} **/
      dependency,
      0
    );
  }
}
function remove_reactions(signal, start_index) {
  var dependencies = signal.deps;
  if (dependencies === null) return;
  for (var i = start_index; i < dependencies.length; i++) {
    remove_reaction(signal, dependencies[i]);
  }
}
function update_effect(effect2) {
  var flags = effect2.f;
  if ((flags & DESTROYED) !== 0) {
    return;
  }
  set_signal_status(effect2, CLEAN);
  var previous_effect = active_effect;
  var previous_component_context = component_context;
  active_effect = effect2;
  if (dev_fallback_default) {
    var previous_component_fn = dev_current_component_function;
    dev_current_component_function = effect2.component_function;
  }
  try {
    if ((flags & BLOCK_EFFECT) !== 0) {
      destroy_block_effect_children(effect2);
    } else {
      destroy_effect_children(effect2);
    }
    destroy_effect_deriveds(effect2);
    execute_effect_teardown(effect2);
    var teardown2 = update_reaction(effect2);
    effect2.teardown = typeof teardown2 === "function" ? teardown2 : null;
    effect2.version = current_version;
    if (dev_fallback_default) {
      dev_effect_stack.push(effect2);
    }
  } catch (error) {
    handle_error(error, effect2, previous_effect, previous_component_context || effect2.ctx);
  } finally {
    active_effect = previous_effect;
    if (dev_fallback_default) {
      dev_current_component_function = previous_component_fn;
    }
  }
}
function log_effect_stack() {
  console.error(
    "Last ten effects were: ",
    dev_effect_stack.slice(-10).map((d) => d.fn)
  );
  dev_effect_stack = [];
}
function infinite_loop_guard() {
  if (flush_count > 1e3) {
    flush_count = 0;
    try {
      effect_update_depth_exceeded();
    } catch (error) {
      if (dev_fallback_default) {
        define_property(error, "stack", {
          value: ""
        });
      }
      if (last_scheduled_effect !== null) {
        if (dev_fallback_default) {
          try {
            handle_error(error, last_scheduled_effect, null, null);
          } catch (e) {
            log_effect_stack();
            throw e;
          }
        } else {
          handle_error(error, last_scheduled_effect, null, null);
        }
      } else {
        if (dev_fallback_default) {
          log_effect_stack();
        }
        throw error;
      }
    }
  }
  flush_count++;
}
function flush_queued_root_effects(root_effects) {
  var length = root_effects.length;
  if (length === 0) {
    return;
  }
  infinite_loop_guard();
  var previously_flushing_effect = is_flushing_effect;
  is_flushing_effect = true;
  try {
    for (var i = 0; i < length; i++) {
      var effect2 = root_effects[i];
      if ((effect2.f & CLEAN) === 0) {
        effect2.f ^= CLEAN;
      }
      var collected_effects = [];
      process_effects(effect2, collected_effects);
      flush_queued_effects(collected_effects);
    }
  } finally {
    is_flushing_effect = previously_flushing_effect;
  }
}
function flush_queued_effects(effects) {
  var length = effects.length;
  if (length === 0) return;
  for (var i = 0; i < length; i++) {
    var effect2 = effects[i];
    if ((effect2.f & (DESTROYED | INERT)) === 0) {
      try {
        if (check_dirtiness(effect2)) {
          update_effect(effect2);
          if (effect2.deps === null && effect2.first === null && effect2.nodes_start === null) {
            if (effect2.teardown === null) {
              unlink_effect(effect2);
            } else {
              effect2.fn = null;
            }
          }
        }
      } catch (error) {
        handle_error(error, effect2, null, effect2.ctx);
      }
    }
  }
}
function process_deferred() {
  is_micro_task_queued2 = false;
  if (flush_count > 1001) {
    return;
  }
  const previous_queued_root_effects = queued_root_effects;
  queued_root_effects = [];
  flush_queued_root_effects(previous_queued_root_effects);
  if (!is_micro_task_queued2) {
    flush_count = 0;
    last_scheduled_effect = null;
    if (dev_fallback_default) {
      dev_effect_stack = [];
    }
  }
}
function schedule_effect(signal) {
  if (scheduler_mode === FLUSH_MICROTASK) {
    if (!is_micro_task_queued2) {
      is_micro_task_queued2 = true;
      queueMicrotask(process_deferred);
    }
  }
  last_scheduled_effect = signal;
  var effect2 = signal;
  while (effect2.parent !== null) {
    effect2 = effect2.parent;
    var flags = effect2.f;
    if ((flags & (ROOT_EFFECT | BRANCH_EFFECT)) !== 0) {
      if ((flags & CLEAN) === 0) return;
      effect2.f ^= CLEAN;
    }
  }
  queued_root_effects.push(effect2);
}
function process_effects(effect2, collected_effects) {
  var current_effect = effect2.first;
  var effects = [];
  main_loop: while (current_effect !== null) {
    var flags = current_effect.f;
    var is_branch = (flags & BRANCH_EFFECT) !== 0;
    var is_skippable_branch = is_branch && (flags & CLEAN) !== 0;
    var sibling2 = current_effect.next;
    if (!is_skippable_branch && (flags & INERT) === 0) {
      if ((flags & RENDER_EFFECT) !== 0) {
        if (is_branch) {
          current_effect.f ^= CLEAN;
        } else {
          try {
            if (check_dirtiness(current_effect)) {
              update_effect(current_effect);
            }
          } catch (error) {
            handle_error(error, current_effect, null, current_effect.ctx);
          }
        }
        var child2 = current_effect.first;
        if (child2 !== null) {
          current_effect = child2;
          continue;
        }
      } else if ((flags & EFFECT) !== 0) {
        effects.push(current_effect);
      }
    }
    if (sibling2 === null) {
      let parent = current_effect.parent;
      while (parent !== null) {
        if (effect2 === parent) {
          break main_loop;
        }
        var parent_sibling = parent.next;
        if (parent_sibling !== null) {
          current_effect = parent_sibling;
          continue main_loop;
        }
        parent = parent.parent;
      }
    }
    current_effect = sibling2;
  }
  for (var i = 0; i < effects.length; i++) {
    child2 = effects[i];
    collected_effects.push(child2);
    process_effects(child2, collected_effects);
  }
}
function flush_sync(fn) {
  var previous_scheduler_mode = scheduler_mode;
  var previous_queued_root_effects = queued_root_effects;
  try {
    infinite_loop_guard();
    const root_effects = [];
    scheduler_mode = FLUSH_SYNC;
    queued_root_effects = root_effects;
    is_micro_task_queued2 = false;
    flush_queued_root_effects(previous_queued_root_effects);
    var result = fn == null ? void 0 : fn();
    flush_tasks();
    if (queued_root_effects.length > 0 || root_effects.length > 0) {
      flush_sync();
    }
    flush_count = 0;
    last_scheduled_effect = null;
    if (dev_fallback_default) {
      dev_effect_stack = [];
    }
    return result;
  } finally {
    scheduler_mode = previous_scheduler_mode;
    queued_root_effects = previous_queued_root_effects;
  }
}
function get(signal) {
  var _a2, _b2;
  var flags = signal.f;
  var is_derived = (flags & DERIVED) !== 0;
  if (is_derived && (flags & DESTROYED) !== 0) {
    var value = execute_derived(
      /** @type {Derived} */
      signal
    );
    destroy_derived(
      /** @type {Derived} */
      signal
    );
    return value;
  }
  if (captured_signals !== null) {
    captured_signals.add(signal);
  }
  if (active_reaction !== null) {
    if (derived_sources !== null && derived_sources.includes(signal)) {
      state_unsafe_local_read();
    }
    var deps = active_reaction.deps;
    if (new_deps === null && deps !== null && deps[skipped_deps] === signal) {
      skipped_deps++;
    } else if (new_deps === null) {
      new_deps = [signal];
    } else {
      new_deps.push(signal);
    }
    if (untracked_writes !== null && active_effect !== null && (active_effect.f & CLEAN) !== 0 && (active_effect.f & BRANCH_EFFECT) === 0 && untracked_writes.includes(signal)) {
      set_signal_status(active_effect, DIRTY);
      schedule_effect(active_effect);
    }
  } else if (is_derived && /** @type {Derived} */
  signal.deps === null) {
    var derived2 = (
      /** @type {Derived} */
      signal
    );
    var parent = derived2.parent;
    var target = derived2;
    while (parent !== null) {
      if ((parent.f & DERIVED) !== 0) {
        var parent_derived = (
          /** @type {Derived} */
          parent
        );
        target = parent_derived;
        parent = parent_derived.parent;
      } else {
        var parent_effect = (
          /** @type {Effect} */
          parent
        );
        if (!((_a2 = parent_effect.deriveds) == null ? void 0 : _a2.includes(target))) {
          ((_b2 = parent_effect.deriveds) != null ? _b2 : parent_effect.deriveds = []).push(target);
        }
        break;
      }
    }
  }
  if (is_derived) {
    derived2 = /** @type {Derived} */
    signal;
    if (check_dirtiness(derived2)) {
      update_derived(derived2);
    }
  }
  if (dev_fallback_default && tracing_mode_flag && tracing_expressions !== null && active_reaction !== null && tracing_expressions.reaction === active_reaction) {
    if (signal.debug) {
      signal.debug();
    } else if (signal.created) {
      var entry = tracing_expressions.entries.get(signal);
      if (entry === void 0) {
        entry = { read: [] };
        tracing_expressions.entries.set(signal, entry);
      }
      entry.read.push(get_stack("TracedAt"));
    }
  }
  return signal.v;
}
function untrack(fn) {
  const previous_reaction = active_reaction;
  try {
    active_reaction = null;
    return fn();
  } finally {
    active_reaction = previous_reaction;
  }
}
var STATUS_MASK = ~(DIRTY | MAYBE_DIRTY | CLEAN);
function set_signal_status(signal, status) {
  signal.f = signal.f & STATUS_MASK | status;
}
function push(props, runes = false, fn) {
  component_context = {
    p: component_context,
    c: null,
    e: null,
    m: false,
    s: props,
    x: null,
    l: null
  };
  if (legacy_mode_flag && !runes) {
    component_context.l = {
      s: null,
      u: null,
      r1: [],
      r2: source(false)
    };
  }
  if (dev_fallback_default) {
    component_context.function = fn;
    dev_current_component_function = fn;
  }
}
function pop(component2) {
  var _a2, _b2;
  const context_stack_item = component_context;
  if (context_stack_item !== null) {
    if (component2 !== void 0) {
      context_stack_item.x = component2;
    }
    const component_effects = context_stack_item.e;
    if (component_effects !== null) {
      var previous_effect = active_effect;
      var previous_reaction = active_reaction;
      context_stack_item.e = null;
      try {
        for (var i = 0; i < component_effects.length; i++) {
          var component_effect = component_effects[i];
          set_active_effect(component_effect.effect);
          set_active_reaction(component_effect.reaction);
          effect(component_effect.fn);
        }
      } finally {
        set_active_effect(previous_effect);
        set_active_reaction(previous_reaction);
      }
    }
    component_context = context_stack_item.p;
    if (dev_fallback_default) {
      dev_current_component_function = (_b2 = (_a2 = context_stack_item.p) == null ? void 0 : _a2.function) != null ? _b2 : null;
    }
    context_stack_item.m = true;
  }
  return component2 || /** @type {T} */
  {};
}
if (dev_fallback_default) {
  let throw_rune_error = function(rune) {
    if (!(rune in globalThis)) {
      let value;
      Object.defineProperty(globalThis, rune, {
        configurable: true,
        // eslint-disable-next-line getter-return
        get: () => {
          if (value !== void 0) {
            return value;
          }
          rune_outside_svelte(rune);
        },
        set: (v) => {
          value = v;
        }
      });
    }
  };
  throw_rune_error("$state");
  throw_rune_error("$effect");
  throw_rune_error("$derived");
  throw_rune_error("$inspect");
  throw_rune_error("$props");
  throw_rune_error("$bindable");
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dev/css.js
var all_styles = /* @__PURE__ */ new Map();
function register_style(hash2, style) {
  var styles = all_styles.get(hash2);
  if (!styles) {
    styles = /* @__PURE__ */ new Set();
    all_styles.set(hash2, styles);
  }
  styles.add(style);
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dom/elements/events.js
var all_registered_events = /* @__PURE__ */ new Set();
var root_event_handles = /* @__PURE__ */ new Set();
function handle_event_propagation(event2) {
  var _a2;
  var handler_element = this;
  var owner_document = (
    /** @type {Node} */
    handler_element.ownerDocument
  );
  var event_name = event2.type;
  var path = ((_a2 = event2.composedPath) == null ? void 0 : _a2.call(event2)) || [];
  var current_target = (
    /** @type {null | Element} */
    path[0] || event2.target
  );
  var path_idx = 0;
  var handled_at = event2.__root;
  if (handled_at) {
    var at_idx = path.indexOf(handled_at);
    if (at_idx !== -1 && (handler_element === document || handler_element === /** @type {any} */
    window)) {
      event2.__root = handler_element;
      return;
    }
    var handler_idx = path.indexOf(handler_element);
    if (handler_idx === -1) {
      return;
    }
    if (at_idx <= handler_idx) {
      path_idx = at_idx;
    }
  }
  current_target = /** @type {Element} */
  path[path_idx] || event2.target;
  if (current_target === handler_element) return;
  define_property(event2, "currentTarget", {
    configurable: true,
    get() {
      return current_target || owner_document;
    }
  });
  var previous_reaction = active_reaction;
  var previous_effect = active_effect;
  set_active_reaction(null);
  set_active_effect(null);
  try {
    var throw_error;
    var other_errors = [];
    while (current_target !== null) {
      var parent_element = current_target.assignedSlot || current_target.parentNode || /** @type {any} */
      current_target.host || null;
      try {
        var delegated = current_target["__" + event_name];
        if (delegated !== void 0 && !/** @type {any} */
        current_target.disabled) {
          if (is_array(delegated)) {
            var [fn, ...data] = delegated;
            fn.apply(current_target, [event2, ...data]);
          } else {
            delegated.call(current_target, event2);
          }
        }
      } catch (error) {
        if (throw_error) {
          other_errors.push(error);
        } else {
          throw_error = error;
        }
      }
      if (event2.cancelBubble || parent_element === handler_element || parent_element === null) {
        break;
      }
      current_target = parent_element;
    }
    if (throw_error) {
      for (let error of other_errors) {
        queueMicrotask(() => {
          throw error;
        });
      }
      throw throw_error;
    }
  } finally {
    event2.__root = handler_element;
    delete event2.currentTarget;
    set_active_reaction(previous_reaction);
    set_active_effect(previous_effect);
  }
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dom/blocks/svelte-head.js
var head_anchor;
function reset_head_anchor() {
  head_anchor = void 0;
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dom/reconciler.js
function create_fragment_from_html(html2) {
  var elem = document.createElement("template");
  elem.innerHTML = html2;
  return elem.content;
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dom/template.js
function assign_nodes(start, end) {
  var effect2 = (
    /** @type {Effect} */
    active_effect
  );
  if (effect2.nodes_start === null) {
    effect2.nodes_start = start;
    effect2.nodes_end = end;
  }
}
// @__NO_SIDE_EFFECTS__
function template(content, flags) {
  var is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;
  var use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;
  var node;
  var has_start = !content.startsWith("<!>");
  return () => {
    if (hydrating) {
      assign_nodes(hydrate_node, null);
      return hydrate_node;
    }
    if (node === void 0) {
      node = create_fragment_from_html(has_start ? content : "<!>" + content);
      if (!is_fragment) node = /** @type {Node} */
      get_first_child(node);
    }
    var clone = (
      /** @type {TemplateNode} */
      use_import_node ? document.importNode(node, true) : node.cloneNode(true)
    );
    if (is_fragment) {
      var start = (
        /** @type {TemplateNode} */
        get_first_child(clone)
      );
      var end = (
        /** @type {TemplateNode} */
        clone.lastChild
      );
      assign_nodes(start, end);
    } else {
      assign_nodes(clone, clone);
    }
    return clone;
  };
}
function append(anchor, dom) {
  if (hydrating) {
    active_effect.nodes_end = hydrate_node;
    hydrate_next();
    return;
  }
  if (anchor === null) {
    return;
  }
  anchor.before(
    /** @type {Node} */
    dom
  );
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/render.js
var should_intro = true;
function set_text(text2, value) {
  var _a2;
  var str = value == null ? "" : typeof value === "object" ? value + "" : value;
  if (str !== ((_a2 = text2.__t) != null ? _a2 : text2.__t = text2.nodeValue)) {
    text2.__t = str;
    text2.nodeValue = str == null ? "" : str + "";
  }
}
function mount(component2, options) {
  return _mount(component2, options);
}
function hydrate(component2, options) {
  var _a2;
  init_operations();
  options.intro = (_a2 = options.intro) != null ? _a2 : false;
  const target = options.target;
  const was_hydrating = hydrating;
  const previous_hydrate_node = hydrate_node;
  try {
    var anchor = (
      /** @type {TemplateNode} */
      get_first_child(target)
    );
    while (anchor && (anchor.nodeType !== 8 || /** @type {Comment} */
    anchor.data !== HYDRATION_START)) {
      anchor = /** @type {TemplateNode} */
      get_next_sibling(anchor);
    }
    if (!anchor) {
      throw HYDRATION_ERROR;
    }
    set_hydrating(true);
    set_hydrate_node(
      /** @type {Comment} */
      anchor
    );
    hydrate_next();
    const instance = _mount(component2, { ...options, anchor });
    if (hydrate_node === null || hydrate_node.nodeType !== 8 || /** @type {Comment} */
    hydrate_node.data !== HYDRATION_END) {
      hydration_mismatch();
      throw HYDRATION_ERROR;
    }
    set_hydrating(false);
    return (
      /**  @type {Exports} */
      instance
    );
  } catch (error) {
    if (error === HYDRATION_ERROR) {
      if (options.recover === false) {
        hydration_failed();
      }
      init_operations();
      clear_text_content(target);
      set_hydrating(false);
      return mount(component2, options);
    }
    throw error;
  } finally {
    set_hydrating(was_hydrating);
    set_hydrate_node(previous_hydrate_node);
    reset_head_anchor();
  }
}
var document_listeners = /* @__PURE__ */ new Map();
function _mount(Component2, { target, anchor, props = {}, events, context, intro = true }) {
  init_operations();
  var registered_events = /* @__PURE__ */ new Set();
  var event_handle = (events2) => {
    for (var i = 0; i < events2.length; i++) {
      var event_name = events2[i];
      if (registered_events.has(event_name)) continue;
      registered_events.add(event_name);
      var passive2 = is_passive_event(event_name);
      target.addEventListener(event_name, handle_event_propagation, { passive: passive2 });
      var n = document_listeners.get(event_name);
      if (n === void 0) {
        document.addEventListener(event_name, handle_event_propagation, { passive: passive2 });
        document_listeners.set(event_name, 1);
      } else {
        document_listeners.set(event_name, n + 1);
      }
    }
  };
  event_handle(array_from(all_registered_events));
  root_event_handles.add(event_handle);
  var component2 = void 0;
  var unmount2 = component_root(() => {
    var anchor_node = anchor != null ? anchor : target.appendChild(create_text());
    branch(() => {
      if (context) {
        push({});
        var ctx = (
          /** @type {ComponentContext} */
          component_context
        );
        ctx.c = context;
      }
      if (events) {
        props.$$events = events;
      }
      if (hydrating) {
        assign_nodes(
          /** @type {TemplateNode} */
          anchor_node,
          null
        );
      }
      should_intro = intro;
      component2 = Component2(anchor_node, props) || {};
      should_intro = true;
      if (hydrating) {
        active_effect.nodes_end = hydrate_node;
      }
      if (context) {
        pop();
      }
    });
    return () => {
      var _a2;
      for (var event_name of registered_events) {
        target.removeEventListener(event_name, handle_event_propagation);
        var n = (
          /** @type {number} */
          document_listeners.get(event_name)
        );
        if (--n === 0) {
          document.removeEventListener(event_name, handle_event_propagation);
          document_listeners.delete(event_name);
        } else {
          document_listeners.set(event_name, n);
        }
      }
      root_event_handles.delete(event_handle);
      if (anchor_node !== anchor) {
        (_a2 = anchor_node.parentNode) == null ? void 0 : _a2.removeChild(anchor_node);
      }
    };
  });
  mounted_components.set(component2, unmount2);
  return component2;
}
var mounted_components = /* @__PURE__ */ new WeakMap();
function unmount(component2, options) {
  const fn = mounted_components.get(component2);
  if (fn) {
    mounted_components.delete(component2);
    return fn(options);
  }
  if (dev_fallback_default) {
    lifecycle_double_unmount();
  }
  return Promise.resolve();
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dom/css.js
function append_styles(anchor, css) {
  queue_micro_task(() => {
    var _a2;
    var root2 = anchor.getRootNode();
    var target = (
      /** @type {ShadowRoot} */
      root2.host ? (
        /** @type {ShadowRoot} */
        root2
      ) : (
        /** @type {Document} */
        (_a2 = root2.head) != null ? _a2 : (
          /** @type {Document} */
          root2.ownerDocument.head
        )
      )
    );
    if (!target.querySelector("#" + css.hash)) {
      const style = document.createElement("style");
      style.id = css.hash;
      style.textContent = css.code;
      target.appendChild(style);
      if (dev_fallback_default) {
        register_style(css.hash, style);
      }
    }
  });
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/reactivity/store.js
var is_store_binding = false;
function capture_store_binding(fn) {
  var previous_is_store_binding = is_store_binding;
  try {
    is_store_binding = false;
    return [fn(), is_store_binding];
  } finally {
    is_store_binding = previous_is_store_binding;
  }
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/reactivity/props.js
function with_parent_branch(fn) {
  var effect2 = active_effect;
  var previous_effect = active_effect;
  while (effect2 !== null && (effect2.f & (BRANCH_EFFECT | ROOT_EFFECT)) === 0) {
    effect2 = effect2.parent;
  }
  try {
    set_active_effect(effect2);
    return fn();
  } finally {
    set_active_effect(previous_effect);
  }
}
function prop(props, key, flags, fallback2) {
  var _a2, _b2;
  var immutable = (flags & PROPS_IS_IMMUTABLE) !== 0;
  var runes = !legacy_mode_flag || (flags & PROPS_IS_RUNES) !== 0;
  var bindable = (flags & PROPS_IS_BINDABLE) !== 0;
  var lazy = (flags & PROPS_IS_LAZY_INITIAL) !== 0;
  var is_store_sub = false;
  var prop_value;
  if (bindable) {
    [prop_value, is_store_sub] = capture_store_binding(() => (
      /** @type {V} */
      props[key]
    ));
  } else {
    prop_value = /** @type {V} */
    props[key];
  }
  var is_entry_props = STATE_SYMBOL in props || LEGACY_PROPS in props;
  var setter = (_b2 = (_a2 = get_descriptor(props, key)) == null ? void 0 : _a2.set) != null ? _b2 : is_entry_props && bindable && key in props ? (v) => props[key] = v : void 0;
  var fallback_value = (
    /** @type {V} */
    fallback2
  );
  var fallback_dirty = true;
  var fallback_used = false;
  var get_fallback = () => {
    fallback_used = true;
    if (fallback_dirty) {
      fallback_dirty = false;
      if (lazy) {
        fallback_value = untrack(
          /** @type {() => V} */
          fallback2
        );
      } else {
        fallback_value = /** @type {V} */
        fallback2;
      }
    }
    return fallback_value;
  };
  if (prop_value === void 0 && fallback2 !== void 0) {
    if (setter && runes) {
      props_invalid_value(key);
    }
    prop_value = get_fallback();
    if (setter) setter(prop_value);
  }
  var getter;
  if (runes) {
    getter = () => {
      var value = (
        /** @type {V} */
        props[key]
      );
      if (value === void 0) return get_fallback();
      fallback_dirty = true;
      fallback_used = false;
      return value;
    };
  } else {
    var derived_getter = with_parent_branch(
      () => (immutable ? derived : derived_safe_equal)(() => (
        /** @type {V} */
        props[key]
      ))
    );
    derived_getter.f |= LEGACY_DERIVED_PROP;
    getter = () => {
      var value = get(derived_getter);
      if (value !== void 0) fallback_value = /** @type {V} */
      void 0;
      return value === void 0 ? fallback_value : value;
    };
  }
  if ((flags & PROPS_IS_UPDATED) === 0) {
    return getter;
  }
  if (setter) {
    var legacy_parent = props.$$legacy;
    return function(value, mutation) {
      if (arguments.length > 0) {
        if (!runes || !mutation || legacy_parent || is_store_sub) {
          setter(mutation ? getter() : value);
        }
        return value;
      } else {
        return getter();
      }
    };
  }
  var from_child = false;
  var was_from_child = false;
  var inner_current_value = mutable_source(prop_value);
  var current_value = with_parent_branch(
    () => derived(() => {
      var parent_value = getter();
      var child_value = get(inner_current_value);
      if (from_child) {
        from_child = false;
        was_from_child = true;
        return child_value;
      }
      was_from_child = false;
      return inner_current_value.v = parent_value;
    })
  );
  if (!immutable) current_value.equals = safe_equals;
  return function(value, mutation) {
    if (captured_signals !== null) {
      from_child = was_from_child;
      getter();
      get(inner_current_value);
    }
    if (arguments.length > 0) {
      const new_value = mutation ? get(current_value) : runes && bindable ? proxy(value) : value;
      if (!current_value.equals(new_value)) {
        from_child = true;
        set(inner_current_value, new_value);
        if (fallback_used && fallback_value !== void 0) {
          fallback_value = new_value;
        }
        untrack(() => get(current_value));
      }
      return value;
    }
    return get(current_value);
  };
}

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/legacy/legacy-client.js
function createClassComponent(options) {
  return new Svelte4Component(options);
}
var _events, _instance;
var Svelte4Component = class {
  /**
   * @param {ComponentConstructorOptions & {
   *  component: any;
   * }} options
   */
  constructor(options) {
    /** @type {any} */
    __privateAdd(this, _events);
    /** @type {Record<string, any>} */
    __privateAdd(this, _instance);
    var _a2, _b2;
    var sources = /* @__PURE__ */ new Map();
    var add_source = (key, value) => {
      var s = mutable_source(value);
      sources.set(key, s);
      return s;
    };
    const props = new Proxy(
      { ...options.props || {}, $$events: {} },
      {
        get(target, prop2) {
          var _a3;
          return get((_a3 = sources.get(prop2)) != null ? _a3 : add_source(prop2, Reflect.get(target, prop2)));
        },
        has(target, prop2) {
          var _a3;
          if (prop2 === LEGACY_PROPS) return true;
          get((_a3 = sources.get(prop2)) != null ? _a3 : add_source(prop2, Reflect.get(target, prop2)));
          return Reflect.has(target, prop2);
        },
        set(target, prop2, value) {
          var _a3;
          set((_a3 = sources.get(prop2)) != null ? _a3 : add_source(prop2, value), value);
          return Reflect.set(target, prop2, value);
        }
      }
    );
    __privateSet(this, _instance, (options.hydrate ? hydrate : mount)(options.component, {
      target: options.target,
      anchor: options.anchor,
      props,
      context: options.context,
      intro: (_a2 = options.intro) != null ? _a2 : false,
      recover: options.recover
    }));
    if (!((_b2 = options == null ? void 0 : options.props) == null ? void 0 : _b2.$$host) || options.sync === false) {
      flush_sync();
    }
    __privateSet(this, _events, props.$$events);
    for (const key of Object.keys(__privateGet(this, _instance))) {
      if (key === "$set" || key === "$destroy" || key === "$on") continue;
      define_property(this, key, {
        get() {
          return __privateGet(this, _instance)[key];
        },
        /** @param {any} value */
        set(value) {
          __privateGet(this, _instance)[key] = value;
        },
        enumerable: true
      });
    }
    __privateGet(this, _instance).$set = /** @param {Record<string, any>} next */
    (next2) => {
      Object.assign(props, next2);
    };
    __privateGet(this, _instance).$destroy = () => {
      unmount(__privateGet(this, _instance));
    };
  }
  /** @param {Record<string, any>} props */
  $set(props) {
    __privateGet(this, _instance).$set(props);
  }
  /**
   * @param {string} event
   * @param {(...args: any[]) => any} callback
   * @returns {any}
   */
  $on(event2, callback) {
    __privateGet(this, _events)[event2] = __privateGet(this, _events)[event2] || [];
    const cb = (...args) => callback.call(this, ...args);
    __privateGet(this, _events)[event2].push(cb);
    return () => {
      __privateGet(this, _events)[event2] = __privateGet(this, _events)[event2].filter(
        /** @param {any} fn */
        (fn) => fn !== cb
      );
    };
  }
  $destroy() {
    __privateGet(this, _instance).$destroy();
  }
};
_events = new WeakMap();
_instance = new WeakMap();

// node_modules/.pnpm/svelte@5.15.0/node_modules/svelte/src/internal/client/dom/elements/custom-element.js
var SvelteElement;
if (typeof HTMLElement === "function") {
  SvelteElement = class extends HTMLElement {
    /**
     * @param {*} $$componentCtor
     * @param {*} $$slots
     * @param {*} use_shadow_dom
     */
    constructor($$componentCtor, $$slots, use_shadow_dom) {
      super();
      /** The Svelte component constructor */
      __publicField(this, "$$ctor");
      /** Slots */
      __publicField(this, "$$s");
      /** @type {any} The Svelte component instance */
      __publicField(this, "$$c");
      /** Whether or not the custom element is connected */
      __publicField(this, "$$cn", false);
      /** @type {Record<string, any>} Component props data */
      __publicField(this, "$$d", {});
      /** `true` if currently in the process of reflecting component props back to attributes */
      __publicField(this, "$$r", false);
      /** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */
      __publicField(this, "$$p_d", {});
      /** @type {Record<string, EventListenerOrEventListenerObject[]>} Event listeners */
      __publicField(this, "$$l", {});
      /** @type {Map<EventListenerOrEventListenerObject, Function>} Event listener unsubscribe functions */
      __publicField(this, "$$l_u", /* @__PURE__ */ new Map());
      /** @type {any} The managed render effect for reflecting attributes */
      __publicField(this, "$$me");
      this.$$ctor = $$componentCtor;
      this.$$s = $$slots;
      if (use_shadow_dom) {
        this.attachShadow({ mode: "open" });
      }
    }
    /**
     * @param {string} type
     * @param {EventListenerOrEventListenerObject} listener
     * @param {boolean | AddEventListenerOptions} [options]
     */
    addEventListener(type, listener, options) {
      this.$$l[type] = this.$$l[type] || [];
      this.$$l[type].push(listener);
      if (this.$$c) {
        const unsub = this.$$c.$on(type, listener);
        this.$$l_u.set(listener, unsub);
      }
      super.addEventListener(type, listener, options);
    }
    /**
     * @param {string} type
     * @param {EventListenerOrEventListenerObject} listener
     * @param {boolean | AddEventListenerOptions} [options]
     */
    removeEventListener(type, listener, options) {
      super.removeEventListener(type, listener, options);
      if (this.$$c) {
        const unsub = this.$$l_u.get(listener);
        if (unsub) {
          unsub();
          this.$$l_u.delete(listener);
        }
      }
    }
    async connectedCallback() {
      this.$$cn = true;
      if (!this.$$c) {
        let create_slot = function(name) {
          return (anchor) => {
            const slot2 = document.createElement("slot");
            if (name !== "default") slot2.name = name;
            append(anchor, slot2);
          };
        };
        await Promise.resolve();
        if (!this.$$cn || this.$$c) {
          return;
        }
        const $$slots = {};
        const existing_slots = get_custom_elements_slots(this);
        for (const name of this.$$s) {
          if (name in existing_slots) {
            if (name === "default" && !this.$$d.children) {
              this.$$d.children = create_slot(name);
              $$slots.default = true;
            } else {
              $$slots[name] = create_slot(name);
            }
          }
        }
        for (const attribute of this.attributes) {
          const name = this.$$g_p(attribute.name);
          if (!(name in this.$$d)) {
            this.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, "toProp");
          }
        }
        for (const key in this.$$p_d) {
          if (!(key in this.$$d) && this[key] !== void 0) {
            this.$$d[key] = this[key];
            delete this[key];
          }
        }
        this.$$c = createClassComponent({
          component: this.$$ctor,
          target: this.shadowRoot || this,
          props: {
            ...this.$$d,
            $$slots,
            $$host: this
          }
        });
        this.$$me = effect_root(() => {
          render_effect(() => {
            var _a2;
            this.$$r = true;
            for (const key of object_keys(this.$$c)) {
              if (!((_a2 = this.$$p_d[key]) == null ? void 0 : _a2.reflect)) continue;
              this.$$d[key] = this.$$c[key];
              const attribute_value = get_custom_element_value(
                key,
                this.$$d[key],
                this.$$p_d,
                "toAttribute"
              );
              if (attribute_value == null) {
                this.removeAttribute(this.$$p_d[key].attribute || key);
              } else {
                this.setAttribute(this.$$p_d[key].attribute || key, attribute_value);
              }
            }
            this.$$r = false;
          });
        });
        for (const type in this.$$l) {
          for (const listener of this.$$l[type]) {
            const unsub = this.$$c.$on(type, listener);
            this.$$l_u.set(listener, unsub);
          }
        }
        this.$$l = {};
      }
    }
    // We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte
    // and setting attributes through setAttribute etc, this is helpful
    /**
     * @param {string} attr
     * @param {string} _oldValue
     * @param {string} newValue
     */
    attributeChangedCallback(attr2, _oldValue, newValue) {
      var _a2;
      if (this.$$r) return;
      attr2 = this.$$g_p(attr2);
      this.$$d[attr2] = get_custom_element_value(attr2, newValue, this.$$p_d, "toProp");
      (_a2 = this.$$c) == null ? void 0 : _a2.$set({ [attr2]: this.$$d[attr2] });
    }
    disconnectedCallback() {
      this.$$cn = false;
      Promise.resolve().then(() => {
        if (!this.$$cn && this.$$c) {
          this.$$c.$destroy();
          this.$$me();
          this.$$c = void 0;
        }
      });
    }
    /**
     * @param {string} attribute_name
     */
    $$g_p(attribute_name) {
      return object_keys(this.$$p_d).find(
        (key) => this.$$p_d[key].attribute === attribute_name || !this.$$p_d[key].attribute && key.toLowerCase() === attribute_name
      ) || attribute_name;
    }
  };
}
function get_custom_element_value(prop2, value, props_definition, transform) {
  var _a2;
  const type = (_a2 = props_definition[prop2]) == null ? void 0 : _a2.type;
  value = type === "Boolean" && typeof value !== "boolean" ? value != null : value;
  if (!transform || !props_definition[prop2]) {
    return value;
  } else if (transform === "toAttribute") {
    switch (type) {
      case "Object":
      case "Array":
        return value == null ? null : JSON.stringify(value);
      case "Boolean":
        return value ? "" : null;
      case "Number":
        return value == null ? null : value;
      default:
        return value;
    }
  } else {
    switch (type) {
      case "Object":
      case "Array":
        return value && JSON.parse(value);
      case "Boolean":
        return value;
      // conversion already handled above
      case "Number":
        return value != null ? +value : value;
      default:
        return value;
    }
  }
}
function get_custom_elements_slots(element2) {
  const result = {};
  element2.childNodes.forEach((node) => {
    result[
      /** @type {Element} node */
      node.slot || "default"
    ] = true;
  });
  return result;
}

// src/Component.svelte
var root = template(`<div class="number svelte-r72pq7"><span> </span></div>`);
var $$css = {
  hash: "svelte-r72pq7",
  code: ".number.svelte-r72pq7 {color:red;}"
};
function Component($$anchor, $$props) {
  append_styles($$anchor, $$css);
  let variable = prop($$props, "variable", 8);
  var div = root();
  var span = child(div);
  var text2 = child(span);
  reset(span);
  reset(div);
  template_effect(() => {
    var _a2;
    return set_text(text2, `My number is ${(_a2 = variable()) != null ? _a2 : ""}!`);
  });
  append($$anchor, div);
}

// src/ExampleView.ts
var VIEW_TYPE_EXAMPLE = "example-view";
var ExampleView = class extends import_obsidian.ItemView {
  constructor(leaf) {
    super(leaf);
  }
  getViewType() {
    return VIEW_TYPE_EXAMPLE;
  }
  getDisplayText() {
    return "Example view";
  }
  async onOpen() {
    this.component = new Component({
      target: this.contentEl,
      props: {
        variable: 1
      }
    });
  }
  async onClose() {
    var _a2;
    (_a2 = this.component) == null ? void 0 : _a2.$destroy();
  }
};

// src/index.ts
var ResearchQuest = class extends import_obsidian2.Plugin {
  async onload() {
    console.log("loading plugin");
    this.registerView(VIEW_TYPE_EXAMPLE, (leaf) => new ExampleView(leaf));
    this.addRibbonIcon("sparkles", "Activate view", () => {
      this.activateView();
    });
  }
  async onunload() {
    console.log("unloading plugin");
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_EXAMPLE);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      await (leaf == null ? void 0 : leaf.setViewState({ type: VIEW_TYPE_EXAMPLE, active: true }));
    }
    if (leaf) workspace.revealLeaf(leaf);
  }
};

// main.ts
var main_default = ResearchQuest;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvaW5kZXgudHMiLCAic3JjL0V4YW1wbGVWaWV3LnRzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9zdmVsdGVANS4xNS4wL25vZGVfbW9kdWxlcy9zdmVsdGUvc3JjL3ZlcnNpb24uanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvaW50ZXJuYWwvZGlzY2xvc2UtdmVyc2lvbi5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9mbGFncy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9mbGFncy9sZWdhY3kuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvY29uc3RhbnRzLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9zdmVsdGVANS4xNS4wL25vZGVfbW9kdWxlcy9zdmVsdGUvc3JjL3V0aWxzLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9lc20tZW52QDEuMi4xL25vZGVfbW9kdWxlcy9lc20tZW52L2Rldi1mYWxsYmFjay5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9zaGFyZWQvdXRpbHMuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvaW50ZXJuYWwvY2xpZW50L2NvbnN0YW50cy5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvcmVhY3Rpdml0eS9lcXVhbGl0eS5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvZXJyb3JzLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9zdmVsdGVANS4xNS4wL25vZGVfbW9kdWxlcy9zdmVsdGUvc3JjL2ludGVybmFsL2NsaWVudC9kZXYvdHJhY2luZy5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvcmVhY3Rpdml0eS9zb3VyY2VzLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9zdmVsdGVANS4xNS4wL25vZGVfbW9kdWxlcy9zdmVsdGUvc3JjL2ludGVybmFsL2NsaWVudC93YXJuaW5ncy5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvZG9tL2h5ZHJhdGlvbi5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvZGV2L293bmVyc2hpcC5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvcHJveHkuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvaW50ZXJuYWwvY2xpZW50L2Rldi9lcXVhbGl0eS5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvZG9tL29wZXJhdGlvbnMuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvaW50ZXJuYWwvY2xpZW50L3JlYWN0aXZpdHkvZGVyaXZlZHMuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvaW50ZXJuYWwvY2xpZW50L3JlYWN0aXZpdHkvZWZmZWN0cy5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvZG9tL3Rhc2suanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvaW50ZXJuYWwvY2xpZW50L3J1bnRpbWUuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvaW50ZXJuYWwvY2xpZW50L2Rldi9jc3MuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvaW50ZXJuYWwvY2xpZW50L2RvbS9lbGVtZW50cy9ldmVudHMuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvaW50ZXJuYWwvY2xpZW50L2RvbS9ibG9ja3Mvc3ZlbHRlLWhlYWQuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvaW50ZXJuYWwvY2xpZW50L2RvbS9yZWNvbmNpbGVyLmpzIiwgIm5vZGVfbW9kdWxlcy8ucG5wbS9zdmVsdGVANS4xNS4wL25vZGVfbW9kdWxlcy9zdmVsdGUvc3JjL2ludGVybmFsL2NsaWVudC9kb20vdGVtcGxhdGUuanMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL3N2ZWx0ZUA1LjE1LjAvbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zcmMvaW50ZXJuYWwvY2xpZW50L3JlbmRlci5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvZG9tL2Nzcy5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvcmVhY3Rpdml0eS9zdG9yZS5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvcmVhY3Rpdml0eS9wcm9wcy5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9sZWdhY3kvbGVnYWN5LWNsaWVudC5qcyIsICJub2RlX21vZHVsZXMvLnBucG0vc3ZlbHRlQDUuMTUuMC9ub2RlX21vZHVsZXMvc3ZlbHRlL3NyYy9pbnRlcm5hbC9jbGllbnQvZG9tL2VsZW1lbnRzL2N1c3RvbS1lbGVtZW50LmpzIiwgInNyYy9Db21wb25lbnQuc3ZlbHRlIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgUmVzZWFyY2hRdWVzdCBmcm9tIFwiLi9zcmMvaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgUmVzZWFyY2hRdWVzdDtcbiIsICJpbXBvcnQgeyBQbHVnaW4sIFdvcmtzcGFjZUxlYWYgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEV4YW1wbGVWaWV3LCBWSUVXX1RZUEVfRVhBTVBMRSB9IGZyb20gXCIuL0V4YW1wbGVWaWV3LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc2VhcmNoUXVlc3QgZXh0ZW5kcyBQbHVnaW4ge1xuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coXCJsb2FkaW5nIHBsdWdpblwiKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFZJRVdfVFlQRV9FWEFNUExFLCAobGVhZikgPT4gbmV3IEV4YW1wbGVWaWV3KGxlYWYpKTtcblxuICAgIHRoaXMuYWRkUmliYm9uSWNvbihcInNwYXJrbGVzXCIsIFwiQWN0aXZhdGUgdmlld1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgIH0pO1xuICB9XG4gIGFzeW5jIG9udW5sb2FkKCkge1xuICAgIGNvbnNvbGUubG9nKFwidW5sb2FkaW5nIHBsdWdpblwiKTtcbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cbiAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgIGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0VYQU1QTEUpO1xuXG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBBIGxlYWYgd2l0aCBvdXIgdmlldyBhbHJlYWR5IGV4aXN0cywgdXNlIHRoYXRcbiAgICAgIGxlYWYgPSBsZWF2ZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE91ciB2aWV3IGNvdWxkIG5vdCBiZSBmb3VuZCBpbiB0aGUgd29ya3NwYWNlLCBjcmVhdGUgYSBuZXcgbGVhZlxuICAgICAgLy8gaW4gdGhlIHJpZ2h0IHNpZGViYXIgZm9yIGl0XG4gICAgICBsZWFmID0gd29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICBhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoeyB0eXBlOiBWSUVXX1RZUEVfRVhBTVBMRSwgYWN0aXZlOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIC8vIFwiUmV2ZWFsXCIgdGhlIGxlYWYgaW4gY2FzZSBpdCBpcyBpbiBhIGNvbGxhcHNlZCBzaWRlYmFyXG4gICAgaWYgKGxlYWYpIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuaW1wb3J0IENvbXBvbmVudCBmcm9tIFwiLi9Db21wb25lbnQuc3ZlbHRlXCI7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfRVhBTVBMRSA9IFwiZXhhbXBsZS12aWV3XCI7XG5cbmV4cG9ydCBjbGFzcyBFeGFtcGxlVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgY29tcG9uZW50OiBDb21wb25lbnQgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZikge1xuICAgIHN1cGVyKGxlYWYpO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKSB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9FWEFNUExFO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKSB7XG4gICAgcmV0dXJuIFwiRXhhbXBsZSB2aWV3XCI7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgdGhpcy5jb21wb25lbnQgPSBuZXcgQ29tcG9uZW50KHtcbiAgICAgIHRhcmdldDogdGhpcy5jb250ZW50RWwsXG4gICAgICBwcm9wczoge1xuICAgICAgICB2YXJpYWJsZTogMSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIHRoaXMuY29tcG9uZW50Py4kZGVzdHJveSgpO1xuICB9XG59XG4iLCAiLy8gZ2VuZXJhdGVkIGR1cmluZyByZWxlYXNlLCBkbyBub3QgbW9kaWZ5XG5cbi8qKlxuICogVGhlIGN1cnJlbnQgdmVyc2lvbiwgYXMgc2V0IGluIHBhY2thZ2UuanNvbi5cbiAqXG4gKiBodHRwczovL3N2ZWx0ZS5kZXYvZG9jcy9zdmVsdGUtY29tcGlsZXIjc3ZlbHRlLXZlcnNpb25cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBWRVJTSU9OID0gJzUuMTUuMCc7XG5leHBvcnQgY29uc3QgUFVCTElDX1ZFUlNJT04gPSAnNSc7XG4iLCAiaW1wb3J0IHsgUFVCTElDX1ZFUlNJT04gfSBmcm9tICcuLi92ZXJzaW9uLmpzJztcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKVxuXHQvLyBAdHMtaWdub3JlXG5cdCh3aW5kb3cuX19zdmVsdGUgfHw9IHsgdjogbmV3IFNldCgpIH0pLnYuYWRkKFBVQkxJQ19WRVJTSU9OKTtcbiIsICJleHBvcnQgbGV0IGxlZ2FjeV9tb2RlX2ZsYWcgPSBmYWxzZTtcbmV4cG9ydCBsZXQgdHJhY2luZ19tb2RlX2ZsYWcgPSBmYWxzZTtcblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZV9sZWdhY3lfbW9kZV9mbGFnKCkge1xuXHRsZWdhY3lfbW9kZV9mbGFnID0gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZV90cmFjaW5nX21vZGVfZmxhZygpIHtcblx0dHJhY2luZ19tb2RlX2ZsYWcgPSB0cnVlO1xufVxuIiwgImltcG9ydCB7IGVuYWJsZV9sZWdhY3lfbW9kZV9mbGFnIH0gZnJvbSAnLi9pbmRleC5qcyc7XG5cbmVuYWJsZV9sZWdhY3lfbW9kZV9mbGFnKCk7XG4iLCAiZXhwb3J0IGNvbnN0IEVBQ0hfSVRFTV9SRUFDVElWRSA9IDE7XG5leHBvcnQgY29uc3QgRUFDSF9JTkRFWF9SRUFDVElWRSA9IDEgPDwgMTtcbi8qKiBTZWUgRWFjaEJsb2NrIGludGVyZmFjZSBtZXRhZGF0YS5pc19jb250cm9sbGVkIGZvciBhbiBleHBsYW5hdGlvbiB3aGF0IHRoaXMgaXMgKi9cbmV4cG9ydCBjb25zdCBFQUNIX0lTX0NPTlRST0xMRUQgPSAxIDw8IDI7XG5leHBvcnQgY29uc3QgRUFDSF9JU19BTklNQVRFRCA9IDEgPDwgMztcbmV4cG9ydCBjb25zdCBFQUNIX0lURU1fSU1NVVRBQkxFID0gMSA8PCA0O1xuXG5leHBvcnQgY29uc3QgUFJPUFNfSVNfSU1NVVRBQkxFID0gMTtcbmV4cG9ydCBjb25zdCBQUk9QU19JU19SVU5FUyA9IDEgPDwgMTtcbmV4cG9ydCBjb25zdCBQUk9QU19JU19VUERBVEVEID0gMSA8PCAyO1xuZXhwb3J0IGNvbnN0IFBST1BTX0lTX0JJTkRBQkxFID0gMSA8PCAzO1xuZXhwb3J0IGNvbnN0IFBST1BTX0lTX0xBWllfSU5JVElBTCA9IDEgPDwgNDtcblxuZXhwb3J0IGNvbnN0IFRSQU5TSVRJT05fSU4gPSAxO1xuZXhwb3J0IGNvbnN0IFRSQU5TSVRJT05fT1VUID0gMSA8PCAxO1xuZXhwb3J0IGNvbnN0IFRSQU5TSVRJT05fR0xPQkFMID0gMSA8PCAyO1xuXG5leHBvcnQgY29uc3QgVEVNUExBVEVfRlJBR01FTlQgPSAxO1xuZXhwb3J0IGNvbnN0IFRFTVBMQVRFX1VTRV9JTVBPUlRfTk9ERSA9IDEgPDwgMTtcblxuZXhwb3J0IGNvbnN0IEhZRFJBVElPTl9TVEFSVCA9ICdbJztcbi8qKiB1c2VkIHRvIGluZGljYXRlIHRoYXQgYW4gYHs6ZWxzZX0uLi5gIGJsb2NrIHdhcyByZW5kZXJlZCAqL1xuZXhwb3J0IGNvbnN0IEhZRFJBVElPTl9TVEFSVF9FTFNFID0gJ1shJztcbmV4cG9ydCBjb25zdCBIWURSQVRJT05fRU5EID0gJ10nO1xuZXhwb3J0IGNvbnN0IEhZRFJBVElPTl9FUlJPUiA9IHt9O1xuXG5leHBvcnQgY29uc3QgRUxFTUVOVF9JU19OQU1FU1BBQ0VEID0gMTtcbmV4cG9ydCBjb25zdCBFTEVNRU5UX1BSRVNFUlZFX0FUVFJJQlVURV9DQVNFID0gMSA8PCAxO1xuXG5leHBvcnQgY29uc3QgVU5JTklUSUFMSVpFRCA9IFN5bWJvbCgpO1xuXG4vLyBEZXYtdGltZSBjb21wb25lbnQgcHJvcGVydGllc1xuZXhwb3J0IGNvbnN0IEZJTEVOQU1FID0gU3ltYm9sKCdmaWxlbmFtZScpO1xuZXhwb3J0IGNvbnN0IEhNUiA9IFN5bWJvbCgnaG1yJyk7XG5cbmV4cG9ydCBjb25zdCBOQU1FU1BBQ0VfU1ZHID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJztcbmV4cG9ydCBjb25zdCBOQU1FU1BBQ0VfTUFUSE1MID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUwnO1xuXG4vLyB3ZSB1c2UgYSBsaXN0IG9mIGlnbm9yYWJsZSBydW50aW1lIHdhcm5pbmdzIGJlY2F1c2Ugbm90IGV2ZXJ5IHJ1bnRpbWUgd2FybmluZ1xuLy8gY2FuIGJlIGlnbm9yZWQgYW5kIHdlIHdhbnQgdG8ga2VlcCB0aGUgdmFsaWRhdGlvbiBmb3Igc3ZlbHRlLWlnbm9yZSBpbiBwbGFjZVxuZXhwb3J0IGNvbnN0IElHTk9SQUJMRV9SVU5USU1FX1dBUk5JTkdTID0gLyoqIEB0eXBlIHtjb25zdH0gKi8gKFtcblx0J3N0YXRlX3NuYXBzaG90X3VuY2xvbmVhYmxlJyxcblx0J2JpbmRpbmdfcHJvcGVydHlfbm9uX3JlYWN0aXZlJyxcblx0J2h5ZHJhdGlvbl9hdHRyaWJ1dGVfY2hhbmdlZCcsXG5cdCdoeWRyYXRpb25faHRtbF9jaGFuZ2VkJyxcblx0J293bmVyc2hpcF9pbnZhbGlkX2JpbmRpbmcnLFxuXHQnb3duZXJzaGlwX2ludmFsaWRfbXV0YXRpb24nXG5dKTtcblxuLyoqXG4gKiBXaGl0ZXNwYWNlIGluc2lkZSBvbmUgb2YgdGhlc2UgZWxlbWVudHMgd2lsbCBub3QgcmVzdWx0IGluXG4gKiBhIHdoaXRlc3BhY2Ugbm9kZSBiZWluZyBjcmVhdGVkIGluIGFueSBjaXJjdW1zdGFuY2VzLiAoVGhpc1xuICogbGlzdCBpcyBhbG1vc3QgY2VydGFpbmx5IHZlcnkgaW5jb21wbGV0ZSlcbiAqIFRPRE8gdGhpcyBpcyBjdXJyZW50bHkgdW51c2VkXG4gKi9cbmV4cG9ydCBjb25zdCBFTEVNRU5UU19XSVRIT1VUX1RFWFQgPSBbJ2F1ZGlvJywgJ2RhdGFsaXN0JywgJ2RsJywgJ29wdGdyb3VwJywgJ3NlbGVjdCcsICd2aWRlbyddO1xuIiwgImNvbnN0IHJlZ2V4X3JldHVybl9jaGFyYWN0ZXJzID0gL1xcci9nO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNoKHN0cikge1xuXHRzdHIgPSBzdHIucmVwbGFjZShyZWdleF9yZXR1cm5fY2hhcmFjdGVycywgJycpO1xuXHRsZXQgaGFzaCA9IDUzODE7XG5cdGxldCBpID0gc3RyLmxlbmd0aDtcblxuXHR3aGlsZSAoaS0tKSBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgXiBzdHIuY2hhckNvZGVBdChpKTtcblx0cmV0dXJuIChoYXNoID4+PiAwKS50b1N0cmluZygzNik7XG59XG5cbmNvbnN0IFZPSURfRUxFTUVOVF9OQU1FUyA9IFtcblx0J2FyZWEnLFxuXHQnYmFzZScsXG5cdCdicicsXG5cdCdjb2wnLFxuXHQnY29tbWFuZCcsXG5cdCdlbWJlZCcsXG5cdCdocicsXG5cdCdpbWcnLFxuXHQnaW5wdXQnLFxuXHQna2V5Z2VuJyxcblx0J2xpbmsnLFxuXHQnbWV0YScsXG5cdCdwYXJhbScsXG5cdCdzb3VyY2UnLFxuXHQndHJhY2snLFxuXHQnd2JyJ1xuXTtcblxuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiBgbmFtZWAgaXMgb2YgYSB2b2lkIGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc192b2lkKG5hbWUpIHtcblx0cmV0dXJuIFZPSURfRUxFTUVOVF9OQU1FUy5pbmNsdWRlcyhuYW1lKSB8fCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09ICchZG9jdHlwZSc7XG59XG5cbmNvbnN0IFJFU0VSVkVEX1dPUkRTID0gW1xuXHQnYXJndW1lbnRzJyxcblx0J2F3YWl0Jyxcblx0J2JyZWFrJyxcblx0J2Nhc2UnLFxuXHQnY2F0Y2gnLFxuXHQnY2xhc3MnLFxuXHQnY29uc3QnLFxuXHQnY29udGludWUnLFxuXHQnZGVidWdnZXInLFxuXHQnZGVmYXVsdCcsXG5cdCdkZWxldGUnLFxuXHQnZG8nLFxuXHQnZWxzZScsXG5cdCdlbnVtJyxcblx0J2V2YWwnLFxuXHQnZXhwb3J0Jyxcblx0J2V4dGVuZHMnLFxuXHQnZmFsc2UnLFxuXHQnZmluYWxseScsXG5cdCdmb3InLFxuXHQnZnVuY3Rpb24nLFxuXHQnaWYnLFxuXHQnaW1wbGVtZW50cycsXG5cdCdpbXBvcnQnLFxuXHQnaW4nLFxuXHQnaW5zdGFuY2VvZicsXG5cdCdpbnRlcmZhY2UnLFxuXHQnbGV0Jyxcblx0J25ldycsXG5cdCdudWxsJyxcblx0J3BhY2thZ2UnLFxuXHQncHJpdmF0ZScsXG5cdCdwcm90ZWN0ZWQnLFxuXHQncHVibGljJyxcblx0J3JldHVybicsXG5cdCdzdGF0aWMnLFxuXHQnc3VwZXInLFxuXHQnc3dpdGNoJyxcblx0J3RoaXMnLFxuXHQndGhyb3cnLFxuXHQndHJ1ZScsXG5cdCd0cnknLFxuXHQndHlwZW9mJyxcblx0J3ZhcicsXG5cdCd2b2lkJyxcblx0J3doaWxlJyxcblx0J3dpdGgnLFxuXHQneWllbGQnXG5dO1xuXG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIGB3b3JkYCBpcyBhIHJlc2VydmVkIEphdmFTY3JpcHQga2V5d29yZFxuICogQHBhcmFtIHtzdHJpbmd9IHdvcmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzX3Jlc2VydmVkKHdvcmQpIHtcblx0cmV0dXJuIFJFU0VSVkVEX1dPUkRTLmluY2x1ZGVzKHdvcmQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19jYXB0dXJlX2V2ZW50KG5hbWUpIHtcblx0cmV0dXJuIG5hbWUuZW5kc1dpdGgoJ2NhcHR1cmUnKSAmJiBuYW1lICE9PSAnZ290cG9pbnRlcmNhcHR1cmUnICYmIG5hbWUgIT09ICdsb3N0cG9pbnRlcmNhcHR1cmUnO1xufVxuXG4vKiogTGlzdCBvZiBFbGVtZW50IGV2ZW50cyB0aGF0IHdpbGwgYmUgZGVsZWdhdGVkICovXG5jb25zdCBERUxFR0FURURfRVZFTlRTID0gW1xuXHQnYmVmb3JlaW5wdXQnLFxuXHQnY2xpY2snLFxuXHQnY2hhbmdlJyxcblx0J2RibGNsaWNrJyxcblx0J2NvbnRleHRtZW51Jyxcblx0J2ZvY3VzaW4nLFxuXHQnZm9jdXNvdXQnLFxuXHQnaW5wdXQnLFxuXHQna2V5ZG93bicsXG5cdCdrZXl1cCcsXG5cdCdtb3VzZWRvd24nLFxuXHQnbW91c2Vtb3ZlJyxcblx0J21vdXNlb3V0Jyxcblx0J21vdXNlb3ZlcicsXG5cdCdtb3VzZXVwJyxcblx0J3BvaW50ZXJkb3duJyxcblx0J3BvaW50ZXJtb3ZlJyxcblx0J3BvaW50ZXJvdXQnLFxuXHQncG9pbnRlcm92ZXInLFxuXHQncG9pbnRlcnVwJyxcblx0J3RvdWNoZW5kJyxcblx0J3RvdWNobW92ZScsXG5cdCd0b3VjaHN0YXJ0J1xuXTtcblxuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiBgZXZlbnRfbmFtZWAgaXMgYSBkZWxlZ2F0ZWQgZXZlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudF9uYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19kZWxlZ2F0ZWQoZXZlbnRfbmFtZSkge1xuXHRyZXR1cm4gREVMRUdBVEVEX0VWRU5UUy5pbmNsdWRlcyhldmVudF9uYW1lKTtcbn1cblxuLyoqXG4gKiBBdHRyaWJ1dGVzIHRoYXQgYXJlIGJvb2xlYW4sIGkuZS4gdGhleSBhcmUgcHJlc2VudCBvciBub3QgcHJlc2VudC5cbiAqL1xuY29uc3QgRE9NX0JPT0xFQU5fQVRUUklCVVRFUyA9IFtcblx0J2FsbG93ZnVsbHNjcmVlbicsXG5cdCdhc3luYycsXG5cdCdhdXRvZm9jdXMnLFxuXHQnYXV0b3BsYXknLFxuXHQnY2hlY2tlZCcsXG5cdCdjb250cm9scycsXG5cdCdkZWZhdWx0Jyxcblx0J2Rpc2FibGVkJyxcblx0J2Zvcm1ub3ZhbGlkYXRlJyxcblx0J2hpZGRlbicsXG5cdCdpbmRldGVybWluYXRlJyxcblx0J2lzbWFwJyxcblx0J2xvb3AnLFxuXHQnbXVsdGlwbGUnLFxuXHQnbXV0ZWQnLFxuXHQnbm9tb2R1bGUnLFxuXHQnbm92YWxpZGF0ZScsXG5cdCdvcGVuJyxcblx0J3BsYXlzaW5saW5lJyxcblx0J3JlYWRvbmx5Jyxcblx0J3JlcXVpcmVkJyxcblx0J3JldmVyc2VkJyxcblx0J3NlYW1sZXNzJyxcblx0J3NlbGVjdGVkJyxcblx0J3dlYmtpdGRpcmVjdG9yeSdcbl07XG5cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgYG5hbWVgIGlzIGEgYm9vbGVhbiBhdHRyaWJ1dGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19ib29sZWFuX2F0dHJpYnV0ZShuYW1lKSB7XG5cdHJldHVybiBET01fQk9PTEVBTl9BVFRSSUJVVEVTLmluY2x1ZGVzKG5hbWUpO1xufVxuXG4vKipcbiAqIEB0eXBlIHtSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+fVxuICogTGlzdCBvZiBhdHRyaWJ1dGUgbmFtZXMgdGhhdCBzaG91bGQgYmUgYWxpYXNlZCB0byB0aGVpciBwcm9wZXJ0eSBuYW1lc1xuICogYmVjYXVzZSB0aGV5IGJlaGF2ZSBkaWZmZXJlbnRseSBiZXR3ZWVuIHNldHRpbmcgdGhlbSBhcyBhbiBhdHRyaWJ1dGUgYW5kXG4gKiBzZXR0aW5nIHRoZW0gYXMgYSBwcm9wZXJ0eS5cbiAqL1xuY29uc3QgQVRUUklCVVRFX0FMSUFTRVMgPSB7XG5cdC8vIG5vIGBjbGFzczogJ2NsYXNzTmFtZSdgIGJlY2F1c2Ugd2UgaGFuZGxlIHRoYXQgc2VwYXJhdGVseVxuXHRmb3Jtbm92YWxpZGF0ZTogJ2Zvcm1Ob1ZhbGlkYXRlJyxcblx0aXNtYXA6ICdpc01hcCcsXG5cdG5vbW9kdWxlOiAnbm9Nb2R1bGUnLFxuXHRwbGF5c2lubGluZTogJ3BsYXlzSW5saW5lJyxcblx0cmVhZG9ubHk6ICdyZWFkT25seScsXG5cdGRlZmF1bHR2YWx1ZTogJ2RlZmF1bHRWYWx1ZScsXG5cdGRlZmF1bHRjaGVja2VkOiAnZGVmYXVsdENoZWNrZWQnLFxuXHRzcmNvYmplY3Q6ICdzcmNPYmplY3QnXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVfYXR0cmlidXRlKG5hbWUpIHtcblx0bmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblx0cmV0dXJuIEFUVFJJQlVURV9BTElBU0VTW25hbWVdID8/IG5hbWU7XG59XG5cbmNvbnN0IERPTV9QUk9QRVJUSUVTID0gW1xuXHQuLi5ET01fQk9PTEVBTl9BVFRSSUJVVEVTLFxuXHQnZm9ybU5vVmFsaWRhdGUnLFxuXHQnaXNNYXAnLFxuXHQnbm9Nb2R1bGUnLFxuXHQncGxheXNJbmxpbmUnLFxuXHQncmVhZE9ubHknLFxuXHQndmFsdWUnLFxuXHQnaW5lcnQnLFxuXHQndm9sdW1lJyxcblx0J2RlZmF1bHRWYWx1ZScsXG5cdCdkZWZhdWx0Q2hlY2tlZCcsXG5cdCdzcmNPYmplY3QnXG5dO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19kb21fcHJvcGVydHkobmFtZSkge1xuXHRyZXR1cm4gRE9NX1BST1BFUlRJRVMuaW5jbHVkZXMobmFtZSk7XG59XG5cbmNvbnN0IE5PTl9TVEFUSUNfUFJPUEVSVElFUyA9IFsnYXV0b2ZvY3VzJywgJ211dGVkJywgJ2RlZmF1bHRWYWx1ZScsICdkZWZhdWx0Q2hlY2tlZCddO1xuXG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBnaXZlbiBhdHRyaWJ1dGUgY2Fubm90IGJlIHNldCB0aHJvdWdoIHRoZSB0ZW1wbGF0ZVxuICogc3RyaW5nLCBpLmUuIG5lZWRzIHNvbWUga2luZCBvZiBKYXZhU2NyaXB0IGhhbmRsaW5nIHRvIHdvcmsuXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2Fubm90X2JlX3NldF9zdGF0aWNhbGx5KG5hbWUpIHtcblx0cmV0dXJuIE5PTl9TVEFUSUNfUFJPUEVSVElFUy5pbmNsdWRlcyhuYW1lKTtcbn1cblxuLyoqXG4gKiBTdWJzZXQgb2YgZGVsZWdhdGVkIGV2ZW50cyB3aGljaCBzaG91bGQgYmUgcGFzc2l2ZSBieSBkZWZhdWx0LlxuICogVGhlc2UgdHdvIGFyZSBhbHJlYWR5IHBhc3NpdmUgdmlhIGJyb3dzZXIgZGVmYXVsdHMgb24gd2luZG93LCBkb2N1bWVudCBhbmQgYm9keS5cbiAqIEJ1dCBzaW5jZVxuICogLSB3ZSdyZSBkZWxlZ2F0aW5nIHRoZW1cbiAqIC0gdGhleSBoYXBwZW4gb2Z0ZW5cbiAqIC0gdGhleSBhcHBseSB0byBtb2JpbGUgd2hpY2ggaXMgZ2VuZXJhbGx5IGxlc3MgcGVyZm9ybWFudFxuICogd2UncmUgbWFya2luZyB0aGVtIGFzIHBhc3NpdmUgYnkgZGVmYXVsdCBmb3Igb3RoZXIgZWxlbWVudHMsIHRvby5cbiAqL1xuY29uc3QgUEFTU0lWRV9FVkVOVFMgPSBbJ3RvdWNoc3RhcnQnLCAndG91Y2htb3ZlJ107XG5cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgYG5hbWVgIGlzIGEgcGFzc2l2ZSBldmVudFxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzX3Bhc3NpdmVfZXZlbnQobmFtZSkge1xuXHRyZXR1cm4gUEFTU0lWRV9FVkVOVFMuaW5jbHVkZXMobmFtZSk7XG59XG5cbmNvbnN0IENPTlRFTlRfRURJVEFCTEVfQklORElOR1MgPSBbJ3RleHRDb250ZW50JywgJ2lubmVySFRNTCcsICdpbm5lclRleHQnXTtcblxuLyoqIEBwYXJhbSB7c3RyaW5nfSBuYW1lICovXG5leHBvcnQgZnVuY3Rpb24gaXNfY29udGVudF9lZGl0YWJsZV9iaW5kaW5nKG5hbWUpIHtcblx0cmV0dXJuIENPTlRFTlRfRURJVEFCTEVfQklORElOR1MuaW5jbHVkZXMobmFtZSk7XG59XG5cbmNvbnN0IExPQURfRVJST1JfRUxFTUVOVFMgPSBbXG5cdCdib2R5Jyxcblx0J2VtYmVkJyxcblx0J2lmcmFtZScsXG5cdCdpbWcnLFxuXHQnbGluaycsXG5cdCdvYmplY3QnLFxuXHQnc2NyaXB0Jyxcblx0J3N0eWxlJyxcblx0J3RyYWNrJ1xuXTtcblxuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZWxlbWVudCBlbWl0cyBgbG9hZGAgYW5kIGBlcnJvcmAgZXZlbnRzXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNfbG9hZF9lcnJvcl9lbGVtZW50KG5hbWUpIHtcblx0cmV0dXJuIExPQURfRVJST1JfRUxFTUVOVFMuaW5jbHVkZXMobmFtZSk7XG59XG5cbmNvbnN0IFNWR19FTEVNRU5UUyA9IFtcblx0J2FsdEdseXBoJyxcblx0J2FsdEdseXBoRGVmJyxcblx0J2FsdEdseXBoSXRlbScsXG5cdCdhbmltYXRlJyxcblx0J2FuaW1hdGVDb2xvcicsXG5cdCdhbmltYXRlTW90aW9uJyxcblx0J2FuaW1hdGVUcmFuc2Zvcm0nLFxuXHQnY2lyY2xlJyxcblx0J2NsaXBQYXRoJyxcblx0J2NvbG9yLXByb2ZpbGUnLFxuXHQnY3Vyc29yJyxcblx0J2RlZnMnLFxuXHQnZGVzYycsXG5cdCdkaXNjYXJkJyxcblx0J2VsbGlwc2UnLFxuXHQnZmVCbGVuZCcsXG5cdCdmZUNvbG9yTWF0cml4Jyxcblx0J2ZlQ29tcG9uZW50VHJhbnNmZXInLFxuXHQnZmVDb21wb3NpdGUnLFxuXHQnZmVDb252b2x2ZU1hdHJpeCcsXG5cdCdmZURpZmZ1c2VMaWdodGluZycsXG5cdCdmZURpc3BsYWNlbWVudE1hcCcsXG5cdCdmZURpc3RhbnRMaWdodCcsXG5cdCdmZURyb3BTaGFkb3cnLFxuXHQnZmVGbG9vZCcsXG5cdCdmZUZ1bmNBJyxcblx0J2ZlRnVuY0InLFxuXHQnZmVGdW5jRycsXG5cdCdmZUZ1bmNSJyxcblx0J2ZlR2F1c3NpYW5CbHVyJyxcblx0J2ZlSW1hZ2UnLFxuXHQnZmVNZXJnZScsXG5cdCdmZU1lcmdlTm9kZScsXG5cdCdmZU1vcnBob2xvZ3knLFxuXHQnZmVPZmZzZXQnLFxuXHQnZmVQb2ludExpZ2h0Jyxcblx0J2ZlU3BlY3VsYXJMaWdodGluZycsXG5cdCdmZVNwb3RMaWdodCcsXG5cdCdmZVRpbGUnLFxuXHQnZmVUdXJidWxlbmNlJyxcblx0J2ZpbHRlcicsXG5cdCdmb250Jyxcblx0J2ZvbnQtZmFjZScsXG5cdCdmb250LWZhY2UtZm9ybWF0Jyxcblx0J2ZvbnQtZmFjZS1uYW1lJyxcblx0J2ZvbnQtZmFjZS1zcmMnLFxuXHQnZm9udC1mYWNlLXVyaScsXG5cdCdmb3JlaWduT2JqZWN0Jyxcblx0J2cnLFxuXHQnZ2x5cGgnLFxuXHQnZ2x5cGhSZWYnLFxuXHQnaGF0Y2gnLFxuXHQnaGF0Y2hwYXRoJyxcblx0J2hrZXJuJyxcblx0J2ltYWdlJyxcblx0J2xpbmUnLFxuXHQnbGluZWFyR3JhZGllbnQnLFxuXHQnbWFya2VyJyxcblx0J21hc2snLFxuXHQnbWVzaCcsXG5cdCdtZXNoZ3JhZGllbnQnLFxuXHQnbWVzaHBhdGNoJyxcblx0J21lc2hyb3cnLFxuXHQnbWV0YWRhdGEnLFxuXHQnbWlzc2luZy1nbHlwaCcsXG5cdCdtcGF0aCcsXG5cdCdwYXRoJyxcblx0J3BhdHRlcm4nLFxuXHQncG9seWdvbicsXG5cdCdwb2x5bGluZScsXG5cdCdyYWRpYWxHcmFkaWVudCcsXG5cdCdyZWN0Jyxcblx0J3NldCcsXG5cdCdzb2xpZGNvbG9yJyxcblx0J3N0b3AnLFxuXHQnc3ZnJyxcblx0J3N3aXRjaCcsXG5cdCdzeW1ib2wnLFxuXHQndGV4dCcsXG5cdCd0ZXh0UGF0aCcsXG5cdCd0cmVmJyxcblx0J3RzcGFuJyxcblx0J3Vua25vd24nLFxuXHQndXNlJyxcblx0J3ZpZXcnLFxuXHQndmtlcm4nXG5dO1xuXG4vKiogQHBhcmFtIHtzdHJpbmd9IG5hbWUgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19zdmcobmFtZSkge1xuXHRyZXR1cm4gU1ZHX0VMRU1FTlRTLmluY2x1ZGVzKG5hbWUpO1xufVxuXG5jb25zdCBNQVRITUxfRUxFTUVOVFMgPSBbXG5cdCdhbm5vdGF0aW9uJyxcblx0J2Fubm90YXRpb24teG1sJyxcblx0J21hY3Rpb24nLFxuXHQnbWF0aCcsXG5cdCdtZXJyb3InLFxuXHQnbWZyYWMnLFxuXHQnbWknLFxuXHQnbW11bHRpc2NyaXB0cycsXG5cdCdtbicsXG5cdCdtbycsXG5cdCdtb3ZlcicsXG5cdCdtcGFkZGVkJyxcblx0J21waGFudG9tJyxcblx0J21wcmVzY3JpcHRzJyxcblx0J21yb290Jyxcblx0J21yb3cnLFxuXHQnbXMnLFxuXHQnbXNwYWNlJyxcblx0J21zcXJ0Jyxcblx0J21zdHlsZScsXG5cdCdtc3ViJyxcblx0J21zdWJzdXAnLFxuXHQnbXN1cCcsXG5cdCdtdGFibGUnLFxuXHQnbXRkJyxcblx0J210ZXh0Jyxcblx0J210cicsXG5cdCdtdW5kZXInLFxuXHQnbXVuZGVyb3ZlcicsXG5cdCdzZW1hbnRpY3MnXG5dO1xuXG4vKiogQHBhcmFtIHtzdHJpbmd9IG5hbWUgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19tYXRobWwobmFtZSkge1xuXHRyZXR1cm4gTUFUSE1MX0VMRU1FTlRTLmluY2x1ZGVzKG5hbWUpO1xufVxuXG5jb25zdCBSVU5FUyA9IC8qKiBAdHlwZSB7Y29uc3R9ICovIChbXG5cdCckc3RhdGUnLFxuXHQnJHN0YXRlLnJhdycsXG5cdCckc3RhdGUuc25hcHNob3QnLFxuXHQnJHByb3BzJyxcblx0JyRiaW5kYWJsZScsXG5cdCckZGVyaXZlZCcsXG5cdCckZGVyaXZlZC5ieScsXG5cdCckZWZmZWN0Jyxcblx0JyRlZmZlY3QucHJlJyxcblx0JyRlZmZlY3QudHJhY2tpbmcnLFxuXHQnJGVmZmVjdC5yb290Jyxcblx0JyRpbnNwZWN0Jyxcblx0JyRpbnNwZWN0KCkud2l0aCcsXG5cdCckaW5zcGVjdC50cmFjZScsXG5cdCckaG9zdCdcbl0pO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJucyB7bmFtZSBpcyBSVU5FU1tudW1iZXJdfVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNfcnVuZShuYW1lKSB7XG5cdHJldHVybiBSVU5FUy5pbmNsdWRlcygvKiogQHR5cGUge1JVTkVTW251bWJlcl19ICovIChuYW1lKSk7XG59XG5cbi8qKiBMaXN0IG9mIGVsZW1lbnRzIHRoYXQgcmVxdWlyZSByYXcgY29udGVudHMgYW5kIHNob3VsZCBub3QgaGF2ZSBTU1IgY29tbWVudHMgcHV0IGluIHRoZW0gKi9cbmNvbnN0IFJBV19URVhUX0VMRU1FTlRTID0gLyoqIEB0eXBlIHtjb25zdH0gKi8gKFsndGV4dGFyZWEnLCAnc2NyaXB0JywgJ3N0eWxlJywgJ3RpdGxlJ10pO1xuXG4vKiogQHBhcmFtIHtzdHJpbmd9IG5hbWUgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19yYXdfdGV4dF9lbGVtZW50KG5hbWUpIHtcblx0cmV0dXJuIFJBV19URVhUX0VMRU1FTlRTLmluY2x1ZGVzKC8qKiBAdHlwZSB7UkFXX1RFWFRfRUxFTUVOVFNbbnVtYmVyXX0gKi8gKG5hbWUpKTtcbn1cblxuLyoqXG4gKiBQcmV2ZW50IGRldnRvb2xzIHRyeWluZyB0byBtYWtlIGBsb2NhdGlvbmAgYSBjbGlja2FibGUgbGluayBieSBpbnNlcnRpbmcgYSB6ZXJvLXdpZHRoIHNwYWNlXG4gKiBAcGFyYW0ge3N0cmluZyB8IHVuZGVmaW5lZH0gbG9jYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplX2xvY2F0aW9uKGxvY2F0aW9uKSB7XG5cdHJldHVybiBsb2NhdGlvbj8ucmVwbGFjZSgvXFwvL2csICcvXFx1MjAwYicpO1xufVxuIiwgImNvbnN0IG5vZGVfZW52ID0gZ2xvYmFsVGhpcy5wcm9jZXNzPy5lbnY/Lk5PREVfRU5WO1xuaWYgKCFub2RlX2Vudikge1xuXHRjb25zb2xlLndhcm4oJ0lmIGJ1bmRsaW5nLCBjb25kaXRpb25zIHNob3VsZCBpbmNsdWRlIGRldmVsb3BtZW50IG9yIHByb2R1Y3Rpb24uIElmIG5vdCBidW5kbGluZywgY29uZGl0aW9ucyBvciBOT0RFX0VOViBzaG91bGQgaW5jbHVkZSBkZXZlbG9wbWVudCBvciBwcm9kdWN0aW9uLiBTZWUgaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZXNtLWVudiBmb3IgdGlwcyBvbiBzZXR0aW5nIGNvbmRpdGlvbnMgaW4gcG9wdWxhciBidW5kbGVycyBhbmQgcnVudGltZXMuJyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5vZGVfZW52ICYmICFub2RlX2Vudi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdwcm9kJyk7XG4iLCAiLy8gU3RvcmUgdGhlIHJlZmVyZW5jZXMgdG8gZ2xvYmFscyBpbiBjYXNlIHNvbWVvbmUgdHJpZXMgdG8gbW9ua2V5IHBhdGNoIHRoZXNlLCBjYXVzaW5nIHRoZSBiZWxvd1xuLy8gdG8gZGUtb3B0ICh0aGlzIG9jY3VycyBvZnRlbiB3aGVuIHVzaW5nIHBvcHVsYXIgZXh0ZW5zaW9ucykuXG5leHBvcnQgdmFyIGlzX2FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmV4cG9ydCB2YXIgYXJyYXlfZnJvbSA9IEFycmF5LmZyb207XG5leHBvcnQgdmFyIG9iamVjdF9rZXlzID0gT2JqZWN0LmtleXM7XG5leHBvcnQgdmFyIGRlZmluZV9wcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbmV4cG9ydCB2YXIgZ2V0X2Rlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuZXhwb3J0IHZhciBnZXRfZGVzY3JpcHRvcnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbmV4cG9ydCB2YXIgb2JqZWN0X3Byb3RvdHlwZSA9IE9iamVjdC5wcm90b3R5cGU7XG5leHBvcnQgdmFyIGFycmF5X3Byb3RvdHlwZSA9IEFycmF5LnByb3RvdHlwZTtcbmV4cG9ydCB2YXIgZ2V0X3Byb3RvdHlwZV9vZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblxuLyoqXG4gKiBAcGFyYW0ge2FueX0gdGhpbmdcbiAqIEByZXR1cm5zIHt0aGluZyBpcyBGdW5jdGlvbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzX2Z1bmN0aW9uKHRoaW5nKSB7XG5cdHJldHVybiB0eXBlb2YgdGhpbmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmV4cG9ydCBjb25zdCBub29wID0gKCkgPT4ge307XG5cbi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vdGhlbi9pcy1wcm9taXNlL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBNSVQgTGljZW5zZSBodHRwczovL2dpdGh1Yi5jb20vdGhlbi9pcy1wcm9taXNlL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcblxuLyoqXG4gKiBAdGVtcGxhdGUgW1Q9YW55XVxuICogQHBhcmFtIHthbnl9IHZhbHVlXG4gKiBAcmV0dXJucyB7dmFsdWUgaXMgUHJvbWlzZUxpa2U8VD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19wcm9taXNlKHZhbHVlKSB7XG5cdHJldHVybiB0eXBlb2YgdmFsdWU/LnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG5cbi8qKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJ1bihmbikge1xuXHRyZXR1cm4gZm4oKTtcbn1cblxuLyoqIEBwYXJhbSB7QXJyYXk8KCkgPT4gdm9pZD59IGFyciAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJ1bl9hbGwoYXJyKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdFx0YXJyW2ldKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBUT0RPIHJlcGxhY2Ugd2l0aCBQcm9taXNlLndpdGhSZXNvbHZlcnMgb25jZSBzdXBwb3J0ZWQgd2lkZWx5IGVub3VnaFxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmVycmVkKCkge1xuXHQvKiogQHR5cGUgeyh2YWx1ZTogVCkgPT4gdm9pZH0gKi9cblx0dmFyIHJlc29sdmU7XG5cblx0LyoqIEB0eXBlIHsocmVhc29uOiBhbnkpID0+IHZvaWR9ICovXG5cdHZhciByZWplY3Q7XG5cblx0LyoqIEB0eXBlIHtQcm9taXNlPFQ+fSAqL1xuXHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuXHRcdHJlc29sdmUgPSByZXM7XG5cdFx0cmVqZWN0ID0gcmVqO1xuXHR9KTtcblxuXHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdHJldHVybiB7IHByb21pc2UsIHJlc29sdmUsIHJlamVjdCB9O1xufVxuXG4vKipcbiAqIEB0ZW1wbGF0ZSBWXG4gKiBAcGFyYW0ge1Z9IHZhbHVlXG4gKiBAcGFyYW0ge1YgfCAoKCkgPT4gVil9IGZhbGxiYWNrXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtsYXp5XVxuICogQHJldHVybnMge1Z9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmYWxsYmFjayh2YWx1ZSwgZmFsbGJhY2ssIGxhenkgPSBmYWxzZSkge1xuXHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZFxuXHRcdD8gbGF6eVxuXHRcdFx0PyAvKiogQHR5cGUgeygpID0+IFZ9ICovIChmYWxsYmFjaykoKVxuXHRcdFx0OiAvKiogQHR5cGUge1Z9ICovIChmYWxsYmFjaylcblx0XHQ6IHZhbHVlO1xufVxuIiwgImV4cG9ydCBjb25zdCBERVJJVkVEID0gMSA8PCAxO1xuZXhwb3J0IGNvbnN0IEVGRkVDVCA9IDEgPDwgMjtcbmV4cG9ydCBjb25zdCBSRU5ERVJfRUZGRUNUID0gMSA8PCAzO1xuZXhwb3J0IGNvbnN0IEJMT0NLX0VGRkVDVCA9IDEgPDwgNDtcbmV4cG9ydCBjb25zdCBCUkFOQ0hfRUZGRUNUID0gMSA8PCA1O1xuZXhwb3J0IGNvbnN0IFJPT1RfRUZGRUNUID0gMSA8PCA2O1xuZXhwb3J0IGNvbnN0IEJPVU5EQVJZX0VGRkVDVCA9IDEgPDwgNztcbmV4cG9ydCBjb25zdCBVTk9XTkVEID0gMSA8PCA4O1xuZXhwb3J0IGNvbnN0IERJU0NPTk5FQ1RFRCA9IDEgPDwgOTtcbmV4cG9ydCBjb25zdCBDTEVBTiA9IDEgPDwgMTA7XG5leHBvcnQgY29uc3QgRElSVFkgPSAxIDw8IDExO1xuZXhwb3J0IGNvbnN0IE1BWUJFX0RJUlRZID0gMSA8PCAxMjtcbmV4cG9ydCBjb25zdCBJTkVSVCA9IDEgPDwgMTM7XG5leHBvcnQgY29uc3QgREVTVFJPWUVEID0gMSA8PCAxNDtcbmV4cG9ydCBjb25zdCBFRkZFQ1RfUkFOID0gMSA8PCAxNTtcbi8qKiAnVHJhbnNwYXJlbnQnIGVmZmVjdHMgZG8gbm90IGNyZWF0ZSBhIHRyYW5zaXRpb24gYm91bmRhcnkgKi9cbmV4cG9ydCBjb25zdCBFRkZFQ1RfVFJBTlNQQVJFTlQgPSAxIDw8IDE2O1xuLyoqIFN2ZWx0ZSA0IGxlZ2FjeSBtb2RlIHByb3BzIG5lZWQgdG8gYmUgaGFuZGxlZCB3aXRoIGRlcml2ZWRzIGFuZCBiZSByZWNvZ25pemVkIGVsc2V3aGVyZSwgaGVuY2UgdGhlIGRlZGljYXRlZCBmbGFnICovXG5leHBvcnQgY29uc3QgTEVHQUNZX0RFUklWRURfUFJPUCA9IDEgPDwgMTc7XG5leHBvcnQgY29uc3QgSU5TUEVDVF9FRkZFQ1QgPSAxIDw8IDE4O1xuZXhwb3J0IGNvbnN0IEhFQURfRUZGRUNUID0gMSA8PCAxOTtcbmV4cG9ydCBjb25zdCBFRkZFQ1RfSEFTX0RFUklWRUQgPSAxIDw8IDIwO1xuXG5leHBvcnQgY29uc3QgU1RBVEVfU1lNQk9MID0gU3ltYm9sKCckc3RhdGUnKTtcbmV4cG9ydCBjb25zdCBTVEFURV9TWU1CT0xfTUVUQURBVEEgPSBTeW1ib2woJyRzdGF0ZSBtZXRhZGF0YScpO1xuZXhwb3J0IGNvbnN0IExFR0FDWV9QUk9QUyA9IFN5bWJvbCgnbGVnYWN5IHByb3BzJyk7XG5leHBvcnQgY29uc3QgTE9BRElOR19BVFRSX1NZTUJPTCA9IFN5bWJvbCgnJyk7XG4iLCAiLyoqIEBpbXBvcnQgeyBFcXVhbHMgfSBmcm9tICcjY2xpZW50JyAqL1xuLyoqIEB0eXBlIHtFcXVhbHN9ICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKHZhbHVlKSB7XG5cdHJldHVybiB2YWx1ZSA9PT0gdGhpcy52O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7dW5rbm93bn0gYVxuICogQHBhcmFtIHt1bmtub3dufSBiXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhZmVfbm90X2VxdWFsKGEsIGIpIHtcblx0cmV0dXJuIGEgIT0gYVxuXHRcdD8gYiA9PSBiXG5cdFx0OiBhICE9PSBiIHx8IChhICE9PSBudWxsICYmIHR5cGVvZiBhID09PSAnb2JqZWN0JykgfHwgdHlwZW9mIGEgPT09ICdmdW5jdGlvbic7XG59XG5cbi8qKlxuICogQHBhcmFtIHt1bmtub3dufSBhXG4gKiBAcGFyYW0ge3Vua25vd259IGJcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gbm90X2VxdWFsKGEsIGIpIHtcblx0cmV0dXJuIGEgIT09IGI7XG59XG5cbi8qKiBAdHlwZSB7RXF1YWxzfSAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhZmVfZXF1YWxzKHZhbHVlKSB7XG5cdHJldHVybiAhc2FmZV9ub3RfZXF1YWwodmFsdWUsIHRoaXMudik7XG59XG4iLCAiLyogVGhpcyBmaWxlIGlzIGdlbmVyYXRlZCBieSBzY3JpcHRzL3Byb2Nlc3MtbWVzc2FnZXMvaW5kZXguanMuIERvIG5vdCBlZGl0ISAqL1xuXG5pbXBvcnQgeyBERVYgfSBmcm9tICdlc20tZW52JztcblxuLyoqXG4gKiBVc2luZyBgYmluZDp2YWx1ZWAgdG9nZXRoZXIgd2l0aCBhIGNoZWNrYm94IGlucHV0IGlzIG5vdCBhbGxvd2VkLiBVc2UgYGJpbmQ6Y2hlY2tlZGAgaW5zdGVhZFxuICogQHJldHVybnMge25ldmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluZF9pbnZhbGlkX2NoZWNrYm94X3ZhbHVlKCkge1xuXHRpZiAoREVWKSB7XG5cdFx0Y29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYGJpbmRfaW52YWxpZF9jaGVja2JveF92YWx1ZVxcblVzaW5nIFxcYGJpbmQ6dmFsdWVcXGAgdG9nZXRoZXIgd2l0aCBhIGNoZWNrYm94IGlucHV0IGlzIG5vdCBhbGxvd2VkLiBVc2UgXFxgYmluZDpjaGVja2VkXFxgIGluc3RlYWRcXG5odHRwczovL3N2ZWx0ZS5kZXYvZS9iaW5kX2ludmFsaWRfY2hlY2tib3hfdmFsdWVgKTtcblxuXHRcdGVycm9yLm5hbWUgPSAnU3ZlbHRlIGVycm9yJztcblx0XHR0aHJvdyBlcnJvcjtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYGh0dHBzOi8vc3ZlbHRlLmRldi9lL2JpbmRfaW52YWxpZF9jaGVja2JveF92YWx1ZWApO1xuXHR9XG59XG5cbi8qKlxuICogQ29tcG9uZW50ICVjb21wb25lbnQlIGhhcyBhbiBleHBvcnQgbmFtZWQgYCVrZXklYCB0aGF0IGEgY29uc3VtZXIgY29tcG9uZW50IGlzIHRyeWluZyB0byBhY2Nlc3MgdXNpbmcgYGJpbmQ6JWtleSVgLCB3aGljaCBpcyBkaXNhbGxvd2VkLiBJbnN0ZWFkLCB1c2UgYGJpbmQ6dGhpc2AgKGUuZy4gYDwlbmFtZSUgYmluZDp0aGlzPXtjb21wb25lbnR9IC8+YCkgYW5kIHRoZW4gYWNjZXNzIHRoZSBwcm9wZXJ0eSBvbiB0aGUgYm91bmQgY29tcG9uZW50IGluc3RhbmNlIChlLmcuIGBjb21wb25lbnQuJWtleSVgKVxuICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudFxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqIEByZXR1cm5zIHtuZXZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJpbmRfaW52YWxpZF9leHBvcnQoY29tcG9uZW50LCBrZXksIG5hbWUpIHtcblx0aWYgKERFVikge1xuXHRcdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBiaW5kX2ludmFsaWRfZXhwb3J0XFxuQ29tcG9uZW50ICR7Y29tcG9uZW50fSBoYXMgYW4gZXhwb3J0IG5hbWVkIFxcYCR7a2V5fVxcYCB0aGF0IGEgY29uc3VtZXIgY29tcG9uZW50IGlzIHRyeWluZyB0byBhY2Nlc3MgdXNpbmcgXFxgYmluZDoke2tleX1cXGAsIHdoaWNoIGlzIGRpc2FsbG93ZWQuIEluc3RlYWQsIHVzZSBcXGBiaW5kOnRoaXNcXGAgKGUuZy4gXFxgPCR7bmFtZX0gYmluZDp0aGlzPXtjb21wb25lbnR9IC8+XFxgKSBhbmQgdGhlbiBhY2Nlc3MgdGhlIHByb3BlcnR5IG9uIHRoZSBib3VuZCBjb21wb25lbnQgaW5zdGFuY2UgKGUuZy4gXFxgY29tcG9uZW50LiR7a2V5fVxcYClcXG5odHRwczovL3N2ZWx0ZS5kZXYvZS9iaW5kX2ludmFsaWRfZXhwb3J0YCk7XG5cblx0XHRlcnJvci5uYW1lID0gJ1N2ZWx0ZSBlcnJvcic7XG5cdFx0dGhyb3cgZXJyb3I7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9iaW5kX2ludmFsaWRfZXhwb3J0YCk7XG5cdH1cbn1cblxuLyoqXG4gKiBBIGNvbXBvbmVudCBpcyBhdHRlbXB0aW5nIHRvIGJpbmQgdG8gYSBub24tYmluZGFibGUgcHJvcGVydHkgYCVrZXklYCBiZWxvbmdpbmcgdG8gJWNvbXBvbmVudCUgKGkuZS4gYDwlbmFtZSUgYmluZDola2V5JT17Li4ufT5gKS4gVG8gbWFyayBhIHByb3BlcnR5IGFzIGJpbmRhYmxlOiBgbGV0IHsgJWtleSUgPSAkYmluZGFibGUoKSB9ID0gJHByb3BzKClgXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHJldHVybnMge25ldmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluZF9ub3RfYmluZGFibGUoa2V5LCBjb21wb25lbnQsIG5hbWUpIHtcblx0aWYgKERFVikge1xuXHRcdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBiaW5kX25vdF9iaW5kYWJsZVxcbkEgY29tcG9uZW50IGlzIGF0dGVtcHRpbmcgdG8gYmluZCB0byBhIG5vbi1iaW5kYWJsZSBwcm9wZXJ0eSBcXGAke2tleX1cXGAgYmVsb25naW5nIHRvICR7Y29tcG9uZW50fSAoaS5lLiBcXGA8JHtuYW1lfSBiaW5kOiR7a2V5fT17Li4ufT5cXGApLiBUbyBtYXJrIGEgcHJvcGVydHkgYXMgYmluZGFibGU6IFxcYGxldCB7ICR7a2V5fSA9ICRiaW5kYWJsZSgpIH0gPSAkcHJvcHMoKVxcYFxcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL2JpbmRfbm90X2JpbmRhYmxlYCk7XG5cblx0XHRlcnJvci5uYW1lID0gJ1N2ZWx0ZSBlcnJvcic7XG5cdFx0dGhyb3cgZXJyb3I7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9iaW5kX25vdF9iaW5kYWJsZWApO1xuXHR9XG59XG5cbi8qKlxuICogJXBhcmVudCUgY2FsbGVkIGAlbWV0aG9kJWAgb24gYW4gaW5zdGFuY2Ugb2YgJWNvbXBvbmVudCUsIHdoaWNoIGlzIG5vIGxvbmdlciB2YWxpZCBpbiBTdmVsdGUgNS4gU2VlIGh0dHBzOi8vc3ZlbHRlLmRldi9kb2NzL3N2ZWx0ZS92NS1taWdyYXRpb24tZ3VpZGUjQ29tcG9uZW50cy1hcmUtbm8tbG9uZ2VyLWNsYXNzZXMgZm9yIG1vcmUgaW5mb3JtYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRcbiAqIEByZXR1cm5zIHtuZXZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBvbmVudF9hcGlfY2hhbmdlZChwYXJlbnQsIG1ldGhvZCwgY29tcG9uZW50KSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgY29tcG9uZW50X2FwaV9jaGFuZ2VkXFxuJHtwYXJlbnR9IGNhbGxlZCBcXGAke21ldGhvZH1cXGAgb24gYW4gaW5zdGFuY2Ugb2YgJHtjb21wb25lbnR9LCB3aGljaCBpcyBubyBsb25nZXIgdmFsaWQgaW4gU3ZlbHRlIDUuIFNlZSBodHRwczovL3N2ZWx0ZS5kZXYvZG9jcy9zdmVsdGUvdjUtbWlncmF0aW9uLWd1aWRlI0NvbXBvbmVudHMtYXJlLW5vLWxvbmdlci1jbGFzc2VzIGZvciBtb3JlIGluZm9ybWF0aW9uXFxuaHR0cHM6Ly9zdmVsdGUuZGV2L2UvY29tcG9uZW50X2FwaV9jaGFuZ2VkYCk7XG5cblx0XHRlcnJvci5uYW1lID0gJ1N2ZWx0ZSBlcnJvcic7XG5cdFx0dGhyb3cgZXJyb3I7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9jb21wb25lbnRfYXBpX2NoYW5nZWRgKTtcblx0fVxufVxuXG4vKipcbiAqIEF0dGVtcHRlZCB0byBpbnN0YW50aWF0ZSAlY29tcG9uZW50JSB3aXRoIGBuZXcgJW5hbWUlYCwgd2hpY2ggaXMgbm8gbG9uZ2VyIHZhbGlkIGluIFN2ZWx0ZSA1LiBJZiB0aGlzIGNvbXBvbmVudCBpcyBub3QgdW5kZXIgeW91ciBjb250cm9sLCBzZXQgdGhlIGBjb21wYXRpYmlsaXR5LmNvbXBvbmVudEFwaWAgY29tcGlsZXIgb3B0aW9uIHRvIGA0YCB0byBrZWVwIGl0IHdvcmtpbmcuIFNlZSBodHRwczovL3N2ZWx0ZS5kZXYvZG9jcy9zdmVsdGUvdjUtbWlncmF0aW9uLWd1aWRlI0NvbXBvbmVudHMtYXJlLW5vLWxvbmdlci1jbGFzc2VzIGZvciBtb3JlIGluZm9ybWF0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHJldHVybnMge25ldmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9uZW50X2FwaV9pbnZhbGlkX25ldyhjb21wb25lbnQsIG5hbWUpIHtcblx0aWYgKERFVikge1xuXHRcdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBjb21wb25lbnRfYXBpX2ludmFsaWRfbmV3XFxuQXR0ZW1wdGVkIHRvIGluc3RhbnRpYXRlICR7Y29tcG9uZW50fSB3aXRoIFxcYG5ldyAke25hbWV9XFxgLCB3aGljaCBpcyBubyBsb25nZXIgdmFsaWQgaW4gU3ZlbHRlIDUuIElmIHRoaXMgY29tcG9uZW50IGlzIG5vdCB1bmRlciB5b3VyIGNvbnRyb2wsIHNldCB0aGUgXFxgY29tcGF0aWJpbGl0eS5jb21wb25lbnRBcGlcXGAgY29tcGlsZXIgb3B0aW9uIHRvIFxcYDRcXGAgdG8ga2VlcCBpdCB3b3JraW5nLiBTZWUgaHR0cHM6Ly9zdmVsdGUuZGV2L2RvY3Mvc3ZlbHRlL3Y1LW1pZ3JhdGlvbi1ndWlkZSNDb21wb25lbnRzLWFyZS1uby1sb25nZXItY2xhc3NlcyBmb3IgbW9yZSBpbmZvcm1hdGlvblxcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL2NvbXBvbmVudF9hcGlfaW52YWxpZF9uZXdgKTtcblxuXHRcdGVycm9yLm5hbWUgPSAnU3ZlbHRlIGVycm9yJztcblx0XHR0aHJvdyBlcnJvcjtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYGh0dHBzOi8vc3ZlbHRlLmRldi9lL2NvbXBvbmVudF9hcGlfaW52YWxpZF9uZXdgKTtcblx0fVxufVxuXG4vKipcbiAqIEEgZGVyaXZlZCB2YWx1ZSBjYW5ub3QgcmVmZXJlbmNlIGl0c2VsZiByZWN1cnNpdmVseVxuICogQHJldHVybnMge25ldmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVyaXZlZF9yZWZlcmVuY2VzX3NlbGYoKSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgZGVyaXZlZF9yZWZlcmVuY2VzX3NlbGZcXG5BIGRlcml2ZWQgdmFsdWUgY2Fubm90IHJlZmVyZW5jZSBpdHNlbGYgcmVjdXJzaXZlbHlcXG5odHRwczovL3N2ZWx0ZS5kZXYvZS9kZXJpdmVkX3JlZmVyZW5jZXNfc2VsZmApO1xuXG5cdFx0ZXJyb3IubmFtZSA9ICdTdmVsdGUgZXJyb3InO1xuXHRcdHRocm93IGVycm9yO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihgaHR0cHM6Ly9zdmVsdGUuZGV2L2UvZGVyaXZlZF9yZWZlcmVuY2VzX3NlbGZgKTtcblx0fVxufVxuXG4vKipcbiAqIEtleWVkIGVhY2ggYmxvY2sgaGFzIGR1cGxpY2F0ZSBrZXkgYCV2YWx1ZSVgIGF0IGluZGV4ZXMgJWElIGFuZCAlYiVcbiAqIEBwYXJhbSB7c3RyaW5nfSBhXG4gKiBAcGFyYW0ge3N0cmluZ30gYlxuICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsfSBbdmFsdWVdXG4gKiBAcmV0dXJucyB7bmV2ZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlYWNoX2tleV9kdXBsaWNhdGUoYSwgYiwgdmFsdWUpIHtcblx0aWYgKERFVikge1xuXHRcdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBlYWNoX2tleV9kdXBsaWNhdGVcXG4ke3ZhbHVlID8gYEtleWVkIGVhY2ggYmxvY2sgaGFzIGR1cGxpY2F0ZSBrZXkgXFxgJHt2YWx1ZX1cXGAgYXQgaW5kZXhlcyAke2F9IGFuZCAke2J9YCA6IGBLZXllZCBlYWNoIGJsb2NrIGhhcyBkdXBsaWNhdGUga2V5IGF0IGluZGV4ZXMgJHthfSBhbmQgJHtifWB9XFxuaHR0cHM6Ly9zdmVsdGUuZGV2L2UvZWFjaF9rZXlfZHVwbGljYXRlYCk7XG5cblx0XHRlcnJvci5uYW1lID0gJ1N2ZWx0ZSBlcnJvcic7XG5cdFx0dGhyb3cgZXJyb3I7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9lYWNoX2tleV9kdXBsaWNhdGVgKTtcblx0fVxufVxuXG4vKipcbiAqIGAlcnVuZSVgIGNhbm5vdCBiZSB1c2VkIGluc2lkZSBhbiBlZmZlY3QgY2xlYW51cCBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IHJ1bmVcbiAqIEByZXR1cm5zIHtuZXZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVmZmVjdF9pbl90ZWFyZG93bihydW5lKSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgZWZmZWN0X2luX3RlYXJkb3duXFxuXFxgJHtydW5lfVxcYCBjYW5ub3QgYmUgdXNlZCBpbnNpZGUgYW4gZWZmZWN0IGNsZWFudXAgZnVuY3Rpb25cXG5odHRwczovL3N2ZWx0ZS5kZXYvZS9lZmZlY3RfaW5fdGVhcmRvd25gKTtcblxuXHRcdGVycm9yLm5hbWUgPSAnU3ZlbHRlIGVycm9yJztcblx0XHR0aHJvdyBlcnJvcjtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYGh0dHBzOi8vc3ZlbHRlLmRldi9lL2VmZmVjdF9pbl90ZWFyZG93bmApO1xuXHR9XG59XG5cbi8qKlxuICogRWZmZWN0IGNhbm5vdCBiZSBjcmVhdGVkIGluc2lkZSBhIGAkZGVyaXZlZGAgdmFsdWUgdGhhdCB3YXMgbm90IGl0c2VsZiBjcmVhdGVkIGluc2lkZSBhbiBlZmZlY3RcbiAqIEByZXR1cm5zIHtuZXZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVmZmVjdF9pbl91bm93bmVkX2Rlcml2ZWQoKSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgZWZmZWN0X2luX3Vub3duZWRfZGVyaXZlZFxcbkVmZmVjdCBjYW5ub3QgYmUgY3JlYXRlZCBpbnNpZGUgYSBcXGAkZGVyaXZlZFxcYCB2YWx1ZSB0aGF0IHdhcyBub3QgaXRzZWxmIGNyZWF0ZWQgaW5zaWRlIGFuIGVmZmVjdFxcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL2VmZmVjdF9pbl91bm93bmVkX2Rlcml2ZWRgKTtcblxuXHRcdGVycm9yLm5hbWUgPSAnU3ZlbHRlIGVycm9yJztcblx0XHR0aHJvdyBlcnJvcjtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYGh0dHBzOi8vc3ZlbHRlLmRldi9lL2VmZmVjdF9pbl91bm93bmVkX2Rlcml2ZWRgKTtcblx0fVxufVxuXG4vKipcbiAqIGAlcnVuZSVgIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIGFuIGVmZmVjdCAoZS5nLiBkdXJpbmcgY29tcG9uZW50IGluaXRpYWxpc2F0aW9uKVxuICogQHBhcmFtIHtzdHJpbmd9IHJ1bmVcbiAqIEByZXR1cm5zIHtuZXZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVmZmVjdF9vcnBoYW4ocnVuZSkge1xuXHRpZiAoREVWKSB7XG5cdFx0Y29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYGVmZmVjdF9vcnBoYW5cXG5cXGAke3J1bmV9XFxgIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIGFuIGVmZmVjdCAoZS5nLiBkdXJpbmcgY29tcG9uZW50IGluaXRpYWxpc2F0aW9uKVxcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL2VmZmVjdF9vcnBoYW5gKTtcblxuXHRcdGVycm9yLm5hbWUgPSAnU3ZlbHRlIGVycm9yJztcblx0XHR0aHJvdyBlcnJvcjtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYGh0dHBzOi8vc3ZlbHRlLmRldi9lL2VmZmVjdF9vcnBoYW5gKTtcblx0fVxufVxuXG4vKipcbiAqIE1heGltdW0gdXBkYXRlIGRlcHRoIGV4Y2VlZGVkLiBUaGlzIGNhbiBoYXBwZW4gd2hlbiBhIHJlYWN0aXZlIGJsb2NrIG9yIGVmZmVjdCByZXBlYXRlZGx5IHNldHMgYSBuZXcgdmFsdWUuIFN2ZWx0ZSBsaW1pdHMgdGhlIG51bWJlciBvZiBuZXN0ZWQgdXBkYXRlcyB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzXG4gKiBAcmV0dXJucyB7bmV2ZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlZmZlY3RfdXBkYXRlX2RlcHRoX2V4Y2VlZGVkKCkge1xuXHRpZiAoREVWKSB7XG5cdFx0Y29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYGVmZmVjdF91cGRhdGVfZGVwdGhfZXhjZWVkZWRcXG5NYXhpbXVtIHVwZGF0ZSBkZXB0aCBleGNlZWRlZC4gVGhpcyBjYW4gaGFwcGVuIHdoZW4gYSByZWFjdGl2ZSBibG9jayBvciBlZmZlY3QgcmVwZWF0ZWRseSBzZXRzIGEgbmV3IHZhbHVlLiBTdmVsdGUgbGltaXRzIHRoZSBudW1iZXIgb2YgbmVzdGVkIHVwZGF0ZXMgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL2VmZmVjdF91cGRhdGVfZGVwdGhfZXhjZWVkZWRgKTtcblxuXHRcdGVycm9yLm5hbWUgPSAnU3ZlbHRlIGVycm9yJztcblx0XHR0aHJvdyBlcnJvcjtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYGh0dHBzOi8vc3ZlbHRlLmRldi9lL2VmZmVjdF91cGRhdGVfZGVwdGhfZXhjZWVkZWRgKTtcblx0fVxufVxuXG4vKipcbiAqIEZhaWxlZCB0byBoeWRyYXRlIHRoZSBhcHBsaWNhdGlvblxuICogQHJldHVybnMge25ldmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gaHlkcmF0aW9uX2ZhaWxlZCgpIHtcblx0aWYgKERFVikge1xuXHRcdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBoeWRyYXRpb25fZmFpbGVkXFxuRmFpbGVkIHRvIGh5ZHJhdGUgdGhlIGFwcGxpY2F0aW9uXFxuaHR0cHM6Ly9zdmVsdGUuZGV2L2UvaHlkcmF0aW9uX2ZhaWxlZGApO1xuXG5cdFx0ZXJyb3IubmFtZSA9ICdTdmVsdGUgZXJyb3InO1xuXHRcdHRocm93IGVycm9yO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihgaHR0cHM6Ly9zdmVsdGUuZGV2L2UvaHlkcmF0aW9uX2ZhaWxlZGApO1xuXHR9XG59XG5cbi8qKlxuICogQ291bGQgbm90IGB7QHJlbmRlcn1gIHNuaXBwZXQgZHVlIHRvIHRoZSBleHByZXNzaW9uIGJlaW5nIGBudWxsYCBvciBgdW5kZWZpbmVkYC4gQ29uc2lkZXIgdXNpbmcgb3B0aW9uYWwgY2hhaW5pbmcgYHtAcmVuZGVyIHNuaXBwZXQ/LigpfWBcbiAqIEByZXR1cm5zIHtuZXZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWRfc25pcHBldCgpIHtcblx0aWYgKERFVikge1xuXHRcdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBpbnZhbGlkX3NuaXBwZXRcXG5Db3VsZCBub3QgXFxge0ByZW5kZXJ9XFxgIHNuaXBwZXQgZHVlIHRvIHRoZSBleHByZXNzaW9uIGJlaW5nIFxcYG51bGxcXGAgb3IgXFxgdW5kZWZpbmVkXFxgLiBDb25zaWRlciB1c2luZyBvcHRpb25hbCBjaGFpbmluZyBcXGB7QHJlbmRlciBzbmlwcGV0Py4oKX1cXGBcXG5odHRwczovL3N2ZWx0ZS5kZXYvZS9pbnZhbGlkX3NuaXBwZXRgKTtcblxuXHRcdGVycm9yLm5hbWUgPSAnU3ZlbHRlIGVycm9yJztcblx0XHR0aHJvdyBlcnJvcjtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYGh0dHBzOi8vc3ZlbHRlLmRldi9lL2ludmFsaWRfc25pcHBldGApO1xuXHR9XG59XG5cbi8qKlxuICogYCVuYW1lJSguLi4pYCBjYW5ub3QgYmUgdXNlZCBpbiBydW5lcyBtb2RlXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHJldHVybnMge25ldmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlmZWN5Y2xlX2xlZ2FjeV9vbmx5KG5hbWUpIHtcblx0aWYgKERFVikge1xuXHRcdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBsaWZlY3ljbGVfbGVnYWN5X29ubHlcXG5cXGAke25hbWV9KC4uLilcXGAgY2Fubm90IGJlIHVzZWQgaW4gcnVuZXMgbW9kZVxcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL2xpZmVjeWNsZV9sZWdhY3lfb25seWApO1xuXG5cdFx0ZXJyb3IubmFtZSA9ICdTdmVsdGUgZXJyb3InO1xuXHRcdHRocm93IGVycm9yO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihgaHR0cHM6Ly9zdmVsdGUuZGV2L2UvbGlmZWN5Y2xlX2xlZ2FjeV9vbmx5YCk7XG5cdH1cbn1cblxuLyoqXG4gKiBDYW5ub3QgZG8gYGJpbmQ6JWtleSU9e3VuZGVmaW5lZH1gIHdoZW4gYCVrZXklYCBoYXMgYSBmYWxsYmFjayB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICogQHJldHVybnMge25ldmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvcHNfaW52YWxpZF92YWx1ZShrZXkpIHtcblx0aWYgKERFVikge1xuXHRcdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBwcm9wc19pbnZhbGlkX3ZhbHVlXFxuQ2Fubm90IGRvIFxcYGJpbmQ6JHtrZXl9PXt1bmRlZmluZWR9XFxgIHdoZW4gXFxgJHtrZXl9XFxgIGhhcyBhIGZhbGxiYWNrIHZhbHVlXFxuaHR0cHM6Ly9zdmVsdGUuZGV2L2UvcHJvcHNfaW52YWxpZF92YWx1ZWApO1xuXG5cdFx0ZXJyb3IubmFtZSA9ICdTdmVsdGUgZXJyb3InO1xuXHRcdHRocm93IGVycm9yO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihgaHR0cHM6Ly9zdmVsdGUuZGV2L2UvcHJvcHNfaW52YWxpZF92YWx1ZWApO1xuXHR9XG59XG5cbi8qKlxuICogUmVzdCBlbGVtZW50IHByb3BlcnRpZXMgb2YgYCRwcm9wcygpYCBzdWNoIGFzIGAlcHJvcGVydHklYCBhcmUgcmVhZG9ubHlcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICogQHJldHVybnMge25ldmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvcHNfcmVzdF9yZWFkb25seShwcm9wZXJ0eSkge1xuXHRpZiAoREVWKSB7XG5cdFx0Y29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYHByb3BzX3Jlc3RfcmVhZG9ubHlcXG5SZXN0IGVsZW1lbnQgcHJvcGVydGllcyBvZiBcXGAkcHJvcHMoKVxcYCBzdWNoIGFzIFxcYCR7cHJvcGVydHl9XFxgIGFyZSByZWFkb25seVxcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL3Byb3BzX3Jlc3RfcmVhZG9ubHlgKTtcblxuXHRcdGVycm9yLm5hbWUgPSAnU3ZlbHRlIGVycm9yJztcblx0XHR0aHJvdyBlcnJvcjtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYGh0dHBzOi8vc3ZlbHRlLmRldi9lL3Byb3BzX3Jlc3RfcmVhZG9ubHlgKTtcblx0fVxufVxuXG4vKipcbiAqIFRoZSBgJXJ1bmUlYCBydW5lIGlzIG9ubHkgYXZhaWxhYmxlIGluc2lkZSBgLnN2ZWx0ZWAgYW5kIGAuc3ZlbHRlLmpzL3RzYCBmaWxlc1xuICogQHBhcmFtIHtzdHJpbmd9IHJ1bmVcbiAqIEByZXR1cm5zIHtuZXZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJ1bmVfb3V0c2lkZV9zdmVsdGUocnVuZSkge1xuXHRpZiAoREVWKSB7XG5cdFx0Y29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYHJ1bmVfb3V0c2lkZV9zdmVsdGVcXG5UaGUgXFxgJHtydW5lfVxcYCBydW5lIGlzIG9ubHkgYXZhaWxhYmxlIGluc2lkZSBcXGAuc3ZlbHRlXFxgIGFuZCBcXGAuc3ZlbHRlLmpzL3RzXFxgIGZpbGVzXFxuaHR0cHM6Ly9zdmVsdGUuZGV2L2UvcnVuZV9vdXRzaWRlX3N2ZWx0ZWApO1xuXG5cdFx0ZXJyb3IubmFtZSA9ICdTdmVsdGUgZXJyb3InO1xuXHRcdHRocm93IGVycm9yO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihgaHR0cHM6Ly9zdmVsdGUuZGV2L2UvcnVuZV9vdXRzaWRlX3N2ZWx0ZWApO1xuXHR9XG59XG5cbi8qKlxuICogUHJvcGVydHkgZGVzY3JpcHRvcnMgZGVmaW5lZCBvbiBgJHN0YXRlYCBvYmplY3RzIG11c3QgY29udGFpbiBgdmFsdWVgIGFuZCBhbHdheXMgYmUgYGVudW1lcmFibGVgLCBgY29uZmlndXJhYmxlYCBhbmQgYHdyaXRhYmxlYC5cbiAqIEByZXR1cm5zIHtuZXZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXRlX2Rlc2NyaXB0b3JzX2ZpeGVkKCkge1xuXHRpZiAoREVWKSB7XG5cdFx0Y29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYHN0YXRlX2Rlc2NyaXB0b3JzX2ZpeGVkXFxuUHJvcGVydHkgZGVzY3JpcHRvcnMgZGVmaW5lZCBvbiBcXGAkc3RhdGVcXGAgb2JqZWN0cyBtdXN0IGNvbnRhaW4gXFxgdmFsdWVcXGAgYW5kIGFsd2F5cyBiZSBcXGBlbnVtZXJhYmxlXFxgLCBcXGBjb25maWd1cmFibGVcXGAgYW5kIFxcYHdyaXRhYmxlXFxgLlxcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL3N0YXRlX2Rlc2NyaXB0b3JzX2ZpeGVkYCk7XG5cblx0XHRlcnJvci5uYW1lID0gJ1N2ZWx0ZSBlcnJvcic7XG5cdFx0dGhyb3cgZXJyb3I7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9zdGF0ZV9kZXNjcmlwdG9yc19maXhlZGApO1xuXHR9XG59XG5cbi8qKlxuICogQ2Fubm90IHNldCBwcm90b3R5cGUgb2YgYCRzdGF0ZWAgb2JqZWN0XG4gKiBAcmV0dXJucyB7bmV2ZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGF0ZV9wcm90b3R5cGVfZml4ZWQoKSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgc3RhdGVfcHJvdG90eXBlX2ZpeGVkXFxuQ2Fubm90IHNldCBwcm90b3R5cGUgb2YgXFxgJHN0YXRlXFxgIG9iamVjdFxcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL3N0YXRlX3Byb3RvdHlwZV9maXhlZGApO1xuXG5cdFx0ZXJyb3IubmFtZSA9ICdTdmVsdGUgZXJyb3InO1xuXHRcdHRocm93IGVycm9yO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihgaHR0cHM6Ly9zdmVsdGUuZGV2L2Uvc3RhdGVfcHJvdG90eXBlX2ZpeGVkYCk7XG5cdH1cbn1cblxuLyoqXG4gKiBSZWFkaW5nIHN0YXRlIHRoYXQgd2FzIGNyZWF0ZWQgaW5zaWRlIHRoZSBzYW1lIGRlcml2ZWQgaXMgZm9yYmlkZGVuLiBDb25zaWRlciB1c2luZyBgdW50cmFja2AgdG8gcmVhZCBsb2NhbGx5IGNyZWF0ZWQgc3RhdGVcbiAqIEByZXR1cm5zIHtuZXZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXRlX3Vuc2FmZV9sb2NhbF9yZWFkKCkge1xuXHRpZiAoREVWKSB7XG5cdFx0Y29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYHN0YXRlX3Vuc2FmZV9sb2NhbF9yZWFkXFxuUmVhZGluZyBzdGF0ZSB0aGF0IHdhcyBjcmVhdGVkIGluc2lkZSB0aGUgc2FtZSBkZXJpdmVkIGlzIGZvcmJpZGRlbi4gQ29uc2lkZXIgdXNpbmcgXFxgdW50cmFja1xcYCB0byByZWFkIGxvY2FsbHkgY3JlYXRlZCBzdGF0ZVxcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL3N0YXRlX3Vuc2FmZV9sb2NhbF9yZWFkYCk7XG5cblx0XHRlcnJvci5uYW1lID0gJ1N2ZWx0ZSBlcnJvcic7XG5cdFx0dGhyb3cgZXJyb3I7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9zdGF0ZV91bnNhZmVfbG9jYWxfcmVhZGApO1xuXHR9XG59XG5cbi8qKlxuICogVXBkYXRpbmcgc3RhdGUgaW5zaWRlIGEgZGVyaXZlZCBvciBhIHRlbXBsYXRlIGV4cHJlc3Npb24gaXMgZm9yYmlkZGVuLiBJZiB0aGUgdmFsdWUgc2hvdWxkIG5vdCBiZSByZWFjdGl2ZSwgZGVjbGFyZSBpdCB3aXRob3V0IGAkc3RhdGVgXG4gKiBAcmV0dXJucyB7bmV2ZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGF0ZV91bnNhZmVfbXV0YXRpb24oKSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgc3RhdGVfdW5zYWZlX211dGF0aW9uXFxuVXBkYXRpbmcgc3RhdGUgaW5zaWRlIGEgZGVyaXZlZCBvciBhIHRlbXBsYXRlIGV4cHJlc3Npb24gaXMgZm9yYmlkZGVuLiBJZiB0aGUgdmFsdWUgc2hvdWxkIG5vdCBiZSByZWFjdGl2ZSwgZGVjbGFyZSBpdCB3aXRob3V0IFxcYCRzdGF0ZVxcYFxcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL3N0YXRlX3Vuc2FmZV9tdXRhdGlvbmApO1xuXG5cdFx0ZXJyb3IubmFtZSA9ICdTdmVsdGUgZXJyb3InO1xuXHRcdHRocm93IGVycm9yO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihgaHR0cHM6Ly9zdmVsdGUuZGV2L2Uvc3RhdGVfdW5zYWZlX211dGF0aW9uYCk7XG5cdH1cbn0iLCAiLyoqIEBpbXBvcnQgeyBEZXJpdmVkLCBSZWFjdGlvbiwgU2lnbmFsLCBWYWx1ZSB9IGZyb20gJyNjbGllbnQnICovXG5pbXBvcnQgeyBVTklOSVRJQUxJWkVEIH0gZnJvbSAnLi4vLi4vLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IHNuYXBzaG90IH0gZnJvbSAnLi4vLi4vc2hhcmVkL2Nsb25lLmpzJztcbmltcG9ydCB7IGRlZmluZV9wcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5pbXBvcnQgeyBERVJJVkVELCBTVEFURV9TWU1CT0wgfSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgZWZmZWN0X3RyYWNraW5nIH0gZnJvbSAnLi4vcmVhY3Rpdml0eS9lZmZlY3RzLmpzJztcbmltcG9ydCB7IGFjdGl2ZV9yZWFjdGlvbiwgY2FwdHVyZWRfc2lnbmFscywgc2V0X2NhcHR1cmVkX3NpZ25hbHMsIHVudHJhY2sgfSBmcm9tICcuLi9ydW50aW1lLmpzJztcblxuLyoqIEB0eXBlIHsgYW55IH0gKi9cbmV4cG9ydCBsZXQgdHJhY2luZ19leHByZXNzaW9ucyA9IG51bGw7XG5cbi8qKlxuICogQHBhcmFtIHsgVmFsdWUgfSBzaWduYWxcbiAqIEBwYXJhbSB7IHsgcmVhZDogRXJyb3JbXSB9IH0gW2VudHJ5XVxuICovXG5mdW5jdGlvbiBsb2dfZW50cnkoc2lnbmFsLCBlbnRyeSkge1xuXHRjb25zdCBkZWJ1ZyA9IHNpZ25hbC5kZWJ1Zztcblx0Y29uc3QgdmFsdWUgPSBzaWduYWwudjtcblxuXHRpZiAodmFsdWUgPT09IFVOSU5JVElBTElaRUQpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRpZiAoZGVidWcpIHtcblx0XHR2YXIgcHJldmlvdXNfY2FwdHVyZWRfc2lnbmFscyA9IGNhcHR1cmVkX3NpZ25hbHM7XG5cdFx0dmFyIGNhcHR1cmVkID0gbmV3IFNldCgpO1xuXHRcdHNldF9jYXB0dXJlZF9zaWduYWxzKGNhcHR1cmVkKTtcblx0XHR0cnkge1xuXHRcdFx0dW50cmFjaygoKSA9PiB7XG5cdFx0XHRcdGRlYnVnKCk7XG5cdFx0XHR9KTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0c2V0X2NhcHR1cmVkX3NpZ25hbHMocHJldmlvdXNfY2FwdHVyZWRfc2lnbmFscyk7XG5cdFx0fVxuXHRcdGlmIChjYXB0dXJlZC5zaXplID4gMCkge1xuXHRcdFx0Zm9yIChjb25zdCBkZXAgb2YgY2FwdHVyZWQpIHtcblx0XHRcdFx0bG9nX2VudHJ5KGRlcCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9XG5cblx0Y29uc3QgdHlwZSA9IChzaWduYWwuZiAmIERFUklWRUQpICE9PSAwID8gJyRkZXJpdmVkJyA6ICckc3RhdGUnO1xuXHRjb25zdCBjdXJyZW50X3JlYWN0aW9uID0gLyoqIEB0eXBlIHtSZWFjdGlvbn0gKi8gKGFjdGl2ZV9yZWFjdGlvbik7XG5cdGNvbnN0IHN0YXR1cyA9XG5cdFx0c2lnbmFsLnZlcnNpb24gPiBjdXJyZW50X3JlYWN0aW9uLnZlcnNpb24gfHwgY3VycmVudF9yZWFjdGlvbi52ZXJzaW9uID09PSAwID8gJ2RpcnR5JyA6ICdjbGVhbic7XG5cblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblx0Y29uc29sZS5ncm91cENvbGxhcHNlZChcblx0XHRgJWMke3R5cGV9YCxcblx0XHRzdGF0dXMgIT09ICdjbGVhbidcblx0XHRcdD8gJ2NvbG9yOiBDb3JuZmxvd2VyQmx1ZTsgZm9udC13ZWlnaHQ6IGJvbGQnXG5cdFx0XHQ6ICdjb2xvcjogZ3JleTsgZm9udC13ZWlnaHQ6IGJvbGQnLFxuXHRcdHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgU1RBVEVfU1lNQk9MIGluIHZhbHVlID8gc25hcHNob3QodmFsdWUsIHRydWUpIDogdmFsdWVcblx0KTtcblxuXHRpZiAodHlwZSA9PT0gJyRkZXJpdmVkJykge1xuXHRcdGNvbnN0IGRlcHMgPSBuZXcgU2V0KC8qKiBAdHlwZSB7RGVyaXZlZH0gKi8gKHNpZ25hbCkuZGVwcyk7XG5cdFx0Zm9yIChjb25zdCBkZXAgb2YgZGVwcykge1xuXHRcdFx0bG9nX2VudHJ5KGRlcCk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKHNpZ25hbC5jcmVhdGVkKSB7XG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblx0XHRjb25zb2xlLmxvZyhzaWduYWwuY3JlYXRlZCk7XG5cdH1cblxuXHRpZiAoc2lnbmFsLnVwZGF0ZWQpIHtcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXHRcdGNvbnNvbGUubG9nKHNpZ25hbC51cGRhdGVkKTtcblx0fVxuXG5cdGNvbnN0IHJlYWQgPSBlbnRyeT8ucmVhZDtcblxuXHRpZiAocmVhZCAmJiByZWFkLmxlbmd0aCA+IDApIHtcblx0XHRmb3IgKHZhciBzdGFjayBvZiByZWFkKSB7XG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXHRcdFx0Y29uc29sZS5sb2coc3RhY2spO1xuXHRcdH1cblx0fVxuXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5cdGNvbnNvbGUuZ3JvdXBFbmQoKTtcbn1cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHsoKSA9PiBzdHJpbmd9IGxhYmVsXG4gKiBAcGFyYW0geygpID0+IFR9IGZuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFjZShsYWJlbCwgZm4pIHtcblx0dmFyIHByZXZpb3VzbHlfdHJhY2luZ19leHByZXNzaW9ucyA9IHRyYWNpbmdfZXhwcmVzc2lvbnM7XG5cdHRyeSB7XG5cdFx0dHJhY2luZ19leHByZXNzaW9ucyA9IHsgZW50cmllczogbmV3IE1hcCgpLCByZWFjdGlvbjogYWN0aXZlX3JlYWN0aW9uIH07XG5cblx0XHR2YXIgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcblx0XHR2YXIgdmFsdWUgPSBmbigpO1xuXHRcdHZhciB0aW1lID0gKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQpLnRvRml4ZWQoMik7XG5cblx0XHRpZiAoIWVmZmVjdF90cmFja2luZygpKSB7XG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXHRcdFx0Y29uc29sZS5sb2coYCR7bGFiZWwoKX0gJWNyYW4gb3V0c2lkZSBvZiBhbiBlZmZlY3QgKCR7dGltZX1tcylgLCAnY29sb3I6IGdyZXknKTtcblx0XHR9IGVsc2UgaWYgKHRyYWNpbmdfZXhwcmVzc2lvbnMuZW50cmllcy5zaXplID09PSAwKSB7XG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXHRcdFx0Y29uc29sZS5sb2coYCR7bGFiZWwoKX0gJWNubyByZWFjdGl2ZSBkZXBlbmRlbmNpZXMgKCR7dGltZX1tcylgLCAnY29sb3I6IGdyZXknKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblx0XHRcdGNvbnNvbGUuZ3JvdXAoYCR7bGFiZWwoKX0gJWMoJHt0aW1lfW1zKWAsICdjb2xvcjogZ3JleScpO1xuXG5cdFx0XHR2YXIgZW50cmllcyA9IHRyYWNpbmdfZXhwcmVzc2lvbnMuZW50cmllcztcblxuXHRcdFx0dHJhY2luZ19leHByZXNzaW9ucyA9IG51bGw7XG5cblx0XHRcdGZvciAoY29uc3QgW3NpZ25hbCwgZW50cnldIG9mIGVudHJpZXMpIHtcblx0XHRcdFx0bG9nX2VudHJ5KHNpZ25hbCwgZW50cnkpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblx0XHRcdGNvbnNvbGUuZ3JvdXBFbmQoKTtcblx0XHR9XG5cblx0XHRpZiAocHJldmlvdXNseV90cmFjaW5nX2V4cHJlc3Npb25zICE9PSBudWxsKSB7XG5cdFx0XHRmb3IgKGNvbnN0IFtzaWduYWwsIGVudHJ5XSBvZiB0cmFjaW5nX2V4cHJlc3Npb25zLmVudHJpZXMpIHtcblx0XHRcdFx0dmFyIHByZXZfZW50cnkgPSBwcmV2aW91c2x5X3RyYWNpbmdfZXhwcmVzc2lvbnMuZ2V0KHNpZ25hbCk7XG5cblx0XHRcdFx0aWYgKHByZXZfZW50cnkgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHByZXZpb3VzbHlfdHJhY2luZ19leHByZXNzaW9ucy5zZXQoc2lnbmFsLCBlbnRyeSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cHJldl9lbnRyeS5yZWFkLnB1c2goLi4uZW50cnkucmVhZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH0gZmluYWxseSB7XG5cdFx0dHJhY2luZ19leHByZXNzaW9ucyA9IHByZXZpb3VzbHlfdHJhY2luZ19leHByZXNzaW9ucztcblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBsYWJlbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0X3N0YWNrKGxhYmVsKSB7XG5cdGxldCBlcnJvciA9IEVycm9yKCk7XG5cdGNvbnN0IHN0YWNrID0gZXJyb3Iuc3RhY2s7XG5cblx0aWYgKHN0YWNrKSB7XG5cdFx0Y29uc3QgbGluZXMgPSBzdGFjay5zcGxpdCgnXFxuJyk7XG5cdFx0Y29uc3QgbmV3X2xpbmVzID0gWydcXG4nXTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcblxuXHRcdFx0aWYgKGxpbmUgPT09ICdFcnJvcicpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAobGluZS5pbmNsdWRlcygndmFsaWRhdGVfZWFjaF9rZXlzJykpIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0XHRpZiAobGluZS5pbmNsdWRlcygnc3ZlbHRlL3NyYy9pbnRlcm5hbCcpKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0bmV3X2xpbmVzLnB1c2gobGluZSk7XG5cdFx0fVxuXG5cdFx0aWYgKG5ld19saW5lcy5sZW5ndGggPT09IDEpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdGRlZmluZV9wcm9wZXJ0eShlcnJvciwgJ3N0YWNrJywge1xuXHRcdFx0dmFsdWU6IG5ld19saW5lcy5qb2luKCdcXG4nKVxuXHRcdH0pO1xuXG5cdFx0ZGVmaW5lX3Byb3BlcnR5KGVycm9yLCAnbmFtZScsIHtcblx0XHRcdC8vICdFcnJvcicgc3VmZml4IGlzIHJlcXVpcmVkIGZvciBzdGFjayB0cmFjZXMgdG8gYmUgcmVuZGVyZWQgcHJvcGVybHlcblx0XHRcdHZhbHVlOiBgJHtsYWJlbH1FcnJvcmBcblx0XHR9KTtcblx0fVxuXHRyZXR1cm4gZXJyb3I7XG59XG4iLCAiLyoqIEBpbXBvcnQgeyBEZXJpdmVkLCBFZmZlY3QsIFJlYWN0aW9uLCBTb3VyY2UsIFZhbHVlIH0gZnJvbSAnI2NsaWVudCcgKi9cbmltcG9ydCB7IERFViB9IGZyb20gJ2VzbS1lbnYnO1xuaW1wb3J0IHtcblx0Y29tcG9uZW50X2NvbnRleHQsXG5cdGFjdGl2ZV9yZWFjdGlvbixcblx0bmV3X2RlcHMsXG5cdGFjdGl2ZV9lZmZlY3QsXG5cdHVudHJhY2tlZF93cml0ZXMsXG5cdGdldCxcblx0aXNfcnVuZXMsXG5cdHNjaGVkdWxlX2VmZmVjdCxcblx0c2V0X3VudHJhY2tlZF93cml0ZXMsXG5cdHNldF9zaWduYWxfc3RhdHVzLFxuXHR1bnRyYWNrLFxuXHRpbmNyZW1lbnRfdmVyc2lvbixcblx0dXBkYXRlX2VmZmVjdCxcblx0ZGVyaXZlZF9zb3VyY2VzLFxuXHRzZXRfZGVyaXZlZF9zb3VyY2VzLFxuXHRjaGVja19kaXJ0aW5lc3MsXG5cdHNldF9pc19mbHVzaGluZ19lZmZlY3QsXG5cdGlzX2ZsdXNoaW5nX2VmZmVjdFxufSBmcm9tICcuLi9ydW50aW1lLmpzJztcbmltcG9ydCB7IGVxdWFscywgc2FmZV9lcXVhbHMgfSBmcm9tICcuL2VxdWFsaXR5LmpzJztcbmltcG9ydCB7XG5cdENMRUFOLFxuXHRERVJJVkVELFxuXHRESVJUWSxcblx0QlJBTkNIX0VGRkVDVCxcblx0SU5TUEVDVF9FRkZFQ1QsXG5cdFVOT1dORUQsXG5cdE1BWUJFX0RJUlRZLFxuXHRCTE9DS19FRkZFQ1Rcbn0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCAqIGFzIGUgZnJvbSAnLi4vZXJyb3JzLmpzJztcbmltcG9ydCB7IGxlZ2FjeV9tb2RlX2ZsYWcsIHRyYWNpbmdfbW9kZV9mbGFnIH0gZnJvbSAnLi4vLi4vZmxhZ3MvaW5kZXguanMnO1xuaW1wb3J0IHsgZ2V0X3N0YWNrIH0gZnJvbSAnLi4vZGV2L3RyYWNpbmcuanMnO1xuXG5leHBvcnQgbGV0IGluc3BlY3RfZWZmZWN0cyA9IG5ldyBTZXQoKTtcblxuLyoqXG4gKiBAcGFyYW0ge1NldDxhbnk+fSB2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRfaW5zcGVjdF9lZmZlY3RzKHYpIHtcblx0aW5zcGVjdF9lZmZlY3RzID0gdjtcbn1cblxuLyoqXG4gKiBAdGVtcGxhdGUgVlxuICogQHBhcmFtIHtWfSB2XG4gKiBAcGFyYW0ge0Vycm9yIHwgbnVsbH0gW3N0YWNrXVxuICogQHJldHVybnMge1NvdXJjZTxWPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvdXJjZSh2LCBzdGFjaykge1xuXHQvKiogQHR5cGUge1ZhbHVlfSAqL1xuXHR2YXIgc2lnbmFsID0ge1xuXHRcdGY6IDAsIC8vIFRPRE8gaWRlYWxseSB3ZSBjb3VsZCBza2lwIHRoaXMgYWx0b2dldGhlciwgYnV0IGl0IGNhdXNlcyB0eXBlIGVycm9yc1xuXHRcdHYsXG5cdFx0cmVhY3Rpb25zOiBudWxsLFxuXHRcdGVxdWFscyxcblx0XHR2ZXJzaW9uOiAwXG5cdH07XG5cblx0aWYgKERFViAmJiB0cmFjaW5nX21vZGVfZmxhZykge1xuXHRcdHNpZ25hbC5jcmVhdGVkID0gc3RhY2sgPz8gZ2V0X3N0YWNrKCdDcmVhdGVkQXQnKTtcblx0XHRzaWduYWwuZGVidWcgPSBudWxsO1xuXHR9XG5cblx0cmV0dXJuIHNpZ25hbDtcbn1cblxuLyoqXG4gKiBAdGVtcGxhdGUgVlxuICogQHBhcmFtIHtWfSB2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGF0ZSh2KSB7XG5cdHJldHVybiBwdXNoX2Rlcml2ZWRfc291cmNlKHNvdXJjZSh2KSk7XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIFZcbiAqIEBwYXJhbSB7Vn0gaW5pdGlhbF92YWx1ZVxuICogQHBhcmFtIHtib29sZWFufSBbaW1tdXRhYmxlXVxuICogQHJldHVybnMge1NvdXJjZTxWPn1cbiAqL1xuLyojX19OT19TSURFX0VGRkVDVFNfXyovXG5leHBvcnQgZnVuY3Rpb24gbXV0YWJsZV9zb3VyY2UoaW5pdGlhbF92YWx1ZSwgaW1tdXRhYmxlID0gZmFsc2UpIHtcblx0Y29uc3QgcyA9IHNvdXJjZShpbml0aWFsX3ZhbHVlKTtcblx0aWYgKCFpbW11dGFibGUpIHtcblx0XHRzLmVxdWFscyA9IHNhZmVfZXF1YWxzO1xuXHR9XG5cblx0Ly8gYmluZCB0aGUgc2lnbmFsIHRvIHRoZSBjb21wb25lbnQgY29udGV4dCwgaW4gY2FzZSB3ZSBuZWVkIHRvXG5cdC8vIHRyYWNrIHVwZGF0ZXMgdG8gdHJpZ2dlciBiZWZvcmVVcGRhdGUvYWZ0ZXJVcGRhdGUgY2FsbGJhY2tzXG5cdGlmIChsZWdhY3lfbW9kZV9mbGFnICYmIGNvbXBvbmVudF9jb250ZXh0ICE9PSBudWxsICYmIGNvbXBvbmVudF9jb250ZXh0LmwgIT09IG51bGwpIHtcblx0XHQoY29tcG9uZW50X2NvbnRleHQubC5zID8/PSBbXSkucHVzaChzKTtcblx0fVxuXG5cdHJldHVybiBzO1xufVxuXG4vKipcbiAqIEB0ZW1wbGF0ZSBWXG4gKiBAcGFyYW0ge1Z9IHZcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ltbXV0YWJsZV1cbiAqIEByZXR1cm5zIHtTb3VyY2U8Vj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdXRhYmxlX3N0YXRlKHYsIGltbXV0YWJsZSA9IGZhbHNlKSB7XG5cdHJldHVybiBwdXNoX2Rlcml2ZWRfc291cmNlKG11dGFibGVfc291cmNlKHYsIGltbXV0YWJsZSkpO1xufVxuXG4vKipcbiAqIEB0ZW1wbGF0ZSBWXG4gKiBAcGFyYW0ge1NvdXJjZTxWPn0gc291cmNlXG4gKi9cbi8qI19fTk9fU0lERV9FRkZFQ1RTX18qL1xuZnVuY3Rpb24gcHVzaF9kZXJpdmVkX3NvdXJjZShzb3VyY2UpIHtcblx0aWYgKGFjdGl2ZV9yZWFjdGlvbiAhPT0gbnVsbCAmJiAoYWN0aXZlX3JlYWN0aW9uLmYgJiBERVJJVkVEKSAhPT0gMCkge1xuXHRcdGlmIChkZXJpdmVkX3NvdXJjZXMgPT09IG51bGwpIHtcblx0XHRcdHNldF9kZXJpdmVkX3NvdXJjZXMoW3NvdXJjZV0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkZXJpdmVkX3NvdXJjZXMucHVzaChzb3VyY2UpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBzb3VyY2U7XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIFZcbiAqIEBwYXJhbSB7VmFsdWU8Vj59IHNvdXJjZVxuICogQHBhcmFtIHtWfSB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gbXV0YXRlKHNvdXJjZSwgdmFsdWUpIHtcblx0c2V0KFxuXHRcdHNvdXJjZSxcblx0XHR1bnRyYWNrKCgpID0+IGdldChzb3VyY2UpKVxuXHQpO1xuXHRyZXR1cm4gdmFsdWU7XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIFZcbiAqIEBwYXJhbSB7U291cmNlPFY+fSBzb3VyY2VcbiAqIEBwYXJhbSB7Vn0gdmFsdWVcbiAqIEByZXR1cm5zIHtWfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0KHNvdXJjZSwgdmFsdWUpIHtcblx0aWYgKFxuXHRcdGFjdGl2ZV9yZWFjdGlvbiAhPT0gbnVsbCAmJlxuXHRcdGlzX3J1bmVzKCkgJiZcblx0XHQoYWN0aXZlX3JlYWN0aW9uLmYgJiAoREVSSVZFRCB8IEJMT0NLX0VGRkVDVCkpICE9PSAwICYmXG5cdFx0Ly8gSWYgdGhlIHNvdXJjZSB3YXMgY3JlYXRlZCBsb2NhbGx5IHdpdGhpbiB0aGUgY3VycmVudCBkZXJpdmVkLCB0aGVuXG5cdFx0Ly8gd2UgYWxsb3cgdGhlIG11dGF0aW9uLlxuXHRcdChkZXJpdmVkX3NvdXJjZXMgPT09IG51bGwgfHwgIWRlcml2ZWRfc291cmNlcy5pbmNsdWRlcyhzb3VyY2UpKVxuXHQpIHtcblx0XHRlLnN0YXRlX3Vuc2FmZV9tdXRhdGlvbigpO1xuXHR9XG5cblx0cmV0dXJuIGludGVybmFsX3NldChzb3VyY2UsIHZhbHVlKTtcbn1cblxuLyoqXG4gKiBAdGVtcGxhdGUgVlxuICogQHBhcmFtIHtTb3VyY2U8Vj59IHNvdXJjZVxuICogQHBhcmFtIHtWfSB2YWx1ZVxuICogQHJldHVybnMge1Z9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcm5hbF9zZXQoc291cmNlLCB2YWx1ZSkge1xuXHRpZiAoIXNvdXJjZS5lcXVhbHModmFsdWUpKSB7XG5cdFx0c291cmNlLnYgPSB2YWx1ZTtcblx0XHRzb3VyY2UudmVyc2lvbiA9IGluY3JlbWVudF92ZXJzaW9uKCk7XG5cblx0XHRpZiAoREVWICYmIHRyYWNpbmdfbW9kZV9mbGFnKSB7XG5cdFx0XHRzb3VyY2UudXBkYXRlZCA9IGdldF9zdGFjaygnVXBkYXRlZEF0Jyk7XG5cdFx0fVxuXG5cdFx0bWFya19yZWFjdGlvbnMoc291cmNlLCBESVJUWSk7XG5cblx0XHQvLyBJZiB0aGUgY3VycmVudCBzaWduYWwgaXMgcnVubmluZyBmb3IgdGhlIGZpcnN0IHRpbWUsIGl0IHdvbid0IGhhdmUgYW55XG5cdFx0Ly8gcmVhY3Rpb25zIGFzIHdlIG9ubHkgYWxsb2NhdGUgYW5kIGFzc2lnbiB0aGUgcmVhY3Rpb25zIGFmdGVyIHRoZSBzaWduYWxcblx0XHQvLyBoYXMgZnVsbHkgZXhlY3V0ZWQuIFNvIGluIHRoZSBjYXNlIG9mIGVuc3VyaW5nIGl0IHJlZ2lzdGVycyB0aGUgcmVhY3Rpb25cblx0XHQvLyBwcm9wZXJseSBmb3IgaXRzZWxmLCB3ZSBuZWVkIHRvIGVuc3VyZSB0aGUgY3VycmVudCBlZmZlY3QgYWN0dWFsbHkgZ2V0c1xuXHRcdC8vIHNjaGVkdWxlZC4gaS5lOiBgJGVmZmVjdCgoKSA9PiB4KyspYFxuXHRcdGlmIChcblx0XHRcdGlzX3J1bmVzKCkgJiZcblx0XHRcdGFjdGl2ZV9lZmZlY3QgIT09IG51bGwgJiZcblx0XHRcdChhY3RpdmVfZWZmZWN0LmYgJiBDTEVBTikgIT09IDAgJiZcblx0XHRcdChhY3RpdmVfZWZmZWN0LmYgJiBCUkFOQ0hfRUZGRUNUKSA9PT0gMFxuXHRcdCkge1xuXHRcdFx0aWYgKG5ld19kZXBzICE9PSBudWxsICYmIG5ld19kZXBzLmluY2x1ZGVzKHNvdXJjZSkpIHtcblx0XHRcdFx0c2V0X3NpZ25hbF9zdGF0dXMoYWN0aXZlX2VmZmVjdCwgRElSVFkpO1xuXHRcdFx0XHRzY2hlZHVsZV9lZmZlY3QoYWN0aXZlX2VmZmVjdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAodW50cmFja2VkX3dyaXRlcyA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdHNldF91bnRyYWNrZWRfd3JpdGVzKFtzb3VyY2VdKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR1bnRyYWNrZWRfd3JpdGVzLnB1c2goc291cmNlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChERVYgJiYgaW5zcGVjdF9lZmZlY3RzLnNpemUgPiAwKSB7XG5cdFx0XHRjb25zdCBpbnNwZWN0cyA9IEFycmF5LmZyb20oaW5zcGVjdF9lZmZlY3RzKTtcblx0XHRcdHZhciBwcmV2aW91c2x5X2ZsdXNoaW5nX2VmZmVjdCA9IGlzX2ZsdXNoaW5nX2VmZmVjdDtcblx0XHRcdHNldF9pc19mbHVzaGluZ19lZmZlY3QodHJ1ZSk7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGVmZmVjdCBvZiBpbnNwZWN0cykge1xuXHRcdFx0XHRcdC8vIE1hcmsgY2xlYW4gaW5zcGVjdC1lZmZlY3RzIGFzIG1heWJlIGRpcnR5IGFuZCB0aGVuIGNoZWNrIHRoZWlyIGRpcnRpbmVzc1xuXHRcdFx0XHRcdC8vIGluc3RlYWQgb2YganVzdCB1cGRhdGluZyB0aGUgZWZmZWN0cyAtIHRoaXMgd2F5IHdlIGF2b2lkIG92ZXJmaXJpbmcuXG5cdFx0XHRcdFx0aWYgKChlZmZlY3QuZiAmIENMRUFOKSAhPT0gMCkge1xuXHRcdFx0XHRcdFx0c2V0X3NpZ25hbF9zdGF0dXMoZWZmZWN0LCBNQVlCRV9ESVJUWSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChjaGVja19kaXJ0aW5lc3MoZWZmZWN0KSkge1xuXHRcdFx0XHRcdFx0dXBkYXRlX2VmZmVjdChlZmZlY3QpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0c2V0X2lzX2ZsdXNoaW5nX2VmZmVjdChwcmV2aW91c2x5X2ZsdXNoaW5nX2VmZmVjdCk7XG5cdFx0XHR9XG5cdFx0XHRpbnNwZWN0X2VmZmVjdHMuY2xlYXIoKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdmFsdWU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtWYWx1ZX0gc2lnbmFsXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhdHVzIHNob3VsZCBiZSBESVJUWSBvciBNQVlCRV9ESVJUWVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIG1hcmtfcmVhY3Rpb25zKHNpZ25hbCwgc3RhdHVzKSB7XG5cdHZhciByZWFjdGlvbnMgPSBzaWduYWwucmVhY3Rpb25zO1xuXHRpZiAocmVhY3Rpb25zID09PSBudWxsKSByZXR1cm47XG5cblx0dmFyIHJ1bmVzID0gaXNfcnVuZXMoKTtcblx0dmFyIGxlbmd0aCA9IHJlYWN0aW9ucy5sZW5ndGg7XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdHZhciByZWFjdGlvbiA9IHJlYWN0aW9uc1tpXTtcblx0XHR2YXIgZmxhZ3MgPSByZWFjdGlvbi5mO1xuXG5cdFx0Ly8gU2tpcCBhbnkgZWZmZWN0cyB0aGF0IGFyZSBhbHJlYWR5IGRpcnR5XG5cdFx0aWYgKChmbGFncyAmIERJUlRZKSAhPT0gMCkgY29udGludWU7XG5cblx0XHQvLyBJbiBsZWdhY3kgbW9kZSwgc2tpcCB0aGUgY3VycmVudCBlZmZlY3QgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xuXHRcdGlmICghcnVuZXMgJiYgcmVhY3Rpb24gPT09IGFjdGl2ZV9lZmZlY3QpIGNvbnRpbnVlO1xuXG5cdFx0Ly8gSW5zcGVjdCBlZmZlY3RzIG5lZWQgdG8gcnVuIGltbWVkaWF0ZWx5LCBzbyB0aGF0IHRoZSBzdGFjayB0cmFjZSBtYWtlcyBzZW5zZVxuXHRcdGlmIChERVYgJiYgKGZsYWdzICYgSU5TUEVDVF9FRkZFQ1QpICE9PSAwKSB7XG5cdFx0XHRpbnNwZWN0X2VmZmVjdHMuYWRkKHJlYWN0aW9uKTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdHNldF9zaWduYWxfc3RhdHVzKHJlYWN0aW9uLCBzdGF0dXMpO1xuXG5cdFx0Ly8gSWYgdGhlIHNpZ25hbCBhKSB3YXMgcHJldmlvdXNseSBjbGVhbiBvciBiKSBpcyBhbiB1bm93bmVkIGRlcml2ZWQsIHRoZW4gbWFyayBpdFxuXHRcdGlmICgoZmxhZ3MgJiAoQ0xFQU4gfCBVTk9XTkVEKSkgIT09IDApIHtcblx0XHRcdGlmICgoZmxhZ3MgJiBERVJJVkVEKSAhPT0gMCkge1xuXHRcdFx0XHRtYXJrX3JlYWN0aW9ucygvKiogQHR5cGUge0Rlcml2ZWR9ICovIChyZWFjdGlvbiksIE1BWUJFX0RJUlRZKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNjaGVkdWxlX2VmZmVjdCgvKiogQHR5cGUge0VmZmVjdH0gKi8gKHJlYWN0aW9uKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG4iLCAiLyogVGhpcyBmaWxlIGlzIGdlbmVyYXRlZCBieSBzY3JpcHRzL3Byb2Nlc3MtbWVzc2FnZXMvaW5kZXguanMuIERvIG5vdCBlZGl0ISAqL1xuXG5pbXBvcnQgeyBERVYgfSBmcm9tICdlc20tZW52JztcblxudmFyIGJvbGQgPSAnZm9udC13ZWlnaHQ6IGJvbGQnO1xudmFyIG5vcm1hbCA9ICdmb250LXdlaWdodDogbm9ybWFsJztcblxuLyoqXG4gKiBBc3NpZ25tZW50IHRvIGAlcHJvcGVydHklYCBwcm9wZXJ0eSAoJWxvY2F0aW9uJSkgd2lsbCBldmFsdWF0ZSB0byB0aGUgcmlnaHQtaGFuZCBzaWRlLCBub3QgdGhlIHZhbHVlIG9mIGAlcHJvcGVydHklYCBmb2xsb3dpbmcgdGhlIGFzc2lnbm1lbnQuIFRoaXMgbWF5IHJlc3VsdCBpbiB1bmV4cGVjdGVkIGJlaGF2aW91ci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ25tZW50X3ZhbHVlX3N0YWxlKHByb3BlcnR5LCBsb2NhdGlvbikge1xuXHRpZiAoREVWKSB7XG5cdFx0Y29uc29sZS53YXJuKGAlY1tzdmVsdGVdIGFzc2lnbm1lbnRfdmFsdWVfc3RhbGVcXG4lY0Fzc2lnbm1lbnQgdG8gXFxgJHtwcm9wZXJ0eX1cXGAgcHJvcGVydHkgKCR7bG9jYXRpb259KSB3aWxsIGV2YWx1YXRlIHRvIHRoZSByaWdodC1oYW5kIHNpZGUsIG5vdCB0aGUgdmFsdWUgb2YgXFxgJHtwcm9wZXJ0eX1cXGAgZm9sbG93aW5nIHRoZSBhc3NpZ25tZW50LiBUaGlzIG1heSByZXN1bHQgaW4gdW5leHBlY3RlZCBiZWhhdmlvdXIuXFxuaHR0cHM6Ly9zdmVsdGUuZGV2L2UvYXNzaWdubWVudF92YWx1ZV9zdGFsZWAsIGJvbGQsIG5vcm1hbCk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc29sZS53YXJuKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9hc3NpZ25tZW50X3ZhbHVlX3N0YWxlYCk7XG5cdH1cbn1cblxuLyoqXG4gKiBgJWJpbmRpbmclYCAoJWxvY2F0aW9uJSkgaXMgYmluZGluZyB0byBhIG5vbi1yZWFjdGl2ZSBwcm9wZXJ0eVxuICogQHBhcmFtIHtzdHJpbmd9IGJpbmRpbmdcbiAqIEBwYXJhbSB7c3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbH0gW2xvY2F0aW9uXVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluZGluZ19wcm9wZXJ0eV9ub25fcmVhY3RpdmUoYmluZGluZywgbG9jYXRpb24pIHtcblx0aWYgKERFVikge1xuXHRcdGNvbnNvbGUud2FybihgJWNbc3ZlbHRlXSBiaW5kaW5nX3Byb3BlcnR5X25vbl9yZWFjdGl2ZVxcbiVjJHtsb2NhdGlvbiA/IGBcXGAke2JpbmRpbmd9XFxgICgke2xvY2F0aW9ufSkgaXMgYmluZGluZyB0byBhIG5vbi1yZWFjdGl2ZSBwcm9wZXJ0eWAgOiBgXFxgJHtiaW5kaW5nfVxcYCBpcyBiaW5kaW5nIHRvIGEgbm9uLXJlYWN0aXZlIHByb3BlcnR5YH1cXG5odHRwczovL3N2ZWx0ZS5kZXYvZS9iaW5kaW5nX3Byb3BlcnR5X25vbl9yZWFjdGl2ZWAsIGJvbGQsIG5vcm1hbCk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc29sZS53YXJuKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9iaW5kaW5nX3Byb3BlcnR5X25vbl9yZWFjdGl2ZWApO1xuXHR9XG59XG5cbi8qKlxuICogWW91ciBgY29uc29sZS4lbWV0aG9kJWAgY29udGFpbmVkIGAkc3RhdGVgIHByb3hpZXMuIENvbnNpZGVyIHVzaW5nIGAkaW5zcGVjdCguLi4pYCBvciBgJHN0YXRlLnNuYXBzaG90KC4uLilgIGluc3RlYWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnNvbGVfbG9nX3N0YXRlKG1ldGhvZCkge1xuXHRpZiAoREVWKSB7XG5cdFx0Y29uc29sZS53YXJuKGAlY1tzdmVsdGVdIGNvbnNvbGVfbG9nX3N0YXRlXFxuJWNZb3VyIFxcYGNvbnNvbGUuJHttZXRob2R9XFxgIGNvbnRhaW5lZCBcXGAkc3RhdGVcXGAgcHJveGllcy4gQ29uc2lkZXIgdXNpbmcgXFxgJGluc3BlY3QoLi4uKVxcYCBvciBcXGAkc3RhdGUuc25hcHNob3QoLi4uKVxcYCBpbnN0ZWFkXFxuaHR0cHM6Ly9zdmVsdGUuZGV2L2UvY29uc29sZV9sb2dfc3RhdGVgLCBib2xkLCBub3JtYWwpO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnNvbGUud2FybihgaHR0cHM6Ly9zdmVsdGUuZGV2L2UvY29uc29sZV9sb2dfc3RhdGVgKTtcblx0fVxufVxuXG4vKipcbiAqICVoYW5kbGVyJSBzaG91bGQgYmUgYSBmdW5jdGlvbi4gRGlkIHlvdSBtZWFuIHRvICVzdWdnZXN0aW9uJT9cbiAqIEBwYXJhbSB7c3RyaW5nfSBoYW5kbGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3VnZ2VzdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZXZlbnRfaGFuZGxlcl9pbnZhbGlkKGhhbmRsZXIsIHN1Z2dlc3Rpb24pIHtcblx0aWYgKERFVikge1xuXHRcdGNvbnNvbGUud2FybihgJWNbc3ZlbHRlXSBldmVudF9oYW5kbGVyX2ludmFsaWRcXG4lYyR7aGFuZGxlcn0gc2hvdWxkIGJlIGEgZnVuY3Rpb24uIERpZCB5b3UgbWVhbiB0byAke3N1Z2dlc3Rpb259P1xcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL2V2ZW50X2hhbmRsZXJfaW52YWxpZGAsIGJvbGQsIG5vcm1hbCk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc29sZS53YXJuKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9ldmVudF9oYW5kbGVyX2ludmFsaWRgKTtcblx0fVxufVxuXG4vKipcbiAqIFRoZSBgJWF0dHJpYnV0ZSVgIGF0dHJpYnV0ZSBvbiBgJWh0bWwlYCBjaGFuZ2VkIGl0cyB2YWx1ZSBiZXR3ZWVuIHNlcnZlciBhbmQgY2xpZW50IHJlbmRlcnMuIFRoZSBjbGllbnQgdmFsdWUsIGAldmFsdWUlYCwgd2lsbCBiZSBpZ25vcmVkIGluIGZhdm91ciBvZiB0aGUgc2VydmVyIHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbFxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoeWRyYXRpb25fYXR0cmlidXRlX2NoYW5nZWQoYXR0cmlidXRlLCBodG1sLCB2YWx1ZSkge1xuXHRpZiAoREVWKSB7XG5cdFx0Y29uc29sZS53YXJuKGAlY1tzdmVsdGVdIGh5ZHJhdGlvbl9hdHRyaWJ1dGVfY2hhbmdlZFxcbiVjVGhlIFxcYCR7YXR0cmlidXRlfVxcYCBhdHRyaWJ1dGUgb24gXFxgJHtodG1sfVxcYCBjaGFuZ2VkIGl0cyB2YWx1ZSBiZXR3ZWVuIHNlcnZlciBhbmQgY2xpZW50IHJlbmRlcnMuIFRoZSBjbGllbnQgdmFsdWUsIFxcYCR7dmFsdWV9XFxgLCB3aWxsIGJlIGlnbm9yZWQgaW4gZmF2b3VyIG9mIHRoZSBzZXJ2ZXIgdmFsdWVcXG5odHRwczovL3N2ZWx0ZS5kZXYvZS9oeWRyYXRpb25fYXR0cmlidXRlX2NoYW5nZWRgLCBib2xkLCBub3JtYWwpO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnNvbGUud2FybihgaHR0cHM6Ly9zdmVsdGUuZGV2L2UvaHlkcmF0aW9uX2F0dHJpYnV0ZV9jaGFuZ2VkYCk7XG5cdH1cbn1cblxuLyoqXG4gKiBUaGUgdmFsdWUgb2YgYW4gYHtAaHRtbCAuLi59YCBibG9jayAlbG9jYXRpb24lIGNoYW5nZWQgYmV0d2VlbiBzZXJ2ZXIgYW5kIGNsaWVudCByZW5kZXJzLiBUaGUgY2xpZW50IHZhbHVlIHdpbGwgYmUgaWdub3JlZCBpbiBmYXZvdXIgb2YgdGhlIHNlcnZlciB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsfSBbbG9jYXRpb25dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoeWRyYXRpb25faHRtbF9jaGFuZ2VkKGxvY2F0aW9uKSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zb2xlLndhcm4oYCVjW3N2ZWx0ZV0gaHlkcmF0aW9uX2h0bWxfY2hhbmdlZFxcbiVjJHtsb2NhdGlvbiA/IGBUaGUgdmFsdWUgb2YgYW4gXFxge0BodG1sIC4uLn1cXGAgYmxvY2sgJHtsb2NhdGlvbn0gY2hhbmdlZCBiZXR3ZWVuIHNlcnZlciBhbmQgY2xpZW50IHJlbmRlcnMuIFRoZSBjbGllbnQgdmFsdWUgd2lsbCBiZSBpZ25vcmVkIGluIGZhdm91ciBvZiB0aGUgc2VydmVyIHZhbHVlYCA6IFwiVGhlIHZhbHVlIG9mIGFuIGB7QGh0bWwgLi4ufWAgYmxvY2sgY2hhbmdlZCBiZXR3ZWVuIHNlcnZlciBhbmQgY2xpZW50IHJlbmRlcnMuIFRoZSBjbGllbnQgdmFsdWUgd2lsbCBiZSBpZ25vcmVkIGluIGZhdm91ciBvZiB0aGUgc2VydmVyIHZhbHVlXCJ9XFxuaHR0cHM6Ly9zdmVsdGUuZGV2L2UvaHlkcmF0aW9uX2h0bWxfY2hhbmdlZGAsIGJvbGQsIG5vcm1hbCk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc29sZS53YXJuKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9oeWRyYXRpb25faHRtbF9jaGFuZ2VkYCk7XG5cdH1cbn1cblxuLyoqXG4gKiBIeWRyYXRpb24gZmFpbGVkIGJlY2F1c2UgdGhlIGluaXRpYWwgVUkgZG9lcyBub3QgbWF0Y2ggd2hhdCB3YXMgcmVuZGVyZWQgb24gdGhlIHNlcnZlci4gVGhlIGVycm9yIG9jY3VycmVkIG5lYXIgJWxvY2F0aW9uJVxuICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsfSBbbG9jYXRpb25dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoeWRyYXRpb25fbWlzbWF0Y2gobG9jYXRpb24pIHtcblx0aWYgKERFVikge1xuXHRcdGNvbnNvbGUud2FybihgJWNbc3ZlbHRlXSBoeWRyYXRpb25fbWlzbWF0Y2hcXG4lYyR7bG9jYXRpb24gPyBgSHlkcmF0aW9uIGZhaWxlZCBiZWNhdXNlIHRoZSBpbml0aWFsIFVJIGRvZXMgbm90IG1hdGNoIHdoYXQgd2FzIHJlbmRlcmVkIG9uIHRoZSBzZXJ2ZXIuIFRoZSBlcnJvciBvY2N1cnJlZCBuZWFyICR7bG9jYXRpb259YCA6IFwiSHlkcmF0aW9uIGZhaWxlZCBiZWNhdXNlIHRoZSBpbml0aWFsIFVJIGRvZXMgbm90IG1hdGNoIHdoYXQgd2FzIHJlbmRlcmVkIG9uIHRoZSBzZXJ2ZXJcIn1cXG5odHRwczovL3N2ZWx0ZS5kZXYvZS9oeWRyYXRpb25fbWlzbWF0Y2hgLCBib2xkLCBub3JtYWwpO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnNvbGUud2FybihgaHR0cHM6Ly9zdmVsdGUuZGV2L2UvaHlkcmF0aW9uX21pc21hdGNoYCk7XG5cdH1cbn1cblxuLyoqXG4gKiBUaGUgYHJlbmRlcmAgZnVuY3Rpb24gcGFzc2VkIHRvIGBjcmVhdGVSYXdTbmlwcGV0YCBzaG91bGQgcmV0dXJuIEhUTUwgZm9yIGEgc2luZ2xlIGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWRfcmF3X3NuaXBwZXRfcmVuZGVyKCkge1xuXHRpZiAoREVWKSB7XG5cdFx0Y29uc29sZS53YXJuKGAlY1tzdmVsdGVdIGludmFsaWRfcmF3X3NuaXBwZXRfcmVuZGVyXFxuJWNUaGUgXFxgcmVuZGVyXFxgIGZ1bmN0aW9uIHBhc3NlZCB0byBcXGBjcmVhdGVSYXdTbmlwcGV0XFxgIHNob3VsZCByZXR1cm4gSFRNTCBmb3IgYSBzaW5nbGUgZWxlbWVudFxcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL2ludmFsaWRfcmF3X3NuaXBwZXRfcmVuZGVyYCwgYm9sZCwgbm9ybWFsKTtcblx0fSBlbHNlIHtcblx0XHRjb25zb2xlLndhcm4oYGh0dHBzOi8vc3ZlbHRlLmRldi9lL2ludmFsaWRfcmF3X3NuaXBwZXRfcmVuZGVyYCk7XG5cdH1cbn1cblxuLyoqXG4gKiBEZXRlY3RlZCBhIG1pZ3JhdGVkIGAkOmAgcmVhY3RpdmUgYmxvY2sgaW4gYCVmaWxlbmFtZSVgIHRoYXQgYm90aCBhY2Nlc3NlcyBhbmQgdXBkYXRlcyB0aGUgc2FtZSByZWFjdGl2ZSB2YWx1ZS4gVGhpcyBtYXkgY2F1c2UgcmVjdXJzaXZlIHVwZGF0ZXMgd2hlbiBjb252ZXJ0ZWQgdG8gYW4gYCRlZmZlY3RgLlxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVuYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZWdhY3lfcmVjdXJzaXZlX3JlYWN0aXZlX2Jsb2NrKGZpbGVuYW1lKSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zb2xlLndhcm4oYCVjW3N2ZWx0ZV0gbGVnYWN5X3JlY3Vyc2l2ZV9yZWFjdGl2ZV9ibG9ja1xcbiVjRGV0ZWN0ZWQgYSBtaWdyYXRlZCBcXGAkOlxcYCByZWFjdGl2ZSBibG9jayBpbiBcXGAke2ZpbGVuYW1lfVxcYCB0aGF0IGJvdGggYWNjZXNzZXMgYW5kIHVwZGF0ZXMgdGhlIHNhbWUgcmVhY3RpdmUgdmFsdWUuIFRoaXMgbWF5IGNhdXNlIHJlY3Vyc2l2ZSB1cGRhdGVzIHdoZW4gY29udmVydGVkIHRvIGFuIFxcYCRlZmZlY3RcXGAuXFxuaHR0cHM6Ly9zdmVsdGUuZGV2L2UvbGVnYWN5X3JlY3Vyc2l2ZV9yZWFjdGl2ZV9ibG9ja2AsIGJvbGQsIG5vcm1hbCk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc29sZS53YXJuKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9sZWdhY3lfcmVjdXJzaXZlX3JlYWN0aXZlX2Jsb2NrYCk7XG5cdH1cbn1cblxuLyoqXG4gKiBUcmllZCB0byB1bm1vdW50IGEgY29tcG9uZW50IHRoYXQgd2FzIG5vdCBtb3VudGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaWZlY3ljbGVfZG91YmxlX3VubW91bnQoKSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zb2xlLndhcm4oYCVjW3N2ZWx0ZV0gbGlmZWN5Y2xlX2RvdWJsZV91bm1vdW50XFxuJWNUcmllZCB0byB1bm1vdW50IGEgY29tcG9uZW50IHRoYXQgd2FzIG5vdCBtb3VudGVkXFxuaHR0cHM6Ly9zdmVsdGUuZGV2L2UvbGlmZWN5Y2xlX2RvdWJsZV91bm1vdW50YCwgYm9sZCwgbm9ybWFsKTtcblx0fSBlbHNlIHtcblx0XHRjb25zb2xlLndhcm4oYGh0dHBzOi8vc3ZlbHRlLmRldi9lL2xpZmVjeWNsZV9kb3VibGVfdW5tb3VudGApO1xuXHR9XG59XG5cbi8qKlxuICogJXBhcmVudCUgcGFzc2VkIGEgdmFsdWUgdG8gJWNoaWxkJSB3aXRoIGBiaW5kOmAsIGJ1dCB0aGUgdmFsdWUgaXMgb3duZWQgYnkgJW93bmVyJS4gQ29uc2lkZXIgY3JlYXRpbmcgYSBiaW5kaW5nIGJldHdlZW4gJW93bmVyJSBhbmQgJXBhcmVudCVcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGlsZFxuICogQHBhcmFtIHtzdHJpbmd9IG93bmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvd25lcnNoaXBfaW52YWxpZF9iaW5kaW5nKHBhcmVudCwgY2hpbGQsIG93bmVyKSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zb2xlLndhcm4oYCVjW3N2ZWx0ZV0gb3duZXJzaGlwX2ludmFsaWRfYmluZGluZ1xcbiVjJHtwYXJlbnR9IHBhc3NlZCBhIHZhbHVlIHRvICR7Y2hpbGR9IHdpdGggXFxgYmluZDpcXGAsIGJ1dCB0aGUgdmFsdWUgaXMgb3duZWQgYnkgJHtvd25lcn0uIENvbnNpZGVyIGNyZWF0aW5nIGEgYmluZGluZyBiZXR3ZWVuICR7b3duZXJ9IGFuZCAke3BhcmVudH1cXG5odHRwczovL3N2ZWx0ZS5kZXYvZS9vd25lcnNoaXBfaW52YWxpZF9iaW5kaW5nYCwgYm9sZCwgbm9ybWFsKTtcblx0fSBlbHNlIHtcblx0XHRjb25zb2xlLndhcm4oYGh0dHBzOi8vc3ZlbHRlLmRldi9lL293bmVyc2hpcF9pbnZhbGlkX2JpbmRpbmdgKTtcblx0fVxufVxuXG4vKipcbiAqICVjb21wb25lbnQlIG11dGF0ZWQgYSB2YWx1ZSBvd25lZCBieSAlb3duZXIlLiBUaGlzIGlzIHN0cm9uZ2x5IGRpc2NvdXJhZ2VkLiBDb25zaWRlciBwYXNzaW5nIHZhbHVlcyB0byBjaGlsZCBjb21wb25lbnRzIHdpdGggYGJpbmQ6YCwgb3IgdXNlIGEgY2FsbGJhY2sgaW5zdGVhZFxuICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsfSBbY29tcG9uZW50XVxuICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsfSBbb3duZXJdXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvd25lcnNoaXBfaW52YWxpZF9tdXRhdGlvbihjb21wb25lbnQsIG93bmVyKSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zb2xlLndhcm4oYCVjW3N2ZWx0ZV0gb3duZXJzaGlwX2ludmFsaWRfbXV0YXRpb25cXG4lYyR7Y29tcG9uZW50ID8gYCR7Y29tcG9uZW50fSBtdXRhdGVkIGEgdmFsdWUgb3duZWQgYnkgJHtvd25lcn0uIFRoaXMgaXMgc3Ryb25nbHkgZGlzY291cmFnZWQuIENvbnNpZGVyIHBhc3NpbmcgdmFsdWVzIHRvIGNoaWxkIGNvbXBvbmVudHMgd2l0aCBcXGBiaW5kOlxcYCwgb3IgdXNlIGEgY2FsbGJhY2sgaW5zdGVhZGAgOiBcIk11dGF0aW5nIGEgdmFsdWUgb3V0c2lkZSB0aGUgY29tcG9uZW50IHRoYXQgY3JlYXRlZCBpdCBpcyBzdHJvbmdseSBkaXNjb3VyYWdlZC4gQ29uc2lkZXIgcGFzc2luZyB2YWx1ZXMgdG8gY2hpbGQgY29tcG9uZW50cyB3aXRoIGBiaW5kOmAsIG9yIHVzZSBhIGNhbGxiYWNrIGluc3RlYWRcIn1cXG5odHRwczovL3N2ZWx0ZS5kZXYvZS9vd25lcnNoaXBfaW52YWxpZF9tdXRhdGlvbmAsIGJvbGQsIG5vcm1hbCk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc29sZS53YXJuKGBodHRwczovL3N2ZWx0ZS5kZXYvZS9vd25lcnNoaXBfaW52YWxpZF9tdXRhdGlvbmApO1xuXHR9XG59XG5cbi8qKlxuICogUmVhY3RpdmUgYCRzdGF0ZSguLi4pYCBwcm94aWVzIGFuZCB0aGUgdmFsdWVzIHRoZXkgcHJveHkgaGF2ZSBkaWZmZXJlbnQgaWRlbnRpdGllcy4gQmVjYXVzZSBvZiB0aGlzLCBjb21wYXJpc29ucyB3aXRoIGAlb3BlcmF0b3IlYCB3aWxsIHByb2R1Y2UgdW5leHBlY3RlZCByZXN1bHRzXG4gKiBAcGFyYW0ge3N0cmluZ30gb3BlcmF0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXRlX3Byb3h5X2VxdWFsaXR5X21pc21hdGNoKG9wZXJhdG9yKSB7XG5cdGlmIChERVYpIHtcblx0XHRjb25zb2xlLndhcm4oYCVjW3N2ZWx0ZV0gc3RhdGVfcHJveHlfZXF1YWxpdHlfbWlzbWF0Y2hcXG4lY1JlYWN0aXZlIFxcYCRzdGF0ZSguLi4pXFxgIHByb3hpZXMgYW5kIHRoZSB2YWx1ZXMgdGhleSBwcm94eSBoYXZlIGRpZmZlcmVudCBpZGVudGl0aWVzLiBCZWNhdXNlIG9mIHRoaXMsIGNvbXBhcmlzb25zIHdpdGggXFxgJHtvcGVyYXRvcn1cXGAgd2lsbCBwcm9kdWNlIHVuZXhwZWN0ZWQgcmVzdWx0c1xcbmh0dHBzOi8vc3ZlbHRlLmRldi9lL3N0YXRlX3Byb3h5X2VxdWFsaXR5X21pc21hdGNoYCwgYm9sZCwgbm9ybWFsKTtcblx0fSBlbHNlIHtcblx0XHRjb25zb2xlLndhcm4oYGh0dHBzOi8vc3ZlbHRlLmRldi9lL3N0YXRlX3Byb3h5X2VxdWFsaXR5X21pc21hdGNoYCk7XG5cdH1cbn0iLCAiLyoqIEBpbXBvcnQgeyBUZW1wbGF0ZU5vZGUgfSBmcm9tICcjY2xpZW50JyAqL1xuXG5pbXBvcnQge1xuXHRIWURSQVRJT05fRU5ELFxuXHRIWURSQVRJT05fRVJST1IsXG5cdEhZRFJBVElPTl9TVEFSVCxcblx0SFlEUkFUSU9OX1NUQVJUX0VMU0Vcbn0gZnJvbSAnLi4vLi4vLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCAqIGFzIHcgZnJvbSAnLi4vd2FybmluZ3MuanMnO1xuaW1wb3J0IHsgZ2V0X25leHRfc2libGluZyB9IGZyb20gJy4vb3BlcmF0aW9ucy5qcyc7XG5cbi8qKlxuICogVXNlIHRoaXMgdmFyaWFibGUgdG8gZ3VhcmQgZXZlcnl0aGluZyByZWxhdGVkIHRvIGh5ZHJhdGlvbiBjb2RlIHNvIGl0IGNhbiBiZSB0cmVlc2hha2VuIG91dFxuICogaWYgdGhlIHVzZXIgZG9lc24ndCB1c2UgdGhlIGBoeWRyYXRlYCBtZXRob2QgYW5kIHRoZXNlIGNvZGUgcGF0aHMgYXJlIHRoZXJlZm9yZSBub3QgbmVlZGVkLlxuICovXG5leHBvcnQgbGV0IGh5ZHJhdGluZyA9IGZhbHNlO1xuXG4vKiogQHBhcmFtIHtib29sZWFufSB2YWx1ZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldF9oeWRyYXRpbmcodmFsdWUpIHtcblx0aHlkcmF0aW5nID0gdmFsdWU7XG59XG5cbi8qKlxuICogVGhlIG5vZGUgdGhhdCBpcyBjdXJyZW50bHkgYmVpbmcgaHlkcmF0ZWQuIFRoaXMgc3RhcnRzIG91dCBhcyB0aGUgZmlyc3Qgbm9kZSBpbnNpZGUgdGhlIG9wZW5pbmdcbiAqIDwhLS1bLS0+IGNvbW1lbnQsIGFuZCB1cGRhdGVzIGVhY2ggdGltZSBhIGNvbXBvbmVudCBjYWxscyBgJC5jaGlsZCguLi4pYCBvciBgJC5zaWJsaW5nKC4uLilgLlxuICogV2hlbiBlbnRlcmluZyBhIGJsb2NrIChlLmcuIGB7I2lmIC4uLn1gKSwgYGh5ZHJhdGVfbm9kZWAgaXMgdGhlIGJsb2NrIG9wZW5pbmcgY29tbWVudDsgYnkgdGhlXG4gKiB0aW1lIHdlIGxlYXZlIHRoZSBibG9jayBpdCBpcyB0aGUgY2xvc2luZyBjb21tZW50LCB3aGljaCBzZXJ2ZXMgYXMgdGhlIGJsb2NrJ3MgYW5jaG9yLlxuICogQHR5cGUge1RlbXBsYXRlTm9kZX1cbiAqL1xuZXhwb3J0IGxldCBoeWRyYXRlX25vZGU7XG5cbi8qKiBAcGFyYW0ge1RlbXBsYXRlTm9kZX0gbm9kZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldF9oeWRyYXRlX25vZGUobm9kZSkge1xuXHRpZiAobm9kZSA9PT0gbnVsbCkge1xuXHRcdHcuaHlkcmF0aW9uX21pc21hdGNoKCk7XG5cdFx0dGhyb3cgSFlEUkFUSU9OX0VSUk9SO1xuXHR9XG5cblx0cmV0dXJuIChoeWRyYXRlX25vZGUgPSBub2RlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGh5ZHJhdGVfbmV4dCgpIHtcblx0cmV0dXJuIHNldF9oeWRyYXRlX25vZGUoLyoqIEB0eXBlIHtUZW1wbGF0ZU5vZGV9ICovIChnZXRfbmV4dF9zaWJsaW5nKGh5ZHJhdGVfbm9kZSkpKTtcbn1cblxuLyoqIEBwYXJhbSB7VGVtcGxhdGVOb2RlfSBub2RlICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXQobm9kZSkge1xuXHRpZiAoIWh5ZHJhdGluZykgcmV0dXJuO1xuXG5cdC8vIElmIHRoZSBub2RlIGhhcyByZW1haW5pbmcgc2libGluZ3MsIHNvbWV0aGluZyBoYXMgZ29uZSB3cm9uZ1xuXHRpZiAoZ2V0X25leHRfc2libGluZyhoeWRyYXRlX25vZGUpICE9PSBudWxsKSB7XG5cdFx0dy5oeWRyYXRpb25fbWlzbWF0Y2goKTtcblx0XHR0aHJvdyBIWURSQVRJT05fRVJST1I7XG5cdH1cblxuXHRoeWRyYXRlX25vZGUgPSBub2RlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7SFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGh5ZHJhdGVfdGVtcGxhdGUodGVtcGxhdGUpIHtcblx0aWYgKGh5ZHJhdGluZykge1xuXHRcdC8vIEB0cy1leHBlY3QtZXJyb3IgVGVtcGxhdGVOb2RlIGRvZXNuJ3QgaW5jbHVkZSBEb2N1bWVudEZyYWdtZW50LCBidXQgaXQncyBhY3R1YWxseSBmaW5lXG5cdFx0aHlkcmF0ZV9ub2RlID0gdGVtcGxhdGUuY29udGVudDtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV4dChjb3VudCA9IDEpIHtcblx0aWYgKGh5ZHJhdGluZykge1xuXHRcdHZhciBpID0gY291bnQ7XG5cdFx0dmFyIG5vZGUgPSBoeWRyYXRlX25vZGU7XG5cblx0XHR3aGlsZSAoaS0tKSB7XG5cdFx0XHRub2RlID0gLyoqIEB0eXBlIHtUZW1wbGF0ZU5vZGV9ICovIChnZXRfbmV4dF9zaWJsaW5nKG5vZGUpKTtcblx0XHR9XG5cblx0XHRoeWRyYXRlX25vZGUgPSBub2RlO1xuXHR9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgbm9kZXMgc3RhcnRpbmcgYXQgYGh5ZHJhdGVfbm9kZWAgdXAgdW50aWwgdGhlIG5leHQgaHlkcmF0aW9uIGVuZCBjb21tZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVfbm9kZXMoKSB7XG5cdHZhciBkZXB0aCA9IDA7XG5cdHZhciBub2RlID0gaHlkcmF0ZV9ub2RlO1xuXG5cdHdoaWxlICh0cnVlKSB7XG5cdFx0aWYgKG5vZGUubm9kZVR5cGUgPT09IDgpIHtcblx0XHRcdHZhciBkYXRhID0gLyoqIEB0eXBlIHtDb21tZW50fSAqLyAobm9kZSkuZGF0YTtcblxuXHRcdFx0aWYgKGRhdGEgPT09IEhZRFJBVElPTl9FTkQpIHtcblx0XHRcdFx0aWYgKGRlcHRoID09PSAwKSByZXR1cm4gbm9kZTtcblx0XHRcdFx0ZGVwdGggLT0gMTtcblx0XHRcdH0gZWxzZSBpZiAoZGF0YSA9PT0gSFlEUkFUSU9OX1NUQVJUIHx8IGRhdGEgPT09IEhZRFJBVElPTl9TVEFSVF9FTFNFKSB7XG5cdFx0XHRcdGRlcHRoICs9IDE7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dmFyIG5leHQgPSAvKiogQHR5cGUge1RlbXBsYXRlTm9kZX0gKi8gKGdldF9uZXh0X3NpYmxpbmcobm9kZSkpO1xuXHRcdG5vZGUucmVtb3ZlKCk7XG5cdFx0bm9kZSA9IG5leHQ7XG5cdH1cbn1cbiIsICIvKiogQGltcG9ydCB7IFByb3h5TWV0YWRhdGEgfSBmcm9tICcjY2xpZW50JyAqL1xuLyoqIEB0eXBlZGVmIHt7IGZpbGU6IHN0cmluZywgbGluZTogbnVtYmVyLCBjb2x1bW46IG51bWJlciB9fSBMb2NhdGlvbiAqL1xuXG5pbXBvcnQgeyBTVEFURV9TWU1CT0xfTUVUQURBVEEgfSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgcmVuZGVyX2VmZmVjdCwgdXNlcl9wcmVfZWZmZWN0IH0gZnJvbSAnLi4vcmVhY3Rpdml0eS9lZmZlY3RzLmpzJztcbmltcG9ydCB7IGRldl9jdXJyZW50X2NvbXBvbmVudF9mdW5jdGlvbiB9IGZyb20gJy4uL3J1bnRpbWUuanMnO1xuaW1wb3J0IHsgZ2V0X3Byb3RvdHlwZV9vZiB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5pbXBvcnQgKiBhcyB3IGZyb20gJy4uL3dhcm5pbmdzLmpzJztcbmltcG9ydCB7IEZJTEVOQU1FIH0gZnJvbSAnLi4vLi4vLi4vY29uc3RhbnRzLmpzJztcblxuLyoqIEB0eXBlIHtSZWNvcmQ8c3RyaW5nLCBBcnJheTx7IHN0YXJ0OiBMb2NhdGlvbiwgZW5kOiBMb2NhdGlvbiwgY29tcG9uZW50OiBGdW5jdGlvbiB9Pj59ICovXG5jb25zdCBib3VuZGFyaWVzID0ge307XG5cbmNvbnN0IGNocm9tZV9wYXR0ZXJuID0gL2F0ICg/Oi4rIFxcKCk/KC4rKTooXFxkKyk6KFxcZCspXFwpPyQvO1xuY29uc3QgZmlyZWZveF9wYXR0ZXJuID0gL0AoLispOihcXGQrKTooXFxkKykkLztcblxuZnVuY3Rpb24gZ2V0X3N0YWNrKCkge1xuXHRjb25zdCBzdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xuXHRpZiAoIXN0YWNrKSByZXR1cm4gbnVsbDtcblxuXHRjb25zdCBlbnRyaWVzID0gW107XG5cblx0Zm9yIChjb25zdCBsaW5lIG9mIHN0YWNrLnNwbGl0KCdcXG4nKSkge1xuXHRcdGxldCBtYXRjaCA9IGNocm9tZV9wYXR0ZXJuLmV4ZWMobGluZSkgPz8gZmlyZWZveF9wYXR0ZXJuLmV4ZWMobGluZSk7XG5cblx0XHRpZiAobWF0Y2gpIHtcblx0XHRcdGVudHJpZXMucHVzaCh7XG5cdFx0XHRcdGZpbGU6IG1hdGNoWzFdLFxuXHRcdFx0XHRsaW5lOiArbWF0Y2hbMl0sXG5cdFx0XHRcdGNvbHVtbjogK21hdGNoWzNdXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZW50cmllcztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoaWNoIGAuc3ZlbHRlYCBjb21wb25lbnQgaXMgcmVzcG9uc2libGUgZm9yIGEgZ2l2ZW4gc3RhdGUgY2hhbmdlXG4gKiBAcmV0dXJucyB7RnVuY3Rpb24gfCBudWxsfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0X2NvbXBvbmVudCgpIHtcblx0Ly8gZmlyc3QgNCBsaW5lcyBhcmUgc3ZlbHRlIGludGVybmFsczsgYWRqdXN0IHRoaXMgbnVtYmVyIGlmIHdlIGNoYW5nZSB0aGUgaW50ZXJuYWwgY2FsbCBzdGFja1xuXHRjb25zdCBzdGFjayA9IGdldF9zdGFjaygpPy5zbGljZSg0KTtcblx0aWYgKCFzdGFjaykgcmV0dXJuIG51bGw7XG5cblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7IGkrKykge1xuXHRcdGNvbnN0IGVudHJ5ID0gc3RhY2tbaV07XG5cdFx0Y29uc3QgbW9kdWxlcyA9IGJvdW5kYXJpZXNbZW50cnkuZmlsZV07XG5cdFx0aWYgKCFtb2R1bGVzKSB7XG5cdFx0XHQvLyBJZiB0aGUgZmlyc3QgZW50cnkgaXMgbm90IGEgY29tcG9uZW50LCB0aGF0IG1lYW5zIHRoZSBtb2RpZmljYXRpb24gdmVyeSBsaWtlbHkgaGFwcGVuZWRcblx0XHRcdC8vIHdpdGhpbiBhIC5zdmVsdGUuanMgZmlsZSwgcG9zc2libHkgdHJpZ2dlcmVkIGJ5IGEgY29tcG9uZW50LiBTaW5jZSB0aGVzZSBmaWxlcyBhcmUgbm90IHBhcnRcblx0XHRcdC8vIG9mIHRoZSBib25kYXJpZXMvY29tcG9uZW50IGNvbnRleHQgaGV1cmlzdGljLCB3ZSBuZWVkIHRvIGJhaWwgaW4gdGhpcyBjYXNlLCBlbHNlIHdlIHdvdWxkXG5cdFx0XHQvLyBoYXZlIGZhbHNlIHBvc2l0aXZlcyB3aGVuIHRoZSAuc3ZlbHRlLnRzIGZpbGUgcHJvdmlkZXMgYSBzdGF0ZSBjcmVhdG9yIGZ1bmN0aW9uLCBlbmNhcHN1bGF0aW5nXG5cdFx0XHQvLyB0aGUgc3RhdGUgYW5kIGl0cyBtdXRhdGlvbnMsIGFuZCBpcyBiZWluZyBjYWxsZWQgZnJvbSBhIGNvbXBvbmVudCBvdGhlciB0aGFuIHRoZSBvbmUgd2hvXG5cdFx0XHQvLyBjYWxsZWQgdGhlIHN0YXRlIGNyZWF0b3IgZnVuY3Rpb24uXG5cdFx0XHRpZiAoaSA9PT0gMCkgcmV0dXJuIG51bGw7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IG1vZHVsZSBvZiBtb2R1bGVzKSB7XG5cdFx0XHRpZiAobW9kdWxlLmVuZCA9PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG1vZHVsZS5zdGFydC5saW5lIDwgZW50cnkubGluZSAmJiBtb2R1bGUuZW5kLmxpbmUgPiBlbnRyeS5saW5lKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUuY29tcG9uZW50O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgY29uc3QgQUREX09XTkVSID0gU3ltYm9sKCdBRERfT1dORVInKTtcblxuLyoqXG4gKiBUb2dldGhlciB3aXRoIGBtYXJrX21vZHVsZV9lbmRgLCB0aGlzIGZ1bmN0aW9uIGVzdGFibGlzaGVzIHRoZSBib3VuZGFyaWVzIG9mIGEgYC5zdmVsdGVgIGZpbGUsXG4gKiBzdWNoIHRoYXQgc3Vic2VxdWVudCBjYWxscyB0byBgZ2V0X2NvbXBvbmVudGAgY2FuIHRlbGwgdXMgd2hpY2ggY29tcG9uZW50IGlzIHJlc3BvbnNpYmxlXG4gKiBmb3IgYSBnaXZlbiBzdGF0ZSBjaGFuZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcmtfbW9kdWxlX3N0YXJ0KCkge1xuXHRjb25zdCBzdGFydCA9IGdldF9zdGFjaygpPy5bMl07XG5cblx0aWYgKHN0YXJ0KSB7XG5cdFx0KGJvdW5kYXJpZXNbc3RhcnQuZmlsZV0gPz89IFtdKS5wdXNoKHtcblx0XHRcdHN0YXJ0LFxuXHRcdFx0Ly8gQHRzLWV4cGVjdC1lcnJvclxuXHRcdFx0ZW5kOiBudWxsLFxuXHRcdFx0Ly8gQHRzLWV4cGVjdC1lcnJvciB3ZSBhZGQgdGhlIGNvbXBvbmVudCBhdCB0aGUgZW5kLCBzaW5jZSBITVIgd2lsbCBvdmVyd3JpdGUgdGhlIGZ1bmN0aW9uXG5cdFx0XHRjb21wb25lbnQ6IG51bGxcblx0XHR9KTtcblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBvbmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFya19tb2R1bGVfZW5kKGNvbXBvbmVudCkge1xuXHRjb25zdCBlbmQgPSBnZXRfc3RhY2soKT8uWzJdO1xuXG5cdGlmIChlbmQpIHtcblx0XHRjb25zdCBib3VuZGFyaWVzX2ZpbGUgPSBib3VuZGFyaWVzW2VuZC5maWxlXTtcblx0XHRjb25zdCBib3VuZGFyeSA9IGJvdW5kYXJpZXNfZmlsZVtib3VuZGFyaWVzX2ZpbGUubGVuZ3RoIC0gMV07XG5cblx0XHRib3VuZGFyeS5lbmQgPSBlbmQ7XG5cdFx0Ym91bmRhcnkuY29tcG9uZW50ID0gY29tcG9uZW50O1xuXHR9XG59XG5cbi8qKlxuICogQHBhcmFtIHthbnl9IG9iamVjdFxuICogQHBhcmFtIHthbnl9IG93bmVyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtnbG9iYWxdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtza2lwX3dhcm5pbmddXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRfb3duZXIob2JqZWN0LCBvd25lciwgZ2xvYmFsID0gZmFsc2UsIHNraXBfd2FybmluZyA9IGZhbHNlKSB7XG5cdGlmIChvYmplY3QgJiYgIWdsb2JhbCkge1xuXHRcdGNvbnN0IGNvbXBvbmVudCA9IGRldl9jdXJyZW50X2NvbXBvbmVudF9mdW5jdGlvbjtcblx0XHRjb25zdCBtZXRhZGF0YSA9IG9iamVjdFtTVEFURV9TWU1CT0xfTUVUQURBVEFdO1xuXHRcdGlmIChtZXRhZGF0YSAmJiAhaGFzX293bmVyKG1ldGFkYXRhLCBjb21wb25lbnQpKSB7XG5cdFx0XHRsZXQgb3JpZ2luYWwgPSBnZXRfb3duZXIobWV0YWRhdGEpO1xuXG5cdFx0XHRpZiAob3duZXJbRklMRU5BTUVdICE9PSBjb21wb25lbnRbRklMRU5BTUVdICYmICFza2lwX3dhcm5pbmcpIHtcblx0XHRcdFx0dy5vd25lcnNoaXBfaW52YWxpZF9iaW5kaW5nKGNvbXBvbmVudFtGSUxFTkFNRV0sIG93bmVyW0ZJTEVOQU1FXSwgb3JpZ2luYWxbRklMRU5BTUVdKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRhZGRfb3duZXJfdG9fb2JqZWN0KG9iamVjdCwgb3duZXIsIG5ldyBTZXQoKSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHsoKSA9PiB1bmtub3dufSBnZXRfb2JqZWN0XG4gKiBAcGFyYW0ge2FueX0gQ29tcG9uZW50XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtza2lwX3dhcm5pbmddXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRfb3duZXJfZWZmZWN0KGdldF9vYmplY3QsIENvbXBvbmVudCwgc2tpcF93YXJuaW5nID0gZmFsc2UpIHtcblx0dXNlcl9wcmVfZWZmZWN0KCgpID0+IHtcblx0XHRhZGRfb3duZXIoZ2V0X29iamVjdCgpLCBDb21wb25lbnQsIGZhbHNlLCBza2lwX3dhcm5pbmcpO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1Byb3h5TWV0YWRhdGEgfCBudWxsfSBmcm9tXG4gKiBAcGFyYW0ge1Byb3h5TWV0YWRhdGF9IHRvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aWRlbl9vd25lcnNoaXAoZnJvbSwgdG8pIHtcblx0aWYgKHRvLm93bmVycyA9PT0gbnVsbCkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHdoaWxlIChmcm9tKSB7XG5cdFx0aWYgKGZyb20ub3duZXJzID09PSBudWxsKSB7XG5cdFx0XHR0by5vd25lcnMgPSBudWxsO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCBvd25lciBvZiBmcm9tLm93bmVycykge1xuXHRcdFx0dG8ub3duZXJzLmFkZChvd25lcik7XG5cdFx0fVxuXG5cdFx0ZnJvbSA9IGZyb20ucGFyZW50O1xuXHR9XG59XG5cbi8qKlxuICogQHBhcmFtIHthbnl9IG9iamVjdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3duZXJcbiAqIEBwYXJhbSB7U2V0PGFueT59IHNlZW5cbiAqL1xuZnVuY3Rpb24gYWRkX293bmVyX3RvX29iamVjdChvYmplY3QsIG93bmVyLCBzZWVuKSB7XG5cdGNvbnN0IG1ldGFkYXRhID0gLyoqIEB0eXBlIHtQcm94eU1ldGFkYXRhfSAqLyAob2JqZWN0Py5bU1RBVEVfU1lNQk9MX01FVEFEQVRBXSk7XG5cblx0aWYgKG1ldGFkYXRhKSB7XG5cdFx0Ly8gdGhpcyBpcyBhIHN0YXRlIHByb3h5LCBhZGQgb3duZXIgZGlyZWN0bHksIGlmIG5vdCBnbG9iYWxseSBzaGFyZWRcblx0XHRpZiAoJ293bmVycycgaW4gbWV0YWRhdGEgJiYgbWV0YWRhdGEub3duZXJzICE9IG51bGwpIHtcblx0XHRcdG1ldGFkYXRhLm93bmVycy5hZGQob3duZXIpO1xuXHRcdH1cblx0fSBlbHNlIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcpIHtcblx0XHRpZiAoc2Vlbi5oYXMob2JqZWN0KSkgcmV0dXJuO1xuXHRcdHNlZW4uYWRkKG9iamVjdCk7XG5cdFx0aWYgKEFERF9PV05FUiBpbiBvYmplY3QgJiYgb2JqZWN0W0FERF9PV05FUl0pIHtcblx0XHRcdC8vIHRoaXMgaXMgYSBjbGFzcyB3aXRoIHN0YXRlIGZpZWxkcy4gd2UgcHV0IHRoaXMgaW4gYSByZW5kZXIgZWZmZWN0XG5cdFx0XHQvLyBzbyB0aGF0IGlmIHN0YXRlIGlzIHJlcGxhY2VkIChlLmcuIGBpbnN0YW5jZS5uYW1lID0geyBmaXJzdCwgbGFzdCB9YClcblx0XHRcdC8vIHRoZSBuZXcgc3RhdGUgaXMgYWxzbyBjby1vd25lZCBieSB0aGUgY2FsbGVyIG9mIGBnZXRDb250ZXh0YFxuXHRcdFx0cmVuZGVyX2VmZmVjdCgoKSA9PiB7XG5cdFx0XHRcdG9iamVjdFtBRERfT1dORVJdKG93bmVyKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcHJvdG8gPSBnZXRfcHJvdG90eXBlX29mKG9iamVjdCk7XG5cblx0XHRcdGlmIChwcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZSkge1xuXHRcdFx0XHQvLyByZWN1cnNlIHVudGlsIHdlIGZpbmQgYSBzdGF0ZSBwcm94eVxuXHRcdFx0XHRmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcblx0XHRcdFx0XHRhZGRfb3duZXJfdG9fb2JqZWN0KG9iamVjdFtrZXldLCBvd25lciwgc2Vlbik7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAocHJvdG8gPT09IEFycmF5LnByb3RvdHlwZSkge1xuXHRcdFx0XHQvLyByZWN1cnNlIHVudGlsIHdlIGZpbmQgYSBzdGF0ZSBwcm94eVxuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG9iamVjdC5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRcdGFkZF9vd25lcl90b19vYmplY3Qob2JqZWN0W2ldLCBvd25lciwgc2Vlbik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge1Byb3h5TWV0YWRhdGF9IG1ldGFkYXRhXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wb25lbnRcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBoYXNfb3duZXIobWV0YWRhdGEsIGNvbXBvbmVudCkge1xuXHRpZiAobWV0YWRhdGEub3duZXJzID09PSBudWxsKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRyZXR1cm4gKFxuXHRcdG1ldGFkYXRhLm93bmVycy5oYXMoY29tcG9uZW50KSB8fFxuXHRcdChtZXRhZGF0YS5wYXJlbnQgIT09IG51bGwgJiYgaGFzX293bmVyKG1ldGFkYXRhLnBhcmVudCwgY29tcG9uZW50KSlcblx0KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1Byb3h5TWV0YWRhdGF9IG1ldGFkYXRhXG4gKiBAcmV0dXJucyB7YW55fVxuICovXG5mdW5jdGlvbiBnZXRfb3duZXIobWV0YWRhdGEpIHtcblx0cmV0dXJuIChcblx0XHRtZXRhZGF0YT8ub3duZXJzPy52YWx1ZXMoKS5uZXh0KCkudmFsdWUgPz9cblx0XHRnZXRfb3duZXIoLyoqIEB0eXBlIHtQcm94eU1ldGFkYXRhfSAqLyAobWV0YWRhdGEucGFyZW50KSlcblx0KTtcbn1cblxubGV0IHNraXAgPSBmYWxzZTtcblxuLyoqXG4gKiBAcGFyYW0geygpID0+IGFueX0gZm5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNraXBfb3duZXJzaGlwX3ZhbGlkYXRpb24oZm4pIHtcblx0c2tpcCA9IHRydWU7XG5cdGZuKCk7XG5cdHNraXAgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1Byb3h5TWV0YWRhdGF9IG1ldGFkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja19vd25lcnNoaXAobWV0YWRhdGEpIHtcblx0aWYgKHNraXApIHJldHVybjtcblxuXHRjb25zdCBjb21wb25lbnQgPSBnZXRfY29tcG9uZW50KCk7XG5cblx0aWYgKGNvbXBvbmVudCAmJiAhaGFzX293bmVyKG1ldGFkYXRhLCBjb21wb25lbnQpKSB7XG5cdFx0bGV0IG9yaWdpbmFsID0gZ2V0X293bmVyKG1ldGFkYXRhKTtcblxuXHRcdC8vIEB0cy1leHBlY3QtZXJyb3Jcblx0XHRpZiAob3JpZ2luYWxbRklMRU5BTUVdICE9PSBjb21wb25lbnRbRklMRU5BTUVdKSB7XG5cdFx0XHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdFx0XHR3Lm93bmVyc2hpcF9pbnZhbGlkX211dGF0aW9uKGNvbXBvbmVudFtGSUxFTkFNRV0sIG9yaWdpbmFsW0ZJTEVOQU1FXSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHcub3duZXJzaGlwX2ludmFsaWRfbXV0YXRpb24oKTtcblx0XHR9XG5cdH1cbn1cbiIsICIvKiogQGltcG9ydCB7IFByb3h5TWV0YWRhdGEsIFByb3h5U3RhdGVPYmplY3QsIFNvdXJjZSB9IGZyb20gJyNjbGllbnQnICovXG5pbXBvcnQgeyBERVYgfSBmcm9tICdlc20tZW52JztcbmltcG9ydCB7IGdldCwgY29tcG9uZW50X2NvbnRleHQsIGFjdGl2ZV9lZmZlY3QgfSBmcm9tICcuL3J1bnRpbWUuanMnO1xuaW1wb3J0IHtcblx0YXJyYXlfcHJvdG90eXBlLFxuXHRnZXRfZGVzY3JpcHRvcixcblx0Z2V0X3Byb3RvdHlwZV9vZixcblx0aXNfYXJyYXksXG5cdG9iamVjdF9wcm90b3R5cGVcbn0gZnJvbSAnLi4vc2hhcmVkL3V0aWxzLmpzJztcbmltcG9ydCB7IGNoZWNrX293bmVyc2hpcCwgd2lkZW5fb3duZXJzaGlwIH0gZnJvbSAnLi9kZXYvb3duZXJzaGlwLmpzJztcbmltcG9ydCB7IHNvdXJjZSwgc2V0IH0gZnJvbSAnLi9yZWFjdGl2aXR5L3NvdXJjZXMuanMnO1xuaW1wb3J0IHsgU1RBVEVfU1lNQk9MLCBTVEFURV9TWU1CT0xfTUVUQURBVEEgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBVTklOSVRJQUxJWkVEIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCAqIGFzIGUgZnJvbSAnLi9lcnJvcnMuanMnO1xuaW1wb3J0IHsgZ2V0X3N0YWNrIH0gZnJvbSAnLi9kZXYvdHJhY2luZy5qcyc7XG5pbXBvcnQgeyB0cmFjaW5nX21vZGVfZmxhZyB9IGZyb20gJy4uL2ZsYWdzL2luZGV4LmpzJztcblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUfSB2YWx1ZVxuICogQHBhcmFtIHtQcm94eU1ldGFkYXRhIHwgbnVsbH0gW3BhcmVudF1cbiAqIEBwYXJhbSB7U291cmNlPFQ+fSBbcHJldl0gZGV2IG1vZGUgb25seVxuICogQHJldHVybnMge1R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm94eSh2YWx1ZSwgcGFyZW50ID0gbnVsbCwgcHJldikge1xuXHQvKiogQHR5cGUge0Vycm9yIHwgbnVsbH0gKi9cblx0dmFyIHN0YWNrID0gbnVsbDtcblx0aWYgKERFViAmJiB0cmFjaW5nX21vZGVfZmxhZykge1xuXHRcdHN0YWNrID0gZ2V0X3N0YWNrKCdDcmVhdGVkQXQnKTtcblx0fVxuXHQvLyBpZiBub24tcHJveHlhYmxlLCBvciBpcyBhbHJlYWR5IGEgcHJveHksIHJldHVybiBgdmFsdWVgXG5cdGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09PSBudWxsIHx8IFNUQVRFX1NZTUJPTCBpbiB2YWx1ZSkge1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXG5cdGNvbnN0IHByb3RvdHlwZSA9IGdldF9wcm90b3R5cGVfb2YodmFsdWUpO1xuXG5cdGlmIChwcm90b3R5cGUgIT09IG9iamVjdF9wcm90b3R5cGUgJiYgcHJvdG90eXBlICE9PSBhcnJheV9wcm90b3R5cGUpIHtcblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblxuXHQvKiogQHR5cGUge01hcDxhbnksIFNvdXJjZTxhbnk+Pn0gKi9cblx0dmFyIHNvdXJjZXMgPSBuZXcgTWFwKCk7XG5cdHZhciBpc19wcm94aWVkX2FycmF5ID0gaXNfYXJyYXkodmFsdWUpO1xuXHR2YXIgdmVyc2lvbiA9IHNvdXJjZSgwKTtcblxuXHRpZiAoaXNfcHJveGllZF9hcnJheSkge1xuXHRcdC8vIFdlIG5lZWQgdG8gY3JlYXRlIHRoZSBsZW5ndGggc291cmNlIGVhZ2VybHkgdG8gZW5zdXJlIHRoYXRcblx0XHQvLyBtdXRhdGlvbnMgdG8gdGhlIGFycmF5IGFyZSBwcm9wZXJseSBzeW5jZWQgd2l0aCBvdXIgcHJveHlcblx0XHRzb3VyY2VzLnNldCgnbGVuZ3RoJywgc291cmNlKC8qKiBAdHlwZSB7YW55W119ICovICh2YWx1ZSkubGVuZ3RoLCBzdGFjaykpO1xuXHR9XG5cblx0LyoqIEB0eXBlIHtQcm94eU1ldGFkYXRhfSAqL1xuXHR2YXIgbWV0YWRhdGE7XG5cblx0aWYgKERFVikge1xuXHRcdG1ldGFkYXRhID0ge1xuXHRcdFx0cGFyZW50LFxuXHRcdFx0b3duZXJzOiBudWxsXG5cdFx0fTtcblxuXHRcdGlmIChwcmV2KSB7XG5cdFx0XHQvLyBSZXVzZSBvd25lcnMgZnJvbSBwcmV2aW91cyBzdGF0ZTsgbmVjZXNzYXJ5IGJlY2F1c2UgcmVhc3NpZ25tZW50IGlzIG5vdCBndWFyYW50ZWVkIHRvIGhhdmUgY29ycmVjdCBjb21wb25lbnQgY29udGV4dC5cblx0XHRcdC8vIElmIG5vIHByZXZpb3VzIHByb3h5IGV4aXN0cyB3ZSBwbGF5IGl0IHNhZmUgYW5kIGFzc3VtZSBvd25lcmxlc3Mgc3RhdGVcblx0XHRcdC8vIEB0cy1leHBlY3QtZXJyb3Jcblx0XHRcdGNvbnN0IHByZXZfb3duZXJzID0gcHJldi52Py5bU1RBVEVfU1lNQk9MX01FVEFEQVRBXT8ub3duZXJzO1xuXHRcdFx0bWV0YWRhdGEub3duZXJzID0gcHJldl9vd25lcnMgPyBuZXcgU2V0KHByZXZfb3duZXJzKSA6IG51bGw7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1ldGFkYXRhLm93bmVycyA9XG5cdFx0XHRcdHBhcmVudCA9PT0gbnVsbFxuXHRcdFx0XHRcdD8gY29tcG9uZW50X2NvbnRleHQgIT09IG51bGxcblx0XHRcdFx0XHRcdD8gbmV3IFNldChbY29tcG9uZW50X2NvbnRleHQuZnVuY3Rpb25dKVxuXHRcdFx0XHRcdFx0OiBudWxsXG5cdFx0XHRcdFx0OiBuZXcgU2V0KCk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG5ldyBQcm94eSgvKiogQHR5cGUge2FueX0gKi8gKHZhbHVlKSwge1xuXHRcdGRlZmluZVByb3BlcnR5KF8sIHByb3AsIGRlc2NyaXB0b3IpIHtcblx0XHRcdGlmIChcblx0XHRcdFx0ISgndmFsdWUnIGluIGRlc2NyaXB0b3IpIHx8XG5cdFx0XHRcdGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID09PSBmYWxzZSB8fFxuXHRcdFx0XHRkZXNjcmlwdG9yLmVudW1lcmFibGUgPT09IGZhbHNlIHx8XG5cdFx0XHRcdGRlc2NyaXB0b3Iud3JpdGFibGUgPT09IGZhbHNlXG5cdFx0XHQpIHtcblx0XHRcdFx0Ly8gd2UgZGlzYWxsb3cgbm9uLWJhc2ljIGRlc2NyaXB0b3JzLCBiZWNhdXNlIHVubGVzcyB0aGV5IGFyZSBhcHBsaWVkIHRvIHRoZVxuXHRcdFx0XHQvLyB0YXJnZXQgb2JqZWN0IFx1MjAxNCB3aGljaCB3ZSBhdm9pZCwgc28gdGhhdCBzdGF0ZSBjYW4gYmUgZm9ya2VkIFx1MjAxNCB3ZSB3aWxsIHJ1blxuXHRcdFx0XHQvLyBhZm91bCBvZiB0aGUgdmFyaW91cyBpbnZhcmlhbnRzXG5cdFx0XHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1Byb3h5L1Byb3h5L2dldE93blByb3BlcnR5RGVzY3JpcHRvciNpbnZhcmlhbnRzXG5cdFx0XHRcdGUuc3RhdGVfZGVzY3JpcHRvcnNfZml4ZWQoKTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHMgPSBzb3VyY2VzLmdldChwcm9wKTtcblxuXHRcdFx0aWYgKHMgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRzID0gc291cmNlKGRlc2NyaXB0b3IudmFsdWUsIHN0YWNrKTtcblx0XHRcdFx0c291cmNlcy5zZXQocHJvcCwgcyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZXQocywgcHJveHkoZGVzY3JpcHRvci52YWx1ZSwgbWV0YWRhdGEpKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblxuXHRcdGRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcHJvcCkge1xuXHRcdFx0dmFyIHMgPSBzb3VyY2VzLmdldChwcm9wKTtcblxuXHRcdFx0aWYgKHMgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRpZiAocHJvcCBpbiB0YXJnZXQpIHtcblx0XHRcdFx0XHRzb3VyY2VzLnNldChwcm9wLCBzb3VyY2UoVU5JTklUSUFMSVpFRCwgc3RhY2spKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gV2hlbiB3b3JraW5nIHdpdGggYXJyYXlzLCB3ZSBuZWVkIHRvIGFsc28gZW5zdXJlIHdlIHVwZGF0ZSB0aGUgbGVuZ3RoIHdoZW4gcmVtb3Zpbmdcblx0XHRcdFx0Ly8gYW4gaW5kZXhlZCBwcm9wZXJ0eVxuXHRcdFx0XHRpZiAoaXNfcHJveGllZF9hcnJheSAmJiB0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHR2YXIgbHMgPSAvKiogQHR5cGUge1NvdXJjZTxudW1iZXI+fSAqLyAoc291cmNlcy5nZXQoJ2xlbmd0aCcpKTtcblx0XHRcdFx0XHR2YXIgbiA9IE51bWJlcihwcm9wKTtcblxuXHRcdFx0XHRcdGlmIChOdW1iZXIuaXNJbnRlZ2VyKG4pICYmIG4gPCBscy52KSB7XG5cdFx0XHRcdFx0XHRzZXQobHMsIG4pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRzZXQocywgVU5JTklUSUFMSVpFRCk7XG5cdFx0XHRcdHVwZGF0ZV92ZXJzaW9uKHZlcnNpb24pO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0Z2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcblx0XHRcdGlmIChERVYgJiYgcHJvcCA9PT0gU1RBVEVfU1lNQk9MX01FVEFEQVRBKSB7XG5cdFx0XHRcdHJldHVybiBtZXRhZGF0YTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHByb3AgPT09IFNUQVRFX1NZTUJPTCkge1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBzID0gc291cmNlcy5nZXQocHJvcCk7XG5cdFx0XHR2YXIgZXhpc3RzID0gcHJvcCBpbiB0YXJnZXQ7XG5cblx0XHRcdC8vIGNyZWF0ZSBhIHNvdXJjZSwgYnV0IG9ubHkgaWYgaXQncyBhbiBvd24gcHJvcGVydHkgYW5kIG5vdCBhIHByb3RvdHlwZSBwcm9wZXJ0eVxuXHRcdFx0aWYgKHMgPT09IHVuZGVmaW5lZCAmJiAoIWV4aXN0cyB8fCBnZXRfZGVzY3JpcHRvcih0YXJnZXQsIHByb3ApPy53cml0YWJsZSkpIHtcblx0XHRcdFx0cyA9IHNvdXJjZShwcm94eShleGlzdHMgPyB0YXJnZXRbcHJvcF0gOiBVTklOSVRJQUxJWkVELCBtZXRhZGF0YSksIHN0YWNrKTtcblx0XHRcdFx0c291cmNlcy5zZXQocHJvcCwgcyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChzICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0dmFyIHYgPSBnZXQocyk7XG5cblx0XHRcdFx0Ly8gSW4gY2FzZSBvZiBzb21ldGhpbmcgbGlrZSBgZm9vID0gYmFyLm1hcCguLi4pYCwgZm9vIHdvdWxkIGhhdmUgb3duZXJzaGlwXG5cdFx0XHRcdC8vIG9mIHRoZSBhcnJheSBpdHNlbGYsIHdoaWxlIHRoZSBpbmRpdmlkdWFsIGl0ZW1zIHdvdWxkIGhhdmUgb3duZXJzaGlwXG5cdFx0XHRcdC8vIG9mIHRoZSBjb21wb25lbnQgdGhhdCBjcmVhdGVkIGJhci4gVGhhdCBtZWFucyBpZiB3ZSBsYXRlciBkbyBgZm9vWzBdLmJheiA9IDQyYCxcblx0XHRcdFx0Ly8gd2UgY291bGQgZ2V0IGEgZmFsc2UtcG9zaXRpdmUgb3duZXJzaGlwIHZpb2xhdGlvbiwgc2luY2UgdGhlIHR3byBwcm94aWVzXG5cdFx0XHRcdC8vIGFyZSBub3QgY29ubmVjdGVkIHRvIGVhY2ggb3RoZXIgdmlhIHRoZSBwYXJlbnQgbWV0YWRhdGEgcmVsYXRpb25zaGlwLlxuXHRcdFx0XHQvLyBGb3IgdGhpcyByZWFzb24sIHdlIG5lZWQgdG8gd2lkZW4gdGhlIG93bmVyc2hpcCBvZiB0aGUgY2hpbGRyZW5cblx0XHRcdFx0Ly8gdXBvbiBhY2Nlc3Mgd2hlbiB3ZSBkZXRlY3QgdGhleSBhcmUgbm90IGNvbm5lY3RlZC5cblx0XHRcdFx0aWYgKERFVikge1xuXHRcdFx0XHRcdC8qKiBAdHlwZSB7UHJveHlNZXRhZGF0YSB8IHVuZGVmaW5lZH0gKi9cblx0XHRcdFx0XHR2YXIgcHJvcF9tZXRhZGF0YSA9IHY/LltTVEFURV9TWU1CT0xfTUVUQURBVEFdO1xuXHRcdFx0XHRcdGlmIChwcm9wX21ldGFkYXRhICYmIHByb3BfbWV0YWRhdGE/LnBhcmVudCAhPT0gbWV0YWRhdGEpIHtcblx0XHRcdFx0XHRcdHdpZGVuX293bmVyc2hpcChtZXRhZGF0YSwgcHJvcF9tZXRhZGF0YSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHYgPT09IFVOSU5JVElBTElaRUQgPyB1bmRlZmluZWQgOiB2O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7XG5cdFx0fSxcblxuXHRcdGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApIHtcblx0XHRcdHZhciBkZXNjcmlwdG9yID0gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wKTtcblxuXHRcdFx0aWYgKGRlc2NyaXB0b3IgJiYgJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSB7XG5cdFx0XHRcdHZhciBzID0gc291cmNlcy5nZXQocHJvcCk7XG5cdFx0XHRcdGlmIChzKSBkZXNjcmlwdG9yLnZhbHVlID0gZ2V0KHMpO1xuXHRcdFx0fSBlbHNlIGlmIChkZXNjcmlwdG9yID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0dmFyIHNvdXJjZSA9IHNvdXJjZXMuZ2V0KHByb3ApO1xuXHRcdFx0XHR2YXIgdmFsdWUgPSBzb3VyY2U/LnY7XG5cblx0XHRcdFx0aWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBVTklOSVRJQUxJWkVEKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHR2YWx1ZSxcblx0XHRcdFx0XHRcdHdyaXRhYmxlOiB0cnVlXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGVzY3JpcHRvcjtcblx0XHR9LFxuXG5cdFx0aGFzKHRhcmdldCwgcHJvcCkge1xuXHRcdFx0aWYgKERFViAmJiBwcm9wID09PSBTVEFURV9TWU1CT0xfTUVUQURBVEEpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChwcm9wID09PSBTVEFURV9TWU1CT0wpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBzID0gc291cmNlcy5nZXQocHJvcCk7XG5cdFx0XHR2YXIgaGFzID0gKHMgIT09IHVuZGVmaW5lZCAmJiBzLnYgIT09IFVOSU5JVElBTElaRUQpIHx8IFJlZmxlY3QuaGFzKHRhcmdldCwgcHJvcCk7XG5cblx0XHRcdGlmIChcblx0XHRcdFx0cyAhPT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdChhY3RpdmVfZWZmZWN0ICE9PSBudWxsICYmICghaGFzIHx8IGdldF9kZXNjcmlwdG9yKHRhcmdldCwgcHJvcCk/LndyaXRhYmxlKSlcblx0XHRcdCkge1xuXHRcdFx0XHRpZiAocyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cyA9IHNvdXJjZShoYXMgPyBwcm94eSh0YXJnZXRbcHJvcF0sIG1ldGFkYXRhKSA6IFVOSU5JVElBTElaRUQsIHN0YWNrKTtcblx0XHRcdFx0XHRzb3VyY2VzLnNldChwcm9wLCBzKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciB2YWx1ZSA9IGdldChzKTtcblx0XHRcdFx0aWYgKHZhbHVlID09PSBVTklOSVRJQUxJWkVEKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBoYXM7XG5cdFx0fSxcblxuXHRcdHNldCh0YXJnZXQsIHByb3AsIHZhbHVlLCByZWNlaXZlcikge1xuXHRcdFx0dmFyIHMgPSBzb3VyY2VzLmdldChwcm9wKTtcblx0XHRcdHZhciBoYXMgPSBwcm9wIGluIHRhcmdldDtcblxuXHRcdFx0Ly8gdmFyaWFibGUubGVuZ3RoID0gdmFsdWUgLT4gY2xlYXIgYWxsIHNpZ25hbHMgd2l0aCBpbmRleCA+PSB2YWx1ZVxuXHRcdFx0aWYgKGlzX3Byb3hpZWRfYXJyYXkgJiYgcHJvcCA9PT0gJ2xlbmd0aCcpIHtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IHZhbHVlOyBpIDwgLyoqIEB0eXBlIHtTb3VyY2U8bnVtYmVyPn0gKi8gKHMpLnY7IGkgKz0gMSkge1xuXHRcdFx0XHRcdHZhciBvdGhlcl9zID0gc291cmNlcy5nZXQoaSArICcnKTtcblx0XHRcdFx0XHRpZiAob3RoZXJfcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRzZXQob3RoZXJfcywgVU5JTklUSUFMSVpFRCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpIGluIHRhcmdldCkge1xuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIGl0ZW0gZXhpc3RzIGluIHRoZSBvcmlnaW5hbCwgd2UgbmVlZCB0byBjcmVhdGUgYSB1bmluaXRpYWxpemVkIHNvdXJjZSxcblx0XHRcdFx0XHRcdC8vIGVsc2UgYSBsYXRlciByZWFkIG9mIHRoZSBwcm9wZXJ0eSB3b3VsZCByZXN1bHQgaW4gYSBzb3VyY2UgYmVpbmcgY3JlYXRlZCB3aXRoXG5cdFx0XHRcdFx0XHQvLyB0aGUgdmFsdWUgb2YgdGhlIG9yaWdpbmFsIGl0ZW0gYXQgdGhhdCBpbmRleC5cblx0XHRcdFx0XHRcdG90aGVyX3MgPSBzb3VyY2UoVU5JTklUSUFMSVpFRCwgc3RhY2spO1xuXHRcdFx0XHRcdFx0c291cmNlcy5zZXQoaSArICcnLCBvdGhlcl9zKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgd2UgaGF2ZW4ndCB5ZXQgY3JlYXRlZCBhIHNvdXJjZSBmb3IgdGhpcyBwcm9wZXJ0eSwgd2UgbmVlZCB0byBlbnN1cmVcblx0XHRcdC8vIHdlIGRvIHNvIG90aGVyd2lzZSBpZiB3ZSByZWFkIGl0IGxhdGVyLCB0aGVuIHRoZSB3cml0ZSB3b24ndCBiZSB0cmFja2VkIGFuZFxuXHRcdFx0Ly8gdGhlIGhldXJpc3RpY3Mgb2YgZWZmZWN0cyB3aWxsIGJlIGRpZmZlcmVudCB2cyBpZiB3ZSBoYWQgcmVhZCB0aGUgcHJveGllZFxuXHRcdFx0Ly8gb2JqZWN0IHByb3BlcnR5IGJlZm9yZSB3cml0aW5nIHRvIHRoYXQgcHJvcGVydHkuXG5cdFx0XHRpZiAocyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGlmICghaGFzIHx8IGdldF9kZXNjcmlwdG9yKHRhcmdldCwgcHJvcCk/LndyaXRhYmxlKSB7XG5cdFx0XHRcdFx0cyA9IHNvdXJjZSh1bmRlZmluZWQsIHN0YWNrKTtcblx0XHRcdFx0XHRzZXQocywgcHJveHkodmFsdWUsIG1ldGFkYXRhKSk7XG5cdFx0XHRcdFx0c291cmNlcy5zZXQocHJvcCwgcyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhhcyA9IHMudiAhPT0gVU5JTklUSUFMSVpFRDtcblx0XHRcdFx0c2V0KHMsIHByb3h5KHZhbHVlLCBtZXRhZGF0YSkpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoREVWKSB7XG5cdFx0XHRcdC8qKiBAdHlwZSB7UHJveHlNZXRhZGF0YSB8IHVuZGVmaW5lZH0gKi9cblx0XHRcdFx0dmFyIHByb3BfbWV0YWRhdGEgPSB2YWx1ZT8uW1NUQVRFX1NZTUJPTF9NRVRBREFUQV07XG5cdFx0XHRcdGlmIChwcm9wX21ldGFkYXRhICYmIHByb3BfbWV0YWRhdGE/LnBhcmVudCAhPT0gbWV0YWRhdGEpIHtcblx0XHRcdFx0XHR3aWRlbl9vd25lcnNoaXAobWV0YWRhdGEsIHByb3BfbWV0YWRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNoZWNrX293bmVyc2hpcChtZXRhZGF0YSk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBkZXNjcmlwdG9yID0gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wKTtcblxuXHRcdFx0Ly8gU2V0IHRoZSBuZXcgdmFsdWUgYmVmb3JlIHVwZGF0aW5nIGFueSBzaWduYWxzIHNvIHRoYXQgYW55IGxpc3RlbmVycyBnZXQgdGhlIG5ldyB2YWx1ZVxuXHRcdFx0aWYgKGRlc2NyaXB0b3I/LnNldCkge1xuXHRcdFx0XHRkZXNjcmlwdG9yLnNldC5jYWxsKHJlY2VpdmVyLCB2YWx1ZSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghaGFzKSB7XG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgbXV0YXRlZCBhbiBhcnJheSBkaXJlY3RseSwgd2UgbWlnaHQgbmVlZCB0b1xuXHRcdFx0XHQvLyBzaWduYWwgdGhhdCBsZW5ndGggaGFzIGFsc28gY2hhbmdlZC4gRG8gaXQgYmVmb3JlIHVwZGF0aW5nIG1ldGFkYXRhXG5cdFx0XHRcdC8vIHRvIGVuc3VyZSB0aGF0IGl0ZXJhdGluZyBvdmVyIHRoZSBhcnJheSBhcyBhIHJlc3VsdCBvZiBhIG1ldGFkYXRhIHVwZGF0ZVxuXHRcdFx0XHQvLyB3aWxsIG5vdCBjYXVzZSB0aGUgbGVuZ3RoIHRvIGJlIG91dCBvZiBzeW5jLlxuXHRcdFx0XHRpZiAoaXNfcHJveGllZF9hcnJheSAmJiB0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHR2YXIgbHMgPSAvKiogQHR5cGUge1NvdXJjZTxudW1iZXI+fSAqLyAoc291cmNlcy5nZXQoJ2xlbmd0aCcpKTtcblx0XHRcdFx0XHR2YXIgbiA9IE51bWJlcihwcm9wKTtcblxuXHRcdFx0XHRcdGlmIChOdW1iZXIuaXNJbnRlZ2VyKG4pICYmIG4gPj0gbHMudikge1xuXHRcdFx0XHRcdFx0c2V0KGxzLCBuICsgMSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dXBkYXRlX3ZlcnNpb24odmVyc2lvbik7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cblx0XHRvd25LZXlzKHRhcmdldCkge1xuXHRcdFx0Z2V0KHZlcnNpb24pO1xuXG5cdFx0XHR2YXIgb3duX2tleXMgPSBSZWZsZWN0Lm93bktleXModGFyZ2V0KS5maWx0ZXIoKGtleSkgPT4ge1xuXHRcdFx0XHR2YXIgc291cmNlID0gc291cmNlcy5nZXQoa2V5KTtcblx0XHRcdFx0cmV0dXJuIHNvdXJjZSA9PT0gdW5kZWZpbmVkIHx8IHNvdXJjZS52ICE9PSBVTklOSVRJQUxJWkVEO1xuXHRcdFx0fSk7XG5cblx0XHRcdGZvciAodmFyIFtrZXksIHNvdXJjZV0gb2Ygc291cmNlcykge1xuXHRcdFx0XHRpZiAoc291cmNlLnYgIT09IFVOSU5JVElBTElaRUQgJiYgIShrZXkgaW4gdGFyZ2V0KSkge1xuXHRcdFx0XHRcdG93bl9rZXlzLnB1c2goa2V5KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb3duX2tleXM7XG5cdFx0fSxcblxuXHRcdHNldFByb3RvdHlwZU9mKCkge1xuXHRcdFx0ZS5zdGF0ZV9wcm90b3R5cGVfZml4ZWQoKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7U291cmNlPG51bWJlcj59IHNpZ25hbFxuICogQHBhcmFtIHsxIHwgLTF9IFtkXVxuICovXG5mdW5jdGlvbiB1cGRhdGVfdmVyc2lvbihzaWduYWwsIGQgPSAxKSB7XG5cdHNldChzaWduYWwsIHNpZ25hbC52ICsgZCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHthbnl9IHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRfcHJveGllZF92YWx1ZSh2YWx1ZSkge1xuXHRpZiAodmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiBTVEFURV9TWU1CT0wgaW4gdmFsdWUpIHtcblx0XHRyZXR1cm4gdmFsdWVbU1RBVEVfU1lNQk9MXTtcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2FueX0gYVxuICogQHBhcmFtIHthbnl9IGJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzKGEsIGIpIHtcblx0cmV0dXJuIE9iamVjdC5pcyhnZXRfcHJveGllZF92YWx1ZShhKSwgZ2V0X3Byb3hpZWRfdmFsdWUoYikpO1xufVxuIiwgImltcG9ydCAqIGFzIHcgZnJvbSAnLi4vd2FybmluZ3MuanMnO1xuaW1wb3J0IHsgZ2V0X3Byb3hpZWRfdmFsdWUgfSBmcm9tICcuLi9wcm94eS5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0X2FycmF5X3Byb3RvdHlwZV93YXJuaW5ncygpIHtcblx0Y29uc3QgYXJyYXlfcHJvdG90eXBlID0gQXJyYXkucHJvdG90eXBlO1xuXHQvLyBUaGUgUkVQTCBlbmRzIHVwIGhlcmUgb3ZlciBhbmQgb3ZlciwgYW5kIHRoaXMgcHJldmVudHMgaXQgZnJvbSBhZGRpbmcgbW9yZSBhbmQgbW9yZSBwYXRjaGVzXG5cdC8vIG9mIHRoZSBzYW1lIGtpbmQgdG8gdGhlIHByb3RvdHlwZSwgd2hpY2ggd291bGQgc2xvdyBkb3duIGV2ZXJ5dGhpbmcgb3ZlciB0aW1lLlxuXHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdGNvbnN0IGNsZWFudXAgPSBBcnJheS5fX3N2ZWx0ZV9jbGVhbnVwO1xuXHRpZiAoY2xlYW51cCkge1xuXHRcdGNsZWFudXAoKTtcblx0fVxuXG5cdGNvbnN0IHsgaW5kZXhPZiwgbGFzdEluZGV4T2YsIGluY2x1ZGVzIH0gPSBhcnJheV9wcm90b3R5cGU7XG5cblx0YXJyYXlfcHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoaXRlbSwgZnJvbV9pbmRleCkge1xuXHRcdGNvbnN0IGluZGV4ID0gaW5kZXhPZi5jYWxsKHRoaXMsIGl0ZW0sIGZyb21faW5kZXgpO1xuXG5cdFx0aWYgKGluZGV4ID09PSAtMSkge1xuXHRcdFx0Zm9yIChsZXQgaSA9IGZyb21faW5kZXggPz8gMDsgaSA8IHRoaXMubGVuZ3RoOyBpICs9IDEpIHtcblx0XHRcdFx0aWYgKGdldF9wcm94aWVkX3ZhbHVlKHRoaXNbaV0pID09PSBpdGVtKSB7XG5cdFx0XHRcdFx0dy5zdGF0ZV9wcm94eV9lcXVhbGl0eV9taXNtYXRjaCgnYXJyYXkuaW5kZXhPZiguLi4pJyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gaW5kZXg7XG5cdH07XG5cblx0YXJyYXlfcHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gKGl0ZW0sIGZyb21faW5kZXgpIHtcblx0XHQvLyB3ZSBuZWVkIHRvIHNwZWNpZnkgdGhpcy5sZW5ndGggLSAxIGJlY2F1c2UgaXQncyBwcm9iYWJseSB1c2luZyBzb21ldGhpbmcgbGlrZVxuXHRcdC8vIGBhcmd1bWVudHNgIGluc2lkZSBzbyBwYXNzaW5nIHVuZGVmaW5lZCBpcyBkaWZmZXJlbnQgZnJvbSBub3QgcGFzc2luZyBhbnl0aGluZ1xuXHRcdGNvbnN0IGluZGV4ID0gbGFzdEluZGV4T2YuY2FsbCh0aGlzLCBpdGVtLCBmcm9tX2luZGV4ID8/IHRoaXMubGVuZ3RoIC0gMSk7XG5cblx0XHRpZiAoaW5kZXggPT09IC0xKSB7XG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8PSAoZnJvbV9pbmRleCA/PyB0aGlzLmxlbmd0aCAtIDEpOyBpICs9IDEpIHtcblx0XHRcdFx0aWYgKGdldF9wcm94aWVkX3ZhbHVlKHRoaXNbaV0pID09PSBpdGVtKSB7XG5cdFx0XHRcdFx0dy5zdGF0ZV9wcm94eV9lcXVhbGl0eV9taXNtYXRjaCgnYXJyYXkubGFzdEluZGV4T2YoLi4uKScpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGluZGV4O1xuXHR9O1xuXG5cdGFycmF5X3Byb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIChpdGVtLCBmcm9tX2luZGV4KSB7XG5cdFx0Y29uc3QgaGFzID0gaW5jbHVkZXMuY2FsbCh0aGlzLCBpdGVtLCBmcm9tX2luZGV4KTtcblxuXHRcdGlmICghaGFzKSB7XG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpICs9IDEpIHtcblx0XHRcdFx0aWYgKGdldF9wcm94aWVkX3ZhbHVlKHRoaXNbaV0pID09PSBpdGVtKSB7XG5cdFx0XHRcdFx0dy5zdGF0ZV9wcm94eV9lcXVhbGl0eV9taXNtYXRjaCgnYXJyYXkuaW5jbHVkZXMoLi4uKScpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGhhcztcblx0fTtcblxuXHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdEFycmF5Ll9fc3ZlbHRlX2NsZWFudXAgPSAoKSA9PiB7XG5cdFx0YXJyYXlfcHJvdG90eXBlLmluZGV4T2YgPSBpbmRleE9mO1xuXHRcdGFycmF5X3Byb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGxhc3RJbmRleE9mO1xuXHRcdGFycmF5X3Byb3RvdHlwZS5pbmNsdWRlcyA9IGluY2x1ZGVzO1xuXHR9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7YW55fSBhXG4gKiBAcGFyYW0ge2FueX0gYlxuICogQHBhcmFtIHtib29sZWFufSBlcXVhbFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpY3RfZXF1YWxzKGEsIGIsIGVxdWFsID0gdHJ1ZSkge1xuXHQvLyB0cnktY2F0Y2ggbmVlZGVkIGJlY2F1c2UgdGhpcyB0cmllcyB0byByZWFkIHByb3BlcnRpZXMgb2YgYGFgIGFuZCBgYmAsXG5cdC8vIHdoaWNoIGNvdWxkIGJlIGRpc2FsbG93ZWQgZm9yIGV4YW1wbGUgaW4gYSBzZWN1cmUgY29udGV4dFxuXHR0cnkge1xuXHRcdGlmICgoYSA9PT0gYikgIT09IChnZXRfcHJveGllZF92YWx1ZShhKSA9PT0gZ2V0X3Byb3hpZWRfdmFsdWUoYikpKSB7XG5cdFx0XHR3LnN0YXRlX3Byb3h5X2VxdWFsaXR5X21pc21hdGNoKGVxdWFsID8gJz09PScgOiAnIT09Jyk7XG5cdFx0fVxuXHR9IGNhdGNoIHt9XG5cblx0cmV0dXJuIChhID09PSBiKSA9PT0gZXF1YWw7XG59XG5cbi8qKlxuICogQHBhcmFtIHthbnl9IGFcbiAqIEBwYXJhbSB7YW55fSBiXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGVxdWFsXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiLCBlcXVhbCA9IHRydWUpIHtcblx0aWYgKChhID09IGIpICE9PSAoZ2V0X3Byb3hpZWRfdmFsdWUoYSkgPT0gZ2V0X3Byb3hpZWRfdmFsdWUoYikpKSB7XG5cdFx0dy5zdGF0ZV9wcm94eV9lcXVhbGl0eV9taXNtYXRjaChlcXVhbCA/ICc9PScgOiAnIT0nKTtcblx0fVxuXG5cdHJldHVybiAoYSA9PSBiKSA9PT0gZXF1YWw7XG59XG4iLCAiLyoqIEBpbXBvcnQgeyBUZW1wbGF0ZU5vZGUgfSBmcm9tICcjY2xpZW50JyAqL1xuaW1wb3J0IHsgaHlkcmF0ZV9ub2RlLCBoeWRyYXRpbmcsIHNldF9oeWRyYXRlX25vZGUgfSBmcm9tICcuL2h5ZHJhdGlvbi5qcyc7XG5pbXBvcnQgeyBERVYgfSBmcm9tICdlc20tZW52JztcbmltcG9ydCB7IGluaXRfYXJyYXlfcHJvdG90eXBlX3dhcm5pbmdzIH0gZnJvbSAnLi4vZGV2L2VxdWFsaXR5LmpzJztcbmltcG9ydCB7IGdldF9kZXNjcmlwdG9yIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3V0aWxzLmpzJztcblxuLy8gZXhwb3J0IHRoZXNlIGZvciByZWZlcmVuY2UgaW4gdGhlIGNvbXBpbGVkIGNvZGUsIG1ha2luZyBnbG9iYWwgbmFtZSBkZWR1cGxpY2F0aW9uIHVubmVjZXNzYXJ5XG4vKiogQHR5cGUge1dpbmRvd30gKi9cbmV4cG9ydCB2YXIgJHdpbmRvdztcblxuLyoqIEB0eXBlIHtEb2N1bWVudH0gKi9cbmV4cG9ydCB2YXIgJGRvY3VtZW50O1xuXG4vKiogQHR5cGUgeygpID0+IE5vZGUgfCBudWxsfSAqL1xudmFyIGZpcnN0X2NoaWxkX2dldHRlcjtcbi8qKiBAdHlwZSB7KCkgPT4gTm9kZSB8IG51bGx9ICovXG52YXIgbmV4dF9zaWJsaW5nX2dldHRlcjtcblxuLyoqXG4gKiBJbml0aWFsaXplIHRoZXNlIGxhemlseSB0byBhdm9pZCBpc3N1ZXMgd2hlbiB1c2luZyB0aGUgcnVudGltZSBpbiBhIHNlcnZlciBjb250ZXh0XG4gKiB3aGVyZSB0aGVzZSBnbG9iYWxzIGFyZSBub3QgYXZhaWxhYmxlIHdoaWxlIGF2b2lkaW5nIGEgc2VwYXJhdGUgc2VydmVyIGVudHJ5IHBvaW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0X29wZXJhdGlvbnMoKSB7XG5cdGlmICgkd2luZG93ICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQkd2luZG93ID0gd2luZG93O1xuXHQkZG9jdW1lbnQgPSBkb2N1bWVudDtcblxuXHR2YXIgZWxlbWVudF9wcm90b3R5cGUgPSBFbGVtZW50LnByb3RvdHlwZTtcblx0dmFyIG5vZGVfcHJvdG90eXBlID0gTm9kZS5wcm90b3R5cGU7XG5cblx0Ly8gQHRzLWlnbm9yZVxuXHRmaXJzdF9jaGlsZF9nZXR0ZXIgPSBnZXRfZGVzY3JpcHRvcihub2RlX3Byb3RvdHlwZSwgJ2ZpcnN0Q2hpbGQnKS5nZXQ7XG5cdC8vIEB0cy1pZ25vcmVcblx0bmV4dF9zaWJsaW5nX2dldHRlciA9IGdldF9kZXNjcmlwdG9yKG5vZGVfcHJvdG90eXBlLCAnbmV4dFNpYmxpbmcnKS5nZXQ7XG5cblx0Ly8gdGhlIGZvbGxvd2luZyBhc3NpZ25tZW50cyBpbXByb3ZlIHBlcmYgb2YgbG9va3VwcyBvbiBET00gbm9kZXNcblx0Ly8gQHRzLWV4cGVjdC1lcnJvclxuXHRlbGVtZW50X3Byb3RvdHlwZS5fX2NsaWNrID0gdW5kZWZpbmVkO1xuXHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdGVsZW1lbnRfcHJvdG90eXBlLl9fY2xhc3NOYW1lID0gJyc7XG5cdC8vIEB0cy1leHBlY3QtZXJyb3Jcblx0ZWxlbWVudF9wcm90b3R5cGUuX19hdHRyaWJ1dGVzID0gbnVsbDtcblx0Ly8gQHRzLWV4cGVjdC1lcnJvclxuXHRlbGVtZW50X3Byb3RvdHlwZS5fX3N0eWxlcyA9IG51bGw7XG5cdC8vIEB0cy1leHBlY3QtZXJyb3Jcblx0ZWxlbWVudF9wcm90b3R5cGUuX19lID0gdW5kZWZpbmVkO1xuXG5cdC8vIEB0cy1leHBlY3QtZXJyb3Jcblx0VGV4dC5wcm90b3R5cGUuX190ID0gdW5kZWZpbmVkO1xuXG5cdGlmIChERVYpIHtcblx0XHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdFx0ZWxlbWVudF9wcm90b3R5cGUuX19zdmVsdGVfbWV0YSA9IG51bGw7XG5cblx0XHRpbml0X2FycmF5X3Byb3RvdHlwZV93YXJuaW5ncygpO1xuXHR9XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcmV0dXJucyB7VGV4dH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZV90ZXh0KHZhbHVlID0gJycpIHtcblx0cmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBAdGVtcGxhdGUge05vZGV9IE5cbiAqIEBwYXJhbSB7Tn0gbm9kZVxuICogQHJldHVybnMge05vZGUgfCBudWxsfVxuICovXG4vKkBfX05PX1NJREVfRUZGRUNUU19fKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRfZmlyc3RfY2hpbGQobm9kZSkge1xuXHRyZXR1cm4gZmlyc3RfY2hpbGRfZ2V0dGVyLmNhbGwobm9kZSk7XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIHtOb2RlfSBOXG4gKiBAcGFyYW0ge059IG5vZGVcbiAqIEByZXR1cm5zIHtOb2RlIHwgbnVsbH1cbiAqL1xuLypAX19OT19TSURFX0VGRkVDVFNfXyovXG5leHBvcnQgZnVuY3Rpb24gZ2V0X25leHRfc2libGluZyhub2RlKSB7XG5cdHJldHVybiBuZXh0X3NpYmxpbmdfZ2V0dGVyLmNhbGwobm9kZSk7XG59XG5cbi8qKlxuICogRG9uJ3QgbWFyayB0aGlzIGFzIHNpZGUtZWZmZWN0LWZyZWUsIGh5ZHJhdGlvbiBuZWVkcyB0byB3YWxrIGFsbCBub2Rlc1xuICogQHRlbXBsYXRlIHtOb2RlfSBOXG4gKiBAcGFyYW0ge059IG5vZGVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNfdGV4dFxuICogQHJldHVybnMge05vZGUgfCBudWxsfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGQobm9kZSwgaXNfdGV4dCkge1xuXHRpZiAoIWh5ZHJhdGluZykge1xuXHRcdHJldHVybiBnZXRfZmlyc3RfY2hpbGQobm9kZSk7XG5cdH1cblxuXHR2YXIgY2hpbGQgPSAvKiogQHR5cGUge1RlbXBsYXRlTm9kZX0gKi8gKGdldF9maXJzdF9jaGlsZChoeWRyYXRlX25vZGUpKTtcblxuXHQvLyBDaGlsZCBjYW4gYmUgbnVsbCBpZiB3ZSBoYXZlIGFuIGVsZW1lbnQgd2l0aCBhIHNpbmdsZSBjaGlsZCwgbGlrZSBgPHA+e3RleHR9PC9wPmAsIHdoZXJlIGB0ZXh0YCBpcyBlbXB0eVxuXHRpZiAoY2hpbGQgPT09IG51bGwpIHtcblx0XHRjaGlsZCA9IGh5ZHJhdGVfbm9kZS5hcHBlbmRDaGlsZChjcmVhdGVfdGV4dCgpKTtcblx0fSBlbHNlIGlmIChpc190ZXh0ICYmIGNoaWxkLm5vZGVUeXBlICE9PSAzKSB7XG5cdFx0dmFyIHRleHQgPSBjcmVhdGVfdGV4dCgpO1xuXHRcdGNoaWxkPy5iZWZvcmUodGV4dCk7XG5cdFx0c2V0X2h5ZHJhdGVfbm9kZSh0ZXh0KTtcblx0XHRyZXR1cm4gdGV4dDtcblx0fVxuXG5cdHNldF9oeWRyYXRlX25vZGUoY2hpbGQpO1xuXHRyZXR1cm4gY2hpbGQ7XG59XG5cbi8qKlxuICogRG9uJ3QgbWFyayB0aGlzIGFzIHNpZGUtZWZmZWN0LWZyZWUsIGh5ZHJhdGlvbiBuZWVkcyB0byB3YWxrIGFsbCBub2Rlc1xuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50IHwgVGVtcGxhdGVOb2RlW119IGZyYWdtZW50XG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzX3RleHRcbiAqIEByZXR1cm5zIHtOb2RlIHwgbnVsbH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpcnN0X2NoaWxkKGZyYWdtZW50LCBpc190ZXh0KSB7XG5cdGlmICghaHlkcmF0aW5nKSB7XG5cdFx0Ly8gd2hlbiBub3QgaHlkcmF0aW5nLCBgZnJhZ21lbnRgIGlzIGEgYERvY3VtZW50RnJhZ21lbnRgICh0aGUgcmVzdWx0IG9mIGNhbGxpbmcgYG9wZW5fZnJhZ2ApXG5cdFx0dmFyIGZpcnN0ID0gLyoqIEB0eXBlIHtEb2N1bWVudEZyYWdtZW50fSAqLyAoZ2V0X2ZpcnN0X2NoaWxkKC8qKiBAdHlwZSB7Tm9kZX0gKi8gKGZyYWdtZW50KSkpO1xuXG5cdFx0Ly8gVE9ETyBwcmV2ZW50IHVzZXIgY29tbWVudHMgd2l0aCB0aGUgZW1wdHkgc3RyaW5nIHdoZW4gcHJlc2VydmVDb21tZW50cyBpcyB0cnVlXG5cdFx0aWYgKGZpcnN0IGluc3RhbmNlb2YgQ29tbWVudCAmJiBmaXJzdC5kYXRhID09PSAnJykgcmV0dXJuIGdldF9uZXh0X3NpYmxpbmcoZmlyc3QpO1xuXG5cdFx0cmV0dXJuIGZpcnN0O1xuXHR9XG5cblx0Ly8gaWYgYW4ge2V4cHJlc3Npb259IGlzIGVtcHR5IGR1cmluZyBTU1IsIHRoZXJlIG1pZ2h0IGJlIG5vXG5cdC8vIHRleHQgbm9kZSB0byBoeWRyYXRlIFx1MjAxNCB3ZSBtdXN0IHRoZXJlZm9yZSBjcmVhdGUgb25lXG5cdGlmIChpc190ZXh0ICYmIGh5ZHJhdGVfbm9kZT8ubm9kZVR5cGUgIT09IDMpIHtcblx0XHR2YXIgdGV4dCA9IGNyZWF0ZV90ZXh0KCk7XG5cblx0XHRoeWRyYXRlX25vZGU/LmJlZm9yZSh0ZXh0KTtcblx0XHRzZXRfaHlkcmF0ZV9ub2RlKHRleHQpO1xuXHRcdHJldHVybiB0ZXh0O1xuXHR9XG5cblx0cmV0dXJuIGh5ZHJhdGVfbm9kZTtcbn1cblxuLyoqXG4gKiBEb24ndCBtYXJrIHRoaXMgYXMgc2lkZS1lZmZlY3QtZnJlZSwgaHlkcmF0aW9uIG5lZWRzIHRvIHdhbGsgYWxsIG5vZGVzXG4gKiBAcGFyYW0ge1RlbXBsYXRlTm9kZX0gbm9kZVxuICogQHBhcmFtIHtudW1iZXJ9IGNvdW50XG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzX3RleHRcbiAqIEByZXR1cm5zIHtOb2RlIHwgbnVsbH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpYmxpbmcobm9kZSwgY291bnQgPSAxLCBpc190ZXh0ID0gZmFsc2UpIHtcblx0bGV0IG5leHRfc2libGluZyA9IGh5ZHJhdGluZyA/IGh5ZHJhdGVfbm9kZSA6IG5vZGU7XG5cdHZhciBsYXN0X3NpYmxpbmc7XG5cblx0d2hpbGUgKGNvdW50LS0pIHtcblx0XHRsYXN0X3NpYmxpbmcgPSBuZXh0X3NpYmxpbmc7XG5cdFx0bmV4dF9zaWJsaW5nID0gLyoqIEB0eXBlIHtUZW1wbGF0ZU5vZGV9ICovIChnZXRfbmV4dF9zaWJsaW5nKG5leHRfc2libGluZykpO1xuXHR9XG5cblx0aWYgKCFoeWRyYXRpbmcpIHtcblx0XHRyZXR1cm4gbmV4dF9zaWJsaW5nO1xuXHR9XG5cblx0dmFyIHR5cGUgPSBuZXh0X3NpYmxpbmc/Lm5vZGVUeXBlO1xuXG5cdC8vIGlmIGEgc2libGluZyB7ZXhwcmVzc2lvbn0gaXMgZW1wdHkgZHVyaW5nIFNTUiwgdGhlcmUgbWlnaHQgYmUgbm9cblx0Ly8gdGV4dCBub2RlIHRvIGh5ZHJhdGUgXHUyMDE0IHdlIG11c3QgdGhlcmVmb3JlIGNyZWF0ZSBvbmVcblx0aWYgKGlzX3RleHQgJiYgdHlwZSAhPT0gMykge1xuXHRcdHZhciB0ZXh0ID0gY3JlYXRlX3RleHQoKTtcblx0XHQvLyBJZiB0aGUgbmV4dCBzaWJsaW5nIGlzIGBudWxsYCBhbmQgd2UncmUgaGFuZGxpbmcgdGV4dCB0aGVuIGl0J3MgYmVjYXVzZVxuXHRcdC8vIHRoZSBTU1IgY29udGVudCB3YXMgZW1wdHkgZm9yIHRoZSB0ZXh0LCBzbyB3ZSBuZWVkIHRvIGdlbmVyYXRlIGEgbmV3IHRleHRcblx0XHQvLyBub2RlIGFuZCBpbnNlcnQgaXQgYWZ0ZXIgdGhlIGxhc3Qgc2libGluZ1xuXHRcdGlmIChuZXh0X3NpYmxpbmcgPT09IG51bGwpIHtcblx0XHRcdGxhc3Rfc2libGluZz8uYWZ0ZXIodGV4dCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5leHRfc2libGluZy5iZWZvcmUodGV4dCk7XG5cdFx0fVxuXHRcdHNldF9oeWRyYXRlX25vZGUodGV4dCk7XG5cdFx0cmV0dXJuIHRleHQ7XG5cdH1cblxuXHRzZXRfaHlkcmF0ZV9ub2RlKG5leHRfc2libGluZyk7XG5cdHJldHVybiAvKiogQHR5cGUge1RlbXBsYXRlTm9kZX0gKi8gKG5leHRfc2libGluZyk7XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIHtOb2RlfSBOXG4gKiBAcGFyYW0ge059IG5vZGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJfdGV4dF9jb250ZW50KG5vZGUpIHtcblx0bm9kZS50ZXh0Q29udGVudCA9ICcnO1xufVxuIiwgIi8qKiBAaW1wb3J0IHsgRGVyaXZlZCwgRWZmZWN0IH0gZnJvbSAnI2NsaWVudCcgKi9cbmltcG9ydCB7IERFViB9IGZyb20gJ2VzbS1lbnYnO1xuaW1wb3J0IHtcblx0Q0xFQU4sXG5cdERFUklWRUQsXG5cdERFU1RST1lFRCxcblx0RElSVFksXG5cdEVGRkVDVF9IQVNfREVSSVZFRCxcblx0TUFZQkVfRElSVFksXG5cdFVOT1dORURcbn0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7XG5cdGFjdGl2ZV9yZWFjdGlvbixcblx0YWN0aXZlX2VmZmVjdCxcblx0cmVtb3ZlX3JlYWN0aW9ucyxcblx0c2V0X3NpZ25hbF9zdGF0dXMsXG5cdHNraXBfcmVhY3Rpb24sXG5cdHVwZGF0ZV9yZWFjdGlvbixcblx0aW5jcmVtZW50X3ZlcnNpb24sXG5cdHNldF9hY3RpdmVfZWZmZWN0LFxuXHRjb21wb25lbnRfY29udGV4dFxufSBmcm9tICcuLi9ydW50aW1lLmpzJztcbmltcG9ydCB7IGVxdWFscywgc2FmZV9lcXVhbHMgfSBmcm9tICcuL2VxdWFsaXR5LmpzJztcbmltcG9ydCAqIGFzIGUgZnJvbSAnLi4vZXJyb3JzLmpzJztcbmltcG9ydCB7IGRlc3Ryb3lfZWZmZWN0IH0gZnJvbSAnLi9lZmZlY3RzLmpzJztcbmltcG9ydCB7IGluc3BlY3RfZWZmZWN0cywgc2V0X2luc3BlY3RfZWZmZWN0cyB9IGZyb20gJy4vc291cmNlcy5qcyc7XG5pbXBvcnQgeyBnZXRfc3RhY2sgfSBmcm9tICcuLi9kZXYvdHJhY2luZy5qcyc7XG5pbXBvcnQgeyB0cmFjaW5nX21vZGVfZmxhZyB9IGZyb20gJy4uLy4uL2ZsYWdzL2luZGV4LmpzJztcblxuLyoqXG4gKiBAdGVtcGxhdGUgVlxuICogQHBhcmFtIHsoKSA9PiBWfSBmblxuICogQHJldHVybnMge0Rlcml2ZWQ8Vj59XG4gKi9cbi8qI19fTk9fU0lERV9FRkZFQ1RTX18qL1xuZXhwb3J0IGZ1bmN0aW9uIGRlcml2ZWQoZm4pIHtcblx0dmFyIGZsYWdzID0gREVSSVZFRCB8IERJUlRZO1xuXG5cdGlmIChhY3RpdmVfZWZmZWN0ID09PSBudWxsKSB7XG5cdFx0ZmxhZ3MgfD0gVU5PV05FRDtcblx0fSBlbHNlIHtcblx0XHQvLyBTaW5jZSBkZXJpdmVkcyBhcmUgZXZhbHVhdGVkIGxhemlseSwgYW55IGVmZmVjdHMgY3JlYXRlZCBpbnNpZGUgdGhlbSBhcmVcblx0XHQvLyBjcmVhdGVkIHRvbyBsYXRlIHRvIGVuc3VyZSB0aGF0IHRoZSBwYXJlbnQgZWZmZWN0IGlzIGFkZGVkIHRvIHRoZSB0cmVlXG5cdFx0YWN0aXZlX2VmZmVjdC5mIHw9IEVGRkVDVF9IQVNfREVSSVZFRDtcblx0fVxuXG5cdHZhciBwYXJlbnRfZGVyaXZlZCA9XG5cdFx0YWN0aXZlX3JlYWN0aW9uICE9PSBudWxsICYmIChhY3RpdmVfcmVhY3Rpb24uZiAmIERFUklWRUQpICE9PSAwXG5cdFx0XHQ/IC8qKiBAdHlwZSB7RGVyaXZlZH0gKi8gKGFjdGl2ZV9yZWFjdGlvbilcblx0XHRcdDogbnVsbDtcblxuXHQvKiogQHR5cGUge0Rlcml2ZWQ8Vj59ICovXG5cdGNvbnN0IHNpZ25hbCA9IHtcblx0XHRjaGlsZHJlbjogbnVsbCxcblx0XHRjdHg6IGNvbXBvbmVudF9jb250ZXh0LFxuXHRcdGRlcHM6IG51bGwsXG5cdFx0ZXF1YWxzLFxuXHRcdGY6IGZsYWdzLFxuXHRcdGZuLFxuXHRcdHJlYWN0aW9uczogbnVsbCxcblx0XHR2OiAvKiogQHR5cGUge1Z9ICovIChudWxsKSxcblx0XHR2ZXJzaW9uOiAwLFxuXHRcdHBhcmVudDogcGFyZW50X2Rlcml2ZWQgPz8gYWN0aXZlX2VmZmVjdFxuXHR9O1xuXG5cdGlmIChERVYgJiYgdHJhY2luZ19tb2RlX2ZsYWcpIHtcblx0XHRzaWduYWwuY3JlYXRlZCA9IGdldF9zdGFjaygnQ3JlYXRlZEF0Jyk7XG5cdH1cblxuXHRpZiAocGFyZW50X2Rlcml2ZWQgIT09IG51bGwpIHtcblx0XHQocGFyZW50X2Rlcml2ZWQuY2hpbGRyZW4gPz89IFtdKS5wdXNoKHNpZ25hbCk7XG5cdH1cblxuXHRyZXR1cm4gc2lnbmFsO1xufVxuXG4vKipcbiAqIEB0ZW1wbGF0ZSBWXG4gKiBAcGFyYW0geygpID0+IFZ9IGZuXG4gKiBAcmV0dXJucyB7RGVyaXZlZDxWPn1cbiAqL1xuLyojX19OT19TSURFX0VGRkVDVFNfXyovXG5leHBvcnQgZnVuY3Rpb24gZGVyaXZlZF9zYWZlX2VxdWFsKGZuKSB7XG5cdGNvbnN0IHNpZ25hbCA9IGRlcml2ZWQoZm4pO1xuXHRzaWduYWwuZXF1YWxzID0gc2FmZV9lcXVhbHM7XG5cdHJldHVybiBzaWduYWw7XG59XG5cbi8qKlxuICogQHBhcmFtIHtEZXJpdmVkfSBkZXJpdmVkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gZGVzdHJveV9kZXJpdmVkX2NoaWxkcmVuKGRlcml2ZWQpIHtcblx0dmFyIGNoaWxkcmVuID0gZGVyaXZlZC5jaGlsZHJlbjtcblxuXHRpZiAoY2hpbGRyZW4gIT09IG51bGwpIHtcblx0XHRkZXJpdmVkLmNoaWxkcmVuID0gbnVsbDtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpICs9IDEpIHtcblx0XHRcdHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXHRcdFx0aWYgKChjaGlsZC5mICYgREVSSVZFRCkgIT09IDApIHtcblx0XHRcdFx0ZGVzdHJveV9kZXJpdmVkKC8qKiBAdHlwZSB7RGVyaXZlZH0gKi8gKGNoaWxkKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZXN0cm95X2VmZmVjdCgvKiogQHR5cGUge0VmZmVjdH0gKi8gKGNoaWxkKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogVGhlIGN1cnJlbnRseSB1cGRhdGluZyBkZXJpdmVkcywgdXNlZCB0byBkZXRlY3QgaW5maW5pdGUgcmVjdXJzaW9uXG4gKiBpbiBkZXYgbW9kZSBhbmQgcHJvdmlkZSBhIG5pY2VyIGVycm9yIHRoYW4gJ3RvbyBtdWNoIHJlY3Vyc2lvbidcbiAqIEB0eXBlIHtEZXJpdmVkW119XG4gKi9cbmxldCBzdGFjayA9IFtdO1xuXG4vKipcbiAqIEBwYXJhbSB7RGVyaXZlZH0gZGVyaXZlZFxuICogQHJldHVybnMge0VmZmVjdCB8IG51bGx9XG4gKi9cbmZ1bmN0aW9uIGdldF9kZXJpdmVkX3BhcmVudF9lZmZlY3QoZGVyaXZlZCkge1xuXHR2YXIgcGFyZW50ID0gZGVyaXZlZC5wYXJlbnQ7XG5cdHdoaWxlIChwYXJlbnQgIT09IG51bGwpIHtcblx0XHRpZiAoKHBhcmVudC5mICYgREVSSVZFRCkgPT09IDApIHtcblx0XHRcdHJldHVybiAvKiogQHR5cGUge0VmZmVjdH0gKi8gKHBhcmVudCk7XG5cdFx0fVxuXHRcdHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7RGVyaXZlZH0gZGVyaXZlZFxuICogQHJldHVybnMge1R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleGVjdXRlX2Rlcml2ZWQoZGVyaXZlZCkge1xuXHR2YXIgdmFsdWU7XG5cdHZhciBwcmV2X2FjdGl2ZV9lZmZlY3QgPSBhY3RpdmVfZWZmZWN0O1xuXG5cdHNldF9hY3RpdmVfZWZmZWN0KGdldF9kZXJpdmVkX3BhcmVudF9lZmZlY3QoZGVyaXZlZCkpO1xuXG5cdGlmIChERVYpIHtcblx0XHRsZXQgcHJldl9pbnNwZWN0X2VmZmVjdHMgPSBpbnNwZWN0X2VmZmVjdHM7XG5cdFx0c2V0X2luc3BlY3RfZWZmZWN0cyhuZXcgU2V0KCkpO1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoc3RhY2suaW5jbHVkZXMoZGVyaXZlZCkpIHtcblx0XHRcdFx0ZS5kZXJpdmVkX3JlZmVyZW5jZXNfc2VsZigpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdGFjay5wdXNoKGRlcml2ZWQpO1xuXG5cdFx0XHRkZXN0cm95X2Rlcml2ZWRfY2hpbGRyZW4oZGVyaXZlZCk7XG5cdFx0XHR2YWx1ZSA9IHVwZGF0ZV9yZWFjdGlvbihkZXJpdmVkKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0c2V0X2FjdGl2ZV9lZmZlY3QocHJldl9hY3RpdmVfZWZmZWN0KTtcblx0XHRcdHNldF9pbnNwZWN0X2VmZmVjdHMocHJldl9pbnNwZWN0X2VmZmVjdHMpO1xuXHRcdFx0c3RhY2sucG9wKCk7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHRyeSB7XG5cdFx0XHRkZXN0cm95X2Rlcml2ZWRfY2hpbGRyZW4oZGVyaXZlZCk7XG5cdFx0XHR2YWx1ZSA9IHVwZGF0ZV9yZWFjdGlvbihkZXJpdmVkKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0c2V0X2FjdGl2ZV9lZmZlY3QocHJldl9hY3RpdmVfZWZmZWN0KTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdmFsdWU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtEZXJpdmVkfSBkZXJpdmVkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZV9kZXJpdmVkKGRlcml2ZWQpIHtcblx0dmFyIHZhbHVlID0gZXhlY3V0ZV9kZXJpdmVkKGRlcml2ZWQpO1xuXHR2YXIgc3RhdHVzID1cblx0XHQoc2tpcF9yZWFjdGlvbiB8fCAoZGVyaXZlZC5mICYgVU5PV05FRCkgIT09IDApICYmIGRlcml2ZWQuZGVwcyAhPT0gbnVsbCA/IE1BWUJFX0RJUlRZIDogQ0xFQU47XG5cblx0c2V0X3NpZ25hbF9zdGF0dXMoZGVyaXZlZCwgc3RhdHVzKTtcblxuXHRpZiAoIWRlcml2ZWQuZXF1YWxzKHZhbHVlKSkge1xuXHRcdGRlcml2ZWQudiA9IHZhbHVlO1xuXHRcdGRlcml2ZWQudmVyc2lvbiA9IGluY3JlbWVudF92ZXJzaW9uKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0Rlcml2ZWR9IGRlcml2ZWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzdHJveV9kZXJpdmVkKGRlcml2ZWQpIHtcblx0ZGVzdHJveV9kZXJpdmVkX2NoaWxkcmVuKGRlcml2ZWQpO1xuXHRyZW1vdmVfcmVhY3Rpb25zKGRlcml2ZWQsIDApO1xuXHRzZXRfc2lnbmFsX3N0YXR1cyhkZXJpdmVkLCBERVNUUk9ZRUQpO1xuXG5cdGRlcml2ZWQudiA9IGRlcml2ZWQuY2hpbGRyZW4gPSBkZXJpdmVkLmRlcHMgPSBkZXJpdmVkLmN0eCA9IGRlcml2ZWQucmVhY3Rpb25zID0gbnVsbDtcbn1cbiIsICIvKiogQGltcG9ydCB7IENvbXBvbmVudENvbnRleHQsIENvbXBvbmVudENvbnRleHRMZWdhY3ksIERlcml2ZWQsIEVmZmVjdCwgVGVtcGxhdGVOb2RlLCBUcmFuc2l0aW9uTWFuYWdlciB9IGZyb20gJyNjbGllbnQnICovXG5pbXBvcnQge1xuXHRjaGVja19kaXJ0aW5lc3MsXG5cdGNvbXBvbmVudF9jb250ZXh0LFxuXHRhY3RpdmVfZWZmZWN0LFxuXHRhY3RpdmVfcmVhY3Rpb24sXG5cdGRldl9jdXJyZW50X2NvbXBvbmVudF9mdW5jdGlvbixcblx0dXBkYXRlX2VmZmVjdCxcblx0Z2V0LFxuXHRpc19kZXN0cm95aW5nX2VmZmVjdCxcblx0aXNfZmx1c2hpbmdfZWZmZWN0LFxuXHRyZW1vdmVfcmVhY3Rpb25zLFxuXHRzY2hlZHVsZV9lZmZlY3QsXG5cdHNldF9hY3RpdmVfcmVhY3Rpb24sXG5cdHNldF9pc19kZXN0cm95aW5nX2VmZmVjdCxcblx0c2V0X2lzX2ZsdXNoaW5nX2VmZmVjdCxcblx0c2V0X3NpZ25hbF9zdGF0dXMsXG5cdHVudHJhY2ssXG5cdHNraXBfcmVhY3Rpb25cbn0gZnJvbSAnLi4vcnVudGltZS5qcyc7XG5pbXBvcnQge1xuXHRESVJUWSxcblx0QlJBTkNIX0VGRkVDVCxcblx0UkVOREVSX0VGRkVDVCxcblx0RUZGRUNULFxuXHRERVNUUk9ZRUQsXG5cdElORVJULFxuXHRFRkZFQ1RfUkFOLFxuXHRCTE9DS19FRkZFQ1QsXG5cdFJPT1RfRUZGRUNULFxuXHRFRkZFQ1RfVFJBTlNQQVJFTlQsXG5cdERFUklWRUQsXG5cdFVOT1dORUQsXG5cdENMRUFOLFxuXHRJTlNQRUNUX0VGRkVDVCxcblx0SEVBRF9FRkZFQ1QsXG5cdE1BWUJFX0RJUlRZLFxuXHRFRkZFQ1RfSEFTX0RFUklWRURcbn0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IHNldCB9IGZyb20gJy4vc291cmNlcy5qcyc7XG5pbXBvcnQgKiBhcyBlIGZyb20gJy4uL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBERVYgfSBmcm9tICdlc20tZW52JztcbmltcG9ydCB7IGRlZmluZV9wcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5pbXBvcnQgeyBnZXRfbmV4dF9zaWJsaW5nIH0gZnJvbSAnLi4vZG9tL29wZXJhdGlvbnMuanMnO1xuaW1wb3J0IHsgZGVzdHJveV9kZXJpdmVkIH0gZnJvbSAnLi9kZXJpdmVkcy5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHsnJGVmZmVjdCcgfCAnJGVmZmVjdC5wcmUnIHwgJyRpbnNwZWN0J30gcnVuZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVfZWZmZWN0KHJ1bmUpIHtcblx0aWYgKGFjdGl2ZV9lZmZlY3QgPT09IG51bGwgJiYgYWN0aXZlX3JlYWN0aW9uID09PSBudWxsKSB7XG5cdFx0ZS5lZmZlY3Rfb3JwaGFuKHJ1bmUpO1xuXHR9XG5cblx0aWYgKGFjdGl2ZV9yZWFjdGlvbiAhPT0gbnVsbCAmJiAoYWN0aXZlX3JlYWN0aW9uLmYgJiBVTk9XTkVEKSAhPT0gMCkge1xuXHRcdGUuZWZmZWN0X2luX3Vub3duZWRfZGVyaXZlZCgpO1xuXHR9XG5cblx0aWYgKGlzX2Rlc3Ryb3lpbmdfZWZmZWN0KSB7XG5cdFx0ZS5lZmZlY3RfaW5fdGVhcmRvd24ocnVuZSk7XG5cdH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VmZmVjdH0gZWZmZWN0XG4gKiBAcGFyYW0ge0VmZmVjdH0gcGFyZW50X2VmZmVjdFxuICovXG5mdW5jdGlvbiBwdXNoX2VmZmVjdChlZmZlY3QsIHBhcmVudF9lZmZlY3QpIHtcblx0dmFyIHBhcmVudF9sYXN0ID0gcGFyZW50X2VmZmVjdC5sYXN0O1xuXHRpZiAocGFyZW50X2xhc3QgPT09IG51bGwpIHtcblx0XHRwYXJlbnRfZWZmZWN0Lmxhc3QgPSBwYXJlbnRfZWZmZWN0LmZpcnN0ID0gZWZmZWN0O1xuXHR9IGVsc2Uge1xuXHRcdHBhcmVudF9sYXN0Lm5leHQgPSBlZmZlY3Q7XG5cdFx0ZWZmZWN0LnByZXYgPSBwYXJlbnRfbGFzdDtcblx0XHRwYXJlbnRfZWZmZWN0Lmxhc3QgPSBlZmZlY3Q7XG5cdH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdHlwZVxuICogQHBhcmFtIHtudWxsIHwgKCgpID0+IHZvaWQgfCAoKCkgPT4gdm9pZCkpfSBmblxuICogQHBhcmFtIHtib29sZWFufSBzeW5jXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHB1c2hcbiAqIEByZXR1cm5zIHtFZmZlY3R9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZV9lZmZlY3QodHlwZSwgZm4sIHN5bmMsIHB1c2ggPSB0cnVlKSB7XG5cdHZhciBpc19yb290ID0gKHR5cGUgJiBST09UX0VGRkVDVCkgIT09IDA7XG5cdHZhciBwYXJlbnRfZWZmZWN0ID0gYWN0aXZlX2VmZmVjdDtcblxuXHRpZiAoREVWKSB7XG5cdFx0Ly8gRW5zdXJlIHRoZSBwYXJlbnQgaXMgbmV2ZXIgYW4gaW5zcGVjdCBlZmZlY3Rcblx0XHR3aGlsZSAocGFyZW50X2VmZmVjdCAhPT0gbnVsbCAmJiAocGFyZW50X2VmZmVjdC5mICYgSU5TUEVDVF9FRkZFQ1QpICE9PSAwKSB7XG5cdFx0XHRwYXJlbnRfZWZmZWN0ID0gcGFyZW50X2VmZmVjdC5wYXJlbnQ7XG5cdFx0fVxuXHR9XG5cblx0LyoqIEB0eXBlIHtFZmZlY3R9ICovXG5cdHZhciBlZmZlY3QgPSB7XG5cdFx0Y3R4OiBjb21wb25lbnRfY29udGV4dCxcblx0XHRkZXBzOiBudWxsLFxuXHRcdGRlcml2ZWRzOiBudWxsLFxuXHRcdG5vZGVzX3N0YXJ0OiBudWxsLFxuXHRcdG5vZGVzX2VuZDogbnVsbCxcblx0XHRmOiB0eXBlIHwgRElSVFksXG5cdFx0Zmlyc3Q6IG51bGwsXG5cdFx0Zm4sXG5cdFx0bGFzdDogbnVsbCxcblx0XHRuZXh0OiBudWxsLFxuXHRcdHBhcmVudDogaXNfcm9vdCA/IG51bGwgOiBwYXJlbnRfZWZmZWN0LFxuXHRcdHByZXY6IG51bGwsXG5cdFx0dGVhcmRvd246IG51bGwsXG5cdFx0dHJhbnNpdGlvbnM6IG51bGwsXG5cdFx0dmVyc2lvbjogMFxuXHR9O1xuXG5cdGlmIChERVYpIHtcblx0XHRlZmZlY3QuY29tcG9uZW50X2Z1bmN0aW9uID0gZGV2X2N1cnJlbnRfY29tcG9uZW50X2Z1bmN0aW9uO1xuXHR9XG5cblx0aWYgKHN5bmMpIHtcblx0XHR2YXIgcHJldmlvdXNseV9mbHVzaGluZ19lZmZlY3QgPSBpc19mbHVzaGluZ19lZmZlY3Q7XG5cblx0XHR0cnkge1xuXHRcdFx0c2V0X2lzX2ZsdXNoaW5nX2VmZmVjdCh0cnVlKTtcblx0XHRcdHVwZGF0ZV9lZmZlY3QoZWZmZWN0KTtcblx0XHRcdGVmZmVjdC5mIHw9IEVGRkVDVF9SQU47XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0ZGVzdHJveV9lZmZlY3QoZWZmZWN0KTtcblx0XHRcdHRocm93IGU7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdHNldF9pc19mbHVzaGluZ19lZmZlY3QocHJldmlvdXNseV9mbHVzaGluZ19lZmZlY3QpO1xuXHRcdH1cblx0fSBlbHNlIGlmIChmbiAhPT0gbnVsbCkge1xuXHRcdHNjaGVkdWxlX2VmZmVjdChlZmZlY3QpO1xuXHR9XG5cblx0Ly8gaWYgYW4gZWZmZWN0IGhhcyBubyBkZXBlbmRlbmNpZXMsIG5vIERPTSBhbmQgbm8gdGVhcmRvd24gZnVuY3Rpb24sXG5cdC8vIGRvbid0IGJvdGhlciBhZGRpbmcgaXQgdG8gdGhlIGVmZmVjdCB0cmVlXG5cdHZhciBpbmVydCA9XG5cdFx0c3luYyAmJlxuXHRcdGVmZmVjdC5kZXBzID09PSBudWxsICYmXG5cdFx0ZWZmZWN0LmZpcnN0ID09PSBudWxsICYmXG5cdFx0ZWZmZWN0Lm5vZGVzX3N0YXJ0ID09PSBudWxsICYmXG5cdFx0ZWZmZWN0LnRlYXJkb3duID09PSBudWxsICYmXG5cdFx0KGVmZmVjdC5mICYgRUZGRUNUX0hBU19ERVJJVkVEKSA9PT0gMDtcblxuXHRpZiAoIWluZXJ0ICYmICFpc19yb290ICYmIHB1c2gpIHtcblx0XHRpZiAocGFyZW50X2VmZmVjdCAhPT0gbnVsbCkge1xuXHRcdFx0cHVzaF9lZmZlY3QoZWZmZWN0LCBwYXJlbnRfZWZmZWN0KTtcblx0XHR9XG5cblx0XHQvLyBpZiB3ZSdyZSBpbiBhIGRlcml2ZWQsIGFkZCB0aGUgZWZmZWN0IHRoZXJlIHRvb1xuXHRcdGlmIChhY3RpdmVfcmVhY3Rpb24gIT09IG51bGwgJiYgKGFjdGl2ZV9yZWFjdGlvbi5mICYgREVSSVZFRCkgIT09IDApIHtcblx0XHRcdHZhciBkZXJpdmVkID0gLyoqIEB0eXBlIHtEZXJpdmVkfSAqLyAoYWN0aXZlX3JlYWN0aW9uKTtcblx0XHRcdChkZXJpdmVkLmNoaWxkcmVuID8/PSBbXSkucHVzaChlZmZlY3QpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlZmZlY3Q7XG59XG5cbi8qKlxuICogSW50ZXJuYWwgcmVwcmVzZW50YXRpb24gb2YgYCRlZmZlY3QudHJhY2tpbmcoKWBcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWZmZWN0X3RyYWNraW5nKCkge1xuXHRpZiAoYWN0aXZlX3JlYWN0aW9uID09PSBudWxsKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gSWYgaXQncyBza2lwcGVkLCB0aGF0J3MgYmVjYXVzZSB3ZSdyZSBpbnNpZGUgYW4gdW5vd25lZFxuXHQvLyB0aGF0IGlzIG5vdCBiZWluZyB0cmFja2VkIGJ5IGFub3RoZXIgcmVhY3Rpb25cblx0cmV0dXJuICFza2lwX3JlYWN0aW9uO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gZm5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRlYXJkb3duKGZuKSB7XG5cdGNvbnN0IGVmZmVjdCA9IGNyZWF0ZV9lZmZlY3QoUkVOREVSX0VGRkVDVCwgbnVsbCwgZmFsc2UpO1xuXHRzZXRfc2lnbmFsX3N0YXR1cyhlZmZlY3QsIENMRUFOKTtcblx0ZWZmZWN0LnRlYXJkb3duID0gZm47XG5cdHJldHVybiBlZmZlY3Q7XG59XG5cbi8qKlxuICogSW50ZXJuYWwgcmVwcmVzZW50YXRpb24gb2YgYCRlZmZlY3QoLi4uKWBcbiAqIEBwYXJhbSB7KCkgPT4gdm9pZCB8ICgoKSA9PiB2b2lkKX0gZm5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZXJfZWZmZWN0KGZuKSB7XG5cdHZhbGlkYXRlX2VmZmVjdCgnJGVmZmVjdCcpO1xuXG5cdC8vIE5vbi1uZXN0ZWQgYCRlZmZlY3QoLi4uKWAgaW4gYSBjb21wb25lbnQgc2hvdWxkIGJlIGRlZmVycmVkXG5cdC8vIHVudGlsIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZFxuXHR2YXIgZGVmZXIgPVxuXHRcdGFjdGl2ZV9lZmZlY3QgIT09IG51bGwgJiZcblx0XHQoYWN0aXZlX2VmZmVjdC5mICYgQlJBTkNIX0VGRkVDVCkgIT09IDAgJiZcblx0XHRjb21wb25lbnRfY29udGV4dCAhPT0gbnVsbCAmJlxuXHRcdCFjb21wb25lbnRfY29udGV4dC5tO1xuXG5cdGlmIChERVYpIHtcblx0XHRkZWZpbmVfcHJvcGVydHkoZm4sICduYW1lJywge1xuXHRcdFx0dmFsdWU6ICckZWZmZWN0J1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKGRlZmVyKSB7XG5cdFx0dmFyIGNvbnRleHQgPSAvKiogQHR5cGUge0NvbXBvbmVudENvbnRleHR9ICovIChjb21wb25lbnRfY29udGV4dCk7XG5cdFx0KGNvbnRleHQuZSA/Pz0gW10pLnB1c2goe1xuXHRcdFx0Zm4sXG5cdFx0XHRlZmZlY3Q6IGFjdGl2ZV9lZmZlY3QsXG5cdFx0XHRyZWFjdGlvbjogYWN0aXZlX3JlYWN0aW9uXG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIHNpZ25hbCA9IGVmZmVjdChmbik7XG5cdFx0cmV0dXJuIHNpZ25hbDtcblx0fVxufVxuXG4vKipcbiAqIEludGVybmFsIHJlcHJlc2VudGF0aW9uIG9mIGAkZWZmZWN0LnByZSguLi4pYFxuICogQHBhcmFtIHsoKSA9PiB2b2lkIHwgKCgpID0+IHZvaWQpfSBmblxuICogQHJldHVybnMge0VmZmVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZXJfcHJlX2VmZmVjdChmbikge1xuXHR2YWxpZGF0ZV9lZmZlY3QoJyRlZmZlY3QucHJlJyk7XG5cdGlmIChERVYpIHtcblx0XHRkZWZpbmVfcHJvcGVydHkoZm4sICduYW1lJywge1xuXHRcdFx0dmFsdWU6ICckZWZmZWN0LnByZSdcblx0XHR9KTtcblx0fVxuXHRyZXR1cm4gcmVuZGVyX2VmZmVjdChmbik7XG59XG5cbi8qKiBAcGFyYW0geygpID0+IHZvaWQgfCAoKCkgPT4gdm9pZCl9IGZuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zcGVjdF9lZmZlY3QoZm4pIHtcblx0cmV0dXJuIGNyZWF0ZV9lZmZlY3QoSU5TUEVDVF9FRkZFQ1QsIGZuLCB0cnVlKTtcbn1cblxuLyoqXG4gKiBJbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiBgJGVmZmVjdC5yb290KC4uLilgXG4gKiBAcGFyYW0geygpID0+IHZvaWQgfCAoKCkgPT4gdm9pZCl9IGZuXG4gKiBAcmV0dXJucyB7KCkgPT4gdm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVmZmVjdF9yb290KGZuKSB7XG5cdGNvbnN0IGVmZmVjdCA9IGNyZWF0ZV9lZmZlY3QoUk9PVF9FRkZFQ1QsIGZuLCB0cnVlKTtcblxuXHRyZXR1cm4gKCkgPT4ge1xuXHRcdGRlc3Ryb3lfZWZmZWN0KGVmZmVjdCk7XG5cdH07XG59XG5cbi8qKlxuICogQW4gZWZmZWN0IHJvb3Qgd2hvc2UgY2hpbGRyZW4gY2FuIHRyYW5zaXRpb24gb3V0XG4gKiBAcGFyYW0geygpID0+IHZvaWR9IGZuXG4gKiBAcmV0dXJucyB7KG9wdGlvbnM/OiB7IG91dHJvPzogYm9vbGVhbiB9KSA9PiBQcm9taXNlPHZvaWQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9uZW50X3Jvb3QoZm4pIHtcblx0Y29uc3QgZWZmZWN0ID0gY3JlYXRlX2VmZmVjdChST09UX0VGRkVDVCwgZm4sIHRydWUpO1xuXG5cdHJldHVybiAob3B0aW9ucyA9IHt9KSA9PiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWwpID0+IHtcblx0XHRcdGlmIChvcHRpb25zLm91dHJvKSB7XG5cdFx0XHRcdHBhdXNlX2VmZmVjdChlZmZlY3QsICgpID0+IHtcblx0XHRcdFx0XHRkZXN0cm95X2VmZmVjdChlZmZlY3QpO1xuXHRcdFx0XHRcdGZ1bGZpbCh1bmRlZmluZWQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlc3Ryb3lfZWZmZWN0KGVmZmVjdCk7XG5cdFx0XHRcdGZ1bGZpbCh1bmRlZmluZWQpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7KCkgPT4gdm9pZCB8ICgoKSA9PiB2b2lkKX0gZm5cbiAqIEByZXR1cm5zIHtFZmZlY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlZmZlY3QoZm4pIHtcblx0cmV0dXJuIGNyZWF0ZV9lZmZlY3QoRUZGRUNULCBmbiwgZmFsc2UpO1xufVxuXG4vKipcbiAqIEludGVybmFsIHJlcHJlc2VudGF0aW9uIG9mIGAkOiAuLmBcbiAqIEBwYXJhbSB7KCkgPT4gYW55fSBkZXBzXG4gKiBAcGFyYW0geygpID0+IHZvaWQgfCAoKCkgPT4gdm9pZCl9IGZuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZWdhY3lfcHJlX2VmZmVjdChkZXBzLCBmbikge1xuXHR2YXIgY29udGV4dCA9IC8qKiBAdHlwZSB7Q29tcG9uZW50Q29udGV4dExlZ2FjeX0gKi8gKGNvbXBvbmVudF9jb250ZXh0KTtcblxuXHQvKiogQHR5cGUge3sgZWZmZWN0OiBudWxsIHwgRWZmZWN0LCByYW46IGJvb2xlYW4gfX0gKi9cblx0dmFyIHRva2VuID0geyBlZmZlY3Q6IG51bGwsIHJhbjogZmFsc2UgfTtcblx0Y29udGV4dC5sLnIxLnB1c2godG9rZW4pO1xuXG5cdHRva2VuLmVmZmVjdCA9IHJlbmRlcl9lZmZlY3QoKCkgPT4ge1xuXHRcdGRlcHMoKTtcblxuXHRcdC8vIElmIHRoaXMgbGVnYWN5IHByZSBlZmZlY3QgaGFzIGFscmVhZHkgcnVuIGJlZm9yZSB0aGUgZW5kIG9mIHRoZSByZXNldCwgdGhlblxuXHRcdC8vIGJhaWwgb3V0IHRvIGVtdWxhdGUgdGhlIHNhbWUgYmVoYXZpb3IuXG5cdFx0aWYgKHRva2VuLnJhbikgcmV0dXJuO1xuXG5cdFx0dG9rZW4ucmFuID0gdHJ1ZTtcblx0XHRzZXQoY29udGV4dC5sLnIyLCB0cnVlKTtcblx0XHR1bnRyYWNrKGZuKTtcblx0fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsZWdhY3lfcHJlX2VmZmVjdF9yZXNldCgpIHtcblx0dmFyIGNvbnRleHQgPSAvKiogQHR5cGUge0NvbXBvbmVudENvbnRleHRMZWdhY3l9ICovIChjb21wb25lbnRfY29udGV4dCk7XG5cblx0cmVuZGVyX2VmZmVjdCgoKSA9PiB7XG5cdFx0aWYgKCFnZXQoY29udGV4dC5sLnIyKSkgcmV0dXJuO1xuXG5cdFx0Ly8gUnVuIGRpcnR5IGAkOmAgc3RhdGVtZW50c1xuXHRcdGZvciAodmFyIHRva2VuIG9mIGNvbnRleHQubC5yMSkge1xuXHRcdFx0dmFyIGVmZmVjdCA9IHRva2VuLmVmZmVjdDtcblxuXHRcdFx0Ly8gSWYgdGhlIGVmZmVjdCBpcyBDTEVBTiwgdGhlbiBtYWtlIGl0IE1BWUJFX0RJUlRZLiBUaGlzIGVuc3VyZXMgd2UgdHJhdmVyc2UgdGhyb3VnaFxuXHRcdFx0Ly8gdGhlIGVmZmVjdHMgZGVwZW5kZW5jaWVzIGFuZCBjb3JyZWN0bHkgZW5zdXJlIGVhY2ggZGVwZW5kZW5jeSBpcyB1cC10by1kYXRlLlxuXHRcdFx0aWYgKChlZmZlY3QuZiAmIENMRUFOKSAhPT0gMCkge1xuXHRcdFx0XHRzZXRfc2lnbmFsX3N0YXR1cyhlZmZlY3QsIE1BWUJFX0RJUlRZKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGNoZWNrX2RpcnRpbmVzcyhlZmZlY3QpKSB7XG5cdFx0XHRcdHVwZGF0ZV9lZmZlY3QoZWZmZWN0KTtcblx0XHRcdH1cblxuXHRcdFx0dG9rZW4ucmFuID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Y29udGV4dC5sLnIyLnYgPSBmYWxzZTsgLy8gc2V0IGRpcmVjdGx5IHRvIGF2b2lkIHJlcnVubmluZyB0aGlzIGVmZmVjdFxuXHR9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geygpID0+IHZvaWQgfCAoKCkgPT4gdm9pZCl9IGZuXG4gKiBAcmV0dXJucyB7RWZmZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyX2VmZmVjdChmbikge1xuXHRyZXR1cm4gY3JlYXRlX2VmZmVjdChSRU5ERVJfRUZGRUNULCBmbiwgdHJ1ZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHsoKSA9PiB2b2lkIHwgKCgpID0+IHZvaWQpfSBmblxuICogQHJldHVybnMge0VmZmVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlX2VmZmVjdChmbikge1xuXHRpZiAoREVWKSB7XG5cdFx0ZGVmaW5lX3Byb3BlcnR5KGZuLCAnbmFtZScsIHtcblx0XHRcdHZhbHVlOiAne2V4cHJlc3Npb259J1xuXHRcdH0pO1xuXHR9XG5cdHJldHVybiBibG9jayhmbik7XG59XG5cbi8qKlxuICogQHBhcmFtIHsoKCkgPT4gdm9pZCl9IGZuXG4gKiBAcGFyYW0ge251bWJlcn0gZmxhZ3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJsb2NrKGZuLCBmbGFncyA9IDApIHtcblx0cmV0dXJuIGNyZWF0ZV9lZmZlY3QoUkVOREVSX0VGRkVDVCB8IEJMT0NLX0VGRkVDVCB8IGZsYWdzLCBmbiwgdHJ1ZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHsoKCkgPT4gdm9pZCl9IGZuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtwdXNoXVxuICovXG5leHBvcnQgZnVuY3Rpb24gYnJhbmNoKGZuLCBwdXNoID0gdHJ1ZSkge1xuXHRyZXR1cm4gY3JlYXRlX2VmZmVjdChSRU5ERVJfRUZGRUNUIHwgQlJBTkNIX0VGRkVDVCwgZm4sIHRydWUsIHB1c2gpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RWZmZWN0fSBlZmZlY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVfZWZmZWN0X3RlYXJkb3duKGVmZmVjdCkge1xuXHR2YXIgdGVhcmRvd24gPSBlZmZlY3QudGVhcmRvd247XG5cdGlmICh0ZWFyZG93biAhPT0gbnVsbCkge1xuXHRcdGNvbnN0IHByZXZpb3VzbHlfZGVzdHJveWluZ19lZmZlY3QgPSBpc19kZXN0cm95aW5nX2VmZmVjdDtcblx0XHRjb25zdCBwcmV2aW91c19yZWFjdGlvbiA9IGFjdGl2ZV9yZWFjdGlvbjtcblx0XHRzZXRfaXNfZGVzdHJveWluZ19lZmZlY3QodHJ1ZSk7XG5cdFx0c2V0X2FjdGl2ZV9yZWFjdGlvbihudWxsKTtcblx0XHR0cnkge1xuXHRcdFx0dGVhcmRvd24uY2FsbChudWxsKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0c2V0X2lzX2Rlc3Ryb3lpbmdfZWZmZWN0KHByZXZpb3VzbHlfZGVzdHJveWluZ19lZmZlY3QpO1xuXHRcdFx0c2V0X2FjdGl2ZV9yZWFjdGlvbihwcmV2aW91c19yZWFjdGlvbik7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogQHBhcmFtIHtFZmZlY3R9IHNpZ25hbFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXN0cm95X2VmZmVjdF9kZXJpdmVkcyhzaWduYWwpIHtcblx0dmFyIGRlcml2ZWRzID0gc2lnbmFsLmRlcml2ZWRzO1xuXG5cdGlmIChkZXJpdmVkcyAhPT0gbnVsbCkge1xuXHRcdHNpZ25hbC5kZXJpdmVkcyA9IG51bGw7XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRlcml2ZWRzLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRkZXN0cm95X2Rlcml2ZWQoZGVyaXZlZHNbaV0pO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSB7RWZmZWN0fSBzaWduYWxcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVtb3ZlX2RvbVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXN0cm95X2VmZmVjdF9jaGlsZHJlbihzaWduYWwsIHJlbW92ZV9kb20gPSBmYWxzZSkge1xuXHR2YXIgZWZmZWN0ID0gc2lnbmFsLmZpcnN0O1xuXHRzaWduYWwuZmlyc3QgPSBzaWduYWwubGFzdCA9IG51bGw7XG5cblx0d2hpbGUgKGVmZmVjdCAhPT0gbnVsbCkge1xuXHRcdHZhciBuZXh0ID0gZWZmZWN0Lm5leHQ7XG5cdFx0ZGVzdHJveV9lZmZlY3QoZWZmZWN0LCByZW1vdmVfZG9tKTtcblx0XHRlZmZlY3QgPSBuZXh0O1xuXHR9XG59XG5cbi8qKlxuICogQHBhcmFtIHtFZmZlY3R9IHNpZ25hbFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXN0cm95X2Jsb2NrX2VmZmVjdF9jaGlsZHJlbihzaWduYWwpIHtcblx0dmFyIGVmZmVjdCA9IHNpZ25hbC5maXJzdDtcblxuXHR3aGlsZSAoZWZmZWN0ICE9PSBudWxsKSB7XG5cdFx0dmFyIG5leHQgPSBlZmZlY3QubmV4dDtcblx0XHRpZiAoKGVmZmVjdC5mICYgQlJBTkNIX0VGRkVDVCkgPT09IDApIHtcblx0XHRcdGRlc3Ryb3lfZWZmZWN0KGVmZmVjdCk7XG5cdFx0fVxuXHRcdGVmZmVjdCA9IG5leHQ7XG5cdH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VmZmVjdH0gZWZmZWN0XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtyZW1vdmVfZG9tXVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXN0cm95X2VmZmVjdChlZmZlY3QsIHJlbW92ZV9kb20gPSB0cnVlKSB7XG5cdHZhciByZW1vdmVkID0gZmFsc2U7XG5cblx0aWYgKChyZW1vdmVfZG9tIHx8IChlZmZlY3QuZiAmIEhFQURfRUZGRUNUKSAhPT0gMCkgJiYgZWZmZWN0Lm5vZGVzX3N0YXJ0ICE9PSBudWxsKSB7XG5cdFx0LyoqIEB0eXBlIHtUZW1wbGF0ZU5vZGUgfCBudWxsfSAqL1xuXHRcdHZhciBub2RlID0gZWZmZWN0Lm5vZGVzX3N0YXJ0O1xuXHRcdHZhciBlbmQgPSBlZmZlY3Qubm9kZXNfZW5kO1xuXG5cdFx0d2hpbGUgKG5vZGUgIT09IG51bGwpIHtcblx0XHRcdC8qKiBAdHlwZSB7VGVtcGxhdGVOb2RlIHwgbnVsbH0gKi9cblx0XHRcdHZhciBuZXh0ID0gbm9kZSA9PT0gZW5kID8gbnVsbCA6IC8qKiBAdHlwZSB7VGVtcGxhdGVOb2RlfSAqLyAoZ2V0X25leHRfc2libGluZyhub2RlKSk7XG5cblx0XHRcdG5vZGUucmVtb3ZlKCk7XG5cdFx0XHRub2RlID0gbmV4dDtcblx0XHR9XG5cblx0XHRyZW1vdmVkID0gdHJ1ZTtcblx0fVxuXG5cdGRlc3Ryb3lfZWZmZWN0X2NoaWxkcmVuKGVmZmVjdCwgcmVtb3ZlX2RvbSAmJiAhcmVtb3ZlZCk7XG5cdGRlc3Ryb3lfZWZmZWN0X2Rlcml2ZWRzKGVmZmVjdCk7XG5cdHJlbW92ZV9yZWFjdGlvbnMoZWZmZWN0LCAwKTtcblx0c2V0X3NpZ25hbF9zdGF0dXMoZWZmZWN0LCBERVNUUk9ZRUQpO1xuXG5cdHZhciB0cmFuc2l0aW9ucyA9IGVmZmVjdC50cmFuc2l0aW9ucztcblxuXHRpZiAodHJhbnNpdGlvbnMgIT09IG51bGwpIHtcblx0XHRmb3IgKGNvbnN0IHRyYW5zaXRpb24gb2YgdHJhbnNpdGlvbnMpIHtcblx0XHRcdHRyYW5zaXRpb24uc3RvcCgpO1xuXHRcdH1cblx0fVxuXG5cdGV4ZWN1dGVfZWZmZWN0X3RlYXJkb3duKGVmZmVjdCk7XG5cblx0dmFyIHBhcmVudCA9IGVmZmVjdC5wYXJlbnQ7XG5cblx0Ly8gSWYgdGhlIHBhcmVudCBkb2Vzbid0IGhhdmUgYW55IGNoaWxkcmVuLCB0aGVuIHNraXAgdGhpcyB3b3JrIGFsdG9nZXRoZXJcblx0aWYgKHBhcmVudCAhPT0gbnVsbCAmJiBwYXJlbnQuZmlyc3QgIT09IG51bGwpIHtcblx0XHR1bmxpbmtfZWZmZWN0KGVmZmVjdCk7XG5cdH1cblxuXHRpZiAoREVWKSB7XG5cdFx0ZWZmZWN0LmNvbXBvbmVudF9mdW5jdGlvbiA9IG51bGw7XG5cdH1cblxuXHQvLyBgZmlyc3RgIGFuZCBgY2hpbGRgIGFyZSBudWxsZWQgb3V0IGluIGRlc3Ryb3lfZWZmZWN0X2NoaWxkcmVuXG5cdC8vIHdlIGRvbid0IG51bGwgb3V0IGBwYXJlbnRgIHNvIHRoYXQgZXJyb3IgcHJvcGFnYXRpb24gY2FuIHdvcmsgY29ycmVjdGx5XG5cdGVmZmVjdC5uZXh0ID1cblx0XHRlZmZlY3QucHJldiA9XG5cdFx0ZWZmZWN0LnRlYXJkb3duID1cblx0XHRlZmZlY3QuY3R4ID1cblx0XHRlZmZlY3QuZGVwcyA9XG5cdFx0ZWZmZWN0LmZuID1cblx0XHRlZmZlY3Qubm9kZXNfc3RhcnQgPVxuXHRcdGVmZmVjdC5ub2Rlc19lbmQgPVxuXHRcdFx0bnVsbDtcbn1cblxuLyoqXG4gKiBEZXRhY2ggYW4gZWZmZWN0IGZyb20gdGhlIGVmZmVjdCB0cmVlLCBmcmVlaW5nIHVwIG1lbW9yeSBhbmRcbiAqIHJlZHVjaW5nIHRoZSBhbW91bnQgb2Ygd29yayB0aGF0IGhhcHBlbnMgb24gc3Vic2VxdWVudCB0cmF2ZXJzYWxzXG4gKiBAcGFyYW0ge0VmZmVjdH0gZWZmZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmxpbmtfZWZmZWN0KGVmZmVjdCkge1xuXHR2YXIgcGFyZW50ID0gZWZmZWN0LnBhcmVudDtcblx0dmFyIHByZXYgPSBlZmZlY3QucHJldjtcblx0dmFyIG5leHQgPSBlZmZlY3QubmV4dDtcblxuXHRpZiAocHJldiAhPT0gbnVsbCkgcHJldi5uZXh0ID0gbmV4dDtcblx0aWYgKG5leHQgIT09IG51bGwpIG5leHQucHJldiA9IHByZXY7XG5cblx0aWYgKHBhcmVudCAhPT0gbnVsbCkge1xuXHRcdGlmIChwYXJlbnQuZmlyc3QgPT09IGVmZmVjdCkgcGFyZW50LmZpcnN0ID0gbmV4dDtcblx0XHRpZiAocGFyZW50Lmxhc3QgPT09IGVmZmVjdCkgcGFyZW50Lmxhc3QgPSBwcmV2O1xuXHR9XG59XG5cbi8qKlxuICogV2hlbiBhIGJsb2NrIGVmZmVjdCBpcyByZW1vdmVkLCB3ZSBkb24ndCBpbW1lZGlhdGVseSBkZXN0cm95IGl0IG9yIHlhbmsgaXRcbiAqIG91dCBvZiB0aGUgRE9NLCBiZWNhdXNlIGl0IG1pZ2h0IGhhdmUgdHJhbnNpdGlvbnMuIEluc3RlYWQsIHdlICdwYXVzZScgaXQuXG4gKiBJdCBzdGF5cyBhcm91bmQgKGluIG1lbW9yeSwgYW5kIGluIHRoZSBET00pIHVudGlsIG91dHJvIHRyYW5zaXRpb25zIGhhdmVcbiAqIGNvbXBsZXRlZCwgYW5kIGlmIHRoZSBzdGF0ZSBjaGFuZ2UgaXMgcmV2ZXJzZWQgdGhlbiB3ZSBfcmVzdW1lXyBpdC5cbiAqIEEgcGF1c2VkIGVmZmVjdCBkb2VzIG5vdCB1cGRhdGUsIGFuZCB0aGUgRE9NIHN1YnRyZWUgYmVjb21lcyBpbmVydC5cbiAqIEBwYXJhbSB7RWZmZWN0fSBlZmZlY3RcbiAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gW2NhbGxiYWNrXVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGF1c2VfZWZmZWN0KGVmZmVjdCwgY2FsbGJhY2spIHtcblx0LyoqIEB0eXBlIHtUcmFuc2l0aW9uTWFuYWdlcltdfSAqL1xuXHR2YXIgdHJhbnNpdGlvbnMgPSBbXTtcblxuXHRwYXVzZV9jaGlsZHJlbihlZmZlY3QsIHRyYW5zaXRpb25zLCB0cnVlKTtcblxuXHRydW5fb3V0X3RyYW5zaXRpb25zKHRyYW5zaXRpb25zLCAoKSA9PiB7XG5cdFx0ZGVzdHJveV9lZmZlY3QoZWZmZWN0KTtcblx0XHRpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG5cdH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7VHJhbnNpdGlvbk1hbmFnZXJbXX0gdHJhbnNpdGlvbnNcbiAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gZm5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJ1bl9vdXRfdHJhbnNpdGlvbnModHJhbnNpdGlvbnMsIGZuKSB7XG5cdHZhciByZW1haW5pbmcgPSB0cmFuc2l0aW9ucy5sZW5ndGg7XG5cdGlmIChyZW1haW5pbmcgPiAwKSB7XG5cdFx0dmFyIGNoZWNrID0gKCkgPT4gLS1yZW1haW5pbmcgfHwgZm4oKTtcblx0XHRmb3IgKHZhciB0cmFuc2l0aW9uIG9mIHRyYW5zaXRpb25zKSB7XG5cdFx0XHR0cmFuc2l0aW9uLm91dChjaGVjayk7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdGZuKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VmZmVjdH0gZWZmZWN0XG4gKiBAcGFyYW0ge1RyYW5zaXRpb25NYW5hZ2VyW119IHRyYW5zaXRpb25zXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGxvY2FsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXVzZV9jaGlsZHJlbihlZmZlY3QsIHRyYW5zaXRpb25zLCBsb2NhbCkge1xuXHRpZiAoKGVmZmVjdC5mICYgSU5FUlQpICE9PSAwKSByZXR1cm47XG5cdGVmZmVjdC5mIF49IElORVJUO1xuXG5cdGlmIChlZmZlY3QudHJhbnNpdGlvbnMgIT09IG51bGwpIHtcblx0XHRmb3IgKGNvbnN0IHRyYW5zaXRpb24gb2YgZWZmZWN0LnRyYW5zaXRpb25zKSB7XG5cdFx0XHRpZiAodHJhbnNpdGlvbi5pc19nbG9iYWwgfHwgbG9jYWwpIHtcblx0XHRcdFx0dHJhbnNpdGlvbnMucHVzaCh0cmFuc2l0aW9uKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR2YXIgY2hpbGQgPSBlZmZlY3QuZmlyc3Q7XG5cblx0d2hpbGUgKGNoaWxkICE9PSBudWxsKSB7XG5cdFx0dmFyIHNpYmxpbmcgPSBjaGlsZC5uZXh0O1xuXHRcdHZhciB0cmFuc3BhcmVudCA9IChjaGlsZC5mICYgRUZGRUNUX1RSQU5TUEFSRU5UKSAhPT0gMCB8fCAoY2hpbGQuZiAmIEJSQU5DSF9FRkZFQ1QpICE9PSAwO1xuXHRcdC8vIFRPRE8gd2UgZG9uJ3QgbmVlZCB0byBjYWxsIHBhdXNlX2NoaWxkcmVuIHJlY3Vyc2l2ZWx5IHdpdGggYSBsaW5rZWQgbGlzdCBpbiBwbGFjZVxuXHRcdC8vIGl0J3Mgc2xpZ2h0bHkgbW9yZSBpbnZvbHZlZCB0aG91Z2ggYXMgd2UgaGF2ZSB0byBhY2NvdW50IGZvciBgdHJhbnNwYXJlbnRgIGNoYW5naW5nXG5cdFx0Ly8gdGhyb3VnaCB0aGUgdHJlZS5cblx0XHRwYXVzZV9jaGlsZHJlbihjaGlsZCwgdHJhbnNpdGlvbnMsIHRyYW5zcGFyZW50ID8gbG9jYWwgOiBmYWxzZSk7XG5cdFx0Y2hpbGQgPSBzaWJsaW5nO1xuXHR9XG59XG5cbi8qKlxuICogVGhlIG9wcG9zaXRlIG9mIGBwYXVzZV9lZmZlY3RgLiBXZSBjYWxsIHRoaXMgaWYgKGZvciBleGFtcGxlKVxuICogYHhgIGJlY29tZXMgZmFsc3kgdGhlbiB0cnV0aHk6IGB7I2lmIHh9Li4uey9pZn1gXG4gKiBAcGFyYW0ge0VmZmVjdH0gZWZmZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXN1bWVfZWZmZWN0KGVmZmVjdCkge1xuXHRyZXN1bWVfY2hpbGRyZW4oZWZmZWN0LCB0cnVlKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VmZmVjdH0gZWZmZWN0XG4gKiBAcGFyYW0ge2Jvb2xlYW59IGxvY2FsXG4gKi9cbmZ1bmN0aW9uIHJlc3VtZV9jaGlsZHJlbihlZmZlY3QsIGxvY2FsKSB7XG5cdGlmICgoZWZmZWN0LmYgJiBJTkVSVCkgPT09IDApIHJldHVybjtcblxuXHQvLyBJZiBhIGRlcGVuZGVuY3kgb2YgdGhpcyBlZmZlY3QgY2hhbmdlZCB3aGlsZSBpdCB3YXMgcGF1c2VkLFxuXHQvLyBhcHBseSB0aGUgY2hhbmdlIG5vd1xuXHRpZiAoY2hlY2tfZGlydGluZXNzKGVmZmVjdCkpIHtcblx0XHR1cGRhdGVfZWZmZWN0KGVmZmVjdCk7XG5cdH1cblxuXHQvLyBFbnN1cmUgd2UgdG9nZ2xlIHRoZSBmbGFnIGFmdGVyIHBvc3NpYmx5IHVwZGF0aW5nIHRoZSBlZmZlY3Qgc28gdGhhdFxuXHQvLyBlYWNoIGJsb2NrIGxvZ2ljIGNhbiBjb3JyZWN0bHkgb3BlcmF0ZSBvbiBpbmVydCBpdGVtc1xuXHRlZmZlY3QuZiBePSBJTkVSVDtcblxuXHR2YXIgY2hpbGQgPSBlZmZlY3QuZmlyc3Q7XG5cblx0d2hpbGUgKGNoaWxkICE9PSBudWxsKSB7XG5cdFx0dmFyIHNpYmxpbmcgPSBjaGlsZC5uZXh0O1xuXHRcdHZhciB0cmFuc3BhcmVudCA9IChjaGlsZC5mICYgRUZGRUNUX1RSQU5TUEFSRU5UKSAhPT0gMCB8fCAoY2hpbGQuZiAmIEJSQU5DSF9FRkZFQ1QpICE9PSAwO1xuXHRcdC8vIFRPRE8gd2UgZG9uJ3QgbmVlZCB0byBjYWxsIHJlc3VtZV9jaGlsZHJlbiByZWN1cnNpdmVseSB3aXRoIGEgbGlua2VkIGxpc3QgaW4gcGxhY2Vcblx0XHQvLyBpdCdzIHNsaWdodGx5IG1vcmUgaW52b2x2ZWQgdGhvdWdoIGFzIHdlIGhhdmUgdG8gYWNjb3VudCBmb3IgYHRyYW5zcGFyZW50YCBjaGFuZ2luZ1xuXHRcdC8vIHRocm91Z2ggdGhlIHRyZWUuXG5cdFx0cmVzdW1lX2NoaWxkcmVuKGNoaWxkLCB0cmFuc3BhcmVudCA/IGxvY2FsIDogZmFsc2UpO1xuXHRcdGNoaWxkID0gc2libGluZztcblx0fVxuXG5cdGlmIChlZmZlY3QudHJhbnNpdGlvbnMgIT09IG51bGwpIHtcblx0XHRmb3IgKGNvbnN0IHRyYW5zaXRpb24gb2YgZWZmZWN0LnRyYW5zaXRpb25zKSB7XG5cdFx0XHRpZiAodHJhbnNpdGlvbi5pc19nbG9iYWwgfHwgbG9jYWwpIHtcblx0XHRcdFx0dHJhbnNpdGlvbi5pbigpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuIiwgImltcG9ydCB7IHJ1bl9hbGwgfSBmcm9tICcuLi8uLi9zaGFyZWQvdXRpbHMuanMnO1xuXG4vLyBGYWxsYmFjayBmb3Igd2hlbiByZXF1ZXN0SWRsZUNhbGxiYWNrIGlzIG5vdCBhdmFpbGFibGVcbmV4cG9ydCBjb25zdCByZXF1ZXN0X2lkbGVfY2FsbGJhY2sgPVxuXHR0eXBlb2YgcmVxdWVzdElkbGVDYWxsYmFjayA9PT0gJ3VuZGVmaW5lZCdcblx0XHQ/ICgvKiogQHR5cGUgeygpID0+IHZvaWR9ICovIGNiKSA9PiBzZXRUaW1lb3V0KGNiLCAxKVxuXHRcdDogcmVxdWVzdElkbGVDYWxsYmFjaztcblxubGV0IGlzX21pY3JvX3Rhc2tfcXVldWVkID0gZmFsc2U7XG5sZXQgaXNfaWRsZV90YXNrX3F1ZXVlZCA9IGZhbHNlO1xuXG4vKiogQHR5cGUge0FycmF5PCgpID0+IHZvaWQ+fSAqL1xubGV0IGN1cnJlbnRfcXVldWVkX21pY3JvX3Rhc2tzID0gW107XG4vKiogQHR5cGUge0FycmF5PCgpID0+IHZvaWQ+fSAqL1xubGV0IGN1cnJlbnRfcXVldWVkX2lkbGVfdGFza3MgPSBbXTtcblxuZnVuY3Rpb24gcHJvY2Vzc19taWNyb190YXNrcygpIHtcblx0aXNfbWljcm9fdGFza19xdWV1ZWQgPSBmYWxzZTtcblx0Y29uc3QgdGFza3MgPSBjdXJyZW50X3F1ZXVlZF9taWNyb190YXNrcy5zbGljZSgpO1xuXHRjdXJyZW50X3F1ZXVlZF9taWNyb190YXNrcyA9IFtdO1xuXHRydW5fYWxsKHRhc2tzKTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc19pZGxlX3Rhc2tzKCkge1xuXHRpc19pZGxlX3Rhc2tfcXVldWVkID0gZmFsc2U7XG5cdGNvbnN0IHRhc2tzID0gY3VycmVudF9xdWV1ZWRfaWRsZV90YXNrcy5zbGljZSgpO1xuXHRjdXJyZW50X3F1ZXVlZF9pZGxlX3Rhc2tzID0gW107XG5cdHJ1bl9hbGwodGFza3MpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gZm5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1ZXVlX21pY3JvX3Rhc2soZm4pIHtcblx0aWYgKCFpc19taWNyb190YXNrX3F1ZXVlZCkge1xuXHRcdGlzX21pY3JvX3Rhc2tfcXVldWVkID0gdHJ1ZTtcblx0XHRxdWV1ZU1pY3JvdGFzayhwcm9jZXNzX21pY3JvX3Rhc2tzKTtcblx0fVxuXHRjdXJyZW50X3F1ZXVlZF9taWNyb190YXNrcy5wdXNoKGZuKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geygpID0+IHZvaWR9IGZuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWV1ZV9pZGxlX3Rhc2soZm4pIHtcblx0aWYgKCFpc19pZGxlX3Rhc2tfcXVldWVkKSB7XG5cdFx0aXNfaWRsZV90YXNrX3F1ZXVlZCA9IHRydWU7XG5cdFx0cmVxdWVzdF9pZGxlX2NhbGxiYWNrKHByb2Nlc3NfaWRsZV90YXNrcyk7XG5cdH1cblx0Y3VycmVudF9xdWV1ZWRfaWRsZV90YXNrcy5wdXNoKGZuKTtcbn1cblxuLyoqXG4gKiBTeW5jaHJvbm91c2x5IHJ1biBhbnkgcXVldWVkIHRhc2tzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmx1c2hfdGFza3MoKSB7XG5cdGlmIChpc19taWNyb190YXNrX3F1ZXVlZCkge1xuXHRcdHByb2Nlc3NfbWljcm9fdGFza3MoKTtcblx0fVxuXHRpZiAoaXNfaWRsZV90YXNrX3F1ZXVlZCkge1xuXHRcdHByb2Nlc3NfaWRsZV90YXNrcygpO1xuXHR9XG59XG4iLCAiLyoqIEBpbXBvcnQgeyBDb21wb25lbnRDb250ZXh0LCBEZXJpdmVkLCBFZmZlY3QsIFJlYWN0aW9uLCBTaWduYWwsIFNvdXJjZSwgVmFsdWUgfSBmcm9tICcjY2xpZW50JyAqL1xuaW1wb3J0IHsgREVWIH0gZnJvbSAnZXNtLWVudic7XG5pbXBvcnQgeyBkZWZpbmVfcHJvcGVydHksIGdldF9kZXNjcmlwdG9ycywgZ2V0X3Byb3RvdHlwZV9vZiB9IGZyb20gJy4uL3NoYXJlZC91dGlscy5qcyc7XG5pbXBvcnQge1xuXHRkZXN0cm95X2Jsb2NrX2VmZmVjdF9jaGlsZHJlbixcblx0ZGVzdHJveV9lZmZlY3RfY2hpbGRyZW4sXG5cdGRlc3Ryb3lfZWZmZWN0X2Rlcml2ZWRzLFxuXHRlZmZlY3QsXG5cdGV4ZWN1dGVfZWZmZWN0X3RlYXJkb3duLFxuXHR1bmxpbmtfZWZmZWN0XG59IGZyb20gJy4vcmVhY3Rpdml0eS9lZmZlY3RzLmpzJztcbmltcG9ydCB7XG5cdEVGRkVDVCxcblx0UkVOREVSX0VGRkVDVCxcblx0RElSVFksXG5cdE1BWUJFX0RJUlRZLFxuXHRDTEVBTixcblx0REVSSVZFRCxcblx0VU5PV05FRCxcblx0REVTVFJPWUVELFxuXHRJTkVSVCxcblx0QlJBTkNIX0VGRkVDVCxcblx0U1RBVEVfU1lNQk9MLFxuXHRCTE9DS19FRkZFQ1QsXG5cdFJPT1RfRUZGRUNULFxuXHRMRUdBQ1lfREVSSVZFRF9QUk9QLFxuXHRESVNDT05ORUNURUQsXG5cdEJPVU5EQVJZX0VGRkVDVFxufSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBmbHVzaF90YXNrcyB9IGZyb20gJy4vZG9tL3Rhc2suanMnO1xuaW1wb3J0IHsgYWRkX293bmVyIH0gZnJvbSAnLi9kZXYvb3duZXJzaGlwLmpzJztcbmltcG9ydCB7IGludGVybmFsX3NldCwgc2V0LCBzb3VyY2UgfSBmcm9tICcuL3JlYWN0aXZpdHkvc291cmNlcy5qcyc7XG5pbXBvcnQgeyBkZXN0cm95X2Rlcml2ZWQsIGV4ZWN1dGVfZGVyaXZlZCwgdXBkYXRlX2Rlcml2ZWQgfSBmcm9tICcuL3JlYWN0aXZpdHkvZGVyaXZlZHMuanMnO1xuaW1wb3J0ICogYXMgZSBmcm9tICcuL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBsaWZlY3ljbGVfb3V0c2lkZV9jb21wb25lbnQgfSBmcm9tICcuLi9zaGFyZWQvZXJyb3JzLmpzJztcbmltcG9ydCB7IEZJTEVOQU1FIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IGxlZ2FjeV9tb2RlX2ZsYWcsIHRyYWNpbmdfbW9kZV9mbGFnIH0gZnJvbSAnLi4vZmxhZ3MvaW5kZXguanMnO1xuaW1wb3J0IHsgdHJhY2luZ19leHByZXNzaW9ucywgZ2V0X3N0YWNrIH0gZnJvbSAnLi9kZXYvdHJhY2luZy5qcyc7XG5cbmNvbnN0IEZMVVNIX01JQ1JPVEFTSyA9IDA7XG5jb25zdCBGTFVTSF9TWU5DID0gMTtcbi8vIFVzZWQgZm9yIERFViB0aW1lIGVycm9yIGhhbmRsaW5nXG4vKiogQHBhcmFtIHtXZWFrU2V0PEVycm9yPn0gdmFsdWUgKi9cbmNvbnN0IGhhbmRsZWRfZXJyb3JzID0gbmV3IFdlYWtTZXQoKTtcbmV4cG9ydCBsZXQgaXNfdGhyb3dpbmdfZXJyb3IgPSBmYWxzZTtcblxuLy8gVXNlZCBmb3IgY29udHJvbGxpbmcgdGhlIGZsdXNoIG9mIGVmZmVjdHMuXG5sZXQgc2NoZWR1bGVyX21vZGUgPSBGTFVTSF9NSUNST1RBU0s7XG4vLyBVc2VkIGZvciBoYW5kbGluZyBzY2hlZHVsaW5nXG5sZXQgaXNfbWljcm9fdGFza19xdWV1ZWQgPSBmYWxzZTtcblxuLyoqIEB0eXBlIHtFZmZlY3QgfCBudWxsfSAqL1xubGV0IGxhc3Rfc2NoZWR1bGVkX2VmZmVjdCA9IG51bGw7XG5cbmV4cG9ydCBsZXQgaXNfZmx1c2hpbmdfZWZmZWN0ID0gZmFsc2U7XG5leHBvcnQgbGV0IGlzX2Rlc3Ryb3lpbmdfZWZmZWN0ID0gZmFsc2U7XG5cbi8qKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlICovXG5leHBvcnQgZnVuY3Rpb24gc2V0X2lzX2ZsdXNoaW5nX2VmZmVjdCh2YWx1ZSkge1xuXHRpc19mbHVzaGluZ19lZmZlY3QgPSB2YWx1ZTtcbn1cblxuLyoqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWUgKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRfaXNfZGVzdHJveWluZ19lZmZlY3QodmFsdWUpIHtcblx0aXNfZGVzdHJveWluZ19lZmZlY3QgPSB2YWx1ZTtcbn1cblxuLy8gSGFuZGxlIGVmZmVjdCBxdWV1ZXNcblxuLyoqIEB0eXBlIHtFZmZlY3RbXX0gKi9cbmxldCBxdWV1ZWRfcm9vdF9lZmZlY3RzID0gW107XG5cbmxldCBmbHVzaF9jb3VudCA9IDA7XG4vKiogQHR5cGUge0VmZmVjdFtdfSBTdGFjayBvZiBlZmZlY3RzLCBkZXYgb25seSAqL1xubGV0IGRldl9lZmZlY3Rfc3RhY2sgPSBbXTtcbi8vIEhhbmRsZSBzaWduYWwgcmVhY3Rpdml0eSB0cmVlIGRlcGVuZGVuY2llcyBhbmQgcmVhY3Rpb25zXG5cbi8qKiBAdHlwZSB7bnVsbCB8IFJlYWN0aW9ufSAqL1xuZXhwb3J0IGxldCBhY3RpdmVfcmVhY3Rpb24gPSBudWxsO1xuXG4vKiogQHBhcmFtIHtudWxsIHwgUmVhY3Rpb259IHJlYWN0aW9uICovXG5leHBvcnQgZnVuY3Rpb24gc2V0X2FjdGl2ZV9yZWFjdGlvbihyZWFjdGlvbikge1xuXHRhY3RpdmVfcmVhY3Rpb24gPSByZWFjdGlvbjtcbn1cblxuLyoqIEB0eXBlIHtudWxsIHwgRWZmZWN0fSAqL1xuZXhwb3J0IGxldCBhY3RpdmVfZWZmZWN0ID0gbnVsbDtcblxuLyoqIEBwYXJhbSB7bnVsbCB8IEVmZmVjdH0gZWZmZWN0ICovXG5leHBvcnQgZnVuY3Rpb24gc2V0X2FjdGl2ZV9lZmZlY3QoZWZmZWN0KSB7XG5cdGFjdGl2ZV9lZmZlY3QgPSBlZmZlY3Q7XG59XG5cbi8qKlxuICogV2hlbiBzb3VyY2VzIGFyZSBjcmVhdGVkIHdpdGhpbiBhIGRlcml2ZWQsIHdlIHJlY29yZCB0aGVtIHNvIHRoYXQgd2UgY2FuIHNhZmVseSBhbGxvd1xuICogbG9jYWwgbXV0YXRpb25zIHRvIHRoZXNlIHNvdXJjZXMgd2l0aG91dCB0aGUgc2lkZS1lZmZlY3QgZXJyb3IgYmVpbmcgaW52b2tlZCB1bm5lY2Vzc2FyaWx5LlxuICogQHR5cGUge251bGwgfCBTb3VyY2VbXX1cbiAqL1xuZXhwb3J0IGxldCBkZXJpdmVkX3NvdXJjZXMgPSBudWxsO1xuXG4vKipcbiAqIEBwYXJhbSB7U291cmNlW10gfCBudWxsfSBzb3VyY2VzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRfZGVyaXZlZF9zb3VyY2VzKHNvdXJjZXMpIHtcblx0ZGVyaXZlZF9zb3VyY2VzID0gc291cmNlcztcbn1cblxuLyoqXG4gKiBUaGUgZGVwZW5kZW5jaWVzIG9mIHRoZSByZWFjdGlvbiB0aGF0IGlzIGN1cnJlbnRseSBiZWluZyBleGVjdXRlZC4gSW4gbWFueSBjYXNlcyxcbiAqIHRoZSBkZXBlbmRlbmNpZXMgYXJlIHVuY2hhbmdlZCBiZXR3ZWVuIHJ1bnMsIGFuZCBzbyB0aGlzIHdpbGwgYmUgYG51bGxgIHVubGVzc1xuICogYW5kIHVudGlsIGEgbmV3IGRlcGVuZGVuY3kgaXMgYWNjZXNzZWQgXHUyMDE0IHdlIHRyYWNrIHRoaXMgdmlhIGBza2lwcGVkX2RlcHNgXG4gKiBAdHlwZSB7bnVsbCB8IFZhbHVlW119XG4gKi9cbmV4cG9ydCBsZXQgbmV3X2RlcHMgPSBudWxsO1xuXG5sZXQgc2tpcHBlZF9kZXBzID0gMDtcblxuLyoqXG4gKiBUcmFja3Mgd3JpdGVzIHRoYXQgdGhlIGVmZmVjdCBpdCdzIGV4ZWN1dGVkIGluIGRvZXNuJ3QgbGlzdGVuIHRvIHlldCxcbiAqIHNvIHRoYXQgdGhlIGRlcGVuZGVuY3kgY2FuIGJlIGFkZGVkIHRvIHRoZSBlZmZlY3QgbGF0ZXIgb24gaWYgaXQgdGhlbiByZWFkcyBpdFxuICogQHR5cGUge251bGwgfCBTb3VyY2VbXX1cbiAqL1xuZXhwb3J0IGxldCB1bnRyYWNrZWRfd3JpdGVzID0gbnVsbDtcblxuLyoqIEBwYXJhbSB7bnVsbCB8IFNvdXJjZVtdfSB2YWx1ZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldF91bnRyYWNrZWRfd3JpdGVzKHZhbHVlKSB7XG5cdHVudHJhY2tlZF93cml0ZXMgPSB2YWx1ZTtcbn1cblxuLyoqIEB0eXBlIHtudW1iZXJ9IFVzZWQgYnkgc291cmNlcyBhbmQgZGVyaXZlZHMgZm9yIGhhbmRsaW5nIHVwZGF0ZXMgdG8gdW5vd25lZCBkZXJpdmVkcyBpdCBzdGFydHMgZnJvbSAxIHRvIGRpZmZlcmVudGlhdGUgYmV0d2VlbiBhIGNyZWF0ZWQgZWZmZWN0IGFuZCBhIHJ1biBvbmUgZm9yIHRyYWNpbmcgKi9cbmxldCBjdXJyZW50X3ZlcnNpb24gPSAxO1xuXG4vLyBJZiB3ZSBhcmUgd29ya2luZyB3aXRoIGEgZ2V0KCkgY2hhaW4gdGhhdCBoYXMgbm8gYWN0aXZlIGNvbnRhaW5lcixcbi8vIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzLCB3ZSBza2lwIGFkZGluZyB0aGUgcmVhY3Rpb24uXG5leHBvcnQgbGV0IHNraXBfcmVhY3Rpb24gPSBmYWxzZTtcbi8vIEhhbmRsZSBjb2xsZWN0aW5nIGFsbCBzaWduYWxzIHdoaWNoIGFyZSByZWFkIGR1cmluZyBhIHNwZWNpZmljIHRpbWUgZnJhbWVcbi8qKiBAdHlwZSB7U2V0PFZhbHVlPiB8IG51bGx9ICovXG5leHBvcnQgbGV0IGNhcHR1cmVkX3NpZ25hbHMgPSBudWxsO1xuXG4vKiogQHBhcmFtIHtTZXQ8VmFsdWU+IHwgbnVsbH0gdmFsdWUgKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRfY2FwdHVyZWRfc2lnbmFscyh2YWx1ZSkge1xuXHRjYXB0dXJlZF9zaWduYWxzID0gdmFsdWU7XG59XG5cbi8vIEhhbmRsaW5nIHJ1bnRpbWUgY29tcG9uZW50IGNvbnRleHRcbi8qKiBAdHlwZSB7Q29tcG9uZW50Q29udGV4dCB8IG51bGx9ICovXG5leHBvcnQgbGV0IGNvbXBvbmVudF9jb250ZXh0ID0gbnVsbDtcblxuLyoqIEBwYXJhbSB7Q29tcG9uZW50Q29udGV4dCB8IG51bGx9IGNvbnRleHQgKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRfY29tcG9uZW50X2NvbnRleHQoY29udGV4dCkge1xuXHRjb21wb25lbnRfY29udGV4dCA9IGNvbnRleHQ7XG59XG5cbi8qKlxuICogVGhlIGN1cnJlbnQgY29tcG9uZW50IGZ1bmN0aW9uLiBEaWZmZXJlbnQgZnJvbSBjdXJyZW50IGNvbXBvbmVudCBjb250ZXh0OlxuICogYGBgaHRtbFxuICogPCEtLSBBcHAuc3ZlbHRlIC0tPlxuICogPEZvbz5cbiAqICAgPEJhciAvPiA8IS0tIGNvbnRleHQgPT0gRm9vLnN2ZWx0ZSwgZnVuY3Rpb24gPT0gQXBwLnN2ZWx0ZSAtLT5cbiAqIDwvRm9vPlxuICogYGBgXG4gKiBAdHlwZSB7Q29tcG9uZW50Q29udGV4dFsnZnVuY3Rpb24nXX1cbiAqL1xuZXhwb3J0IGxldCBkZXZfY3VycmVudF9jb21wb25lbnRfZnVuY3Rpb24gPSBudWxsO1xuXG4vKiogQHBhcmFtIHtDb21wb25lbnRDb250ZXh0WydmdW5jdGlvbiddfSBmbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldF9kZXZfY3VycmVudF9jb21wb25lbnRfZnVuY3Rpb24oZm4pIHtcblx0ZGV2X2N1cnJlbnRfY29tcG9uZW50X2Z1bmN0aW9uID0gZm47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmNyZW1lbnRfdmVyc2lvbigpIHtcblx0cmV0dXJuICsrY3VycmVudF92ZXJzaW9uO1xufVxuXG4vKiogQHJldHVybnMge2Jvb2xlYW59ICovXG5leHBvcnQgZnVuY3Rpb24gaXNfcnVuZXMoKSB7XG5cdHJldHVybiAhbGVnYWN5X21vZGVfZmxhZyB8fCAoY29tcG9uZW50X2NvbnRleHQgIT09IG51bGwgJiYgY29tcG9uZW50X2NvbnRleHQubCA9PT0gbnVsbCk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgZGVyaXZlZCBvciBlZmZlY3QgaXMgZGlydHkuXG4gKiBJZiBpdCBpcyBNQVlCRV9ESVJUWSwgd2lsbCBzZXQgdGhlIHN0YXR1cyB0byBDTEVBTlxuICogQHBhcmFtIHtSZWFjdGlvbn0gcmVhY3Rpb25cbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tfZGlydGluZXNzKHJlYWN0aW9uKSB7XG5cdHZhciBmbGFncyA9IHJlYWN0aW9uLmY7XG5cblx0aWYgKChmbGFncyAmIERJUlRZKSAhPT0gMCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0aWYgKChmbGFncyAmIE1BWUJFX0RJUlRZKSAhPT0gMCkge1xuXHRcdHZhciBkZXBlbmRlbmNpZXMgPSByZWFjdGlvbi5kZXBzO1xuXHRcdHZhciBpc191bm93bmVkID0gKGZsYWdzICYgVU5PV05FRCkgIT09IDA7XG5cblx0XHRpZiAoZGVwZW5kZW5jaWVzICE9PSBudWxsKSB7XG5cdFx0XHR2YXIgaTtcblxuXHRcdFx0aWYgKChmbGFncyAmIERJU0NPTk5FQ1RFRCkgIT09IDApIHtcblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGRlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdChkZXBlbmRlbmNpZXNbaV0ucmVhY3Rpb25zID8/PSBbXSkucHVzaChyZWFjdGlvbik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZWFjdGlvbi5mIF49IERJU0NPTk5FQ1RFRDtcblx0XHRcdH1cblxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGRlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgZGVwZW5kZW5jeSA9IGRlcGVuZGVuY2llc1tpXTtcblxuXHRcdFx0XHRpZiAoY2hlY2tfZGlydGluZXNzKC8qKiBAdHlwZSB7RGVyaXZlZH0gKi8gKGRlcGVuZGVuY3kpKSkge1xuXHRcdFx0XHRcdHVwZGF0ZV9kZXJpdmVkKC8qKiBAdHlwZSB7RGVyaXZlZH0gKi8gKGRlcGVuZGVuY3kpKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHdlIGFyZSB3b3JraW5nIHdpdGggYW4gdW5vd25lZCBzaWduYWwgYXMgcGFydCBvZiBhbiBlZmZlY3QgKGR1ZSB0byAhc2tpcF9yZWFjdGlvbilcblx0XHRcdFx0Ly8gYW5kIHRoZSB2ZXJzaW9uIGhhc24ndCBjaGFuZ2VkLCB3ZSBzdGlsbCBuZWVkIHRvIGNoZWNrIHRoYXQgdGhpcyByZWFjdGlvblxuXHRcdFx0XHQvLyBpcyBsaW5rZWQgdG8gdGhlIGRlcGVuZGVuY3kgc291cmNlIFx1MjAxMyBvdGhlcndpc2UgZnV0dXJlIHVwZGF0ZXMgd2lsbCBub3QgYmUgY2F1Z2h0LlxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0aXNfdW5vd25lZCAmJlxuXHRcdFx0XHRcdGFjdGl2ZV9lZmZlY3QgIT09IG51bGwgJiZcblx0XHRcdFx0XHQhc2tpcF9yZWFjdGlvbiAmJlxuXHRcdFx0XHRcdCFkZXBlbmRlbmN5Py5yZWFjdGlvbnM/LmluY2x1ZGVzKHJlYWN0aW9uKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHQoZGVwZW5kZW5jeS5yZWFjdGlvbnMgPz89IFtdKS5wdXNoKHJlYWN0aW9uKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChkZXBlbmRlbmN5LnZlcnNpb24gPiByZWFjdGlvbi52ZXJzaW9uKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBVbm93bmVkIHNpZ25hbHMgc2hvdWxkIG5ldmVyIGJlIG1hcmtlZCBhcyBjbGVhbiB1bmxlc3MgdGhleVxuXHRcdC8vIGFyZSB1c2VkIHdpdGhpbiBhbiBhY3RpdmVfZWZmZWN0IHdpdGhvdXQgc2tpcF9yZWFjdGlvblxuXHRcdGlmICghaXNfdW5vd25lZCB8fCAoYWN0aXZlX2VmZmVjdCAhPT0gbnVsbCAmJiAhc2tpcF9yZWFjdGlvbikpIHtcblx0XHRcdHNldF9zaWduYWxfc3RhdHVzKHJlYWN0aW9uLCBDTEVBTik7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7dW5rbm93bn0gZXJyb3JcbiAqIEBwYXJhbSB7RWZmZWN0fSBlZmZlY3RcbiAqL1xuZnVuY3Rpb24gcHJvcGFnYXRlX2Vycm9yKGVycm9yLCBlZmZlY3QpIHtcblx0LyoqIEB0eXBlIHtFZmZlY3QgfCBudWxsfSAqL1xuXHR2YXIgY3VycmVudCA9IGVmZmVjdDtcblxuXHR3aGlsZSAoY3VycmVudCAhPT0gbnVsbCkge1xuXHRcdGlmICgoY3VycmVudC5mICYgQk9VTkRBUllfRUZGRUNUKSAhPT0gMCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Ly8gQHRzLWV4cGVjdC1lcnJvclxuXHRcdFx0XHRjdXJyZW50LmZuKGVycm9yKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdC8vIFJlbW92ZSBib3VuZGFyeSBmbGFnIGZyb20gZWZmZWN0XG5cdFx0XHRcdGN1cnJlbnQuZiBePSBCT1VOREFSWV9FRkZFQ1Q7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuXHR9XG5cblx0aXNfdGhyb3dpbmdfZXJyb3IgPSBmYWxzZTtcblx0dGhyb3cgZXJyb3I7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFZmZlY3R9IGVmZmVjdFxuICovXG5mdW5jdGlvbiBzaG91bGRfcmV0aHJvd19lcnJvcihlZmZlY3QpIHtcblx0cmV0dXJuIChcblx0XHQoZWZmZWN0LmYgJiBERVNUUk9ZRUQpID09PSAwICYmXG5cdFx0KGVmZmVjdC5wYXJlbnQgPT09IG51bGwgfHwgKGVmZmVjdC5wYXJlbnQuZiAmIEJPVU5EQVJZX0VGRkVDVCkgPT09IDApXG5cdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldF9pc190aHJvd2luZ19lcnJvcigpIHtcblx0aXNfdGhyb3dpbmdfZXJyb3IgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3Vua25vd259IGVycm9yXG4gKiBAcGFyYW0ge0VmZmVjdH0gZWZmZWN0XG4gKiBAcGFyYW0ge0VmZmVjdCB8IG51bGx9IHByZXZpb3VzX2VmZmVjdFxuICogQHBhcmFtIHtDb21wb25lbnRDb250ZXh0IHwgbnVsbH0gY29tcG9uZW50X2NvbnRleHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZV9lcnJvcihlcnJvciwgZWZmZWN0LCBwcmV2aW91c19lZmZlY3QsIGNvbXBvbmVudF9jb250ZXh0KSB7XG5cdGlmIChpc190aHJvd2luZ19lcnJvcikge1xuXHRcdGlmIChwcmV2aW91c19lZmZlY3QgPT09IG51bGwpIHtcblx0XHRcdGlzX3Rocm93aW5nX2Vycm9yID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0aWYgKHNob3VsZF9yZXRocm93X2Vycm9yKGVmZmVjdCkpIHtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblxuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmIChwcmV2aW91c19lZmZlY3QgIT09IG51bGwpIHtcblx0XHRpc190aHJvd2luZ19lcnJvciA9IHRydWU7XG5cdH1cblxuXHRpZiAoXG5cdFx0IURFViB8fFxuXHRcdGNvbXBvbmVudF9jb250ZXh0ID09PSBudWxsIHx8XG5cdFx0IShlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB8fFxuXHRcdGhhbmRsZWRfZXJyb3JzLmhhcyhlcnJvcilcblx0KSB7XG5cdFx0cHJvcGFnYXRlX2Vycm9yKGVycm9yLCBlZmZlY3QpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGhhbmRsZWRfZXJyb3JzLmFkZChlcnJvcik7XG5cblx0Y29uc3QgY29tcG9uZW50X3N0YWNrID0gW107XG5cblx0Y29uc3QgZWZmZWN0X25hbWUgPSBlZmZlY3QuZm4/Lm5hbWU7XG5cblx0aWYgKGVmZmVjdF9uYW1lKSB7XG5cdFx0Y29tcG9uZW50X3N0YWNrLnB1c2goZWZmZWN0X25hbWUpO1xuXHR9XG5cblx0LyoqIEB0eXBlIHtDb21wb25lbnRDb250ZXh0IHwgbnVsbH0gKi9cblx0bGV0IGN1cnJlbnRfY29udGV4dCA9IGNvbXBvbmVudF9jb250ZXh0O1xuXG5cdHdoaWxlIChjdXJyZW50X2NvbnRleHQgIT09IG51bGwpIHtcblx0XHRpZiAoREVWKSB7XG5cdFx0XHQvKiogQHR5cGUge3N0cmluZ30gKi9cblx0XHRcdHZhciBmaWxlbmFtZSA9IGN1cnJlbnRfY29udGV4dC5mdW5jdGlvbj8uW0ZJTEVOQU1FXTtcblxuXHRcdFx0aWYgKGZpbGVuYW1lKSB7XG5cdFx0XHRcdGNvbnN0IGZpbGUgPSBmaWxlbmFtZS5zcGxpdCgnLycpLnBvcCgpO1xuXHRcdFx0XHRjb21wb25lbnRfc3RhY2sucHVzaChmaWxlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjdXJyZW50X2NvbnRleHQgPSBjdXJyZW50X2NvbnRleHQucDtcblx0fVxuXG5cdGNvbnN0IGluZGVudCA9IC9GaXJlZm94Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpID8gJyAgJyA6ICdcXHQnO1xuXHRkZWZpbmVfcHJvcGVydHkoZXJyb3IsICdtZXNzYWdlJywge1xuXHRcdHZhbHVlOiBlcnJvci5tZXNzYWdlICsgYFxcbiR7Y29tcG9uZW50X3N0YWNrLm1hcCgobmFtZSkgPT4gYFxcbiR7aW5kZW50fWluICR7bmFtZX1gKS5qb2luKCcnKX1cXG5gXG5cdH0pO1xuXHRkZWZpbmVfcHJvcGVydHkoZXJyb3IsICdjb21wb25lbnRfc3RhY2snLCB7XG5cdFx0dmFsdWU6IGNvbXBvbmVudF9zdGFja1xuXHR9KTtcblxuXHRjb25zdCBzdGFjayA9IGVycm9yLnN0YWNrO1xuXG5cdC8vIEZpbHRlciBvdXQgaW50ZXJuYWwgZmlsZXMgZnJvbSBjYWxsc3RhY2tcblx0aWYgKHN0YWNrKSB7XG5cdFx0Y29uc3QgbGluZXMgPSBzdGFjay5zcGxpdCgnXFxuJyk7XG5cdFx0Y29uc3QgbmV3X2xpbmVzID0gW107XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgbGluZSA9IGxpbmVzW2ldO1xuXHRcdFx0aWYgKGxpbmUuaW5jbHVkZXMoJ3N2ZWx0ZS9zcmMvaW50ZXJuYWwnKSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdG5ld19saW5lcy5wdXNoKGxpbmUpO1xuXHRcdH1cblx0XHRkZWZpbmVfcHJvcGVydHkoZXJyb3IsICdzdGFjaycsIHtcblx0XHRcdHZhbHVlOiBuZXdfbGluZXMuam9pbignXFxuJylcblx0XHR9KTtcblx0fVxuXG5cdHByb3BhZ2F0ZV9lcnJvcihlcnJvciwgZWZmZWN0KTtcblxuXHRpZiAoc2hvdWxkX3JldGhyb3dfZXJyb3IoZWZmZWN0KSkge1xuXHRcdHRocm93IGVycm9yO1xuXHR9XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIFZcbiAqIEBwYXJhbSB7UmVhY3Rpb259IHJlYWN0aW9uXG4gKiBAcmV0dXJucyB7Vn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZV9yZWFjdGlvbihyZWFjdGlvbikge1xuXHR2YXIgcHJldmlvdXNfZGVwcyA9IG5ld19kZXBzO1xuXHR2YXIgcHJldmlvdXNfc2tpcHBlZF9kZXBzID0gc2tpcHBlZF9kZXBzO1xuXHR2YXIgcHJldmlvdXNfdW50cmFja2VkX3dyaXRlcyA9IHVudHJhY2tlZF93cml0ZXM7XG5cdHZhciBwcmV2aW91c19yZWFjdGlvbiA9IGFjdGl2ZV9yZWFjdGlvbjtcblx0dmFyIHByZXZpb3VzX3NraXBfcmVhY3Rpb24gPSBza2lwX3JlYWN0aW9uO1xuXHR2YXIgcHJldl9kZXJpdmVkX3NvdXJjZXMgPSBkZXJpdmVkX3NvdXJjZXM7XG5cdHZhciBwcmV2aW91c19jb21wb25lbnRfY29udGV4dCA9IGNvbXBvbmVudF9jb250ZXh0O1xuXHR2YXIgZmxhZ3MgPSByZWFjdGlvbi5mO1xuXG5cdG5ld19kZXBzID0gLyoqIEB0eXBlIHtudWxsIHwgVmFsdWVbXX0gKi8gKG51bGwpO1xuXHRza2lwcGVkX2RlcHMgPSAwO1xuXHR1bnRyYWNrZWRfd3JpdGVzID0gbnVsbDtcblx0YWN0aXZlX3JlYWN0aW9uID0gKGZsYWdzICYgKEJSQU5DSF9FRkZFQ1QgfCBST09UX0VGRkVDVCkpID09PSAwID8gcmVhY3Rpb24gOiBudWxsO1xuXHRza2lwX3JlYWN0aW9uID0gIWlzX2ZsdXNoaW5nX2VmZmVjdCAmJiAoZmxhZ3MgJiBVTk9XTkVEKSAhPT0gMDtcblx0ZGVyaXZlZF9zb3VyY2VzID0gbnVsbDtcblx0Y29tcG9uZW50X2NvbnRleHQgPSByZWFjdGlvbi5jdHg7XG5cblx0dHJ5IHtcblx0XHR2YXIgcmVzdWx0ID0gLyoqIEB0eXBlIHtGdW5jdGlvbn0gKi8gKDAsIHJlYWN0aW9uLmZuKSgpO1xuXHRcdHZhciBkZXBzID0gcmVhY3Rpb24uZGVwcztcblxuXHRcdGlmIChuZXdfZGVwcyAhPT0gbnVsbCkge1xuXHRcdFx0dmFyIGk7XG5cblx0XHRcdHJlbW92ZV9yZWFjdGlvbnMocmVhY3Rpb24sIHNraXBwZWRfZGVwcyk7XG5cblx0XHRcdGlmIChkZXBzICE9PSBudWxsICYmIHNraXBwZWRfZGVwcyA+IDApIHtcblx0XHRcdFx0ZGVwcy5sZW5ndGggPSBza2lwcGVkX2RlcHMgKyBuZXdfZGVwcy5sZW5ndGg7XG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBuZXdfZGVwcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGRlcHNbc2tpcHBlZF9kZXBzICsgaV0gPSBuZXdfZGVwc1tpXTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVhY3Rpb24uZGVwcyA9IGRlcHMgPSBuZXdfZGVwcztcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFza2lwX3JlYWN0aW9uKSB7XG5cdFx0XHRcdGZvciAoaSA9IHNraXBwZWRfZGVwczsgaSA8IGRlcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHQoZGVwc1tpXS5yZWFjdGlvbnMgPz89IFtdKS5wdXNoKHJlYWN0aW9uKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoZGVwcyAhPT0gbnVsbCAmJiBza2lwcGVkX2RlcHMgPCBkZXBzLmxlbmd0aCkge1xuXHRcdFx0cmVtb3ZlX3JlYWN0aW9ucyhyZWFjdGlvbiwgc2tpcHBlZF9kZXBzKTtcblx0XHRcdGRlcHMubGVuZ3RoID0gc2tpcHBlZF9kZXBzO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0gZmluYWxseSB7XG5cdFx0bmV3X2RlcHMgPSBwcmV2aW91c19kZXBzO1xuXHRcdHNraXBwZWRfZGVwcyA9IHByZXZpb3VzX3NraXBwZWRfZGVwcztcblx0XHR1bnRyYWNrZWRfd3JpdGVzID0gcHJldmlvdXNfdW50cmFja2VkX3dyaXRlcztcblx0XHRhY3RpdmVfcmVhY3Rpb24gPSBwcmV2aW91c19yZWFjdGlvbjtcblx0XHRza2lwX3JlYWN0aW9uID0gcHJldmlvdXNfc2tpcF9yZWFjdGlvbjtcblx0XHRkZXJpdmVkX3NvdXJjZXMgPSBwcmV2X2Rlcml2ZWRfc291cmNlcztcblx0XHRjb21wb25lbnRfY29udGV4dCA9IHByZXZpb3VzX2NvbXBvbmVudF9jb250ZXh0O1xuXHR9XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIFZcbiAqIEBwYXJhbSB7UmVhY3Rpb259IHNpZ25hbFxuICogQHBhcmFtIHtWYWx1ZTxWPn0gZGVwZW5kZW5jeVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZV9yZWFjdGlvbihzaWduYWwsIGRlcGVuZGVuY3kpIHtcblx0bGV0IHJlYWN0aW9ucyA9IGRlcGVuZGVuY3kucmVhY3Rpb25zO1xuXHRpZiAocmVhY3Rpb25zICE9PSBudWxsKSB7XG5cdFx0dmFyIGluZGV4ID0gcmVhY3Rpb25zLmluZGV4T2Yoc2lnbmFsKTtcblx0XHRpZiAoaW5kZXggIT09IC0xKSB7XG5cdFx0XHR2YXIgbmV3X2xlbmd0aCA9IHJlYWN0aW9ucy5sZW5ndGggLSAxO1xuXHRcdFx0aWYgKG5ld19sZW5ndGggPT09IDApIHtcblx0XHRcdFx0cmVhY3Rpb25zID0gZGVwZW5kZW5jeS5yZWFjdGlvbnMgPSBudWxsO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gU3dhcCB3aXRoIGxhc3QgZWxlbWVudCBhbmQgdGhlbiByZW1vdmUuXG5cdFx0XHRcdHJlYWN0aW9uc1tpbmRleF0gPSByZWFjdGlvbnNbbmV3X2xlbmd0aF07XG5cdFx0XHRcdHJlYWN0aW9ucy5wb3AoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0Ly8gSWYgdGhlIGRlcml2ZWQgaGFzIG5vIHJlYWN0aW9ucywgdGhlbiB3ZSBjYW4gZGlzY29ubmVjdCBpdCBmcm9tIHRoZSBncmFwaCxcblx0Ly8gYWxsb3dpbmcgaXQgdG8gZWl0aGVyIHJlY29ubmVjdCBpbiB0aGUgZnV0dXJlLCBvciBiZSBHQydkIGJ5IHRoZSBWTS5cblx0aWYgKFxuXHRcdHJlYWN0aW9ucyA9PT0gbnVsbCAmJlxuXHRcdChkZXBlbmRlbmN5LmYgJiBERVJJVkVEKSAhPT0gMCAmJlxuXHRcdC8vIERlc3Ryb3lpbmcgYSBjaGlsZCBlZmZlY3Qgd2hpbGUgdXBkYXRpbmcgYSBwYXJlbnQgZWZmZWN0IGNhbiBjYXVzZSBhIGRlcGVuZGVuY3kgdG8gYXBwZWFyXG5cdFx0Ly8gdG8gYmUgdW51c2VkLCB3aGVuIGluIGZhY3QgaXQgaXMgdXNlZCBieSB0aGUgY3VycmVudGx5LXVwZGF0aW5nIHBhcmVudC4gQ2hlY2tpbmcgYG5ld19kZXBzYFxuXHRcdC8vIGFsbG93cyB1cyB0byBza2lwIHRoZSBleHBlbnNpdmUgd29yayBvZiBkaXNjb25uZWN0aW5nIGFuZCBpbW1lZGlhdGVseSByZWNvbm5lY3RpbmcgaXRcblx0XHQobmV3X2RlcHMgPT09IG51bGwgfHwgIW5ld19kZXBzLmluY2x1ZGVzKGRlcGVuZGVuY3kpKVxuXHQpIHtcblx0XHRzZXRfc2lnbmFsX3N0YXR1cyhkZXBlbmRlbmN5LCBNQVlCRV9ESVJUWSk7XG5cdFx0Ly8gSWYgd2UgYXJlIHdvcmtpbmcgd2l0aCBhIGRlcml2ZWQgdGhhdCBpcyBvd25lZCBieSBhbiBlZmZlY3QsIHRoZW4gbWFyayBpdCBhcyBiZWluZ1xuXHRcdC8vIGRpc2Nvbm5lY3RlZC5cblx0XHRpZiAoKGRlcGVuZGVuY3kuZiAmIChVTk9XTkVEIHwgRElTQ09OTkVDVEVEKSkgPT09IDApIHtcblx0XHRcdGRlcGVuZGVuY3kuZiBePSBESVNDT05ORUNURUQ7XG5cdFx0fVxuXHRcdHJlbW92ZV9yZWFjdGlvbnMoLyoqIEB0eXBlIHtEZXJpdmVkfSAqKi8gKGRlcGVuZGVuY3kpLCAwKTtcblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSB7UmVhY3Rpb259IHNpZ25hbFxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0X2luZGV4XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZV9yZWFjdGlvbnMoc2lnbmFsLCBzdGFydF9pbmRleCkge1xuXHR2YXIgZGVwZW5kZW5jaWVzID0gc2lnbmFsLmRlcHM7XG5cdGlmIChkZXBlbmRlbmNpZXMgPT09IG51bGwpIHJldHVybjtcblxuXHRmb3IgKHZhciBpID0gc3RhcnRfaW5kZXg7IGkgPCBkZXBlbmRlbmNpZXMubGVuZ3RoOyBpKyspIHtcblx0XHRyZW1vdmVfcmVhY3Rpb24oc2lnbmFsLCBkZXBlbmRlbmNpZXNbaV0pO1xuXHR9XG59XG5cbi8qKlxuICogQHBhcmFtIHtFZmZlY3R9IGVmZmVjdFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVfZWZmZWN0KGVmZmVjdCkge1xuXHR2YXIgZmxhZ3MgPSBlZmZlY3QuZjtcblxuXHRpZiAoKGZsYWdzICYgREVTVFJPWUVEKSAhPT0gMCkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHNldF9zaWduYWxfc3RhdHVzKGVmZmVjdCwgQ0xFQU4pO1xuXG5cdHZhciBwcmV2aW91c19lZmZlY3QgPSBhY3RpdmVfZWZmZWN0O1xuXHR2YXIgcHJldmlvdXNfY29tcG9uZW50X2NvbnRleHQgPSBjb21wb25lbnRfY29udGV4dDtcblxuXHRhY3RpdmVfZWZmZWN0ID0gZWZmZWN0O1xuXG5cdGlmIChERVYpIHtcblx0XHR2YXIgcHJldmlvdXNfY29tcG9uZW50X2ZuID0gZGV2X2N1cnJlbnRfY29tcG9uZW50X2Z1bmN0aW9uO1xuXHRcdGRldl9jdXJyZW50X2NvbXBvbmVudF9mdW5jdGlvbiA9IGVmZmVjdC5jb21wb25lbnRfZnVuY3Rpb247XG5cdH1cblxuXHR0cnkge1xuXHRcdGlmICgoZmxhZ3MgJiBCTE9DS19FRkZFQ1QpICE9PSAwKSB7XG5cdFx0XHRkZXN0cm95X2Jsb2NrX2VmZmVjdF9jaGlsZHJlbihlZmZlY3QpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkZXN0cm95X2VmZmVjdF9jaGlsZHJlbihlZmZlY3QpO1xuXHRcdH1cblx0XHRkZXN0cm95X2VmZmVjdF9kZXJpdmVkcyhlZmZlY3QpO1xuXG5cdFx0ZXhlY3V0ZV9lZmZlY3RfdGVhcmRvd24oZWZmZWN0KTtcblx0XHR2YXIgdGVhcmRvd24gPSB1cGRhdGVfcmVhY3Rpb24oZWZmZWN0KTtcblx0XHRlZmZlY3QudGVhcmRvd24gPSB0eXBlb2YgdGVhcmRvd24gPT09ICdmdW5jdGlvbicgPyB0ZWFyZG93biA6IG51bGw7XG5cdFx0ZWZmZWN0LnZlcnNpb24gPSBjdXJyZW50X3ZlcnNpb247XG5cblx0XHRpZiAoREVWKSB7XG5cdFx0XHRkZXZfZWZmZWN0X3N0YWNrLnB1c2goZWZmZWN0KTtcblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0aGFuZGxlX2Vycm9yKGVycm9yLCBlZmZlY3QsIHByZXZpb3VzX2VmZmVjdCwgcHJldmlvdXNfY29tcG9uZW50X2NvbnRleHQgfHwgZWZmZWN0LmN0eCk7XG5cdH0gZmluYWxseSB7XG5cdFx0YWN0aXZlX2VmZmVjdCA9IHByZXZpb3VzX2VmZmVjdDtcblxuXHRcdGlmIChERVYpIHtcblx0XHRcdGRldl9jdXJyZW50X2NvbXBvbmVudF9mdW5jdGlvbiA9IHByZXZpb3VzX2NvbXBvbmVudF9mbjtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbG9nX2VmZmVjdF9zdGFjaygpIHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblx0Y29uc29sZS5lcnJvcihcblx0XHQnTGFzdCB0ZW4gZWZmZWN0cyB3ZXJlOiAnLFxuXHRcdGRldl9lZmZlY3Rfc3RhY2suc2xpY2UoLTEwKS5tYXAoKGQpID0+IGQuZm4pXG5cdCk7XG5cdGRldl9lZmZlY3Rfc3RhY2sgPSBbXTtcbn1cblxuZnVuY3Rpb24gaW5maW5pdGVfbG9vcF9ndWFyZCgpIHtcblx0aWYgKGZsdXNoX2NvdW50ID4gMTAwMCkge1xuXHRcdGZsdXNoX2NvdW50ID0gMDtcblx0XHR0cnkge1xuXHRcdFx0ZS5lZmZlY3RfdXBkYXRlX2RlcHRoX2V4Y2VlZGVkKCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGlmIChERVYpIHtcblx0XHRcdFx0Ly8gc3RhY2sgaXMgZ2FyYmFnZSwgaWdub3JlLiBJbnN0ZWFkIGFkZCBhIGNvbnNvbGUuZXJyb3IgbWVzc2FnZS5cblx0XHRcdFx0ZGVmaW5lX3Byb3BlcnR5KGVycm9yLCAnc3RhY2snLCB7XG5cdFx0XHRcdFx0dmFsdWU6ICcnXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0Ly8gVHJ5IGFuZCBoYW5kbGUgdGhlIGVycm9yIHNvIGl0IGNhbiBiZSBjYXVnaHQgYXQgYSBib3VuZGFyeSwgdGhhdCdzXG5cdFx0XHQvLyBpZiB0aGVyZSdzIGFuIGVmZmVjdCBhdmFpbGFibGUgZnJvbSB3aGVuIGl0IHdhcyBsYXN0IHNjaGVkdWxlZFxuXHRcdFx0aWYgKGxhc3Rfc2NoZWR1bGVkX2VmZmVjdCAhPT0gbnVsbCkge1xuXHRcdFx0XHRpZiAoREVWKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGhhbmRsZV9lcnJvcihlcnJvciwgbGFzdF9zY2hlZHVsZWRfZWZmZWN0LCBudWxsLCBudWxsKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHQvLyBPbmx5IGxvZyB0aGUgZWZmZWN0IHN0YWNrIGlmIHRoZSBlcnJvciBpcyByZS10aHJvd25cblx0XHRcdFx0XHRcdGxvZ19lZmZlY3Rfc3RhY2soKTtcblx0XHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGhhbmRsZV9lcnJvcihlcnJvciwgbGFzdF9zY2hlZHVsZWRfZWZmZWN0LCBudWxsLCBudWxsKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKERFVikge1xuXHRcdFx0XHRcdGxvZ19lZmZlY3Rfc3RhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0Zmx1c2hfY291bnQrKztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PEVmZmVjdD59IHJvb3RfZWZmZWN0c1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGZsdXNoX3F1ZXVlZF9yb290X2VmZmVjdHMocm9vdF9lZmZlY3RzKSB7XG5cdHZhciBsZW5ndGggPSByb290X2VmZmVjdHMubGVuZ3RoO1xuXHRpZiAobGVuZ3RoID09PSAwKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGluZmluaXRlX2xvb3BfZ3VhcmQoKTtcblxuXHR2YXIgcHJldmlvdXNseV9mbHVzaGluZ19lZmZlY3QgPSBpc19mbHVzaGluZ19lZmZlY3Q7XG5cdGlzX2ZsdXNoaW5nX2VmZmVjdCA9IHRydWU7XG5cblx0dHJ5IHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZWZmZWN0ID0gcm9vdF9lZmZlY3RzW2ldO1xuXG5cdFx0XHRpZiAoKGVmZmVjdC5mICYgQ0xFQU4pID09PSAwKSB7XG5cdFx0XHRcdGVmZmVjdC5mIF49IENMRUFOO1xuXHRcdFx0fVxuXG5cdFx0XHQvKiogQHR5cGUge0VmZmVjdFtdfSAqL1xuXHRcdFx0dmFyIGNvbGxlY3RlZF9lZmZlY3RzID0gW107XG5cblx0XHRcdHByb2Nlc3NfZWZmZWN0cyhlZmZlY3QsIGNvbGxlY3RlZF9lZmZlY3RzKTtcblx0XHRcdGZsdXNoX3F1ZXVlZF9lZmZlY3RzKGNvbGxlY3RlZF9lZmZlY3RzKTtcblx0XHR9XG5cdH0gZmluYWxseSB7XG5cdFx0aXNfZmx1c2hpbmdfZWZmZWN0ID0gcHJldmlvdXNseV9mbHVzaGluZ19lZmZlY3Q7XG5cdH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PEVmZmVjdD59IGVmZmVjdHNcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBmbHVzaF9xdWV1ZWRfZWZmZWN0cyhlZmZlY3RzKSB7XG5cdHZhciBsZW5ndGggPSBlZmZlY3RzLmxlbmd0aDtcblx0aWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgZWZmZWN0ID0gZWZmZWN0c1tpXTtcblxuXHRcdGlmICgoZWZmZWN0LmYgJiAoREVTVFJPWUVEIHwgSU5FUlQpKSA9PT0gMCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKGNoZWNrX2RpcnRpbmVzcyhlZmZlY3QpKSB7XG5cdFx0XHRcdFx0dXBkYXRlX2VmZmVjdChlZmZlY3QpO1xuXG5cdFx0XHRcdFx0Ly8gRWZmZWN0cyB3aXRoIG5vIGRlcGVuZGVuY2llcyBvciB0ZWFyZG93biBkbyBub3QgZ2V0IGFkZGVkIHRvIHRoZSBlZmZlY3QgdHJlZS5cblx0XHRcdFx0XHQvLyBEZWZlcnJlZCBlZmZlY3RzIChlLmcuIGAkZWZmZWN0KC4uLilgKSBfYXJlXyBhZGRlZCB0byB0aGUgdHJlZSBiZWNhdXNlIHdlXG5cdFx0XHRcdFx0Ly8gZG9uJ3Qga25vdyBpZiB3ZSBuZWVkIHRvIGtlZXAgdGhlbSB1bnRpbCB0aGV5IGFyZSBleGVjdXRlZC4gRG9pbmcgdGhlIGNoZWNrXG5cdFx0XHRcdFx0Ly8gaGVyZSAocmF0aGVyIHRoYW4gaW4gYHVwZGF0ZV9lZmZlY3RgKSBhbGxvd3MgdXMgdG8gc2tpcCB0aGUgd29yayBmb3Jcblx0XHRcdFx0XHQvLyBpbW1lZGlhdGUgZWZmZWN0cy5cblx0XHRcdFx0XHRpZiAoZWZmZWN0LmRlcHMgPT09IG51bGwgJiYgZWZmZWN0LmZpcnN0ID09PSBudWxsICYmIGVmZmVjdC5ub2Rlc19zdGFydCA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0aWYgKGVmZmVjdC50ZWFyZG93biA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0XHQvLyByZW1vdmUgdGhpcyBlZmZlY3QgZnJvbSB0aGUgZ3JhcGhcblx0XHRcdFx0XHRcdFx0dW5saW5rX2VmZmVjdChlZmZlY3QpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8ga2VlcCB0aGUgZWZmZWN0IGluIHRoZSBncmFwaCwgYnV0IGZyZWUgdXAgc29tZSBtZW1vcnlcblx0XHRcdFx0XHRcdFx0ZWZmZWN0LmZuID0gbnVsbDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGhhbmRsZV9lcnJvcihlcnJvciwgZWZmZWN0LCBudWxsLCBlZmZlY3QuY3R4KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc19kZWZlcnJlZCgpIHtcblx0aXNfbWljcm9fdGFza19xdWV1ZWQgPSBmYWxzZTtcblx0aWYgKGZsdXNoX2NvdW50ID4gMTAwMSkge1xuXHRcdHJldHVybjtcblx0fVxuXHRjb25zdCBwcmV2aW91c19xdWV1ZWRfcm9vdF9lZmZlY3RzID0gcXVldWVkX3Jvb3RfZWZmZWN0cztcblx0cXVldWVkX3Jvb3RfZWZmZWN0cyA9IFtdO1xuXHRmbHVzaF9xdWV1ZWRfcm9vdF9lZmZlY3RzKHByZXZpb3VzX3F1ZXVlZF9yb290X2VmZmVjdHMpO1xuXG5cdGlmICghaXNfbWljcm9fdGFza19xdWV1ZWQpIHtcblx0XHRmbHVzaF9jb3VudCA9IDA7XG5cdFx0bGFzdF9zY2hlZHVsZWRfZWZmZWN0ID0gbnVsbDtcblx0XHRpZiAoREVWKSB7XG5cdFx0XHRkZXZfZWZmZWN0X3N0YWNrID0gW107XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogQHBhcmFtIHtFZmZlY3R9IHNpZ25hbFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2hlZHVsZV9lZmZlY3Qoc2lnbmFsKSB7XG5cdGlmIChzY2hlZHVsZXJfbW9kZSA9PT0gRkxVU0hfTUlDUk9UQVNLKSB7XG5cdFx0aWYgKCFpc19taWNyb190YXNrX3F1ZXVlZCkge1xuXHRcdFx0aXNfbWljcm9fdGFza19xdWV1ZWQgPSB0cnVlO1xuXHRcdFx0cXVldWVNaWNyb3Rhc2socHJvY2Vzc19kZWZlcnJlZCk7XG5cdFx0fVxuXHR9XG5cblx0bGFzdF9zY2hlZHVsZWRfZWZmZWN0ID0gc2lnbmFsO1xuXG5cdHZhciBlZmZlY3QgPSBzaWduYWw7XG5cblx0d2hpbGUgKGVmZmVjdC5wYXJlbnQgIT09IG51bGwpIHtcblx0XHRlZmZlY3QgPSBlZmZlY3QucGFyZW50O1xuXHRcdHZhciBmbGFncyA9IGVmZmVjdC5mO1xuXG5cdFx0aWYgKChmbGFncyAmIChST09UX0VGRkVDVCB8IEJSQU5DSF9FRkZFQ1QpKSAhPT0gMCkge1xuXHRcdFx0aWYgKChmbGFncyAmIENMRUFOKSA9PT0gMCkgcmV0dXJuO1xuXHRcdFx0ZWZmZWN0LmYgXj0gQ0xFQU47XG5cdFx0fVxuXHR9XG5cblx0cXVldWVkX3Jvb3RfZWZmZWN0cy5wdXNoKGVmZmVjdCk7XG59XG5cbi8qKlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gYm90aCBydW5zIHJlbmRlciBlZmZlY3RzIGFuZCBjb2xsZWN0cyB1c2VyIGVmZmVjdHMgaW4gdG9wb2xvZ2ljYWwgb3JkZXJcbiAqIGZyb20gdGhlIHN0YXJ0aW5nIGVmZmVjdCBwYXNzZWQgaW4uIEVmZmVjdHMgd2lsbCBiZSBjb2xsZWN0ZWQgd2hlbiB0aGV5IG1hdGNoIHRoZSBmaWx0ZXJlZFxuICogYml0d2lzZSBmbGFnIHBhc3NlZCBpbiBvbmx5LiBUaGUgY29sbGVjdGVkIGVmZmVjdHMgYXJyYXkgd2lsbCBiZSBwb3B1bGF0ZWQgd2l0aCBhbGwgdGhlIHVzZXJcbiAqIGVmZmVjdHMgdG8gYmUgZmx1c2hlZC5cbiAqXG4gKiBAcGFyYW0ge0VmZmVjdH0gZWZmZWN0XG4gKiBAcGFyYW0ge0VmZmVjdFtdfSBjb2xsZWN0ZWRfZWZmZWN0c1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NfZWZmZWN0cyhlZmZlY3QsIGNvbGxlY3RlZF9lZmZlY3RzKSB7XG5cdHZhciBjdXJyZW50X2VmZmVjdCA9IGVmZmVjdC5maXJzdDtcblx0dmFyIGVmZmVjdHMgPSBbXTtcblxuXHRtYWluX2xvb3A6IHdoaWxlIChjdXJyZW50X2VmZmVjdCAhPT0gbnVsbCkge1xuXHRcdHZhciBmbGFncyA9IGN1cnJlbnRfZWZmZWN0LmY7XG5cdFx0dmFyIGlzX2JyYW5jaCA9IChmbGFncyAmIEJSQU5DSF9FRkZFQ1QpICE9PSAwO1xuXHRcdHZhciBpc19za2lwcGFibGVfYnJhbmNoID0gaXNfYnJhbmNoICYmIChmbGFncyAmIENMRUFOKSAhPT0gMDtcblx0XHR2YXIgc2libGluZyA9IGN1cnJlbnRfZWZmZWN0Lm5leHQ7XG5cblx0XHRpZiAoIWlzX3NraXBwYWJsZV9icmFuY2ggJiYgKGZsYWdzICYgSU5FUlQpID09PSAwKSB7XG5cdFx0XHRpZiAoKGZsYWdzICYgUkVOREVSX0VGRkVDVCkgIT09IDApIHtcblx0XHRcdFx0aWYgKGlzX2JyYW5jaCkge1xuXHRcdFx0XHRcdGN1cnJlbnRfZWZmZWN0LmYgXj0gQ0xFQU47XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGlmIChjaGVja19kaXJ0aW5lc3MoY3VycmVudF9lZmZlY3QpKSB7XG5cdFx0XHRcdFx0XHRcdHVwZGF0ZV9lZmZlY3QoY3VycmVudF9lZmZlY3QpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVfZXJyb3IoZXJyb3IsIGN1cnJlbnRfZWZmZWN0LCBudWxsLCBjdXJyZW50X2VmZmVjdC5jdHgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBjaGlsZCA9IGN1cnJlbnRfZWZmZWN0LmZpcnN0O1xuXG5cdFx0XHRcdGlmIChjaGlsZCAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdGN1cnJlbnRfZWZmZWN0ID0gY2hpbGQ7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoKGZsYWdzICYgRUZGRUNUKSAhPT0gMCkge1xuXHRcdFx0XHRlZmZlY3RzLnB1c2goY3VycmVudF9lZmZlY3QpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChzaWJsaW5nID09PSBudWxsKSB7XG5cdFx0XHRsZXQgcGFyZW50ID0gY3VycmVudF9lZmZlY3QucGFyZW50O1xuXG5cdFx0XHR3aGlsZSAocGFyZW50ICE9PSBudWxsKSB7XG5cdFx0XHRcdGlmIChlZmZlY3QgPT09IHBhcmVudCkge1xuXHRcdFx0XHRcdGJyZWFrIG1haW5fbG9vcDtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgcGFyZW50X3NpYmxpbmcgPSBwYXJlbnQubmV4dDtcblx0XHRcdFx0aWYgKHBhcmVudF9zaWJsaW5nICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0Y3VycmVudF9lZmZlY3QgPSBwYXJlbnRfc2libGluZztcblx0XHRcdFx0XHRjb250aW51ZSBtYWluX2xvb3A7XG5cdFx0XHRcdH1cblx0XHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjdXJyZW50X2VmZmVjdCA9IHNpYmxpbmc7XG5cdH1cblxuXHQvLyBXZSBtaWdodCBiZSBkZWFsaW5nIHdpdGggbWFueSBlZmZlY3RzIGhlcmUsIGZhciBtb3JlIHRoYW4gY2FuIGJlIHNwcmVhZCBpbnRvXG5cdC8vIGFuIGFycmF5IHB1c2ggY2FsbCAoY2FsbHN0YWNrIG92ZXJmbG93KS4gU28gbGV0J3MgZGVhbCB3aXRoIGVhY2ggZWZmZWN0IGluIGEgbG9vcC5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlZmZlY3RzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2hpbGQgPSBlZmZlY3RzW2ldO1xuXHRcdGNvbGxlY3RlZF9lZmZlY3RzLnB1c2goY2hpbGQpO1xuXHRcdHByb2Nlc3NfZWZmZWN0cyhjaGlsZCwgY29sbGVjdGVkX2VmZmVjdHMpO1xuXHR9XG59XG5cbi8qKlxuICogSW50ZXJuYWwgdmVyc2lvbiBvZiBgZmx1c2hTeW5jYCB3aXRoIHRoZSBvcHRpb24gdG8gbm90IGZsdXNoIHByZXZpb3VzIGVmZmVjdHMuXG4gKiBSZXR1cm5zIHRoZSByZXN1bHQgb2YgdGhlIHBhc3NlZCBmdW5jdGlvbiwgaWYgZ2l2ZW4uXG4gKiBAcGFyYW0geygpID0+IGFueX0gW2ZuXVxuICogQHJldHVybnMge2FueX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZsdXNoX3N5bmMoZm4pIHtcblx0dmFyIHByZXZpb3VzX3NjaGVkdWxlcl9tb2RlID0gc2NoZWR1bGVyX21vZGU7XG5cdHZhciBwcmV2aW91c19xdWV1ZWRfcm9vdF9lZmZlY3RzID0gcXVldWVkX3Jvb3RfZWZmZWN0cztcblxuXHR0cnkge1xuXHRcdGluZmluaXRlX2xvb3BfZ3VhcmQoKTtcblxuXHRcdC8qKiBAdHlwZSB7RWZmZWN0W119ICovXG5cdFx0Y29uc3Qgcm9vdF9lZmZlY3RzID0gW107XG5cblx0XHRzY2hlZHVsZXJfbW9kZSA9IEZMVVNIX1NZTkM7XG5cdFx0cXVldWVkX3Jvb3RfZWZmZWN0cyA9IHJvb3RfZWZmZWN0cztcblx0XHRpc19taWNyb190YXNrX3F1ZXVlZCA9IGZhbHNlO1xuXG5cdFx0Zmx1c2hfcXVldWVkX3Jvb3RfZWZmZWN0cyhwcmV2aW91c19xdWV1ZWRfcm9vdF9lZmZlY3RzKTtcblxuXHRcdHZhciByZXN1bHQgPSBmbj8uKCk7XG5cblx0XHRmbHVzaF90YXNrcygpO1xuXHRcdGlmIChxdWV1ZWRfcm9vdF9lZmZlY3RzLmxlbmd0aCA+IDAgfHwgcm9vdF9lZmZlY3RzLmxlbmd0aCA+IDApIHtcblx0XHRcdGZsdXNoX3N5bmMoKTtcblx0XHR9XG5cblx0XHRmbHVzaF9jb3VudCA9IDA7XG5cdFx0bGFzdF9zY2hlZHVsZWRfZWZmZWN0ID0gbnVsbDtcblx0XHRpZiAoREVWKSB7XG5cdFx0XHRkZXZfZWZmZWN0X3N0YWNrID0gW107XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSBmaW5hbGx5IHtcblx0XHRzY2hlZHVsZXJfbW9kZSA9IHByZXZpb3VzX3NjaGVkdWxlcl9tb2RlO1xuXHRcdHF1ZXVlZF9yb290X2VmZmVjdHMgPSBwcmV2aW91c19xdWV1ZWRfcm9vdF9lZmZlY3RzO1xuXHR9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIGFueSBwZW5kaW5nIHN0YXRlIGNoYW5nZXMgaGF2ZSBiZWVuIGFwcGxpZWQuXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRpY2soKSB7XG5cdGF3YWl0IFByb21pc2UucmVzb2x2ZSgpO1xuXHQvLyBCeSBjYWxsaW5nIGZsdXNoX3N5bmMgd2UgZ3VhcmFudGVlIHRoYXQgYW55IHBlbmRpbmcgc3RhdGUgY2hhbmdlcyBhcmUgYXBwbGllZCBhZnRlciBvbmUgdGljay5cblx0Ly8gVE9ETyBsb29rIGludG8gd2hldGhlciB3ZSBjYW4gbWFrZSBmbHVzaGluZyBzdWJzZXF1ZW50IHVwZGF0ZXMgc3luY2hyb25vdXNseSBpbiB0aGUgZnV0dXJlLlxuXHRmbHVzaF9zeW5jKCk7XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIFZcbiAqIEBwYXJhbSB7VmFsdWU8Vj59IHNpZ25hbFxuICogQHJldHVybnMge1Z9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQoc2lnbmFsKSB7XG5cdHZhciBmbGFncyA9IHNpZ25hbC5mO1xuXHR2YXIgaXNfZGVyaXZlZCA9IChmbGFncyAmIERFUklWRUQpICE9PSAwO1xuXG5cdC8vIElmIHRoZSBkZXJpdmVkIGlzIGRlc3Ryb3llZCwganVzdCBleGVjdXRlIGl0IGFnYWluIHdpdGhvdXQgcmV0YWluaW5nXG5cdC8vIGl0cyBtZW1vaXNhdGlvbiBwcm9wZXJ0aWVzIGFzIHRoZSBkZXJpdmVkIGlzIHN0YWxlXG5cdGlmIChpc19kZXJpdmVkICYmIChmbGFncyAmIERFU1RST1lFRCkgIT09IDApIHtcblx0XHR2YXIgdmFsdWUgPSBleGVjdXRlX2Rlcml2ZWQoLyoqIEB0eXBlIHtEZXJpdmVkfSAqLyAoc2lnbmFsKSk7XG5cdFx0Ly8gRW5zdXJlIHRoZSBkZXJpdmVkIHJlbWFpbnMgZGVzdHJveWVkXG5cdFx0ZGVzdHJveV9kZXJpdmVkKC8qKiBAdHlwZSB7RGVyaXZlZH0gKi8gKHNpZ25hbCkpO1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXG5cdGlmIChjYXB0dXJlZF9zaWduYWxzICE9PSBudWxsKSB7XG5cdFx0Y2FwdHVyZWRfc2lnbmFscy5hZGQoc2lnbmFsKTtcblx0fVxuXG5cdC8vIFJlZ2lzdGVyIHRoZSBkZXBlbmRlbmN5IG9uIHRoZSBjdXJyZW50IHJlYWN0aW9uIHNpZ25hbC5cblx0aWYgKGFjdGl2ZV9yZWFjdGlvbiAhPT0gbnVsbCkge1xuXHRcdGlmIChkZXJpdmVkX3NvdXJjZXMgIT09IG51bGwgJiYgZGVyaXZlZF9zb3VyY2VzLmluY2x1ZGVzKHNpZ25hbCkpIHtcblx0XHRcdGUuc3RhdGVfdW5zYWZlX2xvY2FsX3JlYWQoKTtcblx0XHR9XG5cdFx0dmFyIGRlcHMgPSBhY3RpdmVfcmVhY3Rpb24uZGVwcztcblxuXHRcdC8vIElmIHRoZSBzaWduYWwgaXMgYWNjZXNzaW5nIHRoZSBzYW1lIGRlcGVuZGVuY2llcyBpbiB0aGUgc2FtZVxuXHRcdC8vIG9yZGVyIGFzIGl0IGRpZCBsYXN0IHRpbWUsIGluY3JlbWVudCBgc2tpcHBlZF9kZXBzYFxuXHRcdC8vIHJhdGhlciB0aGFuIHVwZGF0aW5nIGBuZXdfZGVwc2AsIHdoaWNoIGNyZWF0ZXMgR0MgY29zdFxuXHRcdGlmIChuZXdfZGVwcyA9PT0gbnVsbCAmJiBkZXBzICE9PSBudWxsICYmIGRlcHNbc2tpcHBlZF9kZXBzXSA9PT0gc2lnbmFsKSB7XG5cdFx0XHRza2lwcGVkX2RlcHMrKztcblx0XHR9IGVsc2UgaWYgKG5ld19kZXBzID09PSBudWxsKSB7XG5cdFx0XHRuZXdfZGVwcyA9IFtzaWduYWxdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuZXdfZGVwcy5wdXNoKHNpZ25hbCk7XG5cdFx0fVxuXG5cdFx0aWYgKFxuXHRcdFx0dW50cmFja2VkX3dyaXRlcyAhPT0gbnVsbCAmJlxuXHRcdFx0YWN0aXZlX2VmZmVjdCAhPT0gbnVsbCAmJlxuXHRcdFx0KGFjdGl2ZV9lZmZlY3QuZiAmIENMRUFOKSAhPT0gMCAmJlxuXHRcdFx0KGFjdGl2ZV9lZmZlY3QuZiAmIEJSQU5DSF9FRkZFQ1QpID09PSAwICYmXG5cdFx0XHR1bnRyYWNrZWRfd3JpdGVzLmluY2x1ZGVzKHNpZ25hbClcblx0XHQpIHtcblx0XHRcdHNldF9zaWduYWxfc3RhdHVzKGFjdGl2ZV9lZmZlY3QsIERJUlRZKTtcblx0XHRcdHNjaGVkdWxlX2VmZmVjdChhY3RpdmVfZWZmZWN0KTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoaXNfZGVyaXZlZCAmJiAvKiogQHR5cGUge0Rlcml2ZWR9ICovIChzaWduYWwpLmRlcHMgPT09IG51bGwpIHtcblx0XHR2YXIgZGVyaXZlZCA9IC8qKiBAdHlwZSB7RGVyaXZlZH0gKi8gKHNpZ25hbCk7XG5cdFx0dmFyIHBhcmVudCA9IGRlcml2ZWQucGFyZW50O1xuXHRcdHZhciB0YXJnZXQgPSBkZXJpdmVkO1xuXG5cdFx0d2hpbGUgKHBhcmVudCAhPT0gbnVsbCkge1xuXHRcdFx0Ly8gQXR0YWNoIHRoZSBkZXJpdmVkIHRvIHRoZSBuZWFyZXN0IHBhcmVudCBlZmZlY3QsIGlmIHRoZXJlIGFyZSBkZXJpdmVkc1xuXHRcdFx0Ly8gaW4gYmV0d2VlbiB0aGVuIHdlIGFsc28gbmVlZCB0byBhdHRhY2ggdGhlbSB0b29cblx0XHRcdGlmICgocGFyZW50LmYgJiBERVJJVkVEKSAhPT0gMCkge1xuXHRcdFx0XHR2YXIgcGFyZW50X2Rlcml2ZWQgPSAvKiogQHR5cGUge0Rlcml2ZWR9ICovIChwYXJlbnQpO1xuXG5cdFx0XHRcdHRhcmdldCA9IHBhcmVudF9kZXJpdmVkO1xuXHRcdFx0XHRwYXJlbnQgPSBwYXJlbnRfZGVyaXZlZC5wYXJlbnQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YXIgcGFyZW50X2VmZmVjdCA9IC8qKiBAdHlwZSB7RWZmZWN0fSAqLyAocGFyZW50KTtcblxuXHRcdFx0XHRpZiAoIXBhcmVudF9lZmZlY3QuZGVyaXZlZHM/LmluY2x1ZGVzKHRhcmdldCkpIHtcblx0XHRcdFx0XHQocGFyZW50X2VmZmVjdC5kZXJpdmVkcyA/Pz0gW10pLnB1c2godGFyZ2V0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAoaXNfZGVyaXZlZCkge1xuXHRcdGRlcml2ZWQgPSAvKiogQHR5cGUge0Rlcml2ZWR9ICovIChzaWduYWwpO1xuXG5cdFx0aWYgKGNoZWNrX2RpcnRpbmVzcyhkZXJpdmVkKSkge1xuXHRcdFx0dXBkYXRlX2Rlcml2ZWQoZGVyaXZlZCk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKFxuXHRcdERFViAmJlxuXHRcdHRyYWNpbmdfbW9kZV9mbGFnICYmXG5cdFx0dHJhY2luZ19leHByZXNzaW9ucyAhPT0gbnVsbCAmJlxuXHRcdGFjdGl2ZV9yZWFjdGlvbiAhPT0gbnVsbCAmJlxuXHRcdHRyYWNpbmdfZXhwcmVzc2lvbnMucmVhY3Rpb24gPT09IGFjdGl2ZV9yZWFjdGlvblxuXHQpIHtcblx0XHQvLyBVc2VkIHdoZW4gbWFwcGluZyBzdGF0ZSBiZXR3ZWVuIHNwZWNpYWwgYmxvY2tzIGxpa2UgYGVhY2hgXG5cdFx0aWYgKHNpZ25hbC5kZWJ1Zykge1xuXHRcdFx0c2lnbmFsLmRlYnVnKCk7XG5cdFx0fSBlbHNlIGlmIChzaWduYWwuY3JlYXRlZCkge1xuXHRcdFx0dmFyIGVudHJ5ID0gdHJhY2luZ19leHByZXNzaW9ucy5lbnRyaWVzLmdldChzaWduYWwpO1xuXG5cdFx0XHRpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRlbnRyeSA9IHsgcmVhZDogW10gfTtcblx0XHRcdFx0dHJhY2luZ19leHByZXNzaW9ucy5lbnRyaWVzLnNldChzaWduYWwsIGVudHJ5KTtcblx0XHRcdH1cblxuXHRcdFx0ZW50cnkucmVhZC5wdXNoKGdldF9zdGFjaygnVHJhY2VkQXQnKSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHNpZ25hbC52O1xufVxuXG4vKipcbiAqIExpa2UgYGdldGAsIGJ1dCBjaGVja3MgZm9yIGB1bmRlZmluZWRgLiBVc2VkIGZvciBgdmFyYCBkZWNsYXJhdGlvbnMgYmVjYXVzZSB0aGV5IGNhbiBiZSBhY2Nlc3NlZCBiZWZvcmUgYmVpbmcgZGVjbGFyZWRcbiAqIEB0ZW1wbGF0ZSBWXG4gKiBAcGFyYW0ge1ZhbHVlPFY+IHwgdW5kZWZpbmVkfSBzaWduYWxcbiAqIEByZXR1cm5zIHtWIHwgdW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FmZV9nZXQoc2lnbmFsKSB7XG5cdHJldHVybiBzaWduYWwgJiYgZ2V0KHNpZ25hbCk7XG59XG5cbi8qKlxuICogQ2FwdHVyZSBhbiBhcnJheSBvZiBhbGwgdGhlIHNpZ25hbHMgdGhhdCBhcmUgcmVhZCB3aGVuIGBmbmAgaXMgY2FsbGVkXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHsoKSA9PiBUfSBmblxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FwdHVyZV9zaWduYWxzKGZuKSB7XG5cdHZhciBwcmV2aW91c19jYXB0dXJlZF9zaWduYWxzID0gY2FwdHVyZWRfc2lnbmFscztcblx0Y2FwdHVyZWRfc2lnbmFscyA9IG5ldyBTZXQoKTtcblxuXHR2YXIgY2FwdHVyZWQgPSBjYXB0dXJlZF9zaWduYWxzO1xuXHR2YXIgc2lnbmFsO1xuXG5cdHRyeSB7XG5cdFx0dW50cmFjayhmbik7XG5cdFx0aWYgKHByZXZpb3VzX2NhcHR1cmVkX3NpZ25hbHMgIT09IG51bGwpIHtcblx0XHRcdGZvciAoc2lnbmFsIG9mIGNhcHR1cmVkX3NpZ25hbHMpIHtcblx0XHRcdFx0cHJldmlvdXNfY2FwdHVyZWRfc2lnbmFscy5hZGQoc2lnbmFsKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZmluYWxseSB7XG5cdFx0Y2FwdHVyZWRfc2lnbmFscyA9IHByZXZpb3VzX2NhcHR1cmVkX3NpZ25hbHM7XG5cdH1cblxuXHRyZXR1cm4gY2FwdHVyZWQ7XG59XG5cbi8qKlxuICogSW52b2tlcyBhIGZ1bmN0aW9uIGFuZCBjYXB0dXJlcyBhbGwgc2lnbmFscyB0aGF0IGFyZSByZWFkIGR1cmluZyB0aGUgaW52b2NhdGlvbixcbiAqIHRoZW4gaW52YWxpZGF0ZXMgdGhlbS5cbiAqIEBwYXJhbSB7KCkgPT4gYW55fSBmblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW52YWxpZGF0ZV9pbm5lcl9zaWduYWxzKGZuKSB7XG5cdHZhciBjYXB0dXJlZCA9IGNhcHR1cmVfc2lnbmFscygoKSA9PiB1bnRyYWNrKGZuKSk7XG5cblx0Zm9yICh2YXIgc2lnbmFsIG9mIGNhcHR1cmVkKSB7XG5cdFx0Ly8gR28gb25lIGxldmVsIHVwIGJlY2F1c2UgZGVyaXZlZCBzaWduYWxzIGNyZWF0ZWQgYXMgcGFydCBvZiBwcm9wcyBpbiBsZWdhY3kgbW9kZVxuXHRcdGlmICgoc2lnbmFsLmYgJiBMRUdBQ1lfREVSSVZFRF9QUk9QKSAhPT0gMCkge1xuXHRcdFx0Zm9yIChjb25zdCBkZXAgb2YgLyoqIEB0eXBlIHtEZXJpdmVkfSAqLyAoc2lnbmFsKS5kZXBzIHx8IFtdKSB7XG5cdFx0XHRcdGlmICgoZGVwLmYgJiBERVJJVkVEKSA9PT0gMCkge1xuXHRcdFx0XHRcdC8vIFVzZSBpbnRlcm5hbF9zZXQgaW5zdGVhZCBvZiBzZXQgaGVyZSBhbmQgYmVsb3cgdG8gYXZvaWQgbXV0YXRpb24gdmFsaWRhdGlvblxuXHRcdFx0XHRcdGludGVybmFsX3NldChkZXAsIGRlcC52KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbnRlcm5hbF9zZXQoc2lnbmFsLCBzaWduYWwudik7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogV2hlbiB1c2VkIGluc2lkZSBhIFtgJGRlcml2ZWRgXShodHRwczovL3N2ZWx0ZS5kZXYvZG9jcy9zdmVsdGUvJGRlcml2ZWQpIG9yIFtgJGVmZmVjdGBdKGh0dHBzOi8vc3ZlbHRlLmRldi9kb2NzL3N2ZWx0ZS8kZWZmZWN0KSxcbiAqIGFueSBzdGF0ZSByZWFkIGluc2lkZSBgZm5gIHdpbGwgbm90IGJlIHRyZWF0ZWQgYXMgYSBkZXBlbmRlbmN5LlxuICpcbiAqIGBgYHRzXG4gKiAkZWZmZWN0KCgpID0+IHtcbiAqICAgLy8gdGhpcyB3aWxsIHJ1biB3aGVuIGBkYXRhYCBjaGFuZ2VzLCBidXQgbm90IHdoZW4gYHRpbWVgIGNoYW5nZXNcbiAqICAgc2F2ZShkYXRhLCB7XG4gKiAgICAgdGltZXN0YW1wOiB1bnRyYWNrKCgpID0+IHRpbWUpXG4gKiAgIH0pO1xuICogfSk7XG4gKiBgYGBcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0geygpID0+IFR9IGZuXG4gKiBAcmV0dXJucyB7VH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVudHJhY2soZm4pIHtcblx0Y29uc3QgcHJldmlvdXNfcmVhY3Rpb24gPSBhY3RpdmVfcmVhY3Rpb247XG5cdHRyeSB7XG5cdFx0YWN0aXZlX3JlYWN0aW9uID0gbnVsbDtcblx0XHRyZXR1cm4gZm4oKTtcblx0fSBmaW5hbGx5IHtcblx0XHRhY3RpdmVfcmVhY3Rpb24gPSBwcmV2aW91c19yZWFjdGlvbjtcblx0fVxufVxuXG5jb25zdCBTVEFUVVNfTUFTSyA9IH4oRElSVFkgfCBNQVlCRV9ESVJUWSB8IENMRUFOKTtcblxuLyoqXG4gKiBAcGFyYW0ge1NpZ25hbH0gc2lnbmFsXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhdHVzXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldF9zaWduYWxfc3RhdHVzKHNpZ25hbCwgc3RhdHVzKSB7XG5cdHNpZ25hbC5mID0gKHNpZ25hbC5mICYgU1RBVFVTX01BU0spIHwgc3RhdHVzO1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgY29udGV4dCB0aGF0IGJlbG9uZ3MgdG8gdGhlIGNsb3Nlc3QgcGFyZW50IGNvbXBvbmVudCB3aXRoIHRoZSBzcGVjaWZpZWQgYGtleWAuXG4gKiBNdXN0IGJlIGNhbGxlZCBkdXJpbmcgY29tcG9uZW50IGluaXRpYWxpc2F0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2FueX0ga2V5XG4gKiBAcmV0dXJucyB7VH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRleHQoa2V5KSB7XG5cdGNvbnN0IGNvbnRleHRfbWFwID0gZ2V0X29yX2luaXRfY29udGV4dF9tYXAoJ2dldENvbnRleHQnKTtcblx0Y29uc3QgcmVzdWx0ID0gLyoqIEB0eXBlIHtUfSAqLyAoY29udGV4dF9tYXAuZ2V0KGtleSkpO1xuXG5cdGlmIChERVYpIHtcblx0XHRjb25zdCBmbiA9IC8qKiBAdHlwZSB7Q29tcG9uZW50Q29udGV4dH0gKi8gKGNvbXBvbmVudF9jb250ZXh0KS5mdW5jdGlvbjtcblx0XHRpZiAoZm4pIHtcblx0XHRcdGFkZF9vd25lcihyZXN1bHQsIGZuLCB0cnVlKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEFzc29jaWF0ZXMgYW4gYXJiaXRyYXJ5IGBjb250ZXh0YCBvYmplY3Qgd2l0aCB0aGUgY3VycmVudCBjb21wb25lbnQgYW5kIHRoZSBzcGVjaWZpZWQgYGtleWBcbiAqIGFuZCByZXR1cm5zIHRoYXQgb2JqZWN0LiBUaGUgY29udGV4dCBpcyB0aGVuIGF2YWlsYWJsZSB0byBjaGlsZHJlbiBvZiB0aGUgY29tcG9uZW50XG4gKiAoaW5jbHVkaW5nIHNsb3R0ZWQgY29udGVudCkgd2l0aCBgZ2V0Q29udGV4dGAuXG4gKlxuICogTGlrZSBsaWZlY3ljbGUgZnVuY3Rpb25zLCB0aGlzIG11c3QgYmUgY2FsbGVkIGR1cmluZyBjb21wb25lbnQgaW5pdGlhbGlzYXRpb24uXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7YW55fSBrZXlcbiAqIEBwYXJhbSB7VH0gY29udGV4dFxuICogQHJldHVybnMge1R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDb250ZXh0KGtleSwgY29udGV4dCkge1xuXHRjb25zdCBjb250ZXh0X21hcCA9IGdldF9vcl9pbml0X2NvbnRleHRfbWFwKCdzZXRDb250ZXh0Jyk7XG5cdGNvbnRleHRfbWFwLnNldChrZXksIGNvbnRleHQpO1xuXHRyZXR1cm4gY29udGV4dDtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhIGdpdmVuIGBrZXlgIGhhcyBiZWVuIHNldCBpbiB0aGUgY29udGV4dCBvZiBhIHBhcmVudCBjb21wb25lbnQuXG4gKiBNdXN0IGJlIGNhbGxlZCBkdXJpbmcgY29tcG9uZW50IGluaXRpYWxpc2F0aW9uLlxuICpcbiAqIEBwYXJhbSB7YW55fSBrZXlcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzQ29udGV4dChrZXkpIHtcblx0Y29uc3QgY29udGV4dF9tYXAgPSBnZXRfb3JfaW5pdF9jb250ZXh0X21hcCgnaGFzQ29udGV4dCcpO1xuXHRyZXR1cm4gY29udGV4dF9tYXAuaGFzKGtleSk7XG59XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSB3aG9sZSBjb250ZXh0IG1hcCB0aGF0IGJlbG9uZ3MgdG8gdGhlIGNsb3Nlc3QgcGFyZW50IGNvbXBvbmVudC5cbiAqIE11c3QgYmUgY2FsbGVkIGR1cmluZyBjb21wb25lbnQgaW5pdGlhbGlzYXRpb24uIFVzZWZ1bCwgZm9yIGV4YW1wbGUsIGlmIHlvdVxuICogcHJvZ3JhbW1hdGljYWxseSBjcmVhdGUgYSBjb21wb25lbnQgYW5kIHdhbnQgdG8gcGFzcyB0aGUgZXhpc3RpbmcgY29udGV4dCB0byBpdC5cbiAqXG4gKiBAdGVtcGxhdGUge01hcDxhbnksIGFueT59IFtUPU1hcDxhbnksIGFueT5dXG4gKiBAcmV0dXJucyB7VH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbENvbnRleHRzKCkge1xuXHRjb25zdCBjb250ZXh0X21hcCA9IGdldF9vcl9pbml0X2NvbnRleHRfbWFwKCdnZXRBbGxDb250ZXh0cycpO1xuXG5cdGlmIChERVYpIHtcblx0XHRjb25zdCBmbiA9IGNvbXBvbmVudF9jb250ZXh0Py5mdW5jdGlvbjtcblx0XHRpZiAoZm4pIHtcblx0XHRcdGZvciAoY29uc3QgdmFsdWUgb2YgY29udGV4dF9tYXAudmFsdWVzKCkpIHtcblx0XHRcdFx0YWRkX293bmVyKHZhbHVlLCBmbiwgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIC8qKiBAdHlwZSB7VH0gKi8gKGNvbnRleHRfbWFwKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHJldHVybnMge01hcDx1bmtub3duLCB1bmtub3duPn1cbiAqL1xuZnVuY3Rpb24gZ2V0X29yX2luaXRfY29udGV4dF9tYXAobmFtZSkge1xuXHRpZiAoY29tcG9uZW50X2NvbnRleHQgPT09IG51bGwpIHtcblx0XHRsaWZlY3ljbGVfb3V0c2lkZV9jb21wb25lbnQobmFtZSk7XG5cdH1cblxuXHRyZXR1cm4gKGNvbXBvbmVudF9jb250ZXh0LmMgPz89IG5ldyBNYXAoZ2V0X3BhcmVudF9jb250ZXh0KGNvbXBvbmVudF9jb250ZXh0KSB8fCB1bmRlZmluZWQpKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0NvbXBvbmVudENvbnRleHR9IGNvbXBvbmVudF9jb250ZXh0XG4gKiBAcmV0dXJucyB7TWFwPHVua25vd24sIHVua25vd24+IHwgbnVsbH1cbiAqL1xuZnVuY3Rpb24gZ2V0X3BhcmVudF9jb250ZXh0KGNvbXBvbmVudF9jb250ZXh0KSB7XG5cdGxldCBwYXJlbnQgPSBjb21wb25lbnRfY29udGV4dC5wO1xuXHR3aGlsZSAocGFyZW50ICE9PSBudWxsKSB7XG5cdFx0Y29uc3QgY29udGV4dF9tYXAgPSBwYXJlbnQuYztcblx0XHRpZiAoY29udGV4dF9tYXAgIT09IG51bGwpIHtcblx0XHRcdHJldHVybiBjb250ZXh0X21hcDtcblx0XHR9XG5cdFx0cGFyZW50ID0gcGFyZW50LnA7XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIHtudW1iZXIgfCBiaWdpbnR9IFRcbiAqIEBwYXJhbSB7VmFsdWU8VD59IHNpZ25hbFxuICogQHBhcmFtIHsxIHwgLTF9IFtkXVxuICogQHJldHVybnMge1R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGUoc2lnbmFsLCBkID0gMSkge1xuXHR2YXIgdmFsdWUgPSBnZXQoc2lnbmFsKTtcblx0dmFyIHJlc3VsdCA9IGQgPT09IDEgPyB2YWx1ZSsrIDogdmFsdWUtLTtcblxuXHRzZXQoc2lnbmFsLCB2YWx1ZSk7XG5cblx0Ly8gQHRzLWV4cGVjdC1lcnJvclxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEB0ZW1wbGF0ZSB7bnVtYmVyIHwgYmlnaW50fSBUXG4gKiBAcGFyYW0ge1ZhbHVlPFQ+fSBzaWduYWxcbiAqIEBwYXJhbSB7MSB8IC0xfSBbZF1cbiAqIEByZXR1cm5zIHtUfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlX3ByZShzaWduYWwsIGQgPSAxKSB7XG5cdHZhciB2YWx1ZSA9IGdldChzaWduYWwpO1xuXG5cdC8vIEB0cy1leHBlY3QtZXJyb3Jcblx0cmV0dXJuIHNldChzaWduYWwsIGQgPT09IDEgPyArK3ZhbHVlIDogLS12YWx1ZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWNvcmQ8c3RyaW5nLCB1bmtub3duPn0gb2JqXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBrZXlzXG4gKiBAcmV0dXJucyB7UmVjb3JkPHN0cmluZywgdW5rbm93bj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleGNsdWRlX2Zyb21fb2JqZWN0KG9iaiwga2V5cykge1xuXHQvKiogQHR5cGUge1JlY29yZDxzdHJpbmcsIHVua25vd24+fSAqL1xuXHR2YXIgcmVzdWx0ID0ge307XG5cblx0Zm9yICh2YXIga2V5IGluIG9iaikge1xuXHRcdGlmICgha2V5cy5pbmNsdWRlcyhrZXkpKSB7XG5cdFx0XHRyZXN1bHRba2V5XSA9IG9ialtrZXldO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWNvcmQ8c3RyaW5nLCB1bmtub3duPn0gcHJvcHNcbiAqIEBwYXJhbSB7YW55fSBydW5lc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdXNoKHByb3BzLCBydW5lcyA9IGZhbHNlLCBmbikge1xuXHRjb21wb25lbnRfY29udGV4dCA9IHtcblx0XHRwOiBjb21wb25lbnRfY29udGV4dCxcblx0XHRjOiBudWxsLFxuXHRcdGU6IG51bGwsXG5cdFx0bTogZmFsc2UsXG5cdFx0czogcHJvcHMsXG5cdFx0eDogbnVsbCxcblx0XHRsOiBudWxsXG5cdH07XG5cblx0aWYgKGxlZ2FjeV9tb2RlX2ZsYWcgJiYgIXJ1bmVzKSB7XG5cdFx0Y29tcG9uZW50X2NvbnRleHQubCA9IHtcblx0XHRcdHM6IG51bGwsXG5cdFx0XHR1OiBudWxsLFxuXHRcdFx0cjE6IFtdLFxuXHRcdFx0cjI6IHNvdXJjZShmYWxzZSlcblx0XHR9O1xuXHR9XG5cblx0aWYgKERFVikge1xuXHRcdC8vIGNvbXBvbmVudCBmdW5jdGlvblxuXHRcdGNvbXBvbmVudF9jb250ZXh0LmZ1bmN0aW9uID0gZm47XG5cdFx0ZGV2X2N1cnJlbnRfY29tcG9uZW50X2Z1bmN0aW9uID0gZm47XG5cdH1cbn1cblxuLyoqXG4gKiBAdGVtcGxhdGUge1JlY29yZDxzdHJpbmcsIGFueT59IFRcbiAqIEBwYXJhbSB7VH0gW2NvbXBvbmVudF1cbiAqIEByZXR1cm5zIHtUfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcG9wKGNvbXBvbmVudCkge1xuXHRjb25zdCBjb250ZXh0X3N0YWNrX2l0ZW0gPSBjb21wb25lbnRfY29udGV4dDtcblx0aWYgKGNvbnRleHRfc3RhY2tfaXRlbSAhPT0gbnVsbCkge1xuXHRcdGlmIChjb21wb25lbnQgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29udGV4dF9zdGFja19pdGVtLnggPSBjb21wb25lbnQ7XG5cdFx0fVxuXHRcdGNvbnN0IGNvbXBvbmVudF9lZmZlY3RzID0gY29udGV4dF9zdGFja19pdGVtLmU7XG5cdFx0aWYgKGNvbXBvbmVudF9lZmZlY3RzICE9PSBudWxsKSB7XG5cdFx0XHR2YXIgcHJldmlvdXNfZWZmZWN0ID0gYWN0aXZlX2VmZmVjdDtcblx0XHRcdHZhciBwcmV2aW91c19yZWFjdGlvbiA9IGFjdGl2ZV9yZWFjdGlvbjtcblx0XHRcdGNvbnRleHRfc3RhY2tfaXRlbS5lID0gbnVsbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY29tcG9uZW50X2VmZmVjdHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHR2YXIgY29tcG9uZW50X2VmZmVjdCA9IGNvbXBvbmVudF9lZmZlY3RzW2ldO1xuXHRcdFx0XHRcdHNldF9hY3RpdmVfZWZmZWN0KGNvbXBvbmVudF9lZmZlY3QuZWZmZWN0KTtcblx0XHRcdFx0XHRzZXRfYWN0aXZlX3JlYWN0aW9uKGNvbXBvbmVudF9lZmZlY3QucmVhY3Rpb24pO1xuXHRcdFx0XHRcdGVmZmVjdChjb21wb25lbnRfZWZmZWN0LmZuKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0c2V0X2FjdGl2ZV9lZmZlY3QocHJldmlvdXNfZWZmZWN0KTtcblx0XHRcdFx0c2V0X2FjdGl2ZV9yZWFjdGlvbihwcmV2aW91c19yZWFjdGlvbik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbXBvbmVudF9jb250ZXh0ID0gY29udGV4dF9zdGFja19pdGVtLnA7XG5cdFx0aWYgKERFVikge1xuXHRcdFx0ZGV2X2N1cnJlbnRfY29tcG9uZW50X2Z1bmN0aW9uID0gY29udGV4dF9zdGFja19pdGVtLnA/LmZ1bmN0aW9uID8/IG51bGw7XG5cdFx0fVxuXHRcdGNvbnRleHRfc3RhY2tfaXRlbS5tID0gdHJ1ZTtcblx0fVxuXHQvLyBNaWNyby1vcHRpbWl6YXRpb246IERvbid0IHNldCAuYSBhYm92ZSB0byB0aGUgZW1wdHkgb2JqZWN0XG5cdC8vIHNvIGl0IGNhbiBiZSBnYXJiYWdlLWNvbGxlY3RlZCB3aGVuIHRoZSByZXR1cm4gaGVyZSBpcyB1bnVzZWRcblx0cmV0dXJuIGNvbXBvbmVudCB8fCAvKiogQHR5cGUge1R9ICovICh7fSk7XG59XG5cbi8qKlxuICogUG9zc2libHkgdHJhdmVyc2UgYW4gb2JqZWN0IGFuZCByZWFkIGFsbCBpdHMgcHJvcGVydGllcyBzbyB0aGF0IHRoZXkncmUgYWxsIHJlYWN0aXZlIGluIGNhc2UgdGhpcyBpcyBgJHN0YXRlYC5cbiAqIERvZXMgb25seSBjaGVjayBmaXJzdCBsZXZlbCBvZiBhbiBvYmplY3QgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgKGhldXJpc3RpYyBzaG91bGQgYmUgZ29vZCBmb3IgOTklIG9mIGFsbCBjYXNlcykuXG4gKiBAcGFyYW0ge2FueX0gdmFsdWVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVlcF9yZWFkX3N0YXRlKHZhbHVlKSB7XG5cdGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8ICF2YWx1ZSB8fCB2YWx1ZSBpbnN0YW5jZW9mIEV2ZW50VGFyZ2V0KSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0aWYgKFNUQVRFX1NZTUJPTCBpbiB2YWx1ZSkge1xuXHRcdGRlZXBfcmVhZCh2YWx1ZSk7XG5cdH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0Zm9yIChsZXQga2V5IGluIHZhbHVlKSB7XG5cdFx0XHRjb25zdCBwcm9wID0gdmFsdWVba2V5XTtcblx0XHRcdGlmICh0eXBlb2YgcHJvcCA9PT0gJ29iamVjdCcgJiYgcHJvcCAmJiBTVEFURV9TWU1CT0wgaW4gcHJvcCkge1xuXHRcdFx0XHRkZWVwX3JlYWQocHJvcCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogRGVlcGx5IHRyYXZlcnNlIGFuIG9iamVjdCBhbmQgcmVhZCBhbGwgaXRzIHByb3BlcnRpZXNcbiAqIHNvIHRoYXQgdGhleSdyZSBhbGwgcmVhY3RpdmUgaW4gY2FzZSB0aGlzIGlzIGAkc3RhdGVgXG4gKiBAcGFyYW0ge2FueX0gdmFsdWVcbiAqIEBwYXJhbSB7U2V0PGFueT59IHZpc2l0ZWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVlcF9yZWFkKHZhbHVlLCB2aXNpdGVkID0gbmV3IFNldCgpKSB7XG5cdGlmIChcblx0XHR0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG5cdFx0dmFsdWUgIT09IG51bGwgJiZcblx0XHQvLyBXZSBkb24ndCB3YW50IHRvIHRyYXZlcnNlIERPTSBlbGVtZW50c1xuXHRcdCEodmFsdWUgaW5zdGFuY2VvZiBFdmVudFRhcmdldCkgJiZcblx0XHQhdmlzaXRlZC5oYXModmFsdWUpXG5cdCkge1xuXHRcdHZpc2l0ZWQuYWRkKHZhbHVlKTtcblx0XHQvLyBXaGVuIHdvcmtpbmcgd2l0aCBhIHBvc3NpYmxlIFN2ZWx0ZURhdGUsIHRoaXNcblx0XHQvLyB3aWxsIGVuc3VyZSB3ZSBjYXB0dXJlIGNoYW5nZXMgdG8gaXQuXG5cdFx0aWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuXHRcdFx0dmFsdWUuZ2V0VGltZSgpO1xuXHRcdH1cblx0XHRmb3IgKGxldCBrZXkgaW4gdmFsdWUpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGRlZXBfcmVhZCh2YWx1ZVtrZXldLCB2aXNpdGVkKTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Ly8gY29udGludWVcblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc3QgcHJvdG8gPSBnZXRfcHJvdG90eXBlX29mKHZhbHVlKTtcblx0XHRpZiAoXG5cdFx0XHRwcm90byAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJlxuXHRcdFx0cHJvdG8gIT09IEFycmF5LnByb3RvdHlwZSAmJlxuXHRcdFx0cHJvdG8gIT09IE1hcC5wcm90b3R5cGUgJiZcblx0XHRcdHByb3RvICE9PSBTZXQucHJvdG90eXBlICYmXG5cdFx0XHRwcm90byAhPT0gRGF0ZS5wcm90b3R5cGVcblx0XHQpIHtcblx0XHRcdGNvbnN0IGRlc2NyaXB0b3JzID0gZ2V0X2Rlc2NyaXB0b3JzKHByb3RvKTtcblx0XHRcdGZvciAobGV0IGtleSBpbiBkZXNjcmlwdG9ycykge1xuXHRcdFx0XHRjb25zdCBnZXQgPSBkZXNjcmlwdG9yc1trZXldLmdldDtcblx0XHRcdFx0aWYgKGdldCkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRnZXQuY2FsbCh2YWx1ZSk7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0Ly8gY29udGludWVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuaWYgKERFVikge1xuXHQvKipcblx0ICogQHBhcmFtIHtzdHJpbmd9IHJ1bmVcblx0ICovXG5cdGZ1bmN0aW9uIHRocm93X3J1bmVfZXJyb3IocnVuZSkge1xuXHRcdGlmICghKHJ1bmUgaW4gZ2xvYmFsVGhpcykpIHtcblx0XHRcdC8vIFRPRE8gaWYgcGVvcGxlIHN0YXJ0IGFkanVzdGluZyB0aGUgXCJ0aGlzIGNhbiBjb250YWluIHJ1bmVzXCIgY29uZmlnIHRocm91Z2ggdi1wLXMgbW9yZSwgYWRqdXN0IHRoaXMgbWVzc2FnZVxuXHRcdFx0LyoqIEB0eXBlIHthbnl9ICovXG5cdFx0XHRsZXQgdmFsdWU7IC8vIGxldCdzIGhvcGUgbm9vbmUgbW9kaWZpZXMgdGhpcyBnbG9iYWwsIGJ1dCBiZWx0cyBhbmQgYnJhY2VzXG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsVGhpcywgcnVuZSwge1xuXHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBnZXR0ZXItcmV0dXJuXG5cdFx0XHRcdGdldDogKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZS5ydW5lX291dHNpZGVfc3ZlbHRlKHJ1bmUpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQ6ICh2KSA9PiB7XG5cdFx0XHRcdFx0dmFsdWUgPSB2O1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHR0aHJvd19ydW5lX2Vycm9yKCckc3RhdGUnKTtcblx0dGhyb3dfcnVuZV9lcnJvcignJGVmZmVjdCcpO1xuXHR0aHJvd19ydW5lX2Vycm9yKCckZGVyaXZlZCcpO1xuXHR0aHJvd19ydW5lX2Vycm9yKCckaW5zcGVjdCcpO1xuXHR0aHJvd19ydW5lX2Vycm9yKCckcHJvcHMnKTtcblx0dGhyb3dfcnVuZV9lcnJvcignJGJpbmRhYmxlJyk7XG59XG4iLCAiLyoqIEB0eXBlIHtNYXA8U3RyaW5nLCBTZXQ8SFRNTFN0eWxlRWxlbWVudD4+fSAqL1xudmFyIGFsbF9zdHlsZXMgPSBuZXcgTWFwKCk7XG5cbi8qKlxuICogQHBhcmFtIHtTdHJpbmd9IGhhc2hcbiAqIEBwYXJhbSB7SFRNTFN0eWxlRWxlbWVudH0gc3R5bGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyX3N0eWxlKGhhc2gsIHN0eWxlKSB7XG5cdHZhciBzdHlsZXMgPSBhbGxfc3R5bGVzLmdldChoYXNoKTtcblxuXHRpZiAoIXN0eWxlcykge1xuXHRcdHN0eWxlcyA9IG5ldyBTZXQoKTtcblx0XHRhbGxfc3R5bGVzLnNldChoYXNoLCBzdHlsZXMpO1xuXHR9XG5cblx0c3R5bGVzLmFkZChzdHlsZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtTdHJpbmd9IGhhc2hcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFudXBfc3R5bGVzKGhhc2gpIHtcblx0dmFyIHN0eWxlcyA9IGFsbF9zdHlsZXMuZ2V0KGhhc2gpO1xuXHRpZiAoIXN0eWxlcykgcmV0dXJuO1xuXG5cdGZvciAoY29uc3Qgc3R5bGUgb2Ygc3R5bGVzKSB7XG5cdFx0c3R5bGUucmVtb3ZlKCk7XG5cdH1cblxuXHRhbGxfc3R5bGVzLmRlbGV0ZShoYXNoKTtcbn1cbiIsICIvKiogQGltcG9ydCB7IExvY2F0aW9uIH0gZnJvbSAnbG9jYXRlLWNoYXJhY3RlcicgKi9cbmltcG9ydCB7IHRlYXJkb3duIH0gZnJvbSAnLi4vLi4vcmVhY3Rpdml0eS9lZmZlY3RzLmpzJztcbmltcG9ydCB7IGRlZmluZV9wcm9wZXJ0eSwgaXNfYXJyYXkgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvdXRpbHMuanMnO1xuaW1wb3J0IHsgaHlkcmF0aW5nIH0gZnJvbSAnLi4vaHlkcmF0aW9uLmpzJztcbmltcG9ydCB7IHF1ZXVlX21pY3JvX3Rhc2sgfSBmcm9tICcuLi90YXNrLmpzJztcbmltcG9ydCB7IEZJTEVOQU1FIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCAqIGFzIHcgZnJvbSAnLi4vLi4vd2FybmluZ3MuanMnO1xuaW1wb3J0IHtcblx0YWN0aXZlX2VmZmVjdCxcblx0YWN0aXZlX3JlYWN0aW9uLFxuXHRzZXRfYWN0aXZlX2VmZmVjdCxcblx0c2V0X2FjdGl2ZV9yZWFjdGlvblxufSBmcm9tICcuLi8uLi9ydW50aW1lLmpzJztcbmltcG9ydCB7IHdpdGhvdXRfcmVhY3RpdmVfY29udGV4dCB9IGZyb20gJy4vYmluZGluZ3Mvc2hhcmVkLmpzJztcblxuLyoqIEB0eXBlIHtTZXQ8c3RyaW5nPn0gKi9cbmV4cG9ydCBjb25zdCBhbGxfcmVnaXN0ZXJlZF9ldmVudHMgPSBuZXcgU2V0KCk7XG5cbi8qKiBAdHlwZSB7U2V0PChldmVudHM6IEFycmF5PHN0cmluZz4pID0+IHZvaWQ+fSAqL1xuZXhwb3J0IGNvbnN0IHJvb3RfZXZlbnRfaGFuZGxlcyA9IG5ldyBTZXQoKTtcblxuLyoqXG4gKiBTU1IgYWRkcyBvbmxvYWQgYW5kIG9uZXJyb3IgYXR0cmlidXRlcyB0byBjYXRjaCB0aG9zZSBldmVudHMgYmVmb3JlIHRoZSBoeWRyYXRpb24uXG4gKiBUaGlzIGZ1bmN0aW9uIGRldGVjdHMgdGhvc2UgY2FzZXMsIHJlbW92ZXMgdGhlIGF0dHJpYnV0ZXMgYW5kIHJlcGxheXMgdGhlIGV2ZW50cy5cbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGRvbVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwbGF5X2V2ZW50cyhkb20pIHtcblx0aWYgKCFoeWRyYXRpbmcpIHJldHVybjtcblxuXHRpZiAoZG9tLm9ubG9hZCkge1xuXHRcdGRvbS5yZW1vdmVBdHRyaWJ1dGUoJ29ubG9hZCcpO1xuXHR9XG5cdGlmIChkb20ub25lcnJvcikge1xuXHRcdGRvbS5yZW1vdmVBdHRyaWJ1dGUoJ29uZXJyb3InKTtcblx0fVxuXHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdGNvbnN0IGV2ZW50ID0gZG9tLl9fZTtcblx0aWYgKGV2ZW50ICE9PSB1bmRlZmluZWQpIHtcblx0XHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdFx0ZG9tLl9fZSA9IHVuZGVmaW5lZDtcblx0XHRxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG5cdFx0XHRpZiAoZG9tLmlzQ29ubmVjdGVkKSB7XG5cdFx0XHRcdGRvbS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudF9uYW1lXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSBkb21cbiAqIEBwYXJhbSB7RXZlbnRMaXN0ZW5lcn0gaGFuZGxlclxuICogQHBhcmFtIHtBZGRFdmVudExpc3RlbmVyT3B0aW9uc30gb3B0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlX2V2ZW50KGV2ZW50X25hbWUsIGRvbSwgaGFuZGxlciwgb3B0aW9ucykge1xuXHQvKipcblx0ICogQHRoaXMge0V2ZW50VGFyZ2V0fVxuXHQgKi9cblx0ZnVuY3Rpb24gdGFyZ2V0X2hhbmRsZXIoLyoqIEB0eXBlIHtFdmVudH0gKi8gZXZlbnQpIHtcblx0XHRpZiAoIW9wdGlvbnMuY2FwdHVyZSkge1xuXHRcdFx0Ly8gT25seSBjYWxsIGluIHRoZSBidWJibGUgcGhhc2UsIGVsc2UgZGVsZWdhdGVkIGV2ZW50cyB3b3VsZCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBjYXB0dXJpbmcgZXZlbnRzXG5cdFx0XHRoYW5kbGVfZXZlbnRfcHJvcGFnYXRpb24uY2FsbChkb20sIGV2ZW50KTtcblx0XHR9XG5cdFx0aWYgKCFldmVudC5jYW5jZWxCdWJibGUpIHtcblx0XHRcdHJldHVybiB3aXRob3V0X3JlYWN0aXZlX2NvbnRleHQoKCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGV2ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8vIENocm9tZSBoYXMgYSBidWcgd2hlcmUgcG9pbnRlciBldmVudHMgZG9uJ3Qgd29yayB3aGVuIGF0dGFjaGVkIHRvIGEgRE9NIGVsZW1lbnQgdGhhdCBoYXMgYmVlbiBjbG9uZWRcblx0Ly8gd2l0aCBjbG9uZU5vZGUoKSBhbmQgdGhlIERPTSBlbGVtZW50IGlzIGRpc2Nvbm5lY3RlZCBmcm9tIHRoZSBkb2N1bWVudC4gVG8gZW5zdXJlIHRoZSBldmVudCB3b3Jrcywgd2Vcblx0Ly8gZGVmZXIgdGhlIGF0dGFjaG1lbnQgdGlsbCBhZnRlciBpdCdzIGJlZW4gYXBwZW5kZWQgdG8gdGhlIGRvY3VtZW50LiBUT0RPOiByZW1vdmUgdGhpcyBvbmNlIENocm9tZSBmaXhlc1xuXHQvLyB0aGlzIGJ1Zy4gVGhlIHNhbWUgYXBwbGllcyB0byB3aGVlbCBldmVudHMgYW5kIHRvdWNoIGV2ZW50cy5cblx0aWYgKFxuXHRcdGV2ZW50X25hbWUuc3RhcnRzV2l0aCgncG9pbnRlcicpIHx8XG5cdFx0ZXZlbnRfbmFtZS5zdGFydHNXaXRoKCd0b3VjaCcpIHx8XG5cdFx0ZXZlbnRfbmFtZSA9PT0gJ3doZWVsJ1xuXHQpIHtcblx0XHRxdWV1ZV9taWNyb190YXNrKCgpID0+IHtcblx0XHRcdGRvbS5hZGRFdmVudExpc3RlbmVyKGV2ZW50X25hbWUsIHRhcmdldF9oYW5kbGVyLCBvcHRpb25zKTtcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHRkb20uYWRkRXZlbnRMaXN0ZW5lcihldmVudF9uYW1lLCB0YXJnZXRfaGFuZGxlciwgb3B0aW9ucyk7XG5cdH1cblxuXHRyZXR1cm4gdGFyZ2V0X2hhbmRsZXI7XG59XG5cbi8qKlxuICogQXR0YWNoZXMgYW4gZXZlbnQgaGFuZGxlciB0byBhbiBlbGVtZW50IGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZW1vdmVzIHRoZSBoYW5kbGVyLiBVc2luZyB0aGlzXG4gKiByYXRoZXIgdGhhbiBgYWRkRXZlbnRMaXN0ZW5lcmAgd2lsbCBwcmVzZXJ2ZSB0aGUgY29ycmVjdCBvcmRlciByZWxhdGl2ZSB0byBoYW5kbGVycyBhZGRlZCBkZWNsYXJhdGl2ZWx5XG4gKiAod2l0aCBhdHRyaWJ1dGVzIGxpa2UgYG9uY2xpY2tgKSwgd2hpY2ggdXNlIGV2ZW50IGRlbGVnYXRpb24gZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnNcbiAqXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtFdmVudExpc3RlbmVyfSBoYW5kbGVyXG4gKiBAcGFyYW0ge0FkZEV2ZW50TGlzdGVuZXJPcHRpb25zfSBbb3B0aW9uc11cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9uKGVsZW1lbnQsIHR5cGUsIGhhbmRsZXIsIG9wdGlvbnMgPSB7fSkge1xuXHR2YXIgdGFyZ2V0X2hhbmRsZXIgPSBjcmVhdGVfZXZlbnQodHlwZSwgZWxlbWVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG5cblx0cmV0dXJuICgpID0+IHtcblx0XHRlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgdGFyZ2V0X2hhbmRsZXIsIG9wdGlvbnMpO1xuXHR9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudF9uYW1lXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGRvbVxuICogQHBhcmFtIHtFdmVudExpc3RlbmVyfSBoYW5kbGVyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGNhcHR1cmVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Bhc3NpdmVdXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV2ZW50KGV2ZW50X25hbWUsIGRvbSwgaGFuZGxlciwgY2FwdHVyZSwgcGFzc2l2ZSkge1xuXHR2YXIgb3B0aW9ucyA9IHsgY2FwdHVyZSwgcGFzc2l2ZSB9O1xuXHR2YXIgdGFyZ2V0X2hhbmRsZXIgPSBjcmVhdGVfZXZlbnQoZXZlbnRfbmFtZSwgZG9tLCBoYW5kbGVyLCBvcHRpb25zKTtcblxuXHQvLyBAdHMtaWdub3JlXG5cdGlmIChkb20gPT09IGRvY3VtZW50LmJvZHkgfHwgZG9tID09PSB3aW5kb3cgfHwgZG9tID09PSBkb2N1bWVudCkge1xuXHRcdHRlYXJkb3duKCgpID0+IHtcblx0XHRcdGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50X25hbWUsIHRhcmdldF9oYW5kbGVyLCBvcHRpb25zKTtcblx0XHR9KTtcblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gZXZlbnRzXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGVnYXRlKGV2ZW50cykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdGFsbF9yZWdpc3RlcmVkX2V2ZW50cy5hZGQoZXZlbnRzW2ldKTtcblx0fVxuXG5cdGZvciAodmFyIGZuIG9mIHJvb3RfZXZlbnRfaGFuZGxlcykge1xuXHRcdGZuKGV2ZW50cyk7XG5cdH1cbn1cblxuLyoqXG4gKiBAdGhpcyB7RXZlbnRUYXJnZXR9XG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVfZXZlbnRfcHJvcGFnYXRpb24oZXZlbnQpIHtcblx0dmFyIGhhbmRsZXJfZWxlbWVudCA9IHRoaXM7XG5cdHZhciBvd25lcl9kb2N1bWVudCA9IC8qKiBAdHlwZSB7Tm9kZX0gKi8gKGhhbmRsZXJfZWxlbWVudCkub3duZXJEb2N1bWVudDtcblx0dmFyIGV2ZW50X25hbWUgPSBldmVudC50eXBlO1xuXHR2YXIgcGF0aCA9IGV2ZW50LmNvbXBvc2VkUGF0aD8uKCkgfHwgW107XG5cdHZhciBjdXJyZW50X3RhcmdldCA9IC8qKiBAdHlwZSB7bnVsbCB8IEVsZW1lbnR9ICovIChwYXRoWzBdIHx8IGV2ZW50LnRhcmdldCk7XG5cblx0Ly8gY29tcG9zZWRQYXRoIGNvbnRhaW5zIGxpc3Qgb2Ygbm9kZXMgdGhlIGV2ZW50IGhhcyBwcm9wYWdhdGVkIHRocm91Z2guXG5cdC8vIFdlIGNoZWNrIF9fcm9vdCB0byBza2lwIGFsbCBub2RlcyBiZWxvdyBpdCBpbiBjYXNlIHRoaXMgaXMgYVxuXHQvLyBwYXJlbnQgb2YgdGhlIF9fcm9vdCBub2RlLCB3aGljaCBpbmRpY2F0ZXMgdGhhdCB0aGVyZSdzIG5lc3RlZFxuXHQvLyBtb3VudGVkIGFwcHMuIEluIHRoaXMgY2FzZSB3ZSBkb24ndCB3YW50IHRvIHRyaWdnZXIgZXZlbnRzIG11bHRpcGxlIHRpbWVzLlxuXHR2YXIgcGF0aF9pZHggPSAwO1xuXG5cdC8vIEB0cy1leHBlY3QtZXJyb3IgaXMgYWRkZWQgYmVsb3dcblx0dmFyIGhhbmRsZWRfYXQgPSBldmVudC5fX3Jvb3Q7XG5cblx0aWYgKGhhbmRsZWRfYXQpIHtcblx0XHR2YXIgYXRfaWR4ID0gcGF0aC5pbmRleE9mKGhhbmRsZWRfYXQpO1xuXHRcdGlmIChcblx0XHRcdGF0X2lkeCAhPT0gLTEgJiZcblx0XHRcdChoYW5kbGVyX2VsZW1lbnQgPT09IGRvY3VtZW50IHx8IGhhbmRsZXJfZWxlbWVudCA9PT0gLyoqIEB0eXBlIHthbnl9ICovICh3aW5kb3cpKVxuXHRcdCkge1xuXHRcdFx0Ly8gVGhpcyBpcyB0aGUgZmFsbGJhY2sgZG9jdW1lbnQgbGlzdGVuZXIgb3IgYSB3aW5kb3cgbGlzdGVuZXIsIGJ1dCB0aGUgZXZlbnQgd2FzIGFscmVhZHkgaGFuZGxlZFxuXHRcdFx0Ly8gLT4gaWdub3JlLCBidXQgc2V0IGhhbmRsZV9hdCB0byBkb2N1bWVudC93aW5kb3cgc28gdGhhdCB3ZSdyZSByZXNldHRpbmcgdGhlIGV2ZW50XG5cdFx0XHQvLyBjaGFpbiBpbiBjYXNlIHNvbWVvbmUgbWFudWFsbHkgZGlzcGF0Y2hlcyB0aGUgc2FtZSBldmVudCBvYmplY3QgYWdhaW4uXG5cdFx0XHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdFx0XHRldmVudC5fX3Jvb3QgPSBoYW5kbGVyX2VsZW1lbnQ7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gV2UncmUgZGVsaWJlcmF0ZWx5IG5vdCBza2lwcGluZyBpZiB0aGUgaW5kZXggaXMgaGlnaGVyLCBiZWNhdXNlXG5cdFx0Ly8gc29tZW9uZSBjb3VsZCBjcmVhdGUgYW4gZXZlbnQgcHJvZ3JhbW1hdGljYWxseSBhbmQgZW1pdCBpdCBtdWx0aXBsZSB0aW1lcyxcblx0XHQvLyBpbiB3aGljaCBjYXNlIHdlIHdhbnQgdG8gaGFuZGxlIHRoZSB3aG9sZSBwcm9wYWdhdGlvbiBjaGFpbiBwcm9wZXJseSBlYWNoIHRpbWUuXG5cdFx0Ly8gKHRoaXMgd2lsbCBvbmx5IGJlIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlIGV2ZW50IGlzIGRpc3BhdGNoZWQgbXVsdGlwbGUgdGltZXMgYW5kXG5cdFx0Ly8gdGhlIGZhbGxiYWNrIGRvY3VtZW50IGxpc3RlbmVyIGlzbid0IHJlYWNoZWQgaW4gYmV0d2VlbiwgYnV0IHRoYXQncyBzdXBlciByYXJlKVxuXHRcdHZhciBoYW5kbGVyX2lkeCA9IHBhdGguaW5kZXhPZihoYW5kbGVyX2VsZW1lbnQpO1xuXHRcdGlmIChoYW5kbGVyX2lkeCA9PT0gLTEpIHtcblx0XHRcdC8vIGhhbmRsZV9pZHggY2FuIHRoZW9yZXRpY2FsbHkgYmUgLTEgKGhhcHBlbmVkIGluIHNvbWUgSlNET00gdGVzdGluZyBzY2VuYXJpb3Mgd2l0aCBhbiBldmVudCBsaXN0ZW5lciBvbiB0aGUgd2luZG93IG9iamVjdClcblx0XHRcdC8vIHNvIGd1YXJkIGFnYWluc3QgdGhhdCwgdG9vLCBhbmQgYXNzdW1lIHRoYXQgZXZlcnl0aGluZyB3YXMgaGFuZGxlZCBhdCB0aGlzIHBvaW50LlxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChhdF9pZHggPD0gaGFuZGxlcl9pZHgpIHtcblx0XHRcdHBhdGhfaWR4ID0gYXRfaWR4O1xuXHRcdH1cblx0fVxuXG5cdGN1cnJlbnRfdGFyZ2V0ID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAocGF0aFtwYXRoX2lkeF0gfHwgZXZlbnQudGFyZ2V0KTtcblx0Ly8gdGhlcmUgY2FuIG9ubHkgYmUgb25lIGRlbGVnYXRlZCBldmVudCBwZXIgZWxlbWVudCwgYW5kIHdlIGVpdGhlciBhbHJlYWR5IGhhbmRsZWQgdGhlIGN1cnJlbnQgdGFyZ2V0LFxuXHQvLyBvciB0aGlzIGlzIHRoZSB2ZXJ5IGZpcnN0IHRhcmdldCBpbiB0aGUgY2hhaW4gd2hpY2ggaGFzIGEgbm9uLWRlbGVnYXRlZCBsaXN0ZW5lciwgaW4gd2hpY2ggY2FzZSBpdCdzIHNhZmVcblx0Ly8gdG8gaGFuZGxlIGEgcG9zc2libGUgZGVsZWdhdGVkIGV2ZW50IG9uIGl0IGxhdGVyICh0aHJvdWdoIHRoZSByb290IGRlbGVnYXRpb24gbGlzdGVuZXIgZm9yIGV4YW1wbGUpLlxuXHRpZiAoY3VycmVudF90YXJnZXQgPT09IGhhbmRsZXJfZWxlbWVudCkgcmV0dXJuO1xuXG5cdC8vIFByb3h5IGN1cnJlbnRUYXJnZXQgdG8gY29ycmVjdCB0YXJnZXRcblx0ZGVmaW5lX3Byb3BlcnR5KGV2ZW50LCAnY3VycmVudFRhcmdldCcsIHtcblx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0Z2V0KCkge1xuXHRcdFx0cmV0dXJuIGN1cnJlbnRfdGFyZ2V0IHx8IG93bmVyX2RvY3VtZW50O1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gVGhpcyBzdGFydGVkIGJlY2F1c2Ugb2YgQ2hyb21pdW0gaXNzdWUgaHR0cHM6Ly9jaHJvbWVzdGF0dXMuY29tL2ZlYXR1cmUvNTEyODY5NjgyMzU0NTg1Nixcblx0Ly8gd2hlcmUgcmVtb3ZhbCBvciBtb3Zpbmcgb2Ygb2YgdGhlIERPTSBjYW4gY2F1c2Ugc3luYyBgYmx1cmAgZXZlbnRzIHRvIGZpcmUsIHdoaWNoIGNhbiBjYXVzZSBsb2dpY1xuXHQvLyB0byBydW4gaW5zaWRlIHRoZSBjdXJyZW50IGBhY3RpdmVfcmVhY3Rpb25gLCB3aGljaCBpc24ndCB3aGF0IHdlIHdhbnQgYXQgYWxsLiBIb3dldmVyLCBvbiByZWZsZWN0aW9uLFxuXHQvLyBpdCdzIHByb2JhYmx5IGJlc3QgdGhhdCBhbGwgZXZlbnQgaGFuZGxlZCBieSBTdmVsdGUgaGF2ZSB0aGlzIGJlaGF2aW91ciwgYXMgd2UgZG9uJ3QgcmVhbGx5IHdhbnRcblx0Ly8gYW4gZXZlbnQgaGFuZGxlciB0byBydW4gaW4gdGhlIGNvbnRleHQgb2YgYW5vdGhlciByZWFjdGlvbiBvciBlZmZlY3QuXG5cdHZhciBwcmV2aW91c19yZWFjdGlvbiA9IGFjdGl2ZV9yZWFjdGlvbjtcblx0dmFyIHByZXZpb3VzX2VmZmVjdCA9IGFjdGl2ZV9lZmZlY3Q7XG5cdHNldF9hY3RpdmVfcmVhY3Rpb24obnVsbCk7XG5cdHNldF9hY3RpdmVfZWZmZWN0KG51bGwpO1xuXG5cdHRyeSB7XG5cdFx0LyoqXG5cdFx0ICogQHR5cGUge3Vua25vd259XG5cdFx0ICovXG5cdFx0dmFyIHRocm93X2Vycm9yO1xuXHRcdC8qKlxuXHRcdCAqIEB0eXBlIHt1bmtub3duW119XG5cdFx0ICovXG5cdFx0dmFyIG90aGVyX2Vycm9ycyA9IFtdO1xuXG5cdFx0d2hpbGUgKGN1cnJlbnRfdGFyZ2V0ICE9PSBudWxsKSB7XG5cdFx0XHQvKiogQHR5cGUge251bGwgfCBFbGVtZW50fSAqL1xuXHRcdFx0dmFyIHBhcmVudF9lbGVtZW50ID1cblx0XHRcdFx0Y3VycmVudF90YXJnZXQuYXNzaWduZWRTbG90IHx8XG5cdFx0XHRcdGN1cnJlbnRfdGFyZ2V0LnBhcmVudE5vZGUgfHxcblx0XHRcdFx0LyoqIEB0eXBlIHthbnl9ICovIChjdXJyZW50X3RhcmdldCkuaG9zdCB8fFxuXHRcdFx0XHRudWxsO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdFx0XHRcdHZhciBkZWxlZ2F0ZWQgPSBjdXJyZW50X3RhcmdldFsnX18nICsgZXZlbnRfbmFtZV07XG5cblx0XHRcdFx0aWYgKGRlbGVnYXRlZCAhPT0gdW5kZWZpbmVkICYmICEoLyoqIEB0eXBlIHthbnl9ICovIChjdXJyZW50X3RhcmdldCkuZGlzYWJsZWQpKSB7XG5cdFx0XHRcdFx0aWYgKGlzX2FycmF5KGRlbGVnYXRlZCkpIHtcblx0XHRcdFx0XHRcdHZhciBbZm4sIC4uLmRhdGFdID0gZGVsZWdhdGVkO1xuXHRcdFx0XHRcdFx0Zm4uYXBwbHkoY3VycmVudF90YXJnZXQsIFtldmVudCwgLi4uZGF0YV0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRkZWxlZ2F0ZWQuY2FsbChjdXJyZW50X3RhcmdldCwgZXZlbnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0aWYgKHRocm93X2Vycm9yKSB7XG5cdFx0XHRcdFx0b3RoZXJfZXJyb3JzLnB1c2goZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRocm93X2Vycm9yID0gZXJyb3I7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChldmVudC5jYW5jZWxCdWJibGUgfHwgcGFyZW50X2VsZW1lbnQgPT09IGhhbmRsZXJfZWxlbWVudCB8fCBwYXJlbnRfZWxlbWVudCA9PT0gbnVsbCkge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGN1cnJlbnRfdGFyZ2V0ID0gcGFyZW50X2VsZW1lbnQ7XG5cdFx0fVxuXG5cdFx0aWYgKHRocm93X2Vycm9yKSB7XG5cdFx0XHRmb3IgKGxldCBlcnJvciBvZiBvdGhlcl9lcnJvcnMpIHtcblx0XHRcdFx0Ly8gVGhyb3cgdGhlIHJlc3Qgb2YgdGhlIGVycm9ycywgb25lLWJ5LW9uZSBvbiBhIG1pY3JvdGFza1xuXHRcdFx0XHRxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG5cdFx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgdGhyb3dfZXJyb3I7XG5cdFx0fVxuXHR9IGZpbmFsbHkge1xuXHRcdC8vIEB0cy1leHBlY3QtZXJyb3IgaXMgdXNlZCBhYm92ZVxuXHRcdGV2ZW50Ll9fcm9vdCA9IGhhbmRsZXJfZWxlbWVudDtcblx0XHQvLyBAdHMtaWdub3JlIHJlbW92ZSBwcm94eSBvbiBjdXJyZW50VGFyZ2V0XG5cdFx0ZGVsZXRlIGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG5cdFx0c2V0X2FjdGl2ZV9yZWFjdGlvbihwcmV2aW91c19yZWFjdGlvbik7XG5cdFx0c2V0X2FjdGl2ZV9lZmZlY3QocHJldmlvdXNfZWZmZWN0KTtcblx0fVxufVxuXG4vKipcbiAqIEluIGRldiwgd2FybiBpZiBhbiBldmVudCBoYW5kbGVyIGlzIG5vdCBhIGZ1bmN0aW9uLCBhcyBpdCBtZWFucyB0aGVcbiAqIHVzZXIgcHJvYmFibHkgY2FsbGVkIHRoZSBoYW5kbGVyIG9yIGZvcmdvdCB0byBhZGQgYSBgKCkgPT5gXG4gKiBAcGFyYW0geygpID0+IChldmVudDogRXZlbnQsIC4uLmFyZ3M6IGFueSkgPT4gdm9pZH0gdGh1bmtcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7W0V2ZW50LCAuLi5hbnldfSBhcmdzXG4gKiBAcGFyYW0ge2FueX0gY29tcG9uZW50XG4gKiBAcGFyYW0ge1tudW1iZXIsIG51bWJlcl19IFtsb2NdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtyZW1vdmVfcGFyZW5zXVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHkoXG5cdHRodW5rLFxuXHRlbGVtZW50LFxuXHRhcmdzLFxuXHRjb21wb25lbnQsXG5cdGxvYyxcblx0aGFzX3NpZGVfZWZmZWN0cyA9IGZhbHNlLFxuXHRyZW1vdmVfcGFyZW5zID0gZmFsc2Vcbikge1xuXHRsZXQgaGFuZGxlcjtcblx0bGV0IGVycm9yO1xuXG5cdHRyeSB7XG5cdFx0aGFuZGxlciA9IHRodW5rKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRlcnJvciA9IGU7XG5cdH1cblxuXHRpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcblx0XHRoYW5kbGVyLmFwcGx5KGVsZW1lbnQsIGFyZ3MpO1xuXHR9IGVsc2UgaWYgKGhhc19zaWRlX2VmZmVjdHMgfHwgaGFuZGxlciAhPSBudWxsIHx8IGVycm9yKSB7XG5cdFx0Y29uc3QgZmlsZW5hbWUgPSBjb21wb25lbnQ/LltGSUxFTkFNRV07XG5cdFx0Y29uc3QgbG9jYXRpb24gPSBsb2MgPyBgIGF0ICR7ZmlsZW5hbWV9OiR7bG9jWzBdfToke2xvY1sxXX1gIDogYCBpbiAke2ZpbGVuYW1lfWA7XG5cblx0XHRjb25zdCBldmVudF9uYW1lID0gYXJnc1swXS50eXBlO1xuXHRcdGNvbnN0IGRlc2NyaXB0aW9uID0gYFxcYCR7ZXZlbnRfbmFtZX1cXGAgaGFuZGxlciR7bG9jYXRpb259YDtcblx0XHRjb25zdCBzdWdnZXN0aW9uID0gcmVtb3ZlX3BhcmVucyA/ICdyZW1vdmUgdGhlIHRyYWlsaW5nIGAoKWAnIDogJ2FkZCBhIGxlYWRpbmcgYCgpID0+YCc7XG5cblx0XHR3LmV2ZW50X2hhbmRsZXJfaW52YWxpZChkZXNjcmlwdGlvbiwgc3VnZ2VzdGlvbik7XG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0fVxufVxuIiwgIi8qKiBAaW1wb3J0IHsgVGVtcGxhdGVOb2RlIH0gZnJvbSAnI2NsaWVudCcgKi9cbmltcG9ydCB7IGh5ZHJhdGVfbm9kZSwgaHlkcmF0aW5nLCBzZXRfaHlkcmF0ZV9ub2RlLCBzZXRfaHlkcmF0aW5nIH0gZnJvbSAnLi4vaHlkcmF0aW9uLmpzJztcbmltcG9ydCB7IGNyZWF0ZV90ZXh0LCBnZXRfZmlyc3RfY2hpbGQsIGdldF9uZXh0X3NpYmxpbmcgfSBmcm9tICcuLi9vcGVyYXRpb25zLmpzJztcbmltcG9ydCB7IGJsb2NrIH0gZnJvbSAnLi4vLi4vcmVhY3Rpdml0eS9lZmZlY3RzLmpzJztcbmltcG9ydCB7IEhFQURfRUZGRUNUIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IEhZRFJBVElPTl9TVEFSVCB9IGZyb20gJy4uLy4uLy4uLy4uL2NvbnN0YW50cy5qcyc7XG5cbi8qKlxuICogQHR5cGUge05vZGUgfCB1bmRlZmluZWR9XG4gKi9cbmxldCBoZWFkX2FuY2hvcjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0X2hlYWRfYW5jaG9yKCkge1xuXHRoZWFkX2FuY2hvciA9IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyhhbmNob3I6IE5vZGUpID0+IHZvaWR9IHJlbmRlcl9mblxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoZWFkKHJlbmRlcl9mbikge1xuXHQvLyBUaGUgaGVhZCBmdW5jdGlvbiBtYXkgYmUgY2FsbGVkIGFmdGVyIHRoZSBmaXJzdCBoeWRyYXRpb24gcGFzcyBhbmQgc3NyIGNvbW1lbnQgbm9kZXMgbWF5IHN0aWxsIGJlIHByZXNlbnQsXG5cdC8vIHRoZXJlZm9yZSB3ZSBuZWVkIHRvIHNraXAgdGhhdCB3aGVuIHdlIGRldGVjdCB0aGF0IHdlJ3JlIG5vdCBpbiBoeWRyYXRpb24gbW9kZS5cblx0bGV0IHByZXZpb3VzX2h5ZHJhdGVfbm9kZSA9IG51bGw7XG5cdGxldCB3YXNfaHlkcmF0aW5nID0gaHlkcmF0aW5nO1xuXG5cdC8qKiBAdHlwZSB7Q29tbWVudCB8IFRleHR9ICovXG5cdHZhciBhbmNob3I7XG5cblx0aWYgKGh5ZHJhdGluZykge1xuXHRcdHByZXZpb3VzX2h5ZHJhdGVfbm9kZSA9IGh5ZHJhdGVfbm9kZTtcblxuXHRcdC8vIFRoZXJlIG1pZ2h0IGJlIG11bHRpcGxlIGhlYWQgYmxvY2tzIGluIG91ciBhcHAsIHNvIHdlIG5lZWQgdG8gYWNjb3VudCBmb3IgZWFjaCBvbmUgbmVlZGluZyBpbmRlcGVuZGVudCBoeWRyYXRpb24uXG5cdFx0aWYgKGhlYWRfYW5jaG9yID09PSB1bmRlZmluZWQpIHtcblx0XHRcdGhlYWRfYW5jaG9yID0gLyoqIEB0eXBlIHtUZW1wbGF0ZU5vZGV9ICovIChnZXRfZmlyc3RfY2hpbGQoZG9jdW1lbnQuaGVhZCkpO1xuXHRcdH1cblxuXHRcdHdoaWxlIChcblx0XHRcdGhlYWRfYW5jaG9yICE9PSBudWxsICYmXG5cdFx0XHQoaGVhZF9hbmNob3Iubm9kZVR5cGUgIT09IDggfHwgLyoqIEB0eXBlIHtDb21tZW50fSAqLyAoaGVhZF9hbmNob3IpLmRhdGEgIT09IEhZRFJBVElPTl9TVEFSVClcblx0XHQpIHtcblx0XHRcdGhlYWRfYW5jaG9yID0gLyoqIEB0eXBlIHtUZW1wbGF0ZU5vZGV9ICovIChnZXRfbmV4dF9zaWJsaW5nKGhlYWRfYW5jaG9yKSk7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgd2UgY2FuJ3QgZmluZCBhbiBvcGVuaW5nIGh5ZHJhdGlvbiBtYXJrZXIsIHNraXAgaHlkcmF0aW9uICh0aGlzIGNhbiBoYXBwZW5cblx0XHQvLyBpZiBhIGZyYW1ld29yayByZW5kZXJlZCBib2R5IGJ1dCBub3QgaGVhZCBjb250ZW50KVxuXHRcdGlmIChoZWFkX2FuY2hvciA9PT0gbnVsbCkge1xuXHRcdFx0c2V0X2h5ZHJhdGluZyhmYWxzZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGhlYWRfYW5jaG9yID0gc2V0X2h5ZHJhdGVfbm9kZSgvKiogQHR5cGUge1RlbXBsYXRlTm9kZX0gKi8gKGdldF9uZXh0X3NpYmxpbmcoaGVhZF9hbmNob3IpKSk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCFoeWRyYXRpbmcpIHtcblx0XHRhbmNob3IgPSBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGNyZWF0ZV90ZXh0KCkpO1xuXHR9XG5cblx0dHJ5IHtcblx0XHRibG9jaygoKSA9PiByZW5kZXJfZm4oYW5jaG9yKSwgSEVBRF9FRkZFQ1QpO1xuXHR9IGZpbmFsbHkge1xuXHRcdGlmICh3YXNfaHlkcmF0aW5nKSB7XG5cdFx0XHRzZXRfaHlkcmF0aW5nKHRydWUpO1xuXHRcdFx0aGVhZF9hbmNob3IgPSBoeWRyYXRlX25vZGU7IC8vIHNvIHRoYXQgbmV4dCBoZWFkIGJsb2NrIHN0YXJ0cyBmcm9tIHRoZSBjb3JyZWN0IG5vZGVcblx0XHRcdHNldF9oeWRyYXRlX25vZGUoLyoqIEB0eXBlIHtUZW1wbGF0ZU5vZGV9ICovIChwcmV2aW91c19oeWRyYXRlX25vZGUpKTtcblx0XHR9XG5cdH1cbn1cbiIsICIvKiogQHBhcmFtIHtzdHJpbmd9IGh0bWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVfZnJhZ21lbnRfZnJvbV9odG1sKGh0bWwpIHtcblx0dmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuXHRlbGVtLmlubmVySFRNTCA9IGh0bWw7XG5cdHJldHVybiBlbGVtLmNvbnRlbnQ7XG59XG4iLCAiLyoqIEBpbXBvcnQgeyBFZmZlY3QsIFRlbXBsYXRlTm9kZSB9IGZyb20gJyNjbGllbnQnICovXG5pbXBvcnQgeyBoeWRyYXRlX25leHQsIGh5ZHJhdGVfbm9kZSwgaHlkcmF0aW5nLCBzZXRfaHlkcmF0ZV9ub2RlIH0gZnJvbSAnLi9oeWRyYXRpb24uanMnO1xuaW1wb3J0IHsgY3JlYXRlX3RleHQsIGdldF9maXJzdF9jaGlsZCB9IGZyb20gJy4vb3BlcmF0aW9ucy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVfZnJhZ21lbnRfZnJvbV9odG1sIH0gZnJvbSAnLi9yZWNvbmNpbGVyLmpzJztcbmltcG9ydCB7IGFjdGl2ZV9lZmZlY3QgfSBmcm9tICcuLi9ydW50aW1lLmpzJztcbmltcG9ydCB7IFRFTVBMQVRFX0ZSQUdNRU5ULCBURU1QTEFURV9VU0VfSU1QT1JUX05PREUgfSBmcm9tICcuLi8uLi8uLi9jb25zdGFudHMuanMnO1xuXG4vKipcbiAqIEBwYXJhbSB7VGVtcGxhdGVOb2RlfSBzdGFydFxuICogQHBhcmFtIHtUZW1wbGF0ZU5vZGUgfCBudWxsfSBlbmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbl9ub2RlcyhzdGFydCwgZW5kKSB7XG5cdHZhciBlZmZlY3QgPSAvKiogQHR5cGUge0VmZmVjdH0gKi8gKGFjdGl2ZV9lZmZlY3QpO1xuXHRpZiAoZWZmZWN0Lm5vZGVzX3N0YXJ0ID09PSBudWxsKSB7XG5cdFx0ZWZmZWN0Lm5vZGVzX3N0YXJ0ID0gc3RhcnQ7XG5cdFx0ZWZmZWN0Lm5vZGVzX2VuZCA9IGVuZDtcblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50XG4gKiBAcGFyYW0ge251bWJlcn0gZmxhZ3NcbiAqIEByZXR1cm5zIHsoKSA9PiBOb2RlIHwgTm9kZVtdfVxuICovXG4vKiNfX05PX1NJREVfRUZGRUNUU19fKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZShjb250ZW50LCBmbGFncykge1xuXHR2YXIgaXNfZnJhZ21lbnQgPSAoZmxhZ3MgJiBURU1QTEFURV9GUkFHTUVOVCkgIT09IDA7XG5cdHZhciB1c2VfaW1wb3J0X25vZGUgPSAoZmxhZ3MgJiBURU1QTEFURV9VU0VfSU1QT1JUX05PREUpICE9PSAwO1xuXG5cdC8qKiBAdHlwZSB7Tm9kZX0gKi9cblx0dmFyIG5vZGU7XG5cblx0LyoqXG5cdCAqIFdoZXRoZXIgb3Igbm90IHRoZSBmaXJzdCBpdGVtIGlzIGEgdGV4dC9lbGVtZW50IG5vZGUuIElmIG5vdCwgd2UgbmVlZCB0b1xuXHQgKiBjcmVhdGUgYW4gYWRkaXRpb25hbCBjb21tZW50IG5vZGUgdG8gYWN0IGFzIGBlZmZlY3Qubm9kZXMuc3RhcnRgXG5cdCAqL1xuXHR2YXIgaGFzX3N0YXJ0ID0gIWNvbnRlbnQuc3RhcnRzV2l0aCgnPCE+Jyk7XG5cblx0cmV0dXJuICgpID0+IHtcblx0XHRpZiAoaHlkcmF0aW5nKSB7XG5cdFx0XHRhc3NpZ25fbm9kZXMoaHlkcmF0ZV9ub2RlLCBudWxsKTtcblx0XHRcdHJldHVybiBoeWRyYXRlX25vZGU7XG5cdFx0fVxuXG5cdFx0aWYgKG5vZGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0bm9kZSA9IGNyZWF0ZV9mcmFnbWVudF9mcm9tX2h0bWwoaGFzX3N0YXJ0ID8gY29udGVudCA6ICc8IT4nICsgY29udGVudCk7XG5cdFx0XHRpZiAoIWlzX2ZyYWdtZW50KSBub2RlID0gLyoqIEB0eXBlIHtOb2RlfSAqLyAoZ2V0X2ZpcnN0X2NoaWxkKG5vZGUpKTtcblx0XHR9XG5cblx0XHR2YXIgY2xvbmUgPSAvKiogQHR5cGUge1RlbXBsYXRlTm9kZX0gKi8gKFxuXHRcdFx0dXNlX2ltcG9ydF9ub2RlID8gZG9jdW1lbnQuaW1wb3J0Tm9kZShub2RlLCB0cnVlKSA6IG5vZGUuY2xvbmVOb2RlKHRydWUpXG5cdFx0KTtcblxuXHRcdGlmIChpc19mcmFnbWVudCkge1xuXHRcdFx0dmFyIHN0YXJ0ID0gLyoqIEB0eXBlIHtUZW1wbGF0ZU5vZGV9ICovIChnZXRfZmlyc3RfY2hpbGQoY2xvbmUpKTtcblx0XHRcdHZhciBlbmQgPSAvKiogQHR5cGUge1RlbXBsYXRlTm9kZX0gKi8gKGNsb25lLmxhc3RDaGlsZCk7XG5cblx0XHRcdGFzc2lnbl9ub2RlcyhzdGFydCwgZW5kKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXNzaWduX25vZGVzKGNsb25lLCBjbG9uZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsb25lO1xuXHR9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50XG4gKiBAcGFyYW0ge251bWJlcn0gZmxhZ3NcbiAqIEByZXR1cm5zIHsoKSA9PiBOb2RlIHwgTm9kZVtdfVxuICovXG4vKiNfX05PX1NJREVfRUZGRUNUU19fKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZV93aXRoX3NjcmlwdChjb250ZW50LCBmbGFncykge1xuXHR2YXIgZm4gPSB0ZW1wbGF0ZShjb250ZW50LCBmbGFncyk7XG5cdHJldHVybiAoKSA9PiBydW5fc2NyaXB0cygvKiogQHR5cGUge0VsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50fSAqLyAoZm4oKSkpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50XG4gKiBAcGFyYW0ge251bWJlcn0gZmxhZ3NcbiAqIEBwYXJhbSB7J3N2ZycgfCAnbWF0aCd9IG5zXG4gKiBAcmV0dXJucyB7KCkgPT4gTm9kZSB8IE5vZGVbXX1cbiAqL1xuLyojX19OT19TSURFX0VGRkVDVFNfXyovXG5leHBvcnQgZnVuY3Rpb24gbnNfdGVtcGxhdGUoY29udGVudCwgZmxhZ3MsIG5zID0gJ3N2ZycpIHtcblx0LyoqXG5cdCAqIFdoZXRoZXIgb3Igbm90IHRoZSBmaXJzdCBpdGVtIGlzIGEgdGV4dC9lbGVtZW50IG5vZGUuIElmIG5vdCwgd2UgbmVlZCB0b1xuXHQgKiBjcmVhdGUgYW4gYWRkaXRpb25hbCBjb21tZW50IG5vZGUgdG8gYWN0IGFzIGBlZmZlY3Qubm9kZXMuc3RhcnRgXG5cdCAqL1xuXHR2YXIgaGFzX3N0YXJ0ID0gIWNvbnRlbnQuc3RhcnRzV2l0aCgnPCE+Jyk7XG5cblx0dmFyIGlzX2ZyYWdtZW50ID0gKGZsYWdzICYgVEVNUExBVEVfRlJBR01FTlQpICE9PSAwO1xuXHR2YXIgd3JhcHBlZCA9IGA8JHtuc30+JHtoYXNfc3RhcnQgPyBjb250ZW50IDogJzwhPicgKyBjb250ZW50fTwvJHtuc30+YDtcblxuXHQvKiogQHR5cGUge0VsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50fSAqL1xuXHR2YXIgbm9kZTtcblxuXHRyZXR1cm4gKCkgPT4ge1xuXHRcdGlmIChoeWRyYXRpbmcpIHtcblx0XHRcdGFzc2lnbl9ub2RlcyhoeWRyYXRlX25vZGUsIG51bGwpO1xuXHRcdFx0cmV0dXJuIGh5ZHJhdGVfbm9kZTtcblx0XHR9XG5cblx0XHRpZiAoIW5vZGUpIHtcblx0XHRcdHZhciBmcmFnbWVudCA9IC8qKiBAdHlwZSB7RG9jdW1lbnRGcmFnbWVudH0gKi8gKGNyZWF0ZV9mcmFnbWVudF9mcm9tX2h0bWwod3JhcHBlZCkpO1xuXHRcdFx0dmFyIHJvb3QgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChnZXRfZmlyc3RfY2hpbGQoZnJhZ21lbnQpKTtcblxuXHRcdFx0aWYgKGlzX2ZyYWdtZW50KSB7XG5cdFx0XHRcdG5vZGUgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdFx0XHRcdHdoaWxlIChnZXRfZmlyc3RfY2hpbGQocm9vdCkpIHtcblx0XHRcdFx0XHRub2RlLmFwcGVuZENoaWxkKC8qKiBAdHlwZSB7Tm9kZX0gKi8gKGdldF9maXJzdF9jaGlsZChyb290KSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRub2RlID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAoZ2V0X2ZpcnN0X2NoaWxkKHJvb3QpKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2YXIgY2xvbmUgPSAvKiogQHR5cGUge1RlbXBsYXRlTm9kZX0gKi8gKG5vZGUuY2xvbmVOb2RlKHRydWUpKTtcblxuXHRcdGlmIChpc19mcmFnbWVudCkge1xuXHRcdFx0dmFyIHN0YXJ0ID0gLyoqIEB0eXBlIHtUZW1wbGF0ZU5vZGV9ICovIChnZXRfZmlyc3RfY2hpbGQoY2xvbmUpKTtcblx0XHRcdHZhciBlbmQgPSAvKiogQHR5cGUge1RlbXBsYXRlTm9kZX0gKi8gKGNsb25lLmxhc3RDaGlsZCk7XG5cblx0XHRcdGFzc2lnbl9ub2RlcyhzdGFydCwgZW5kKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXNzaWduX25vZGVzKGNsb25lLCBjbG9uZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsb25lO1xuXHR9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50XG4gKiBAcGFyYW0ge251bWJlcn0gZmxhZ3NcbiAqIEByZXR1cm5zIHsoKSA9PiBOb2RlIHwgTm9kZVtdfVxuICovXG4vKiNfX05PX1NJREVfRUZGRUNUU19fKi9cbmV4cG9ydCBmdW5jdGlvbiBzdmdfdGVtcGxhdGVfd2l0aF9zY3JpcHQoY29udGVudCwgZmxhZ3MpIHtcblx0dmFyIGZuID0gbnNfdGVtcGxhdGUoY29udGVudCwgZmxhZ3MpO1xuXHRyZXR1cm4gKCkgPT4gcnVuX3NjcmlwdHMoLyoqIEB0eXBlIHtFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudH0gKi8gKGZuKCkpKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudFxuICogQHBhcmFtIHtudW1iZXJ9IGZsYWdzXG4gKiBAcmV0dXJucyB7KCkgPT4gTm9kZSB8IE5vZGVbXX1cbiAqL1xuLyojX19OT19TSURFX0VGRkVDVFNfXyovXG5leHBvcnQgZnVuY3Rpb24gbWF0aG1sX3RlbXBsYXRlKGNvbnRlbnQsIGZsYWdzKSB7XG5cdHJldHVybiBuc190ZW1wbGF0ZShjb250ZW50LCBmbGFncywgJ21hdGgnKTtcbn1cblxuLyoqXG4gKiBDcmVhdGluZyBhIGRvY3VtZW50IGZyYWdtZW50IGZyb20gSFRNTCB0aGF0IGNvbnRhaW5zIHNjcmlwdCB0YWdzIHdpbGwgbm90IGV4ZWN1dGVcbiAqIHRoZSBzY3JpcHRzLiBXZSBuZWVkIHRvIHJlcGxhY2UgdGhlIHNjcmlwdCB0YWdzIHdpdGggbmV3IG9uZXMgc28gdGhhdCB0aGV5IGFyZSBleGVjdXRlZC5cbiAqIEBwYXJhbSB7RWxlbWVudCB8IERvY3VtZW50RnJhZ21lbnR9IG5vZGVcbiAqIEByZXR1cm5zIHtOb2RlIHwgTm9kZVtdfVxuICovXG5mdW5jdGlvbiBydW5fc2NyaXB0cyhub2RlKSB7XG5cdC8vIHNjcmlwdHMgd2VyZSBTU1InZCwgaW4gd2hpY2ggY2FzZSB0aGV5IHdpbGwgcnVuXG5cdGlmIChoeWRyYXRpbmcpIHJldHVybiBub2RlO1xuXG5cdGNvbnN0IGlzX2ZyYWdtZW50ID0gbm9kZS5ub2RlVHlwZSA9PT0gMTE7XG5cdGNvbnN0IHNjcmlwdHMgPVxuXHRcdC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR9ICovIChub2RlKS50YWdOYW1lID09PSAnU0NSSVBUJ1xuXHRcdFx0PyBbLyoqIEB0eXBlIHtIVE1MU2NyaXB0RWxlbWVudH0gKi8gKG5vZGUpXVxuXHRcdFx0OiBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpO1xuXHRjb25zdCBlZmZlY3QgPSAvKiogQHR5cGUge0VmZmVjdH0gKi8gKGFjdGl2ZV9lZmZlY3QpO1xuXG5cdGZvciAoY29uc3Qgc2NyaXB0IG9mIHNjcmlwdHMpIHtcblx0XHRjb25zdCBjbG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXHRcdGZvciAodmFyIGF0dHJpYnV0ZSBvZiBzY3JpcHQuYXR0cmlidXRlcykge1xuXHRcdFx0Y2xvbmUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZS5uYW1lLCBhdHRyaWJ1dGUudmFsdWUpO1xuXHRcdH1cblxuXHRcdGNsb25lLnRleHRDb250ZW50ID0gc2NyaXB0LnRleHRDb250ZW50O1xuXG5cdFx0Ly8gVGhlIHNjcmlwdCBoYXMgY2hhbmdlZCAtIGlmIGl0J3MgYXQgdGhlIGVkZ2VzLCB0aGUgZWZmZWN0IG5vdyBwb2ludHMgYXQgZGVhZCBub2Rlc1xuXHRcdGlmIChpc19mcmFnbWVudCA/IG5vZGUuZmlyc3RDaGlsZCA9PT0gc2NyaXB0IDogbm9kZSA9PT0gc2NyaXB0KSB7XG5cdFx0XHRlZmZlY3Qubm9kZXNfc3RhcnQgPSBjbG9uZTtcblx0XHR9XG5cdFx0aWYgKGlzX2ZyYWdtZW50ID8gbm9kZS5sYXN0Q2hpbGQgPT09IHNjcmlwdCA6IG5vZGUgPT09IHNjcmlwdCkge1xuXHRcdFx0ZWZmZWN0Lm5vZGVzX2VuZCA9IGNsb25lO1xuXHRcdH1cblxuXHRcdHNjcmlwdC5yZXBsYWNlV2l0aChjbG9uZSk7XG5cdH1cblx0cmV0dXJuIG5vZGU7XG59XG5cbi8qKlxuICogRG9uJ3QgbWFyayB0aGlzIGFzIHNpZGUtZWZmZWN0LWZyZWUsIGh5ZHJhdGlvbiBuZWVkcyB0byB3YWxrIGFsbCBub2Rlc1xuICogQHBhcmFtIHthbnl9IHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZXh0KHZhbHVlID0gJycpIHtcblx0aWYgKCFoeWRyYXRpbmcpIHtcblx0XHR2YXIgdCA9IGNyZWF0ZV90ZXh0KHZhbHVlICsgJycpO1xuXHRcdGFzc2lnbl9ub2Rlcyh0LCB0KTtcblx0XHRyZXR1cm4gdDtcblx0fVxuXG5cdHZhciBub2RlID0gaHlkcmF0ZV9ub2RlO1xuXG5cdGlmIChub2RlLm5vZGVUeXBlICE9PSAzKSB7XG5cdFx0Ly8gaWYgYW4ge2V4cHJlc3Npb259IGlzIGVtcHR5IGR1cmluZyBTU1IsIHdlIG5lZWQgdG8gaW5zZXJ0IGFuIGVtcHR5IHRleHQgbm9kZVxuXHRcdG5vZGUuYmVmb3JlKChub2RlID0gY3JlYXRlX3RleHQoKSkpO1xuXHRcdHNldF9oeWRyYXRlX25vZGUobm9kZSk7XG5cdH1cblxuXHRhc3NpZ25fbm9kZXMobm9kZSwgbm9kZSk7XG5cdHJldHVybiBub2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tbWVudCgpIHtcblx0Ly8gd2UncmUgbm90IGRlbGVnYXRpbmcgdG8gYHRlbXBsYXRlYCBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zXG5cdGlmIChoeWRyYXRpbmcpIHtcblx0XHRhc3NpZ25fbm9kZXMoaHlkcmF0ZV9ub2RlLCBudWxsKTtcblx0XHRyZXR1cm4gaHlkcmF0ZV9ub2RlO1xuXHR9XG5cblx0dmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdHZhciBzdGFydCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJycpO1xuXHR2YXIgYW5jaG9yID0gY3JlYXRlX3RleHQoKTtcblx0ZnJhZy5hcHBlbmQoc3RhcnQsIGFuY2hvcik7XG5cblx0YXNzaWduX25vZGVzKHN0YXJ0LCBhbmNob3IpO1xuXG5cdHJldHVybiBmcmFnO1xufVxuXG4vKipcbiAqIEFzc2lnbiB0aGUgY3JlYXRlZCAob3IgaW4gaHlkcmF0aW9uIG1vZGUsIHRyYXZlcnNlZCkgZG9tIGVsZW1lbnRzIHRvIHRoZSBjdXJyZW50IGJsb2NrXG4gKiBhbmQgaW5zZXJ0IHRoZSBlbGVtZW50cyBpbnRvIHRoZSBkb20gKGluIGNsaWVudCBtb2RlKS5cbiAqIEBwYXJhbSB7VGV4dCB8IENvbW1lbnQgfCBFbGVtZW50fSBhbmNob3JcbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudCB8IEVsZW1lbnR9IGRvbVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kKGFuY2hvciwgZG9tKSB7XG5cdGlmIChoeWRyYXRpbmcpIHtcblx0XHQvKiogQHR5cGUge0VmZmVjdH0gKi8gKGFjdGl2ZV9lZmZlY3QpLm5vZGVzX2VuZCA9IGh5ZHJhdGVfbm9kZTtcblx0XHRoeWRyYXRlX25leHQoKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRpZiAoYW5jaG9yID09PSBudWxsKSB7XG5cdFx0Ly8gZWRnZSBjYXNlIFx1MjAxNCB2b2lkIGA8c3ZlbHRlOmVsZW1lbnQ+YCB3aXRoIGNvbnRlbnRcblx0XHRyZXR1cm47XG5cdH1cblxuXHRhbmNob3IuYmVmb3JlKC8qKiBAdHlwZSB7Tm9kZX0gKi8gKGRvbSkpO1xufVxuIiwgIi8qKiBAaW1wb3J0IHsgQ29tcG9uZW50Q29udGV4dCwgRWZmZWN0LCBUZW1wbGF0ZU5vZGUgfSBmcm9tICcjY2xpZW50JyAqL1xuLyoqIEBpbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudFR5cGUsIFN2ZWx0ZUNvbXBvbmVudCwgTW91bnRPcHRpb25zIH0gZnJvbSAnLi4vLi4vaW5kZXguanMnICovXG5pbXBvcnQgeyBERVYgfSBmcm9tICdlc20tZW52JztcbmltcG9ydCB7XG5cdGNsZWFyX3RleHRfY29udGVudCxcblx0Y3JlYXRlX3RleHQsXG5cdGdldF9maXJzdF9jaGlsZCxcblx0Z2V0X25leHRfc2libGluZyxcblx0aW5pdF9vcGVyYXRpb25zXG59IGZyb20gJy4vZG9tL29wZXJhdGlvbnMuanMnO1xuaW1wb3J0IHsgSFlEUkFUSU9OX0VORCwgSFlEUkFUSU9OX0VSUk9SLCBIWURSQVRJT05fU1RBUlQgfSBmcm9tICcuLi8uLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgcHVzaCwgcG9wLCBjb21wb25lbnRfY29udGV4dCwgYWN0aXZlX2VmZmVjdCB9IGZyb20gJy4vcnVudGltZS5qcyc7XG5pbXBvcnQgeyBjb21wb25lbnRfcm9vdCwgYnJhbmNoIH0gZnJvbSAnLi9yZWFjdGl2aXR5L2VmZmVjdHMuanMnO1xuaW1wb3J0IHtcblx0aHlkcmF0ZV9uZXh0LFxuXHRoeWRyYXRlX25vZGUsXG5cdGh5ZHJhdGluZyxcblx0c2V0X2h5ZHJhdGVfbm9kZSxcblx0c2V0X2h5ZHJhdGluZ1xufSBmcm9tICcuL2RvbS9oeWRyYXRpb24uanMnO1xuaW1wb3J0IHsgYXJyYXlfZnJvbSB9IGZyb20gJy4uL3NoYXJlZC91dGlscy5qcyc7XG5pbXBvcnQge1xuXHRhbGxfcmVnaXN0ZXJlZF9ldmVudHMsXG5cdGhhbmRsZV9ldmVudF9wcm9wYWdhdGlvbixcblx0cm9vdF9ldmVudF9oYW5kbGVzXG59IGZyb20gJy4vZG9tL2VsZW1lbnRzL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyByZXNldF9oZWFkX2FuY2hvciB9IGZyb20gJy4vZG9tL2Jsb2Nrcy9zdmVsdGUtaGVhZC5qcyc7XG5pbXBvcnQgKiBhcyB3IGZyb20gJy4vd2FybmluZ3MuanMnO1xuaW1wb3J0ICogYXMgZSBmcm9tICcuL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBhc3NpZ25fbm9kZXMgfSBmcm9tICcuL2RvbS90ZW1wbGF0ZS5qcyc7XG5pbXBvcnQgeyBpc19wYXNzaXZlX2V2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMuanMnO1xuXG4vKipcbiAqIFRoaXMgaXMgbm9ybWFsbHkgdHJ1ZSBcdTIwMTQgYmxvY2sgZWZmZWN0cyBzaG91bGQgcnVuIHRoZWlyIGludHJvIHRyYW5zaXRpb25zIFx1MjAxNFxuICogYnV0IGlzIGZhbHNlIGR1cmluZyBoeWRyYXRpb24gKHVubGVzcyBgb3B0aW9ucy5pbnRyb2AgaXMgYHRydWVgKSBhbmRcbiAqIHdoZW4gY3JlYXRpbmcgdGhlIGNoaWxkcmVuIG9mIGEgYDxzdmVsdGU6ZWxlbWVudD5gIHRoYXQganVzdCBjaGFuZ2VkIHRhZ1xuICovXG5leHBvcnQgbGV0IHNob3VsZF9pbnRybyA9IHRydWU7XG5cbi8qKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlICovXG5leHBvcnQgZnVuY3Rpb24gc2V0X3Nob3VsZF9pbnRybyh2YWx1ZSkge1xuXHRzaG91bGRfaW50cm8gPSB2YWx1ZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRleHRcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRfdGV4dCh0ZXh0LCB2YWx1ZSkge1xuXHQvLyBGb3Igb2JqZWN0cywgd2UgYXBwbHkgc3RyaW5nIGNvZXJjaW9uICh3aGljaCBtaWdodCBtYWtlIHRoaW5ncyBsaWtlICRzdGF0ZSBhcnJheSByZWZlcmVuY2VzIGluIHRoZSB0ZW1wbGF0ZSByZWFjdGl2ZSkgYmVmb3JlIGRpZmZpbmdcblx0dmFyIHN0ciA9IHZhbHVlID09IG51bGwgPyAnJyA6IHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgPyB2YWx1ZSArICcnIDogdmFsdWU7XG5cdC8vIEB0cy1leHBlY3QtZXJyb3Jcblx0aWYgKHN0ciAhPT0gKHRleHQuX190ID8/PSB0ZXh0Lm5vZGVWYWx1ZSkpIHtcblx0XHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdFx0dGV4dC5fX3QgPSBzdHI7XG5cdFx0dGV4dC5ub2RlVmFsdWUgPSBzdHIgPT0gbnVsbCA/ICcnIDogc3RyICsgJyc7XG5cdH1cbn1cblxuLyoqXG4gKiBNb3VudHMgYSBjb21wb25lbnQgdG8gdGhlIGdpdmVuIHRhcmdldCBhbmQgcmV0dXJucyB0aGUgZXhwb3J0cyBhbmQgcG90ZW50aWFsbHkgdGhlIHByb3BzIChpZiBjb21waWxlZCB3aXRoIGBhY2Nlc3NvcnM6IHRydWVgKSBvZiB0aGUgY29tcG9uZW50LlxuICogVHJhbnNpdGlvbnMgd2lsbCBwbGF5IGR1cmluZyB0aGUgaW5pdGlhbCByZW5kZXIgdW5sZXNzIHRoZSBgaW50cm9gIG9wdGlvbiBpcyBzZXQgdG8gYGZhbHNlYC5cbiAqXG4gKiBAdGVtcGxhdGUge1JlY29yZDxzdHJpbmcsIGFueT59IFByb3BzXG4gKiBAdGVtcGxhdGUge1JlY29yZDxzdHJpbmcsIGFueT59IEV4cG9ydHNcbiAqIEBwYXJhbSB7Q29tcG9uZW50VHlwZTxTdmVsdGVDb21wb25lbnQ8UHJvcHM+PiB8IENvbXBvbmVudDxQcm9wcywgRXhwb3J0cywgYW55Pn0gY29tcG9uZW50XG4gKiBAcGFyYW0ge01vdW50T3B0aW9uczxQcm9wcz59IG9wdGlvbnNcbiAqIEByZXR1cm5zIHtFeHBvcnRzfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbW91bnQoY29tcG9uZW50LCBvcHRpb25zKSB7XG5cdHJldHVybiBfbW91bnQoY29tcG9uZW50LCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBIeWRyYXRlcyBhIGNvbXBvbmVudCBvbiB0aGUgZ2l2ZW4gdGFyZ2V0IGFuZCByZXR1cm5zIHRoZSBleHBvcnRzIGFuZCBwb3RlbnRpYWxseSB0aGUgcHJvcHMgKGlmIGNvbXBpbGVkIHdpdGggYGFjY2Vzc29yczogdHJ1ZWApIG9mIHRoZSBjb21wb25lbnRcbiAqXG4gKiBAdGVtcGxhdGUge1JlY29yZDxzdHJpbmcsIGFueT59IFByb3BzXG4gKiBAdGVtcGxhdGUge1JlY29yZDxzdHJpbmcsIGFueT59IEV4cG9ydHNcbiAqIEBwYXJhbSB7Q29tcG9uZW50VHlwZTxTdmVsdGVDb21wb25lbnQ8UHJvcHM+PiB8IENvbXBvbmVudDxQcm9wcywgRXhwb3J0cywgYW55Pn0gY29tcG9uZW50XG4gKiBAcGFyYW0ge3t9IGV4dGVuZHMgUHJvcHMgPyB7XG4gKiBcdFx0dGFyZ2V0OiBEb2N1bWVudCB8IEVsZW1lbnQgfCBTaGFkb3dSb290O1xuICogXHRcdHByb3BzPzogUHJvcHM7XG4gKiBcdFx0ZXZlbnRzPzogUmVjb3JkPHN0cmluZywgKGU6IGFueSkgPT4gYW55PjtcbiAqICBcdGNvbnRleHQ/OiBNYXA8YW55LCBhbnk+O1xuICogXHRcdGludHJvPzogYm9vbGVhbjtcbiAqIFx0XHRyZWNvdmVyPzogYm9vbGVhbjtcbiAqIFx0fSA6IHtcbiAqIFx0XHR0YXJnZXQ6IERvY3VtZW50IHwgRWxlbWVudCB8IFNoYWRvd1Jvb3Q7XG4gKiBcdFx0cHJvcHM6IFByb3BzO1xuICogXHRcdGV2ZW50cz86IFJlY29yZDxzdHJpbmcsIChlOiBhbnkpID0+IGFueT47XG4gKiAgXHRjb250ZXh0PzogTWFwPGFueSwgYW55PjtcbiAqIFx0XHRpbnRybz86IGJvb2xlYW47XG4gKiBcdFx0cmVjb3Zlcj86IGJvb2xlYW47XG4gKiBcdH19IG9wdGlvbnNcbiAqIEByZXR1cm5zIHtFeHBvcnRzfVxuICovXG5leHBvcnQgZnVuY3Rpb24gaHlkcmF0ZShjb21wb25lbnQsIG9wdGlvbnMpIHtcblx0aW5pdF9vcGVyYXRpb25zKCk7XG5cdG9wdGlvbnMuaW50cm8gPSBvcHRpb25zLmludHJvID8/IGZhbHNlO1xuXHRjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldDtcblx0Y29uc3Qgd2FzX2h5ZHJhdGluZyA9IGh5ZHJhdGluZztcblx0Y29uc3QgcHJldmlvdXNfaHlkcmF0ZV9ub2RlID0gaHlkcmF0ZV9ub2RlO1xuXG5cdHRyeSB7XG5cdFx0dmFyIGFuY2hvciA9IC8qKiBAdHlwZSB7VGVtcGxhdGVOb2RlfSAqLyAoZ2V0X2ZpcnN0X2NoaWxkKHRhcmdldCkpO1xuXHRcdHdoaWxlIChcblx0XHRcdGFuY2hvciAmJlxuXHRcdFx0KGFuY2hvci5ub2RlVHlwZSAhPT0gOCB8fCAvKiogQHR5cGUge0NvbW1lbnR9ICovIChhbmNob3IpLmRhdGEgIT09IEhZRFJBVElPTl9TVEFSVClcblx0XHQpIHtcblx0XHRcdGFuY2hvciA9IC8qKiBAdHlwZSB7VGVtcGxhdGVOb2RlfSAqLyAoZ2V0X25leHRfc2libGluZyhhbmNob3IpKTtcblx0XHR9XG5cblx0XHRpZiAoIWFuY2hvcikge1xuXHRcdFx0dGhyb3cgSFlEUkFUSU9OX0VSUk9SO1xuXHRcdH1cblxuXHRcdHNldF9oeWRyYXRpbmcodHJ1ZSk7XG5cdFx0c2V0X2h5ZHJhdGVfbm9kZSgvKiogQHR5cGUge0NvbW1lbnR9ICovIChhbmNob3IpKTtcblx0XHRoeWRyYXRlX25leHQoKTtcblxuXHRcdGNvbnN0IGluc3RhbmNlID0gX21vdW50KGNvbXBvbmVudCwgeyAuLi5vcHRpb25zLCBhbmNob3IgfSk7XG5cblx0XHRpZiAoXG5cdFx0XHRoeWRyYXRlX25vZGUgPT09IG51bGwgfHxcblx0XHRcdGh5ZHJhdGVfbm9kZS5ub2RlVHlwZSAhPT0gOCB8fFxuXHRcdFx0LyoqIEB0eXBlIHtDb21tZW50fSAqLyAoaHlkcmF0ZV9ub2RlKS5kYXRhICE9PSBIWURSQVRJT05fRU5EXG5cdFx0KSB7XG5cdFx0XHR3Lmh5ZHJhdGlvbl9taXNtYXRjaCgpO1xuXHRcdFx0dGhyb3cgSFlEUkFUSU9OX0VSUk9SO1xuXHRcdH1cblxuXHRcdHNldF9oeWRyYXRpbmcoZmFsc2UpO1xuXG5cdFx0cmV0dXJuIC8qKiAgQHR5cGUge0V4cG9ydHN9ICovIChpbnN0YW5jZSk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0aWYgKGVycm9yID09PSBIWURSQVRJT05fRVJST1IpIHtcblx0XHRcdGlmIChvcHRpb25zLnJlY292ZXIgPT09IGZhbHNlKSB7XG5cdFx0XHRcdGUuaHlkcmF0aW9uX2ZhaWxlZCgpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhbiBlcnJvciBvY2N1cmVkIGFib3ZlLCB0aGUgb3BlcmF0aW9ucyBtaWdodCBub3QgeWV0IGhhdmUgYmVlbiBpbml0aWFsaXNlZC5cblx0XHRcdGluaXRfb3BlcmF0aW9ucygpO1xuXHRcdFx0Y2xlYXJfdGV4dF9jb250ZW50KHRhcmdldCk7XG5cblx0XHRcdHNldF9oeWRyYXRpbmcoZmFsc2UpO1xuXHRcdFx0cmV0dXJuIG1vdW50KGNvbXBvbmVudCwgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0dGhyb3cgZXJyb3I7XG5cdH0gZmluYWxseSB7XG5cdFx0c2V0X2h5ZHJhdGluZyh3YXNfaHlkcmF0aW5nKTtcblx0XHRzZXRfaHlkcmF0ZV9ub2RlKHByZXZpb3VzX2h5ZHJhdGVfbm9kZSk7XG5cdFx0cmVzZXRfaGVhZF9hbmNob3IoKTtcblx0fVxufVxuXG4vKiogQHR5cGUge01hcDxzdHJpbmcsIG51bWJlcj59ICovXG5jb25zdCBkb2N1bWVudF9saXN0ZW5lcnMgPSBuZXcgTWFwKCk7XG5cbi8qKlxuICogQHRlbXBsYXRlIHtSZWNvcmQ8c3RyaW5nLCBhbnk+fSBFeHBvcnRzXG4gKiBAcGFyYW0ge0NvbXBvbmVudFR5cGU8U3ZlbHRlQ29tcG9uZW50PGFueT4+IHwgQ29tcG9uZW50PGFueT59IENvbXBvbmVudFxuICogQHBhcmFtIHtNb3VudE9wdGlvbnN9IG9wdGlvbnNcbiAqIEByZXR1cm5zIHtFeHBvcnRzfVxuICovXG5mdW5jdGlvbiBfbW91bnQoQ29tcG9uZW50LCB7IHRhcmdldCwgYW5jaG9yLCBwcm9wcyA9IHt9LCBldmVudHMsIGNvbnRleHQsIGludHJvID0gdHJ1ZSB9KSB7XG5cdGluaXRfb3BlcmF0aW9ucygpO1xuXG5cdHZhciByZWdpc3RlcmVkX2V2ZW50cyA9IG5ldyBTZXQoKTtcblxuXHQvKiogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBldmVudHMgKi9cblx0dmFyIGV2ZW50X2hhbmRsZSA9IChldmVudHMpID0+IHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGV2ZW50X25hbWUgPSBldmVudHNbaV07XG5cblx0XHRcdGlmIChyZWdpc3RlcmVkX2V2ZW50cy5oYXMoZXZlbnRfbmFtZSkpIGNvbnRpbnVlO1xuXHRcdFx0cmVnaXN0ZXJlZF9ldmVudHMuYWRkKGV2ZW50X25hbWUpO1xuXG5cdFx0XHR2YXIgcGFzc2l2ZSA9IGlzX3Bhc3NpdmVfZXZlbnQoZXZlbnRfbmFtZSk7XG5cblx0XHRcdC8vIEFkZCB0aGUgZXZlbnQgbGlzdGVuZXIgdG8gYm90aCB0aGUgY29udGFpbmVyIGFuZCB0aGUgZG9jdW1lbnQuXG5cdFx0XHQvLyBUaGUgY29udGFpbmVyIGxpc3RlbmVyIGVuc3VyZXMgd2UgY2F0Y2ggZXZlbnRzIGZyb20gd2l0aGluIGluIGNhc2Vcblx0XHRcdC8vIHRoZSBvdXRlciBjb250ZW50IHN0b3BzIHByb3BhZ2F0aW9uIG9mIHRoZSBldmVudC5cblx0XHRcdHRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50X25hbWUsIGhhbmRsZV9ldmVudF9wcm9wYWdhdGlvbiwgeyBwYXNzaXZlIH0pO1xuXG5cdFx0XHR2YXIgbiA9IGRvY3VtZW50X2xpc3RlbmVycy5nZXQoZXZlbnRfbmFtZSk7XG5cblx0XHRcdGlmIChuID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0Ly8gVGhlIGRvY3VtZW50IGxpc3RlbmVyIGVuc3VyZXMgd2UgY2F0Y2ggZXZlbnRzIHRoYXQgb3JpZ2luYXRlIGZyb20gZWxlbWVudHMgdGhhdCB3ZXJlXG5cdFx0XHRcdC8vIG1hbnVhbGx5IG1vdmVkIG91dHNpZGUgb2YgdGhlIGNvbnRhaW5lciAoZS5nLiB2aWEgbWFudWFsIHBvcnRhbHMpLlxuXHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50X25hbWUsIGhhbmRsZV9ldmVudF9wcm9wYWdhdGlvbiwgeyBwYXNzaXZlIH0pO1xuXHRcdFx0XHRkb2N1bWVudF9saXN0ZW5lcnMuc2V0KGV2ZW50X25hbWUsIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZG9jdW1lbnRfbGlzdGVuZXJzLnNldChldmVudF9uYW1lLCBuICsgMSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdGV2ZW50X2hhbmRsZShhcnJheV9mcm9tKGFsbF9yZWdpc3RlcmVkX2V2ZW50cykpO1xuXHRyb290X2V2ZW50X2hhbmRsZXMuYWRkKGV2ZW50X2hhbmRsZSk7XG5cblx0LyoqIEB0eXBlIHtFeHBvcnRzfSAqL1xuXHQvLyBAdHMtZXhwZWN0LWVycm9yIHdpbGwgYmUgZGVmaW5lZCBiZWNhdXNlIHRoZSByZW5kZXIgZWZmZWN0IHJ1bnMgc3luY2hyb25vdXNseVxuXHR2YXIgY29tcG9uZW50ID0gdW5kZWZpbmVkO1xuXG5cdHZhciB1bm1vdW50ID0gY29tcG9uZW50X3Jvb3QoKCkgPT4ge1xuXHRcdHZhciBhbmNob3Jfbm9kZSA9IGFuY2hvciA/PyB0YXJnZXQuYXBwZW5kQ2hpbGQoY3JlYXRlX3RleHQoKSk7XG5cblx0XHRicmFuY2goKCkgPT4ge1xuXHRcdFx0aWYgKGNvbnRleHQpIHtcblx0XHRcdFx0cHVzaCh7fSk7XG5cdFx0XHRcdHZhciBjdHggPSAvKiogQHR5cGUge0NvbXBvbmVudENvbnRleHR9ICovIChjb21wb25lbnRfY29udGV4dCk7XG5cdFx0XHRcdGN0eC5jID0gY29udGV4dDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGV2ZW50cykge1xuXHRcdFx0XHQvLyBXZSBjYW4ndCBzcHJlYWQgdGhlIG9iamVjdCBvciBlbHNlIHdlJ2QgbG9zZSB0aGUgc3RhdGUgcHJveHkgc3R1ZmYsIGlmIGl0IGlzIG9uZVxuXHRcdFx0XHQvKiogQHR5cGUge2FueX0gKi8gKHByb3BzKS4kJGV2ZW50cyA9IGV2ZW50cztcblx0XHRcdH1cblxuXHRcdFx0aWYgKGh5ZHJhdGluZykge1xuXHRcdFx0XHRhc3NpZ25fbm9kZXMoLyoqIEB0eXBlIHtUZW1wbGF0ZU5vZGV9ICovIChhbmNob3Jfbm9kZSksIG51bGwpO1xuXHRcdFx0fVxuXG5cdFx0XHRzaG91bGRfaW50cm8gPSBpbnRybztcblx0XHRcdC8vIEB0cy1leHBlY3QtZXJyb3IgdGhlIHB1YmxpYyB0eXBpbmdzIGFyZSBub3Qgd2hhdCB0aGUgYWN0dWFsIGZ1bmN0aW9uIGxvb2tzIGxpa2Vcblx0XHRcdGNvbXBvbmVudCA9IENvbXBvbmVudChhbmNob3Jfbm9kZSwgcHJvcHMpIHx8IHt9O1xuXHRcdFx0c2hvdWxkX2ludHJvID0gdHJ1ZTtcblxuXHRcdFx0aWYgKGh5ZHJhdGluZykge1xuXHRcdFx0XHQvKiogQHR5cGUge0VmZmVjdH0gKi8gKGFjdGl2ZV9lZmZlY3QpLm5vZGVzX2VuZCA9IGh5ZHJhdGVfbm9kZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGNvbnRleHQpIHtcblx0XHRcdFx0cG9wKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0Zm9yICh2YXIgZXZlbnRfbmFtZSBvZiByZWdpc3RlcmVkX2V2ZW50cykge1xuXHRcdFx0XHR0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudF9uYW1lLCBoYW5kbGVfZXZlbnRfcHJvcGFnYXRpb24pO1xuXG5cdFx0XHRcdHZhciBuID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChkb2N1bWVudF9saXN0ZW5lcnMuZ2V0KGV2ZW50X25hbWUpKTtcblxuXHRcdFx0XHRpZiAoLS1uID09PSAwKSB7XG5cdFx0XHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudF9uYW1lLCBoYW5kbGVfZXZlbnRfcHJvcGFnYXRpb24pO1xuXHRcdFx0XHRcdGRvY3VtZW50X2xpc3RlbmVycy5kZWxldGUoZXZlbnRfbmFtZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZG9jdW1lbnRfbGlzdGVuZXJzLnNldChldmVudF9uYW1lLCBuKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyb290X2V2ZW50X2hhbmRsZXMuZGVsZXRlKGV2ZW50X2hhbmRsZSk7XG5cblx0XHRcdGlmIChhbmNob3Jfbm9kZSAhPT0gYW5jaG9yKSB7XG5cdFx0XHRcdGFuY2hvcl9ub2RlLnBhcmVudE5vZGU/LnJlbW92ZUNoaWxkKGFuY2hvcl9ub2RlKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9KTtcblxuXHRtb3VudGVkX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudCwgdW5tb3VudCk7XG5cdHJldHVybiBjb21wb25lbnQ7XG59XG5cbi8qKlxuICogUmVmZXJlbmNlcyBvZiB0aGUgY29tcG9uZW50cyB0aGF0IHdlcmUgbW91bnRlZCBvciBoeWRyYXRlZC5cbiAqIFVzZXMgYSBgV2Vha01hcGAgdG8gYXZvaWQgbWVtb3J5IGxlYWtzLlxuICovXG5sZXQgbW91bnRlZF9jb21wb25lbnRzID0gbmV3IFdlYWtNYXAoKTtcblxuLyoqXG4gKiBVbm1vdW50cyBhIGNvbXBvbmVudCB0aGF0IHdhcyBwcmV2aW91c2x5IG1vdW50ZWQgdXNpbmcgYG1vdW50YCBvciBgaHlkcmF0ZWAuXG4gKlxuICogU2luY2UgNS4xMy4wLCBpZiBgb3B0aW9ucy5vdXRyb2AgaXMgYHRydWVgLCBbdHJhbnNpdGlvbnNdKGh0dHBzOi8vc3ZlbHRlLmRldi9kb2NzL3N2ZWx0ZS90cmFuc2l0aW9uKSB3aWxsIHBsYXkgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00uXG4gKlxuICogUmV0dXJucyBhIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIGFmdGVyIHRyYW5zaXRpb25zIGhhdmUgY29tcGxldGVkIGlmIGBvcHRpb25zLm91dHJvYCBpcyB0cnVlLCBvciBpbW1lZGlhdGVseSBvdGhlcndpc2UgKHByaW9yIHRvIDUuMTMuMCwgcmV0dXJucyBgdm9pZGApLlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgeyBtb3VudCwgdW5tb3VudCB9IGZyb20gJ3N2ZWx0ZSc7XG4gKiBpbXBvcnQgQXBwIGZyb20gJy4vQXBwLnN2ZWx0ZSc7XG4gKlxuICogY29uc3QgYXBwID0gbW91bnQoQXBwLCB7IHRhcmdldDogZG9jdW1lbnQuYm9keSB9KTtcbiAqXG4gKiAvLyBsYXRlci4uLlxuICogdW5tb3VudChhcHAsIHsgb3V0cm86IHRydWUgfSk7XG4gKiBgYGBcbiAqIEBwYXJhbSB7UmVjb3JkPHN0cmluZywgYW55Pn0gY29tcG9uZW50XG4gKiBAcGFyYW0ge3sgb3V0cm8/OiBib29sZWFuIH19IFtvcHRpb25zXVxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bm1vdW50KGNvbXBvbmVudCwgb3B0aW9ucykge1xuXHRjb25zdCBmbiA9IG1vdW50ZWRfY29tcG9uZW50cy5nZXQoY29tcG9uZW50KTtcblxuXHRpZiAoZm4pIHtcblx0XHRtb3VudGVkX2NvbXBvbmVudHMuZGVsZXRlKGNvbXBvbmVudCk7XG5cdFx0cmV0dXJuIGZuKG9wdGlvbnMpO1xuXHR9XG5cblx0aWYgKERFVikge1xuXHRcdHcubGlmZWN5Y2xlX2RvdWJsZV91bm1vdW50KCk7XG5cdH1cblxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG4iLCAiaW1wb3J0IHsgREVWIH0gZnJvbSAnZXNtLWVudic7XG5pbXBvcnQgeyBxdWV1ZV9taWNyb190YXNrIH0gZnJvbSAnLi90YXNrLmpzJztcbmltcG9ydCB7IHJlZ2lzdGVyX3N0eWxlIH0gZnJvbSAnLi4vZGV2L2Nzcy5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBhbmNob3JcbiAqIEBwYXJhbSB7eyBoYXNoOiBzdHJpbmcsIGNvZGU6IHN0cmluZyB9fSBjc3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZF9zdHlsZXMoYW5jaG9yLCBjc3MpIHtcblx0Ly8gVXNlIGBxdWV1ZV9taWNyb190YXNrYCB0byBlbnN1cmUgYGFuY2hvcmAgaXMgaW4gdGhlIERPTSwgb3RoZXJ3aXNlIGdldFJvb3ROb2RlKCkgd2lsbCB5aWVsZCB3cm9uZyByZXN1bHRzXG5cdHF1ZXVlX21pY3JvX3Rhc2soKCkgPT4ge1xuXHRcdHZhciByb290ID0gYW5jaG9yLmdldFJvb3ROb2RlKCk7XG5cblx0XHR2YXIgdGFyZ2V0ID0gLyoqIEB0eXBlIHtTaGFkb3dSb290fSAqLyAocm9vdCkuaG9zdFxuXHRcdFx0PyAvKiogQHR5cGUge1NoYWRvd1Jvb3R9ICovIChyb290KVxuXHRcdFx0OiAvKiogQHR5cGUge0RvY3VtZW50fSAqLyAocm9vdCkuaGVhZCA/PyAvKiogQHR5cGUge0RvY3VtZW50fSAqLyAocm9vdC5vd25lckRvY3VtZW50KS5oZWFkO1xuXG5cdFx0Ly8gQWx3YXlzIHF1ZXJ5aW5nIHRoZSBET00gaXMgcm91Z2hseSB0aGUgc2FtZSBwZXJmIGFzIGFkZGl0aW9uYWxseSBjaGVja2luZyBmb3IgcHJlc2VuY2UgaW4gYSBtYXAgZmlyc3QgYXNzdW1pbmdcblx0XHQvLyB0aGF0IHlvdSdsbCBnZXQgY2FjaGUgaGl0cyBoYWxmIG9mIHRoZSB0aW1lLCBzbyB3ZSBqdXN0IGFsd2F5cyBxdWVyeSB0aGUgZG9tIGZvciBzaW1wbGljaXR5IGFuZCBjb2RlIHNhdmluZ3MuXG5cdFx0aWYgKCF0YXJnZXQucXVlcnlTZWxlY3RvcignIycgKyBjc3MuaGFzaCkpIHtcblx0XHRcdGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblx0XHRcdHN0eWxlLmlkID0gY3NzLmhhc2g7XG5cdFx0XHRzdHlsZS50ZXh0Q29udGVudCA9IGNzcy5jb2RlO1xuXG5cdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG5cdFx0XHRpZiAoREVWKSB7XG5cdFx0XHRcdHJlZ2lzdGVyX3N0eWxlKGNzcy5oYXNoLCBzdHlsZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn1cbiIsICIvKiogQGltcG9ydCB7IFN0b3JlUmVmZXJlbmNlc0NvbnRhaW5lciB9IGZyb20gJyNjbGllbnQnICovXG4vKiogQGltcG9ydCB7IFN0b3JlIH0gZnJvbSAnI3NoYXJlZCcgKi9cbmltcG9ydCB7IHN1YnNjcmliZV90b19zdG9yZSB9IGZyb20gJy4uLy4uLy4uL3N0b3JlL3V0aWxzLmpzJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi8uLi9zaGFyZWQvdXRpbHMuanMnO1xuaW1wb3J0IHsgZ2V0IH0gZnJvbSAnLi4vcnVudGltZS5qcyc7XG5pbXBvcnQgeyB0ZWFyZG93biB9IGZyb20gJy4vZWZmZWN0cy5qcyc7XG5pbXBvcnQgeyBtdXRhYmxlX3NvdXJjZSwgc2V0IH0gZnJvbSAnLi9zb3VyY2VzLmpzJztcblxuLyoqXG4gKiBXaGV0aGVyIG9yIG5vdCB0aGUgcHJvcCBjdXJyZW50bHkgYmVpbmcgcmVhZCBpcyBhIHN0b3JlIGJpbmRpbmcsIGFzIGluXG4gKiBgPENoaWxkIGJpbmQ6eD17JHl9IC8+YC4gSWYgaXQgaXMsIHdlIHRyZWF0IHRoZSBwcm9wIGFzIG11dGFibGUgZXZlbiBpblxuICogcnVuZXMgbW9kZSwgYW5kIHNraXAgYGJpbmRpbmdfcHJvcGVydHlfbm9uX3JlYWN0aXZlYCB2YWxpZGF0aW9uXG4gKi9cbmxldCBpc19zdG9yZV9iaW5kaW5nID0gZmFsc2U7XG5cbi8qKlxuICogR2V0cyB0aGUgY3VycmVudCB2YWx1ZSBvZiBhIHN0b3JlLiBJZiB0aGUgc3RvcmUgaXNuJ3Qgc3Vic2NyaWJlZCB0byB5ZXQsIGl0IHdpbGwgY3JlYXRlIGEgcHJveHlcbiAqIHNpZ25hbCB0aGF0IHdpbGwgYmUgdXBkYXRlZCB3aGVuIHRoZSBzdG9yZSBpcy4gVGhlIHN0b3JlIHJlZmVyZW5jZXMgY29udGFpbmVyIGlzIG5lZWRlZCB0b1xuICogdHJhY2sgcmVhc3NpZ25tZW50cyB0byBzdG9yZXMgYW5kIHRvIHRyYWNrIHRoZSBjb3JyZWN0IGNvbXBvbmVudCBjb250ZXh0LlxuICogQHRlbXBsYXRlIFZcbiAqIEBwYXJhbSB7U3RvcmU8Vj4gfCBudWxsIHwgdW5kZWZpbmVkfSBzdG9yZVxuICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlX25hbWVcbiAqIEBwYXJhbSB7U3RvcmVSZWZlcmVuY2VzQ29udGFpbmVyfSBzdG9yZXNcbiAqIEByZXR1cm5zIHtWfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVfZ2V0KHN0b3JlLCBzdG9yZV9uYW1lLCBzdG9yZXMpIHtcblx0Y29uc3QgZW50cnkgPSAoc3RvcmVzW3N0b3JlX25hbWVdID8/PSB7XG5cdFx0c3RvcmU6IG51bGwsXG5cdFx0c291cmNlOiBtdXRhYmxlX3NvdXJjZSh1bmRlZmluZWQpLFxuXHRcdHVuc3Vic2NyaWJlOiBub29wXG5cdH0pO1xuXG5cdGlmIChlbnRyeS5zdG9yZSAhPT0gc3RvcmUpIHtcblx0XHRlbnRyeS51bnN1YnNjcmliZSgpO1xuXHRcdGVudHJ5LnN0b3JlID0gc3RvcmUgPz8gbnVsbDtcblxuXHRcdGlmIChzdG9yZSA9PSBudWxsKSB7XG5cdFx0XHRlbnRyeS5zb3VyY2UudiA9IHVuZGVmaW5lZDsgLy8gc2VlIHN5bmNocm9ub3VzIGNhbGxiYWNrIGNvbW1lbnQgYmVsb3dcblx0XHRcdGVudHJ5LnVuc3Vic2NyaWJlID0gbm9vcDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIGlzX3N5bmNocm9ub3VzX2NhbGxiYWNrID0gdHJ1ZTtcblxuXHRcdFx0ZW50cnkudW5zdWJzY3JpYmUgPSBzdWJzY3JpYmVfdG9fc3RvcmUoc3RvcmUsICh2KSA9PiB7XG5cdFx0XHRcdGlmIChpc19zeW5jaHJvbm91c19jYWxsYmFjaykge1xuXHRcdFx0XHRcdC8vIElmIHRoZSBmaXJzdCB1cGRhdGVzIHRvIHRoZSBzdG9yZSB2YWx1ZSAocG9zc2libHkgbXVsdGlwbGUgb2YgdGhlbSkgYXJlIHN5bmNocm9ub3VzbHlcblx0XHRcdFx0XHQvLyBpbnNpZGUgYSBkZXJpdmVkLCB3ZSB3aWxsIGhpdCB0aGUgYHN0YXRlX3Vuc2FmZV9tdXRhdGlvbmAgZXJyb3IgaWYgd2UgYHNldGAgdGhlIHZhbHVlXG5cdFx0XHRcdFx0ZW50cnkuc291cmNlLnYgPSB2O1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNldChlbnRyeS5zb3VyY2UsIHYpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0aXNfc3luY2hyb25vdXNfY2FsbGJhY2sgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZ2V0KGVudHJ5LnNvdXJjZSk7XG59XG5cbi8qKlxuICogVW5zdWJzY3JpYmUgZnJvbSBhIHN0b3JlIGlmIGl0J3Mgbm90IHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gdGhlIHN0b3JlIHJlZmVyZW5jZXMgY29udGFpbmVyLlxuICogV2UgbmVlZCB0aGlzIGluIGFkZGl0aW9uIHRvIGBzdG9yZV9nZXRgIGJlY2F1c2Ugc29tZW9uZSBjb3VsZCB1bnN1YnNjcmliZSBmcm9tIGEgc3RvcmUgYnV0XG4gKiB0aGVuIG5ldmVyIHN1YnNjcmliZSB0byB0aGUgbmV3IG9uZSAoaWYgYW55KSwgY2F1c2luZyB0aGUgc3Vic2NyaXB0aW9uIHRvIHN0YXkgb3BlbiB3cm9uZ2Z1bGx5LlxuICogQHBhcmFtIHtTdG9yZTxhbnk+IHwgbnVsbCB8IHVuZGVmaW5lZH0gc3RvcmVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdG9yZV9uYW1lXG4gKiBAcGFyYW0ge1N0b3JlUmVmZXJlbmNlc0NvbnRhaW5lcn0gc3RvcmVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZV91bnN1YihzdG9yZSwgc3RvcmVfbmFtZSwgc3RvcmVzKSB7XG5cdC8qKiBAdHlwZSB7U3RvcmVSZWZlcmVuY2VzQ29udGFpbmVyWycnXSB8IHVuZGVmaW5lZH0gKi9cblx0bGV0IGVudHJ5ID0gc3RvcmVzW3N0b3JlX25hbWVdO1xuXG5cdGlmIChlbnRyeSAmJiBlbnRyeS5zdG9yZSAhPT0gc3RvcmUpIHtcblx0XHQvLyBEb24ndCByZXNldCBzdG9yZSB5ZXQsIHNvIHRoYXQgc3RvcmVfZ2V0IGFib3ZlIGNhbiByZXN1YnNjcmliZSB0byBuZXcgc3RvcmUgaWYgbmVjZXNzYXJ5XG5cdFx0ZW50cnkudW5zdWJzY3JpYmUoKTtcblx0XHRlbnRyeS51bnN1YnNjcmliZSA9IG5vb3A7XG5cdH1cblxuXHRyZXR1cm4gc3RvcmU7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgbmV3IHZhbHVlIG9mIGEgc3RvcmUgYW5kIHJldHVybnMgdGhhdCB2YWx1ZS5cbiAqIEB0ZW1wbGF0ZSBWXG4gKiBAcGFyYW0ge1N0b3JlPFY+fSBzdG9yZVxuICogQHBhcmFtIHtWfSB2YWx1ZVxuICogQHJldHVybnMge1Z9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZV9zZXQoc3RvcmUsIHZhbHVlKSB7XG5cdHN0b3JlLnNldCh2YWx1ZSk7XG5cdHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1N0b3JlUmVmZXJlbmNlc0NvbnRhaW5lcn0gc3RvcmVzXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RvcmVfbmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW52YWxpZGF0ZV9zdG9yZShzdG9yZXMsIHN0b3JlX25hbWUpIHtcblx0dmFyIGVudHJ5ID0gc3RvcmVzW3N0b3JlX25hbWVdO1xuXHRpZiAoZW50cnkuc3RvcmUgIT09IG51bGwpIHtcblx0XHRzdG9yZV9zZXQoZW50cnkuc3RvcmUsIGVudHJ5LnNvdXJjZS52KTtcblx0fVxufVxuXG4vKipcbiAqIFVuc3Vic2NyaWJlcyBmcm9tIGFsbCBhdXRvLXN1YnNjcmliZWQgc3RvcmVzIG9uIGRlc3Ryb3lcbiAqIEByZXR1cm5zIHtTdG9yZVJlZmVyZW5jZXNDb250YWluZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cF9zdG9yZXMoKSB7XG5cdC8qKiBAdHlwZSB7U3RvcmVSZWZlcmVuY2VzQ29udGFpbmVyfSAqL1xuXHRjb25zdCBzdG9yZXMgPSB7fTtcblxuXHR0ZWFyZG93bigoKSA9PiB7XG5cdFx0Zm9yICh2YXIgc3RvcmVfbmFtZSBpbiBzdG9yZXMpIHtcblx0XHRcdGNvbnN0IHJlZiA9IHN0b3Jlc1tzdG9yZV9uYW1lXTtcblx0XHRcdHJlZi51bnN1YnNjcmliZSgpO1xuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIHN0b3Jlcztcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGEgc3RvcmUgd2l0aCBhIG5ldyB2YWx1ZS5cbiAqIEBwYXJhbSB7U3RvcmU8Vj59IHN0b3JlICB0aGUgc3RvcmUgdG8gdXBkYXRlXG4gKiBAcGFyYW0ge2FueX0gZXhwcmVzc2lvbiAgdGhlIGV4cHJlc3Npb24gdGhhdCBtdXRhdGVzIHRoZSBzdG9yZVxuICogQHBhcmFtIHtWfSBuZXdfdmFsdWUgIHRoZSBuZXcgc3RvcmUgdmFsdWVcbiAqIEB0ZW1wbGF0ZSBWXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZV9tdXRhdGUoc3RvcmUsIGV4cHJlc3Npb24sIG5ld192YWx1ZSkge1xuXHRzdG9yZS5zZXQobmV3X3ZhbHVlKTtcblx0cmV0dXJuIGV4cHJlc3Npb247XG59XG5cbi8qKlxuICogQHBhcmFtIHtTdG9yZTxudW1iZXI+fSBzdG9yZVxuICogQHBhcmFtIHtudW1iZXJ9IHN0b3JlX3ZhbHVlXG4gKiBAcGFyYW0gezEgfCAtMX0gW2RdXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlX3N0b3JlKHN0b3JlLCBzdG9yZV92YWx1ZSwgZCA9IDEpIHtcblx0c3RvcmUuc2V0KHN0b3JlX3ZhbHVlICsgZCk7XG5cdHJldHVybiBzdG9yZV92YWx1ZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1N0b3JlPG51bWJlcj59IHN0b3JlXG4gKiBAcGFyYW0ge251bWJlcn0gc3RvcmVfdmFsdWVcbiAqIEBwYXJhbSB7MSB8IC0xfSBbZF1cbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVfcHJlX3N0b3JlKHN0b3JlLCBzdG9yZV92YWx1ZSwgZCA9IDEpIHtcblx0Y29uc3QgdmFsdWUgPSBzdG9yZV92YWx1ZSArIGQ7XG5cdHN0b3JlLnNldCh2YWx1ZSk7XG5cdHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBDYWxsZWQgaW5zaWRlIHByb3AgZ2V0dGVycyB0byBjb21tdW5pY2F0ZSB0aGF0IHRoZSBwcm9wIGlzIGEgc3RvcmUgYmluZGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gbWFya19zdG9yZV9iaW5kaW5nKCkge1xuXHRpc19zdG9yZV9iaW5kaW5nID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdHVwbGUgdGhhdCBpbmRpY2F0ZXMgd2hldGhlciBgZm4oKWAgcmVhZHMgYSBwcm9wIHRoYXQgaXMgYSBzdG9yZSBiaW5kaW5nLlxuICogVXNlZCB0byBwcmV2ZW50IGBiaW5kaW5nX3Byb3BlcnR5X25vbl9yZWFjdGl2ZWAgdmFsaWRhdGlvbiBmYWxzZSBwb3NpdGl2ZXMgYW5kXG4gKiBlbnN1cmUgdGhhdCB0aGVzZSBwcm9wcyBhcmUgdHJlYXRlZCBhcyBtdXRhYmxlIGV2ZW4gaW4gcnVuZXMgbW9kZVxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7KCkgPT4gVH0gZm5cbiAqIEByZXR1cm5zIHtbVCwgYm9vbGVhbl19XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYXB0dXJlX3N0b3JlX2JpbmRpbmcoZm4pIHtcblx0dmFyIHByZXZpb3VzX2lzX3N0b3JlX2JpbmRpbmcgPSBpc19zdG9yZV9iaW5kaW5nO1xuXG5cdHRyeSB7XG5cdFx0aXNfc3RvcmVfYmluZGluZyA9IGZhbHNlO1xuXHRcdHJldHVybiBbZm4oKSwgaXNfc3RvcmVfYmluZGluZ107XG5cdH0gZmluYWxseSB7XG5cdFx0aXNfc3RvcmVfYmluZGluZyA9IHByZXZpb3VzX2lzX3N0b3JlX2JpbmRpbmc7XG5cdH1cbn1cbiIsICIvKiogQGltcG9ydCB7IFNvdXJjZSB9IGZyb20gJy4vdHlwZXMuanMnICovXG5pbXBvcnQgeyBERVYgfSBmcm9tICdlc20tZW52JztcbmltcG9ydCB7XG5cdFBST1BTX0lTX0JJTkRBQkxFLFxuXHRQUk9QU19JU19JTU1VVEFCTEUsXG5cdFBST1BTX0lTX0xBWllfSU5JVElBTCxcblx0UFJPUFNfSVNfUlVORVMsXG5cdFBST1BTX0lTX1VQREFURURcbn0gZnJvbSAnLi4vLi4vLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IGdldF9kZXNjcmlwdG9yLCBpc19mdW5jdGlvbiB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5pbXBvcnQgeyBtdXRhYmxlX3NvdXJjZSwgc2V0LCBzb3VyY2UgfSBmcm9tICcuL3NvdXJjZXMuanMnO1xuaW1wb3J0IHsgZGVyaXZlZCwgZGVyaXZlZF9zYWZlX2VxdWFsIH0gZnJvbSAnLi9kZXJpdmVkcy5qcyc7XG5pbXBvcnQge1xuXHRhY3RpdmVfZWZmZWN0LFxuXHRnZXQsXG5cdGNhcHR1cmVkX3NpZ25hbHMsXG5cdHNldF9hY3RpdmVfZWZmZWN0LFxuXHR1bnRyYWNrLFxuXHR1cGRhdGVcbn0gZnJvbSAnLi4vcnVudGltZS5qcyc7XG5pbXBvcnQgeyBzYWZlX2VxdWFscyB9IGZyb20gJy4vZXF1YWxpdHkuanMnO1xuaW1wb3J0ICogYXMgZSBmcm9tICcuLi9lcnJvcnMuanMnO1xuaW1wb3J0IHtcblx0QlJBTkNIX0VGRkVDVCxcblx0TEVHQUNZX0RFUklWRURfUFJPUCxcblx0TEVHQUNZX1BST1BTLFxuXHRST09UX0VGRkVDVCxcblx0U1RBVEVfU1lNQk9MXG59IGZyb20gJy4uL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBwcm94eSB9IGZyb20gJy4uL3Byb3h5LmpzJztcbmltcG9ydCB7IGNhcHR1cmVfc3RvcmVfYmluZGluZyB9IGZyb20gJy4vc3RvcmUuanMnO1xuaW1wb3J0IHsgbGVnYWN5X21vZGVfZmxhZyB9IGZyb20gJy4uLy4uL2ZsYWdzL2luZGV4LmpzJztcblxuLyoqXG4gKiBAcGFyYW0geygodmFsdWU/OiBudW1iZXIpID0+IG51bWJlcil9IGZuXG4gKiBAcGFyYW0gezEgfCAtMX0gW2RdXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlX3Byb3AoZm4sIGQgPSAxKSB7XG5cdGNvbnN0IHZhbHVlID0gZm4oKTtcblx0Zm4odmFsdWUgKyBkKTtcblx0cmV0dXJuIHZhbHVlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7KCh2YWx1ZT86IG51bWJlcikgPT4gbnVtYmVyKX0gZm5cbiAqIEBwYXJhbSB7MSB8IC0xfSBbZF1cbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVfcHJlX3Byb3AoZm4sIGQgPSAxKSB7XG5cdGNvbnN0IHZhbHVlID0gZm4oKSArIGQ7XG5cdGZuKHZhbHVlKTtcblx0cmV0dXJuIHZhbHVlO1xufVxuXG4vKipcbiAqIFRoZSBwcm94eSBoYW5kbGVyIGZvciByZXN0IHByb3BzIChpLmUuIGBjb25zdCB7IHgsIC4uLnJlc3QgfSA9ICRwcm9wcygpYCkuXG4gKiBJcyBwYXNzZWQgdGhlIGZ1bGwgYCQkcHJvcHNgIG9iamVjdCBhbmQgZXhjbHVkZXMgdGhlIG5hbWVkIHByb3BzLlxuICogQHR5cGUge1Byb3h5SGFuZGxlcjx7IHByb3BzOiBSZWNvcmQ8c3RyaW5nIHwgc3ltYm9sLCB1bmtub3duPiwgZXhjbHVkZTogQXJyYXk8c3RyaW5nIHwgc3ltYm9sPiwgbmFtZT86IHN0cmluZyB9Pn19XG4gKi9cbmNvbnN0IHJlc3RfcHJvcHNfaGFuZGxlciA9IHtcblx0Z2V0KHRhcmdldCwga2V5KSB7XG5cdFx0aWYgKHRhcmdldC5leGNsdWRlLmluY2x1ZGVzKGtleSkpIHJldHVybjtcblx0XHRyZXR1cm4gdGFyZ2V0LnByb3BzW2tleV07XG5cdH0sXG5cdHNldCh0YXJnZXQsIGtleSkge1xuXHRcdGlmIChERVYpIHtcblx0XHRcdC8vIFRPRE8gc2hvdWxkIHRoaXMgaGFwcGVuIGluIHByb2QgdG9vP1xuXHRcdFx0ZS5wcm9wc19yZXN0X3JlYWRvbmx5KGAke3RhcmdldC5uYW1lfS4ke1N0cmluZyhrZXkpfWApO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblx0Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSB7XG5cdFx0aWYgKHRhcmdldC5leGNsdWRlLmluY2x1ZGVzKGtleSkpIHJldHVybjtcblx0XHRpZiAoa2V5IGluIHRhcmdldC5wcm9wcykge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0XHR2YWx1ZTogdGFyZ2V0LnByb3BzW2tleV1cblx0XHRcdH07XG5cdFx0fVxuXHR9LFxuXHRoYXModGFyZ2V0LCBrZXkpIHtcblx0XHRpZiAodGFyZ2V0LmV4Y2x1ZGUuaW5jbHVkZXMoa2V5KSkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiBrZXkgaW4gdGFyZ2V0LnByb3BzO1xuXHR9LFxuXHRvd25LZXlzKHRhcmdldCkge1xuXHRcdHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0LnByb3BzKS5maWx0ZXIoKGtleSkgPT4gIXRhcmdldC5leGNsdWRlLmluY2x1ZGVzKGtleSkpO1xuXHR9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7UmVjb3JkPHN0cmluZywgdW5rbm93bj59IHByb3BzXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBleGNsdWRlXG4gKiBAcGFyYW0ge3N0cmluZ30gW25hbWVdXG4gKiBAcmV0dXJucyB7UmVjb3JkPHN0cmluZywgdW5rbm93bj59XG4gKi9cbi8qI19fTk9fU0lERV9FRkZFQ1RTX18qL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc3RfcHJvcHMocHJvcHMsIGV4Y2x1ZGUsIG5hbWUpIHtcblx0cmV0dXJuIG5ldyBQcm94eShcblx0XHRERVYgPyB7IHByb3BzLCBleGNsdWRlLCBuYW1lLCBvdGhlcjoge30sIHRvX3Byb3h5OiBbXSB9IDogeyBwcm9wcywgZXhjbHVkZSB9LFxuXHRcdHJlc3RfcHJvcHNfaGFuZGxlclxuXHQpO1xufVxuXG4vKipcbiAqIFRoZSBwcm94eSBoYW5kbGVyIGZvciBsZWdhY3kgJCRyZXN0UHJvcHMgYW5kICQkcHJvcHNcbiAqIEB0eXBlIHtQcm94eUhhbmRsZXI8eyBwcm9wczogUmVjb3JkPHN0cmluZyB8IHN5bWJvbCwgdW5rbm93bj4sIGV4Y2x1ZGU6IEFycmF5PHN0cmluZyB8IHN5bWJvbD4sIHNwZWNpYWw6IFJlY29yZDxzdHJpbmcgfCBzeW1ib2wsICh2PzogdW5rbm93bikgPT4gdW5rbm93bj4sIHZlcnNpb246IFNvdXJjZTxudW1iZXI+IH0+fX1cbiAqL1xuY29uc3QgbGVnYWN5X3Jlc3RfcHJvcHNfaGFuZGxlciA9IHtcblx0Z2V0KHRhcmdldCwga2V5KSB7XG5cdFx0aWYgKHRhcmdldC5leGNsdWRlLmluY2x1ZGVzKGtleSkpIHJldHVybjtcblx0XHRnZXQodGFyZ2V0LnZlcnNpb24pO1xuXHRcdHJldHVybiBrZXkgaW4gdGFyZ2V0LnNwZWNpYWwgPyB0YXJnZXQuc3BlY2lhbFtrZXldKCkgOiB0YXJnZXQucHJvcHNba2V5XTtcblx0fSxcblx0c2V0KHRhcmdldCwga2V5LCB2YWx1ZSkge1xuXHRcdGlmICghKGtleSBpbiB0YXJnZXQuc3BlY2lhbCkpIHtcblx0XHRcdC8vIEhhbmRsZSBwcm9wcyB0aGF0IGNhbiB0ZW1wb3JhcmlseSBnZXQgb3V0IG9mIHN5bmMgd2l0aCB0aGUgcGFyZW50XG5cdFx0XHQvKiogQHR5cGUge1JlY29yZDxzdHJpbmcsICh2PzogdW5rbm93bikgPT4gdW5rbm93bj59ICovXG5cdFx0XHR0YXJnZXQuc3BlY2lhbFtrZXldID0gcHJvcChcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGdldCBba2V5XSgpIHtcblx0XHRcdFx0XHRcdHJldHVybiB0YXJnZXQucHJvcHNba2V5XTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoa2V5KSxcblx0XHRcdFx0UFJPUFNfSVNfVVBEQVRFRFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHR0YXJnZXQuc3BlY2lhbFtrZXldKHZhbHVlKTtcblx0XHR1cGRhdGUodGFyZ2V0LnZlcnNpb24pOyAvLyAkJHByb3BzIGlzIGNvYXJzZS1ncmFpbmVkOiB3aGVuICQkcHJvcHMueCBpcyB1cGRhdGVkLCB1c2FnZXMgb2YgJCRwcm9wcy55IGV0YyBhcmUgYWxzbyByZXJ1blxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXHRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIHtcblx0XHRpZiAodGFyZ2V0LmV4Y2x1ZGUuaW5jbHVkZXMoa2V5KSkgcmV0dXJuO1xuXHRcdGlmIChrZXkgaW4gdGFyZ2V0LnByb3BzKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0XHRcdHZhbHVlOiB0YXJnZXQucHJvcHNba2V5XVxuXHRcdFx0fTtcblx0XHR9XG5cdH0sXG5cdGRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KSB7XG5cdFx0Ly8gU3ZlbHRlIDQgYWxsb3dlZCBmb3IgZGVsZXRpb25zIG9uICQkcmVzdFByb3BzXG5cdFx0aWYgKHRhcmdldC5leGNsdWRlLmluY2x1ZGVzKGtleSkpIHJldHVybiB0cnVlO1xuXHRcdHRhcmdldC5leGNsdWRlLnB1c2goa2V5KTtcblx0XHR1cGRhdGUodGFyZ2V0LnZlcnNpb24pO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXHRoYXModGFyZ2V0LCBrZXkpIHtcblx0XHRpZiAodGFyZ2V0LmV4Y2x1ZGUuaW5jbHVkZXMoa2V5KSkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiBrZXkgaW4gdGFyZ2V0LnByb3BzO1xuXHR9LFxuXHRvd25LZXlzKHRhcmdldCkge1xuXHRcdHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0LnByb3BzKS5maWx0ZXIoKGtleSkgPT4gIXRhcmdldC5leGNsdWRlLmluY2x1ZGVzKGtleSkpO1xuXHR9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7UmVjb3JkPHN0cmluZywgdW5rbm93bj59IHByb3BzXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBleGNsdWRlXG4gKiBAcmV0dXJucyB7UmVjb3JkPHN0cmluZywgdW5rbm93bj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZWdhY3lfcmVzdF9wcm9wcyhwcm9wcywgZXhjbHVkZSkge1xuXHRyZXR1cm4gbmV3IFByb3h5KHsgcHJvcHMsIGV4Y2x1ZGUsIHNwZWNpYWw6IHt9LCB2ZXJzaW9uOiBzb3VyY2UoMCkgfSwgbGVnYWN5X3Jlc3RfcHJvcHNfaGFuZGxlcik7XG59XG5cbi8qKlxuICogVGhlIHByb3h5IGhhbmRsZXIgZm9yIHNwcmVhZCBwcm9wcy4gSGFuZGxlcyB0aGUgaW5jb21pbmcgYXJyYXkgb2YgcHJvcHNcbiAqIHRoYXQgbG9va3MgbGlrZSBgKCkgPT4geyBkeW5hbWljOiBwcm9wcyB9LCB7IHN0YXRpYzogcHJvcCB9LCAuLmAgYW5kIHdyYXBzXG4gKiB0aGVtIHNvIHRoYXQgdGhlIHdob2xlIHRoaW5nIGlzIHBhc3NlZCB0byB0aGUgY29tcG9uZW50IGFzIHRoZSBgJCRwcm9wc2AgYXJndW1lbnQuXG4gKiBAdGVtcGxhdGUge1JlY29yZDxzdHJpbmcgfCBzeW1ib2wsIHVua25vd24+fSBUXG4gKiBAdHlwZSB7UHJveHlIYW5kbGVyPHsgcHJvcHM6IEFycmF5PFQgfCAoKCkgPT4gVCk+IH0+fX1cbiAqL1xuY29uc3Qgc3ByZWFkX3Byb3BzX2hhbmRsZXIgPSB7XG5cdGdldCh0YXJnZXQsIGtleSkge1xuXHRcdGxldCBpID0gdGFyZ2V0LnByb3BzLmxlbmd0aDtcblx0XHR3aGlsZSAoaS0tKSB7XG5cdFx0XHRsZXQgcCA9IHRhcmdldC5wcm9wc1tpXTtcblx0XHRcdGlmIChpc19mdW5jdGlvbihwKSkgcCA9IHAoKTtcblx0XHRcdGlmICh0eXBlb2YgcCA9PT0gJ29iamVjdCcgJiYgcCAhPT0gbnVsbCAmJiBrZXkgaW4gcCkgcmV0dXJuIHBba2V5XTtcblx0XHR9XG5cdH0sXG5cdHNldCh0YXJnZXQsIGtleSwgdmFsdWUpIHtcblx0XHRsZXQgaSA9IHRhcmdldC5wcm9wcy5sZW5ndGg7XG5cdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0bGV0IHAgPSB0YXJnZXQucHJvcHNbaV07XG5cdFx0XHRpZiAoaXNfZnVuY3Rpb24ocCkpIHAgPSBwKCk7XG5cdFx0XHRjb25zdCBkZXNjID0gZ2V0X2Rlc2NyaXB0b3IocCwga2V5KTtcblx0XHRcdGlmIChkZXNjICYmIGRlc2Muc2V0KSB7XG5cdFx0XHRcdGRlc2Muc2V0KHZhbHVlKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblx0Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSB7XG5cdFx0bGV0IGkgPSB0YXJnZXQucHJvcHMubGVuZ3RoO1xuXHRcdHdoaWxlIChpLS0pIHtcblx0XHRcdGxldCBwID0gdGFyZ2V0LnByb3BzW2ldO1xuXHRcdFx0aWYgKGlzX2Z1bmN0aW9uKHApKSBwID0gcCgpO1xuXHRcdFx0aWYgKHR5cGVvZiBwID09PSAnb2JqZWN0JyAmJiBwICE9PSBudWxsICYmIGtleSBpbiBwKSB7XG5cdFx0XHRcdGNvbnN0IGRlc2NyaXB0b3IgPSBnZXRfZGVzY3JpcHRvcihwLCBrZXkpO1xuXHRcdFx0XHRpZiAoZGVzY3JpcHRvciAmJiAhZGVzY3JpcHRvci5jb25maWd1cmFibGUpIHtcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGEgXCJOb24tY29uZmlndXJhYmlsaXR5IFJlcG9ydCBFcnJvclwiOiBUaGUgdGFyZ2V0IGlzIGFuIGFycmF5LCBpdCBkb2VzXG5cdFx0XHRcdFx0Ly8gbm90IGFjdHVhbGx5IGNvbnRhaW4gdGhpcyBwcm9wZXJ0eS4gSWYgaXQgaXMgbm93IGRlc2NyaWJlZCBhcyBub24tY29uZmlndXJhYmxlLFxuXHRcdFx0XHRcdC8vIHRoZSBwcm94eSB0aHJvd3MgYSB2YWxpZGF0aW9uIGVycm9yLiBTZXR0aW5nIGl0IHRvIHRydWUgYXZvaWRzIHRoYXQuXG5cdFx0XHRcdFx0ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBkZXNjcmlwdG9yO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0aGFzKHRhcmdldCwga2V5KSB7XG5cdFx0Ly8gVG8gcHJldmVudCBhIGZhbHNlIHBvc2l0aXZlIGBpc19lbnRyeV9wcm9wc2AgaW4gdGhlIGBwcm9wYCBmdW5jdGlvblxuXHRcdGlmIChrZXkgPT09IFNUQVRFX1NZTUJPTCB8fCBrZXkgPT09IExFR0FDWV9QUk9QUykgcmV0dXJuIGZhbHNlO1xuXG5cdFx0Zm9yIChsZXQgcCBvZiB0YXJnZXQucHJvcHMpIHtcblx0XHRcdGlmIChpc19mdW5jdGlvbihwKSkgcCA9IHAoKTtcblx0XHRcdGlmIChwICE9IG51bGwgJiYga2V5IGluIHApIHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblx0b3duS2V5cyh0YXJnZXQpIHtcblx0XHQvKiogQHR5cGUge0FycmF5PHN0cmluZyB8IHN5bWJvbD59ICovXG5cdFx0Y29uc3Qga2V5cyA9IFtdO1xuXG5cdFx0Zm9yIChsZXQgcCBvZiB0YXJnZXQucHJvcHMpIHtcblx0XHRcdGlmIChpc19mdW5jdGlvbihwKSkgcCA9IHAoKTtcblx0XHRcdGZvciAoY29uc3Qga2V5IGluIHApIHtcblx0XHRcdFx0aWYgKCFrZXlzLmluY2x1ZGVzKGtleSkpIGtleXMucHVzaChrZXkpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBrZXlzO1xuXHR9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8UmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCAoKCkgPT4gUmVjb3JkPHN0cmluZywgdW5rbm93bj4pPn0gcHJvcHNcbiAqIEByZXR1cm5zIHthbnl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcHJlYWRfcHJvcHMoLi4ucHJvcHMpIHtcblx0cmV0dXJuIG5ldyBQcm94eSh7IHByb3BzIH0sIHNwcmVhZF9wcm9wc19oYW5kbGVyKTtcbn1cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHsoKSA9PiBUfSBmblxuICogQHJldHVybnMge1R9XG4gKi9cbmZ1bmN0aW9uIHdpdGhfcGFyZW50X2JyYW5jaChmbikge1xuXHR2YXIgZWZmZWN0ID0gYWN0aXZlX2VmZmVjdDtcblx0dmFyIHByZXZpb3VzX2VmZmVjdCA9IGFjdGl2ZV9lZmZlY3Q7XG5cblx0d2hpbGUgKGVmZmVjdCAhPT0gbnVsbCAmJiAoZWZmZWN0LmYgJiAoQlJBTkNIX0VGRkVDVCB8IFJPT1RfRUZGRUNUKSkgPT09IDApIHtcblx0XHRlZmZlY3QgPSBlZmZlY3QucGFyZW50O1xuXHR9XG5cdHRyeSB7XG5cdFx0c2V0X2FjdGl2ZV9lZmZlY3QoZWZmZWN0KTtcblx0XHRyZXR1cm4gZm4oKTtcblx0fSBmaW5hbGx5IHtcblx0XHRzZXRfYWN0aXZlX2VmZmVjdChwcmV2aW91c19lZmZlY3QpO1xuXHR9XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3Igc3luY2hyb25pemluZyBhIHBvc3NpYmx5IGJvdW5kIHByb3Agd2l0aCB0aGUgaW5uZXIgY29tcG9uZW50IHN0YXRlLlxuICogSXQgaXMgdXNlZCB3aGVuZXZlciB0aGUgY29tcGlsZXIgc2VlcyB0aGF0IHRoZSBjb21wb25lbnQgd3JpdGVzIHRvIHRoZSBwcm9wLCBvciB3aGVuIGl0IGhhcyBhIGRlZmF1bHQgcHJvcF92YWx1ZS5cbiAqIEB0ZW1wbGF0ZSBWXG4gKiBAcGFyYW0ge1JlY29yZDxzdHJpbmcsIHVua25vd24+fSBwcm9wc1xuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICogQHBhcmFtIHtudW1iZXJ9IGZsYWdzXG4gKiBAcGFyYW0ge1YgfCAoKCkgPT4gVil9IFtmYWxsYmFja11cbiAqIEByZXR1cm5zIHsoKCkgPT4gViB8ICgoYXJnOiBWKSA9PiBWKSB8ICgoYXJnOiBWLCBtdXRhdGlvbjogYm9vbGVhbikgPT4gVikpfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvcChwcm9wcywga2V5LCBmbGFncywgZmFsbGJhY2spIHtcblx0dmFyIGltbXV0YWJsZSA9IChmbGFncyAmIFBST1BTX0lTX0lNTVVUQUJMRSkgIT09IDA7XG5cdHZhciBydW5lcyA9ICFsZWdhY3lfbW9kZV9mbGFnIHx8IChmbGFncyAmIFBST1BTX0lTX1JVTkVTKSAhPT0gMDtcblx0dmFyIGJpbmRhYmxlID0gKGZsYWdzICYgUFJPUFNfSVNfQklOREFCTEUpICE9PSAwO1xuXHR2YXIgbGF6eSA9IChmbGFncyAmIFBST1BTX0lTX0xBWllfSU5JVElBTCkgIT09IDA7XG5cdHZhciBpc19zdG9yZV9zdWIgPSBmYWxzZTtcblx0dmFyIHByb3BfdmFsdWU7XG5cblx0aWYgKGJpbmRhYmxlKSB7XG5cdFx0W3Byb3BfdmFsdWUsIGlzX3N0b3JlX3N1Yl0gPSBjYXB0dXJlX3N0b3JlX2JpbmRpbmcoKCkgPT4gLyoqIEB0eXBlIHtWfSAqLyAocHJvcHNba2V5XSkpO1xuXHR9IGVsc2Uge1xuXHRcdHByb3BfdmFsdWUgPSAvKiogQHR5cGUge1Z9ICovIChwcm9wc1trZXldKTtcblx0fVxuXG5cdC8vIENhbiBiZSB0aGUgY2FzZSB3aGVuIHNvbWVvbmUgZG9lcyBgbW91bnQoQ29tcG9uZW50LCBwcm9wcylgIHdpdGggYGxldCBwcm9wcyA9ICRzdGF0ZSh7Li4ufSlgXG5cdC8vIG9yIGBjcmVhdGVDbGFzc0NvbXBvbmVudChDb21wb25lbnQsIHByb3BzKWBcblx0dmFyIGlzX2VudHJ5X3Byb3BzID0gU1RBVEVfU1lNQk9MIGluIHByb3BzIHx8IExFR0FDWV9QUk9QUyBpbiBwcm9wcztcblxuXHR2YXIgc2V0dGVyID1cblx0XHRnZXRfZGVzY3JpcHRvcihwcm9wcywga2V5KT8uc2V0ID8/XG5cdFx0KGlzX2VudHJ5X3Byb3BzICYmIGJpbmRhYmxlICYmIGtleSBpbiBwcm9wcyA/ICh2KSA9PiAocHJvcHNba2V5XSA9IHYpIDogdW5kZWZpbmVkKTtcblxuXHR2YXIgZmFsbGJhY2tfdmFsdWUgPSAvKiogQHR5cGUge1Z9ICovIChmYWxsYmFjayk7XG5cdHZhciBmYWxsYmFja19kaXJ0eSA9IHRydWU7XG5cdHZhciBmYWxsYmFja191c2VkID0gZmFsc2U7XG5cblx0dmFyIGdldF9mYWxsYmFjayA9ICgpID0+IHtcblx0XHRmYWxsYmFja191c2VkID0gdHJ1ZTtcblx0XHRpZiAoZmFsbGJhY2tfZGlydHkpIHtcblx0XHRcdGZhbGxiYWNrX2RpcnR5ID0gZmFsc2U7XG5cdFx0XHRpZiAobGF6eSkge1xuXHRcdFx0XHRmYWxsYmFja192YWx1ZSA9IHVudHJhY2soLyoqIEB0eXBlIHsoKSA9PiBWfSAqLyAoZmFsbGJhY2spKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZhbGxiYWNrX3ZhbHVlID0gLyoqIEB0eXBlIHtWfSAqLyAoZmFsbGJhY2spO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxsYmFja192YWx1ZTtcblx0fTtcblxuXHRpZiAocHJvcF92YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGZhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcblx0XHRpZiAoc2V0dGVyICYmIHJ1bmVzKSB7XG5cdFx0XHRlLnByb3BzX2ludmFsaWRfdmFsdWUoa2V5KTtcblx0XHR9XG5cblx0XHRwcm9wX3ZhbHVlID0gZ2V0X2ZhbGxiYWNrKCk7XG5cdFx0aWYgKHNldHRlcikgc2V0dGVyKHByb3BfdmFsdWUpO1xuXHR9XG5cblx0LyoqIEB0eXBlIHsoKSA9PiBWfSAqL1xuXHR2YXIgZ2V0dGVyO1xuXHRpZiAocnVuZXMpIHtcblx0XHRnZXR0ZXIgPSAoKSA9PiB7XG5cdFx0XHR2YXIgdmFsdWUgPSAvKiogQHR5cGUge1Z9ICovIChwcm9wc1trZXldKTtcblx0XHRcdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZ2V0X2ZhbGxiYWNrKCk7XG5cdFx0XHRmYWxsYmFja19kaXJ0eSA9IHRydWU7XG5cdFx0XHRmYWxsYmFja191c2VkID0gZmFsc2U7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHQvLyBTdmVsdGUgNCBkaWQgbm90IHRyaWdnZXIgdXBkYXRlcyB3aGVuIGEgcHJpbWl0aXZlIHZhbHVlIHdhcyB1cGRhdGVkIHRvIHRoZSBzYW1lIHZhbHVlLlxuXHRcdC8vIFJlcGxpY2F0ZSB0aGF0IGJlaGF2aW9yIHRocm91Z2ggdXNpbmcgYSBkZXJpdmVkXG5cdFx0dmFyIGRlcml2ZWRfZ2V0dGVyID0gd2l0aF9wYXJlbnRfYnJhbmNoKCgpID0+XG5cdFx0XHQoaW1tdXRhYmxlID8gZGVyaXZlZCA6IGRlcml2ZWRfc2FmZV9lcXVhbCkoKCkgPT4gLyoqIEB0eXBlIHtWfSAqLyAocHJvcHNba2V5XSkpXG5cdFx0KTtcblx0XHRkZXJpdmVkX2dldHRlci5mIHw9IExFR0FDWV9ERVJJVkVEX1BST1A7XG5cdFx0Z2V0dGVyID0gKCkgPT4ge1xuXHRcdFx0dmFyIHZhbHVlID0gZ2V0KGRlcml2ZWRfZ2V0dGVyKTtcblx0XHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSBmYWxsYmFja192YWx1ZSA9IC8qKiBAdHlwZSB7Vn0gKi8gKHVuZGVmaW5lZCk7XG5cdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IGZhbGxiYWNrX3ZhbHVlIDogdmFsdWU7XG5cdFx0fTtcblx0fVxuXG5cdC8vIGVhc3kgbW9kZSBcdTIwMTQgcHJvcCBpcyBuZXZlciB3cml0dGVuIHRvXG5cdGlmICgoZmxhZ3MgJiBQUk9QU19JU19VUERBVEVEKSA9PT0gMCkge1xuXHRcdHJldHVybiBnZXR0ZXI7XG5cdH1cblxuXHQvLyBpbnRlcm1lZGlhdGUgbW9kZSBcdTIwMTQgcHJvcCBpcyB3cml0dGVuIHRvLCBidXQgdGhlIHBhcmVudCBjb21wb25lbnQgaGFkXG5cdC8vIGBiaW5kOmZvb2Agd2hpY2ggbWVhbnMgd2UgY2FuIGp1c3QgY2FsbCBgJCRwcm9wcy5mb28gPSB2YWx1ZWAgZGlyZWN0bHlcblx0aWYgKHNldHRlcikge1xuXHRcdHZhciBsZWdhY3lfcGFyZW50ID0gcHJvcHMuJCRsZWdhY3k7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uICgvKiogQHR5cGUge2FueX0gKi8gdmFsdWUsIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gbXV0YXRpb24pIHtcblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQvLyBXZSBkb24ndCB3YW50IHRvIG5vdGlmeSBpZiB0aGUgdmFsdWUgd2FzIG11dGF0ZWQgYW5kIHRoZSBwYXJlbnQgaXMgaW4gcnVuZXMgbW9kZS5cblx0XHRcdFx0Ly8gSW4gdGhhdCBjYXNlIHRoZSBzdGF0ZSBwcm94eSAoaWYgaXQgZXhpc3RzKSBzaG91bGQgdGFrZSBjYXJlIG9mIHRoZSBub3RpZmljYXRpb24uXG5cdFx0XHRcdC8vIElmIHRoZSBwYXJlbnQgaXMgbm90IGluIHJ1bmVzIG1vZGUsIHdlIG5lZWQgdG8gbm90aWZ5IG9uIG11dGF0aW9uLCB0b28sIHRoYXQgdGhlIHByb3Bcblx0XHRcdFx0Ly8gaGFzIGNoYW5nZWQgYmVjYXVzZSB0aGUgcGFyZW50IHdpbGwgbm90IGJlIGFibGUgdG8gZGV0ZWN0IHRoZSBjaGFuZ2Ugb3RoZXJ3aXNlLlxuXHRcdFx0XHRpZiAoIXJ1bmVzIHx8ICFtdXRhdGlvbiB8fCBsZWdhY3lfcGFyZW50IHx8IGlzX3N0b3JlX3N1Yikge1xuXHRcdFx0XHRcdC8qKiBAdHlwZSB7RnVuY3Rpb259ICovIChzZXR0ZXIpKG11dGF0aW9uID8gZ2V0dGVyKCkgOiB2YWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGdldHRlcigpO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvLyBoYXJkIG1vZGUuIHRoaXMgaXMgd2hlcmUgaXQgZ2V0cyB1Z2x5IFx1MjAxNCB0aGUgdmFsdWUgaW4gdGhlIGNoaWxkIHNob3VsZFxuXHQvLyBzeW5jaHJvbml6ZSB3aXRoIHRoZSBwYXJlbnQsIGJ1dCBpdCBzaG91bGQgYWxzbyBiZSBwb3NzaWJsZSB0byB0ZW1wb3JhcmlseVxuXHQvLyBzZXQgdGhlIHZhbHVlIHRvIHNvbWV0aGluZyBlbHNlIGxvY2FsbHkuXG5cdHZhciBmcm9tX2NoaWxkID0gZmFsc2U7XG5cdHZhciB3YXNfZnJvbV9jaGlsZCA9IGZhbHNlO1xuXG5cdC8vIFRoZSBkZXJpdmVkIHJldHVybnMgdGhlIGN1cnJlbnQgdmFsdWUuIFRoZSB1bmRlcmx5aW5nIG11dGFibGVcblx0Ly8gc291cmNlIGlzIHdyaXR0ZW4gdG8gZnJvbSB2YXJpb3VzIHBsYWNlcyB0byBwZXJzaXN0IHRoaXMgdmFsdWUuXG5cdHZhciBpbm5lcl9jdXJyZW50X3ZhbHVlID0gbXV0YWJsZV9zb3VyY2UocHJvcF92YWx1ZSk7XG5cdHZhciBjdXJyZW50X3ZhbHVlID0gd2l0aF9wYXJlbnRfYnJhbmNoKCgpID0+XG5cdFx0ZGVyaXZlZCgoKSA9PiB7XG5cdFx0XHR2YXIgcGFyZW50X3ZhbHVlID0gZ2V0dGVyKCk7XG5cdFx0XHR2YXIgY2hpbGRfdmFsdWUgPSBnZXQoaW5uZXJfY3VycmVudF92YWx1ZSk7XG5cblx0XHRcdGlmIChmcm9tX2NoaWxkKSB7XG5cdFx0XHRcdGZyb21fY2hpbGQgPSBmYWxzZTtcblx0XHRcdFx0d2FzX2Zyb21fY2hpbGQgPSB0cnVlO1xuXHRcdFx0XHRyZXR1cm4gY2hpbGRfdmFsdWU7XG5cdFx0XHR9XG5cblx0XHRcdHdhc19mcm9tX2NoaWxkID0gZmFsc2U7XG5cdFx0XHRyZXR1cm4gKGlubmVyX2N1cnJlbnRfdmFsdWUudiA9IHBhcmVudF92YWx1ZSk7XG5cdFx0fSlcblx0KTtcblxuXHRpZiAoIWltbXV0YWJsZSkgY3VycmVudF92YWx1ZS5lcXVhbHMgPSBzYWZlX2VxdWFscztcblxuXHRyZXR1cm4gZnVuY3Rpb24gKC8qKiBAdHlwZSB7YW55fSAqLyB2YWx1ZSwgLyoqIEB0eXBlIHtib29sZWFufSAqLyBtdXRhdGlvbikge1xuXHRcdC8vIGxlZ2FjeSBub25zZW5zZSBcdTIwMTQgbmVlZCB0byBlbnN1cmUgdGhlIHNvdXJjZSBpcyBpbnZhbGlkYXRlZCB3aGVuIG5lY2Vzc2FyeVxuXHRcdC8vIGFsc28gbmVlZGVkIGZvciB3aGVuIGhhbmRsaW5nIGluc3BlY3QgbG9naWMgc28gd2UgY2FuIGluc3BlY3QgdGhlIGNvcnJlY3Qgc291cmNlIHNpZ25hbFxuXHRcdGlmIChjYXB0dXJlZF9zaWduYWxzICE9PSBudWxsKSB7XG5cdFx0XHQvLyBzZXQgdGhpcyBzbyB0aGF0IHdlIGRvbid0IHJlc2V0IHRvIHRoZSBwYXJlbnQgdmFsdWUgaWYgYGRgXG5cdFx0XHQvLyBpcyBpbnZhbGlkYXRlZCBiZWNhdXNlIG9mIGBpbnZhbGlkYXRlX2lubmVyX3NpZ25hbHNgIChyYXRoZXJcblx0XHRcdC8vIHRoYW4gYmVjYXVzZSB0aGUgcGFyZW50IG9yIGNoaWxkIHZhbHVlIGNoYW5nZWQpXG5cdFx0XHRmcm9tX2NoaWxkID0gd2FzX2Zyb21fY2hpbGQ7XG5cdFx0XHQvLyBpbnZva2UgZ2V0dGVycyBzbyB0aGF0IHNpZ25hbHMgYXJlIHBpY2tlZCB1cCBieSBgaW52YWxpZGF0ZV9pbm5lcl9zaWduYWxzYFxuXHRcdFx0Z2V0dGVyKCk7XG5cdFx0XHRnZXQoaW5uZXJfY3VycmVudF92YWx1ZSk7XG5cdFx0fVxuXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBuZXdfdmFsdWUgPSBtdXRhdGlvbiA/IGdldChjdXJyZW50X3ZhbHVlKSA6IHJ1bmVzICYmIGJpbmRhYmxlID8gcHJveHkodmFsdWUpIDogdmFsdWU7XG5cblx0XHRcdGlmICghY3VycmVudF92YWx1ZS5lcXVhbHMobmV3X3ZhbHVlKSkge1xuXHRcdFx0XHRmcm9tX2NoaWxkID0gdHJ1ZTtcblx0XHRcdFx0c2V0KGlubmVyX2N1cnJlbnRfdmFsdWUsIG5ld192YWx1ZSk7XG5cdFx0XHRcdC8vIFRvIGVuc3VyZSB0aGUgZmFsbGJhY2sgdmFsdWUgaXMgY29uc2lzdGVudCB3aGVuIHVzZWQgd2l0aCBwcm94aWVzLCB3ZVxuXHRcdFx0XHQvLyB1cGRhdGUgdGhlIGxvY2FsIGZhbGxiYWNrX3ZhbHVlLCBidXQgb25seSBpZiB0aGUgZmFsbGJhY2sgaXMgYWN0aXZlbHkgdXNlZFxuXHRcdFx0XHRpZiAoZmFsbGJhY2tfdXNlZCAmJiBmYWxsYmFja192YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0ZmFsbGJhY2tfdmFsdWUgPSBuZXdfdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0dW50cmFjaygoKSA9PiBnZXQoY3VycmVudF92YWx1ZSkpOyAvLyBmb3JjZSBhIHN5bmNocm9uaXNhdGlvbiBpbW1lZGlhdGVseVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXHRcdHJldHVybiBnZXQoY3VycmVudF92YWx1ZSk7XG5cdH07XG59XG4iLCAiLyoqIEBpbXBvcnQgeyBDb21wb25lbnRDb25zdHJ1Y3Rvck9wdGlvbnMsIENvbXBvbmVudFR5cGUsIFN2ZWx0ZUNvbXBvbmVudCwgQ29tcG9uZW50IH0gZnJvbSAnc3ZlbHRlJyAqL1xuaW1wb3J0IHsgRElSVFksIExFR0FDWV9QUk9QUywgTUFZQkVfRElSVFkgfSBmcm9tICcuLi9pbnRlcm5hbC9jbGllbnQvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IHVzZXJfcHJlX2VmZmVjdCB9IGZyb20gJy4uL2ludGVybmFsL2NsaWVudC9yZWFjdGl2aXR5L2VmZmVjdHMuanMnO1xuaW1wb3J0IHsgbXV0YWJsZV9zb3VyY2UsIHNldCB9IGZyb20gJy4uL2ludGVybmFsL2NsaWVudC9yZWFjdGl2aXR5L3NvdXJjZXMuanMnO1xuaW1wb3J0IHsgaHlkcmF0ZSwgbW91bnQsIHVubW91bnQgfSBmcm9tICcuLi9pbnRlcm5hbC9jbGllbnQvcmVuZGVyLmpzJztcbmltcG9ydCB7XG5cdGFjdGl2ZV9lZmZlY3QsXG5cdGNvbXBvbmVudF9jb250ZXh0LFxuXHRkZXZfY3VycmVudF9jb21wb25lbnRfZnVuY3Rpb24sXG5cdGZsdXNoX3N5bmMsXG5cdGdldCxcblx0c2V0X3NpZ25hbF9zdGF0dXNcbn0gZnJvbSAnLi4vaW50ZXJuYWwvY2xpZW50L3J1bnRpbWUuanMnO1xuaW1wb3J0IHsgbGlmZWN5Y2xlX291dHNpZGVfY29tcG9uZW50IH0gZnJvbSAnLi4vaW50ZXJuYWwvc2hhcmVkL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBkZWZpbmVfcHJvcGVydHksIGlzX2FycmF5IH0gZnJvbSAnLi4vaW50ZXJuYWwvc2hhcmVkL3V0aWxzLmpzJztcbmltcG9ydCAqIGFzIHcgZnJvbSAnLi4vaW50ZXJuYWwvY2xpZW50L3dhcm5pbmdzLmpzJztcbmltcG9ydCB7IERFViB9IGZyb20gJ2VzbS1lbnYnO1xuaW1wb3J0IHsgRklMRU5BTUUgfSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuXG4vKipcbiAqIFRha2VzIHRoZSBzYW1lIG9wdGlvbnMgYXMgYSBTdmVsdGUgNCBjb21wb25lbnQgYW5kIHRoZSBjb21wb25lbnQgZnVuY3Rpb24gYW5kIHJldHVybnMgYSBTdmVsdGUgNCBjb21wYXRpYmxlIGNvbXBvbmVudC5cbiAqXG4gKiBAZGVwcmVjYXRlZCBVc2UgdGhpcyBvbmx5IGFzIGEgdGVtcG9yYXJ5IHNvbHV0aW9uIHRvIG1pZ3JhdGUgeW91ciBpbXBlcmF0aXZlIGNvbXBvbmVudCBjb2RlIHRvIFN2ZWx0ZSA1LlxuICpcbiAqIEB0ZW1wbGF0ZSB7UmVjb3JkPHN0cmluZywgYW55Pn0gUHJvcHNcbiAqIEB0ZW1wbGF0ZSB7UmVjb3JkPHN0cmluZywgYW55Pn0gRXhwb3J0c1xuICogQHRlbXBsYXRlIHtSZWNvcmQ8c3RyaW5nLCBhbnk+fSBFdmVudHNcbiAqIEB0ZW1wbGF0ZSB7UmVjb3JkPHN0cmluZywgYW55Pn0gU2xvdHNcbiAqXG4gKiBAcGFyYW0ge0NvbXBvbmVudENvbnN0cnVjdG9yT3B0aW9uczxQcm9wcz4gJiB7XG4gKiBcdGNvbXBvbmVudDogQ29tcG9uZW50VHlwZTxTdmVsdGVDb21wb25lbnQ8UHJvcHMsIEV2ZW50cywgU2xvdHM+PiB8IENvbXBvbmVudDxQcm9wcz47XG4gKiB9fSBvcHRpb25zXG4gKiBAcmV0dXJucyB7U3ZlbHRlQ29tcG9uZW50PFByb3BzLCBFdmVudHMsIFNsb3RzPiAmIEV4cG9ydHN9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDbGFzc0NvbXBvbmVudChvcHRpb25zKSB7XG5cdC8vIEB0cy1leHBlY3QtZXJyb3IgJCRwcm9wX2RlZiBldGMgYXJlIG5vdCBhY3R1YWxseSBkZWZpbmVkXG5cdHJldHVybiBuZXcgU3ZlbHRlNENvbXBvbmVudChvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBUYWtlcyB0aGUgY29tcG9uZW50IGZ1bmN0aW9uIGFuZCByZXR1cm5zIGEgU3ZlbHRlIDQgY29tcGF0aWJsZSBjb21wb25lbnQgY29uc3RydWN0b3IuXG4gKlxuICogQGRlcHJlY2F0ZWQgVXNlIHRoaXMgb25seSBhcyBhIHRlbXBvcmFyeSBzb2x1dGlvbiB0byBtaWdyYXRlIHlvdXIgaW1wZXJhdGl2ZSBjb21wb25lbnQgY29kZSB0byBTdmVsdGUgNS5cbiAqXG4gKiBAdGVtcGxhdGUge1JlY29yZDxzdHJpbmcsIGFueT59IFByb3BzXG4gKiBAdGVtcGxhdGUge1JlY29yZDxzdHJpbmcsIGFueT59IEV4cG9ydHNcbiAqIEB0ZW1wbGF0ZSB7UmVjb3JkPHN0cmluZywgYW55Pn0gRXZlbnRzXG4gKiBAdGVtcGxhdGUge1JlY29yZDxzdHJpbmcsIGFueT59IFNsb3RzXG4gKlxuICogQHBhcmFtIHtTdmVsdGVDb21wb25lbnQ8UHJvcHMsIEV2ZW50cywgU2xvdHM+IHwgQ29tcG9uZW50PFByb3BzPn0gY29tcG9uZW50XG4gKiBAcmV0dXJucyB7Q29tcG9uZW50VHlwZTxTdmVsdGVDb21wb25lbnQ8UHJvcHMsIEV2ZW50cywgU2xvdHM+ICYgRXhwb3J0cz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc0NsYXNzQ29tcG9uZW50KGNvbXBvbmVudCkge1xuXHQvLyBAdHMtZXhwZWN0LWVycm9yICQkcHJvcF9kZWYgZXRjIGFyZSBub3QgYWN0dWFsbHkgZGVmaW5lZFxuXHRyZXR1cm4gY2xhc3MgZXh0ZW5kcyBTdmVsdGU0Q29tcG9uZW50IHtcblx0XHQvKiogQHBhcmFtIHthbnl9IG9wdGlvbnMgKi9cblx0XHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0XHRzdXBlcih7XG5cdFx0XHRcdGNvbXBvbmVudCxcblx0XHRcdFx0Li4ub3B0aW9uc1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xufVxuXG4vKipcbiAqIFN1cHBvcnQgdXNpbmcgdGhlIGNvbXBvbmVudCBhcyBib3RoIGEgY2xhc3MgYW5kIGZ1bmN0aW9uIGR1cmluZyB0aGUgdHJhbnNpdGlvbiBwZXJpb2RcbiAqIEB0eXBlZGVmICB7e25ldyAobzogQ29tcG9uZW50Q29uc3RydWN0b3JPcHRpb25zKTogU3ZlbHRlQ29tcG9uZW50OyguLi5hcmdzOiBQYXJhbWV0ZXJzPENvbXBvbmVudDxSZWNvcmQ8c3RyaW5nLCBhbnk+Pj4pOiBSZXR1cm5UeXBlPENvbXBvbmVudDxSZWNvcmQ8c3RyaW5nLCBhbnk+LCBSZWNvcmQ8c3RyaW5nLCBhbnk+Pj47fX0gTGVnYWN5Q29tcG9uZW50VHlwZVxuICovXG5cbmNsYXNzIFN2ZWx0ZTRDb21wb25lbnQge1xuXHQvKiogQHR5cGUge2FueX0gKi9cblx0I2V2ZW50cztcblxuXHQvKiogQHR5cGUge1JlY29yZDxzdHJpbmcsIGFueT59ICovXG5cdCNpbnN0YW5jZTtcblxuXHQvKipcblx0ICogQHBhcmFtIHtDb21wb25lbnRDb25zdHJ1Y3Rvck9wdGlvbnMgJiB7XG5cdCAqICBjb21wb25lbnQ6IGFueTtcblx0ICogfX0gb3B0aW9uc1xuXHQgKi9cblx0Y29uc3RydWN0b3Iob3B0aW9ucykge1xuXHRcdHZhciBzb3VyY2VzID0gbmV3IE1hcCgpO1xuXG5cdFx0LyoqXG5cdFx0ICogQHBhcmFtIHtzdHJpbmcgfCBzeW1ib2x9IGtleVxuXHRcdCAqIEBwYXJhbSB7dW5rbm93bn0gdmFsdWVcblx0XHQgKi9cblx0XHR2YXIgYWRkX3NvdXJjZSA9IChrZXksIHZhbHVlKSA9PiB7XG5cdFx0XHR2YXIgcyA9IG11dGFibGVfc291cmNlKHZhbHVlKTtcblx0XHRcdHNvdXJjZXMuc2V0KGtleSwgcyk7XG5cdFx0XHRyZXR1cm4gcztcblx0XHR9O1xuXG5cdFx0Ly8gUmVwbGljYXRlIGNvYXJzZS1ncmFpbmVkIHByb3BzIHRocm91Z2ggYSBwcm94eSB0aGF0IGhhcyBhIHZlcnNpb24gc291cmNlIGZvclxuXHRcdC8vIGVhY2ggcHJvcGVydHksIHdoaWNoIGlzIGluY3JlbWVudGVkIG9uIHVwZGF0ZXMgdG8gdGhlIHByb3BlcnR5IGl0c2VsZi4gRG8gbm90XG5cdFx0Ly8gdXNlIG91ciAkc3RhdGUgcHJveHkgYmVjYXVzZSB0aGF0IG9uZSBoYXMgZmluZS1ncmFpbmVkIHJlYWN0aXZpdHkuXG5cdFx0Y29uc3QgcHJvcHMgPSBuZXcgUHJveHkoXG5cdFx0XHR7IC4uLihvcHRpb25zLnByb3BzIHx8IHt9KSwgJCRldmVudHM6IHt9IH0sXG5cdFx0XHR7XG5cdFx0XHRcdGdldCh0YXJnZXQsIHByb3ApIHtcblx0XHRcdFx0XHRyZXR1cm4gZ2V0KHNvdXJjZXMuZ2V0KHByb3ApID8/IGFkZF9zb3VyY2UocHJvcCwgUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wKSkpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRoYXModGFyZ2V0LCBwcm9wKSB7XG5cdFx0XHRcdFx0Ly8gTmVjZXNzYXJ5IHRvIG5vdCB0aHJvdyBcImludmFsaWQgYmluZGluZ1wiIHZhbGlkYXRpb24gZXJyb3JzIG9uIHRoZSBjb21wb25lbnQgc2lkZVxuXHRcdFx0XHRcdGlmIChwcm9wID09PSBMRUdBQ1lfUFJPUFMpIHJldHVybiB0cnVlO1xuXG5cdFx0XHRcdFx0Z2V0KHNvdXJjZXMuZ2V0KHByb3ApID8/IGFkZF9zb3VyY2UocHJvcCwgUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wKSkpO1xuXHRcdFx0XHRcdHJldHVybiBSZWZsZWN0Lmhhcyh0YXJnZXQsIHByb3ApO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuXHRcdFx0XHRcdHNldChzb3VyY2VzLmdldChwcm9wKSA/PyBhZGRfc291cmNlKHByb3AsIHZhbHVlKSwgdmFsdWUpO1xuXHRcdFx0XHRcdHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3AsIHZhbHVlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdCk7XG5cblx0XHR0aGlzLiNpbnN0YW5jZSA9IChvcHRpb25zLmh5ZHJhdGUgPyBoeWRyYXRlIDogbW91bnQpKG9wdGlvbnMuY29tcG9uZW50LCB7XG5cdFx0XHR0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuXHRcdFx0YW5jaG9yOiBvcHRpb25zLmFuY2hvcixcblx0XHRcdHByb3BzLFxuXHRcdFx0Y29udGV4dDogb3B0aW9ucy5jb250ZXh0LFxuXHRcdFx0aW50cm86IG9wdGlvbnMuaW50cm8gPz8gZmFsc2UsXG5cdFx0XHRyZWNvdmVyOiBvcHRpb25zLnJlY292ZXJcblx0XHR9KTtcblxuXHRcdC8vIFdlIGRvbid0IGZsdXNoX3N5bmMgZm9yIGN1c3RvbSBlbGVtZW50IHdyYXBwZXJzIG9yIGlmIHRoZSB1c2VyIGRvZXNuJ3Qgd2FudCBpdFxuXHRcdGlmICghb3B0aW9ucz8ucHJvcHM/LiQkaG9zdCB8fCBvcHRpb25zLnN5bmMgPT09IGZhbHNlKSB7XG5cdFx0XHRmbHVzaF9zeW5jKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy4jZXZlbnRzID0gcHJvcHMuJCRldmVudHM7XG5cblx0XHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLiNpbnN0YW5jZSkpIHtcblx0XHRcdGlmIChrZXkgPT09ICckc2V0JyB8fCBrZXkgPT09ICckZGVzdHJveScgfHwga2V5ID09PSAnJG9uJykgY29udGludWU7XG5cdFx0XHRkZWZpbmVfcHJvcGVydHkodGhpcywga2V5LCB7XG5cdFx0XHRcdGdldCgpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy4jaW5zdGFuY2Vba2V5XTtcblx0XHRcdFx0fSxcblx0XHRcdFx0LyoqIEBwYXJhbSB7YW55fSB2YWx1ZSAqL1xuXHRcdFx0XHRzZXQodmFsdWUpIHtcblx0XHRcdFx0XHR0aGlzLiNpbnN0YW5jZVtrZXldID0gdmFsdWU7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGVudW1lcmFibGU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHRoaXMuI2luc3RhbmNlLiRzZXQgPSAvKiogQHBhcmFtIHtSZWNvcmQ8c3RyaW5nLCBhbnk+fSBuZXh0ICovIChuZXh0KSA9PiB7XG5cdFx0XHRPYmplY3QuYXNzaWduKHByb3BzLCBuZXh0KTtcblx0XHR9O1xuXG5cdFx0dGhpcy4jaW5zdGFuY2UuJGRlc3Ryb3kgPSAoKSA9PiB7XG5cdFx0XHR1bm1vdW50KHRoaXMuI2luc3RhbmNlKTtcblx0XHR9O1xuXHR9XG5cblx0LyoqIEBwYXJhbSB7UmVjb3JkPHN0cmluZywgYW55Pn0gcHJvcHMgKi9cblx0JHNldChwcm9wcykge1xuXHRcdHRoaXMuI2luc3RhbmNlLiRzZXQocHJvcHMpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0geyguLi5hcmdzOiBhbnlbXSkgPT4gYW55fSBjYWxsYmFja1xuXHQgKiBAcmV0dXJucyB7YW55fVxuXHQgKi9cblx0JG9uKGV2ZW50LCBjYWxsYmFjaykge1xuXHRcdHRoaXMuI2V2ZW50c1tldmVudF0gPSB0aGlzLiNldmVudHNbZXZlbnRdIHx8IFtdO1xuXG5cdFx0LyoqIEBwYXJhbSB7YW55W119IGFyZ3MgKi9cblx0XHRjb25zdCBjYiA9ICguLi5hcmdzKSA9PiBjYWxsYmFjay5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xuXHRcdHRoaXMuI2V2ZW50c1tldmVudF0ucHVzaChjYik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMuI2V2ZW50c1tldmVudF0gPSB0aGlzLiNldmVudHNbZXZlbnRdLmZpbHRlcigvKiogQHBhcmFtIHthbnl9IGZuICovIChmbikgPT4gZm4gIT09IGNiKTtcblx0XHR9O1xuXHR9XG5cblx0JGRlc3Ryb3koKSB7XG5cdFx0dGhpcy4jaW5zdGFuY2UuJGRlc3Ryb3koKTtcblx0fVxufVxuXG4vKipcbiAqIFJ1bnMgdGhlIGdpdmVuIGZ1bmN0aW9uIG9uY2UgaW1tZWRpYXRlbHkgb24gdGhlIHNlcnZlciwgYW5kIHdvcmtzIGxpa2UgYCRlZmZlY3QucHJlYCBvbiB0aGUgY2xpZW50LlxuICpcbiAqIEBkZXByZWNhdGVkIFVzZSB0aGlzIG9ubHkgYXMgYSB0ZW1wb3Jhcnkgc29sdXRpb24gdG8gbWlncmF0ZSB5b3VyIGNvbXBvbmVudCBjb2RlIHRvIFN2ZWx0ZSA1LlxuICogQHBhcmFtIHsoKSA9PiB2b2lkIHwgKCgpID0+IHZvaWQpfSBmblxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBydW4oZm4pIHtcblx0dXNlcl9wcmVfZWZmZWN0KCgpID0+IHtcblx0XHRmbigpO1xuXHRcdHZhciBlZmZlY3QgPSAvKiogQHR5cGUge2ltcG9ydCgnI2NsaWVudCcpLkVmZmVjdH0gKi8gKGFjdGl2ZV9lZmZlY3QpO1xuXHRcdC8vIElmIHRoZSBlZmZlY3QgaXMgaW1tZWRpYXRlbHkgbWFkZSBkaXJ0eSBhZ2FpbiwgbWFyayBpdCBhcyBtYXliZSBkaXJ0eSB0byBlbXVsYXRlIGxlZ2FjeSBiZWhhdmlvdXJcblx0XHRpZiAoKGVmZmVjdC5mICYgRElSVFkpICE9PSAwKSB7XG5cdFx0XHRsZXQgZmlsZW5hbWUgPSBcImEgZmlsZSAod2UgY2FuJ3Qga25vdyB3aGljaCBvbmUpXCI7XG5cdFx0XHRpZiAoREVWKSB7XG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0ZmlsZW5hbWUgPSBkZXZfY3VycmVudF9jb21wb25lbnRfZnVuY3Rpb24/LltGSUxFTkFNRV0gPz8gZmlsZW5hbWU7XG5cdFx0XHR9XG5cdFx0XHR3LmxlZ2FjeV9yZWN1cnNpdmVfcmVhY3RpdmVfYmxvY2soZmlsZW5hbWUpO1xuXHRcdFx0c2V0X3NpZ25hbF9zdGF0dXMoZWZmZWN0LCBNQVlCRV9ESVJUWSk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB0byBtaW1pYyB0aGUgbXVsdGlwbGUgbGlzdGVuZXJzIGF2YWlsYWJsZSBpbiBzdmVsdGUgNFxuICogQGRlcHJlY2F0ZWRcbiAqIEBwYXJhbSB7RXZlbnRMaXN0ZW5lcltdfSBoYW5kbGVyc1xuICogQHJldHVybnMge0V2ZW50TGlzdGVuZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVycyguLi5oYW5kbGVycykge1xuXHRyZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0Y29uc3QgeyBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gfSA9IGV2ZW50O1xuXHRcdGxldCBzdG9wcGVkID0gZmFsc2U7XG5cblx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSAoKSA9PiB7XG5cdFx0XHRzdG9wcGVkID0gdHJ1ZTtcblx0XHRcdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbi5jYWxsKGV2ZW50KTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgZXJyb3JzID0gW107XG5cblx0XHRmb3IgKGNvbnN0IGhhbmRsZXIgb2YgaGFuZGxlcnMpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIEB0cy1leHBlY3QtZXJyb3IgYHRoaXNgIGlzIG5vdCB0eXBlZFxuXHRcdFx0XHRoYW5kbGVyPy5jYWxsKHRoaXMsIGV2ZW50KTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0ZXJyb3JzLnB1c2goZSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChzdG9wcGVkKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvciAobGV0IGVycm9yIG9mIGVycm9ycykge1xuXHRcdFx0cXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuXHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB0byBjcmVhdGUgYSBgYnViYmxlYCBmdW5jdGlvbiB0aGF0IG1pbWljIHRoZSBiZWhhdmlvciBvZiBgb246Y2xpY2tgIHdpdGhvdXQgaGFuZGxlciBhdmFpbGFibGUgaW4gc3ZlbHRlIDQuXG4gKiBAZGVwcmVjYXRlZCBVc2UgdGhpcyBvbmx5IGFzIGEgdGVtcG9yYXJ5IHNvbHV0aW9uIHRvIG1pZ3JhdGUgeW91ciBhdXRvbWF0aWNhbGx5IGRlbGVnYXRlZCBldmVudHMgaW4gU3ZlbHRlIDUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCdWJibGVyKCkge1xuXHRjb25zdCBhY3RpdmVfY29tcG9uZW50X2NvbnRleHQgPSBjb21wb25lbnRfY29udGV4dDtcblx0aWYgKGFjdGl2ZV9jb21wb25lbnRfY29udGV4dCA9PT0gbnVsbCkge1xuXHRcdGxpZmVjeWNsZV9vdXRzaWRlX2NvbXBvbmVudCgnY3JlYXRlQnViYmxlcicpO1xuXHR9XG5cblx0cmV0dXJuICgvKipAdHlwZSB7c3RyaW5nfSovIHR5cGUpID0+ICgvKipAdHlwZSB7RXZlbnR9Ki8gZXZlbnQpID0+IHtcblx0XHRjb25zdCBldmVudHMgPSAvKiogQHR5cGUge1JlY29yZDxzdHJpbmcsIEZ1bmN0aW9uIHwgRnVuY3Rpb25bXT59ICovIChcblx0XHRcdGFjdGl2ZV9jb21wb25lbnRfY29udGV4dC5zLiQkZXZlbnRzXG5cdFx0KT8uWy8qKiBAdHlwZSB7YW55fSAqLyAodHlwZSldO1xuXG5cdFx0aWYgKGV2ZW50cykge1xuXHRcdFx0Y29uc3QgY2FsbGJhY2tzID0gaXNfYXJyYXkoZXZlbnRzKSA/IGV2ZW50cy5zbGljZSgpIDogW2V2ZW50c107XG5cdFx0XHRmb3IgKGNvbnN0IGZuIG9mIGNhbGxiYWNrcykge1xuXHRcdFx0XHRmbi5jYWxsKGFjdGl2ZV9jb21wb25lbnRfY29udGV4dC54LCBldmVudCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9O1xufVxuXG5leHBvcnQge1xuXHRvbmNlLFxuXHRwcmV2ZW50RGVmYXVsdCxcblx0c2VsZixcblx0c3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uLFxuXHRzdG9wUHJvcGFnYXRpb24sXG5cdHRydXN0ZWQsXG5cdHBhc3NpdmUsXG5cdG5vbnBhc3NpdmVcbn0gZnJvbSAnLi4vaW50ZXJuYWwvY2xpZW50L2RvbS9sZWdhY3kvZXZlbnQtbW9kaWZpZXJzLmpzJztcbiIsICJpbXBvcnQgeyBjcmVhdGVDbGFzc0NvbXBvbmVudCB9IGZyb20gJy4uLy4uLy4uLy4uL2xlZ2FjeS9sZWdhY3ktY2xpZW50LmpzJztcbmltcG9ydCB7IGRlc3Ryb3lfZWZmZWN0LCBlZmZlY3Rfcm9vdCwgcmVuZGVyX2VmZmVjdCB9IGZyb20gJy4uLy4uL3JlYWN0aXZpdHkvZWZmZWN0cy5qcyc7XG5pbXBvcnQgeyBhcHBlbmQgfSBmcm9tICcuLi90ZW1wbGF0ZS5qcyc7XG5pbXBvcnQgeyBkZWZpbmVfcHJvcGVydHksIGdldF9kZXNjcmlwdG9yLCBvYmplY3Rfa2V5cyB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQ3VzdG9tRWxlbWVudFByb3BEZWZpbml0aW9uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2F0dHJpYnV0ZV1cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3JlZmxlY3RdXG4gKiBAcHJvcGVydHkgeydTdHJpbmcnfCdCb29sZWFuJ3wnTnVtYmVyJ3wnQXJyYXknfCdPYmplY3QnfSBbdHlwZV1cbiAqL1xuXG4vKiogQHR5cGUge2FueX0gKi9cbmxldCBTdmVsdGVFbGVtZW50O1xuXG5pZiAodHlwZW9mIEhUTUxFbGVtZW50ID09PSAnZnVuY3Rpb24nKSB7XG5cdFN2ZWx0ZUVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcblx0XHQvKiogVGhlIFN2ZWx0ZSBjb21wb25lbnQgY29uc3RydWN0b3IgKi9cblx0XHQkJGN0b3I7XG5cdFx0LyoqIFNsb3RzICovXG5cdFx0JCRzO1xuXHRcdC8qKiBAdHlwZSB7YW55fSBUaGUgU3ZlbHRlIGNvbXBvbmVudCBpbnN0YW5jZSAqL1xuXHRcdCQkYztcblx0XHQvKiogV2hldGhlciBvciBub3QgdGhlIGN1c3RvbSBlbGVtZW50IGlzIGNvbm5lY3RlZCAqL1xuXHRcdCQkY24gPSBmYWxzZTtcblx0XHQvKiogQHR5cGUge1JlY29yZDxzdHJpbmcsIGFueT59IENvbXBvbmVudCBwcm9wcyBkYXRhICovXG5cdFx0JCRkID0ge307XG5cdFx0LyoqIGB0cnVlYCBpZiBjdXJyZW50bHkgaW4gdGhlIHByb2Nlc3Mgb2YgcmVmbGVjdGluZyBjb21wb25lbnQgcHJvcHMgYmFjayB0byBhdHRyaWJ1dGVzICovXG5cdFx0JCRyID0gZmFsc2U7XG5cdFx0LyoqIEB0eXBlIHtSZWNvcmQ8c3RyaW5nLCBDdXN0b21FbGVtZW50UHJvcERlZmluaXRpb24+fSBQcm9wcyBkZWZpbml0aW9uIChuYW1lLCByZWZsZWN0ZWQsIHR5cGUgZXRjKSAqL1xuXHRcdCQkcF9kID0ge307XG5cdFx0LyoqIEB0eXBlIHtSZWNvcmQ8c3RyaW5nLCBFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0W10+fSBFdmVudCBsaXN0ZW5lcnMgKi9cblx0XHQkJGwgPSB7fTtcblx0XHQvKiogQHR5cGUge01hcDxFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0LCBGdW5jdGlvbj59IEV2ZW50IGxpc3RlbmVyIHVuc3Vic2NyaWJlIGZ1bmN0aW9ucyAqL1xuXHRcdCQkbF91ID0gbmV3IE1hcCgpO1xuXHRcdC8qKiBAdHlwZSB7YW55fSBUaGUgbWFuYWdlZCByZW5kZXIgZWZmZWN0IGZvciByZWZsZWN0aW5nIGF0dHJpYnV0ZXMgKi9cblx0XHQkJG1lO1xuXG5cdFx0LyoqXG5cdFx0ICogQHBhcmFtIHsqfSAkJGNvbXBvbmVudEN0b3Jcblx0XHQgKiBAcGFyYW0geyp9ICQkc2xvdHNcblx0XHQgKiBAcGFyYW0geyp9IHVzZV9zaGFkb3dfZG9tXG5cdFx0ICovXG5cdFx0Y29uc3RydWN0b3IoJCRjb21wb25lbnRDdG9yLCAkJHNsb3RzLCB1c2Vfc2hhZG93X2RvbSkge1xuXHRcdFx0c3VwZXIoKTtcblx0XHRcdHRoaXMuJCRjdG9yID0gJCRjb21wb25lbnRDdG9yO1xuXHRcdFx0dGhpcy4kJHMgPSAkJHNsb3RzO1xuXHRcdFx0aWYgKHVzZV9zaGFkb3dfZG9tKSB7XG5cdFx0XHRcdHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG5cdFx0ICogQHBhcmFtIHtFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0fSBsaXN0ZW5lclxuXHRcdCAqIEBwYXJhbSB7Ym9vbGVhbiB8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zfSBbb3B0aW9uc11cblx0XHQgKi9cblx0XHRhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKSB7XG5cdFx0XHQvLyBXZSBjYW4ndCBkZXRlcm1pbmUgdXBmcm9udCBpZiB0aGUgZXZlbnQgaXMgYSBjdXN0b20gZXZlbnQgb3Igbm90LCBzbyB3ZSBoYXZlIHRvXG5cdFx0XHQvLyBsaXN0ZW4gdG8gYm90aC4gSWYgc29tZW9uZSB1c2VzIGEgY3VzdG9tIGV2ZW50IHdpdGggdGhlIHNhbWUgbmFtZSBhcyBhIHJlZ3VsYXJcblx0XHRcdC8vIGJyb3dzZXIgZXZlbnQsIHRoaXMgZmlyZXMgdHdpY2UgLSB3ZSBjYW4ndCBhdm9pZCB0aGF0LlxuXHRcdFx0dGhpcy4kJGxbdHlwZV0gPSB0aGlzLiQkbFt0eXBlXSB8fCBbXTtcblx0XHRcdHRoaXMuJCRsW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuXHRcdFx0aWYgKHRoaXMuJCRjKSB7XG5cdFx0XHRcdGNvbnN0IHVuc3ViID0gdGhpcy4kJGMuJG9uKHR5cGUsIGxpc3RlbmVyKTtcblx0XHRcdFx0dGhpcy4kJGxfdS5zZXQobGlzdGVuZXIsIHVuc3ViKTtcblx0XHRcdH1cblx0XHRcdHN1cGVyLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG5cdFx0ICogQHBhcmFtIHtFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0fSBsaXN0ZW5lclxuXHRcdCAqIEBwYXJhbSB7Ym9vbGVhbiB8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zfSBbb3B0aW9uc11cblx0XHQgKi9cblx0XHRyZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKSB7XG5cdFx0XHRzdXBlci5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcblx0XHRcdGlmICh0aGlzLiQkYykge1xuXHRcdFx0XHRjb25zdCB1bnN1YiA9IHRoaXMuJCRsX3UuZ2V0KGxpc3RlbmVyKTtcblx0XHRcdFx0aWYgKHVuc3ViKSB7XG5cdFx0XHRcdFx0dW5zdWIoKTtcblx0XHRcdFx0XHR0aGlzLiQkbF91LmRlbGV0ZShsaXN0ZW5lcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRhc3luYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcblx0XHRcdHRoaXMuJCRjbiA9IHRydWU7XG5cdFx0XHRpZiAoIXRoaXMuJCRjKSB7XG5cdFx0XHRcdC8vIFdlIHdhaXQgb25lIHRpY2sgdG8gbGV0IHBvc3NpYmxlIGNoaWxkIHNsb3QgZWxlbWVudHMgYmUgY3JlYXRlZC9tb3VudGVkXG5cdFx0XHRcdGF3YWl0IFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdFx0XHRpZiAoIXRoaXMuJCRjbiB8fCB0aGlzLiQkYykge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHQvKiogQHBhcmFtIHtzdHJpbmd9IG5hbWUgKi9cblx0XHRcdFx0ZnVuY3Rpb24gY3JlYXRlX3Nsb3QobmFtZSkge1xuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCAqIEBwYXJhbSB7RWxlbWVudH0gYW5jaG9yXG5cdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0cmV0dXJuIChhbmNob3IpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IHNsb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzbG90Jyk7XG5cdFx0XHRcdFx0XHRpZiAobmFtZSAhPT0gJ2RlZmF1bHQnKSBzbG90Lm5hbWUgPSBuYW1lO1xuXG5cdFx0XHRcdFx0XHRhcHBlbmQoYW5jaG9yLCBzbG90KTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8qKiBAdHlwZSB7UmVjb3JkPHN0cmluZywgYW55Pn0gKi9cblx0XHRcdFx0Y29uc3QgJCRzbG90cyA9IHt9O1xuXHRcdFx0XHRjb25zdCBleGlzdGluZ19zbG90cyA9IGdldF9jdXN0b21fZWxlbWVudHNfc2xvdHModGhpcyk7XG5cdFx0XHRcdGZvciAoY29uc3QgbmFtZSBvZiB0aGlzLiQkcykge1xuXHRcdFx0XHRcdGlmIChuYW1lIGluIGV4aXN0aW5nX3Nsb3RzKSB7XG5cdFx0XHRcdFx0XHRpZiAobmFtZSA9PT0gJ2RlZmF1bHQnICYmICF0aGlzLiQkZC5jaGlsZHJlbikge1xuXHRcdFx0XHRcdFx0XHR0aGlzLiQkZC5jaGlsZHJlbiA9IGNyZWF0ZV9zbG90KG5hbWUpO1xuXHRcdFx0XHRcdFx0XHQkJHNsb3RzLmRlZmF1bHQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JCRzbG90c1tuYW1lXSA9IGNyZWF0ZV9zbG90KG5hbWUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiB0aGlzLmF0dHJpYnV0ZXMpIHtcblx0XHRcdFx0XHQvLyB0aGlzLiQkZGF0YSB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgdGhpcy5hdHRyaWJ1dGVzXG5cdFx0XHRcdFx0Y29uc3QgbmFtZSA9IHRoaXMuJCRnX3AoYXR0cmlidXRlLm5hbWUpO1xuXHRcdFx0XHRcdGlmICghKG5hbWUgaW4gdGhpcy4kJGQpKSB7XG5cdFx0XHRcdFx0XHR0aGlzLiQkZFtuYW1lXSA9IGdldF9jdXN0b21fZWxlbWVudF92YWx1ZShuYW1lLCBhdHRyaWJ1dGUudmFsdWUsIHRoaXMuJCRwX2QsICd0b1Byb3AnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gUG9ydCBvdmVyIHByb3BzIHRoYXQgd2VyZSBzZXQgcHJvZ3JhbW1hdGljYWxseSBiZWZvcmUgY2Ugd2FzIGluaXRpYWxpemVkXG5cdFx0XHRcdGZvciAoY29uc3Qga2V5IGluIHRoaXMuJCRwX2QpIHtcblx0XHRcdFx0XHQvLyBAdHMtZXhwZWN0LWVycm9yXG5cdFx0XHRcdFx0aWYgKCEoa2V5IGluIHRoaXMuJCRkKSAmJiB0aGlzW2tleV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0Ly8gQHRzLWV4cGVjdC1lcnJvclxuXHRcdFx0XHRcdFx0dGhpcy4kJGRba2V5XSA9IHRoaXNba2V5XTsgLy8gZG9uJ3QgdHJhbnNmb3JtLCB0aGVzZSB3ZXJlIHNldCB0aHJvdWdoIEphdmFTY3JpcHRcblx0XHRcdFx0XHRcdC8vIEB0cy1leHBlY3QtZXJyb3Jcblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzW2tleV07IC8vIHJlbW92ZSB0aGUgcHJvcGVydHkgdGhhdCBzaGFkb3dzIHRoZSBnZXR0ZXIvc2V0dGVyXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuJCRjID0gY3JlYXRlQ2xhc3NDb21wb25lbnQoe1xuXHRcdFx0XHRcdGNvbXBvbmVudDogdGhpcy4kJGN0b3IsXG5cdFx0XHRcdFx0dGFyZ2V0OiB0aGlzLnNoYWRvd1Jvb3QgfHwgdGhpcyxcblx0XHRcdFx0XHRwcm9wczoge1xuXHRcdFx0XHRcdFx0Li4udGhpcy4kJGQsXG5cdFx0XHRcdFx0XHQkJHNsb3RzLFxuXHRcdFx0XHRcdFx0JCRob3N0OiB0aGlzXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyBSZWZsZWN0IGNvbXBvbmVudCBwcm9wcyBhcyBhdHRyaWJ1dGVzXG5cdFx0XHRcdHRoaXMuJCRtZSA9IGVmZmVjdF9yb290KCgpID0+IHtcblx0XHRcdFx0XHRyZW5kZXJfZWZmZWN0KCgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuJCRyID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3Qga2V5IG9mIG9iamVjdF9rZXlzKHRoaXMuJCRjKSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMuJCRwX2Rba2V5XT8ucmVmbGVjdCkgY29udGludWU7XG5cdFx0XHRcdFx0XHRcdHRoaXMuJCRkW2tleV0gPSB0aGlzLiQkY1trZXldO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBhdHRyaWJ1dGVfdmFsdWUgPSBnZXRfY3VzdG9tX2VsZW1lbnRfdmFsdWUoXG5cdFx0XHRcdFx0XHRcdFx0a2V5LFxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuJCRkW2tleV0sXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy4kJHBfZCxcblx0XHRcdFx0XHRcdFx0XHQndG9BdHRyaWJ1dGUnXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdGlmIChhdHRyaWJ1dGVfdmFsdWUgPT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVtb3ZlQXR0cmlidXRlKHRoaXMuJCRwX2Rba2V5XS5hdHRyaWJ1dGUgfHwga2V5KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnNldEF0dHJpYnV0ZSh0aGlzLiQkcF9kW2tleV0uYXR0cmlidXRlIHx8IGtleSwgYXR0cmlidXRlX3ZhbHVlKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dGhpcy4kJHIgPSBmYWxzZTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Zm9yIChjb25zdCB0eXBlIGluIHRoaXMuJCRsKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBsaXN0ZW5lciBvZiB0aGlzLiQkbFt0eXBlXSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgdW5zdWIgPSB0aGlzLiQkYy4kb24odHlwZSwgbGlzdGVuZXIpO1xuXHRcdFx0XHRcdFx0dGhpcy4kJGxfdS5zZXQobGlzdGVuZXIsIHVuc3ViKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy4kJGwgPSB7fTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBXZSBkb24ndCBuZWVkIHRoaXMgd2hlbiB3b3JraW5nIHdpdGhpbiBTdmVsdGUgY29kZSwgYnV0IGZvciBjb21wYXRpYmlsaXR5IG9mIHBlb3BsZSB1c2luZyB0aGlzIG91dHNpZGUgb2YgU3ZlbHRlXG5cdFx0Ly8gYW5kIHNldHRpbmcgYXR0cmlidXRlcyB0aHJvdWdoIHNldEF0dHJpYnV0ZSBldGMsIHRoaXMgaXMgaGVscGZ1bFxuXG5cdFx0LyoqXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGF0dHJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gX29sZFZhbHVlXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IG5ld1ZhbHVlXG5cdFx0ICovXG5cdFx0YXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHIsIF9vbGRWYWx1ZSwgbmV3VmFsdWUpIHtcblx0XHRcdGlmICh0aGlzLiQkcikgcmV0dXJuO1xuXHRcdFx0YXR0ciA9IHRoaXMuJCRnX3AoYXR0cik7XG5cdFx0XHR0aGlzLiQkZFthdHRyXSA9IGdldF9jdXN0b21fZWxlbWVudF92YWx1ZShhdHRyLCBuZXdWYWx1ZSwgdGhpcy4kJHBfZCwgJ3RvUHJvcCcpO1xuXHRcdFx0dGhpcy4kJGM/LiRzZXQoeyBbYXR0cl06IHRoaXMuJCRkW2F0dHJdIH0pO1xuXHRcdH1cblxuXHRcdGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuXHRcdFx0dGhpcy4kJGNuID0gZmFsc2U7XG5cdFx0XHQvLyBJbiBhIG1pY3JvdGFzaywgYmVjYXVzZSB0aGlzIGNvdWxkIGJlIGEgbW92ZSB3aXRoaW4gdGhlIERPTVxuXHRcdFx0UHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG5cdFx0XHRcdGlmICghdGhpcy4kJGNuICYmIHRoaXMuJCRjKSB7XG5cdFx0XHRcdFx0dGhpcy4kJGMuJGRlc3Ryb3koKTtcblx0XHRcdFx0XHR0aGlzLiQkbWUoKTtcblx0XHRcdFx0XHR0aGlzLiQkYyA9IHVuZGVmaW5lZDtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZV9uYW1lXG5cdFx0ICovXG5cdFx0JCRnX3AoYXR0cmlidXRlX25hbWUpIHtcblx0XHRcdHJldHVybiAoXG5cdFx0XHRcdG9iamVjdF9rZXlzKHRoaXMuJCRwX2QpLmZpbmQoXG5cdFx0XHRcdFx0KGtleSkgPT5cblx0XHRcdFx0XHRcdHRoaXMuJCRwX2Rba2V5XS5hdHRyaWJ1dGUgPT09IGF0dHJpYnV0ZV9uYW1lIHx8XG5cdFx0XHRcdFx0XHQoIXRoaXMuJCRwX2Rba2V5XS5hdHRyaWJ1dGUgJiYga2V5LnRvTG93ZXJDYXNlKCkgPT09IGF0dHJpYnV0ZV9uYW1lKVxuXHRcdFx0XHQpIHx8IGF0dHJpYnV0ZV9uYW1lXG5cdFx0XHQpO1xuXHRcdH1cblx0fTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcFxuICogQHBhcmFtIHthbnl9IHZhbHVlXG4gKiBAcGFyYW0ge1JlY29yZDxzdHJpbmcsIEN1c3RvbUVsZW1lbnRQcm9wRGVmaW5pdGlvbj59IHByb3BzX2RlZmluaXRpb25cbiAqIEBwYXJhbSB7J3RvQXR0cmlidXRlJyB8ICd0b1Byb3AnfSBbdHJhbnNmb3JtXVxuICovXG5mdW5jdGlvbiBnZXRfY3VzdG9tX2VsZW1lbnRfdmFsdWUocHJvcCwgdmFsdWUsIHByb3BzX2RlZmluaXRpb24sIHRyYW5zZm9ybSkge1xuXHRjb25zdCB0eXBlID0gcHJvcHNfZGVmaW5pdGlvbltwcm9wXT8udHlwZTtcblx0dmFsdWUgPSB0eXBlID09PSAnQm9vbGVhbicgJiYgdHlwZW9mIHZhbHVlICE9PSAnYm9vbGVhbicgPyB2YWx1ZSAhPSBudWxsIDogdmFsdWU7XG5cdGlmICghdHJhbnNmb3JtIHx8ICFwcm9wc19kZWZpbml0aW9uW3Byb3BdKSB7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9IGVsc2UgaWYgKHRyYW5zZm9ybSA9PT0gJ3RvQXR0cmlidXRlJykge1xuXHRcdHN3aXRjaCAodHlwZSkge1xuXHRcdFx0Y2FzZSAnT2JqZWN0Jzpcblx0XHRcdGNhc2UgJ0FycmF5Jzpcblx0XHRcdFx0cmV0dXJuIHZhbHVlID09IG51bGwgPyBudWxsIDogSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuXHRcdFx0Y2FzZSAnQm9vbGVhbic6XG5cdFx0XHRcdHJldHVybiB2YWx1ZSA/ICcnIDogbnVsbDtcblx0XHRcdGNhc2UgJ051bWJlcic6XG5cdFx0XHRcdHJldHVybiB2YWx1ZSA9PSBudWxsID8gbnVsbCA6IHZhbHVlO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdGNhc2UgJ09iamVjdCc6XG5cdFx0XHRjYXNlICdBcnJheSc6XG5cdFx0XHRcdHJldHVybiB2YWx1ZSAmJiBKU09OLnBhcnNlKHZhbHVlKTtcblx0XHRcdGNhc2UgJ0Jvb2xlYW4nOlxuXHRcdFx0XHRyZXR1cm4gdmFsdWU7IC8vIGNvbnZlcnNpb24gYWxyZWFkeSBoYW5kbGVkIGFib3ZlXG5cdFx0XHRjYXNlICdOdW1iZXInOlxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgIT0gbnVsbCA/ICt2YWx1ZSA6IHZhbHVlO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZ2V0X2N1c3RvbV9lbGVtZW50c19zbG90cyhlbGVtZW50KSB7XG5cdC8qKiBAdHlwZSB7UmVjb3JkPHN0cmluZywgdHJ1ZT59ICovXG5cdGNvbnN0IHJlc3VsdCA9IHt9O1xuXHRlbGVtZW50LmNoaWxkTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuXHRcdHJlc3VsdFsvKiogQHR5cGUge0VsZW1lbnR9IG5vZGUgKi8gKG5vZGUpLnNsb3QgfHwgJ2RlZmF1bHQnXSA9IHRydWU7XG5cdH0pO1xuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICpcbiAqIFR1cm4gYSBTdmVsdGUgY29tcG9uZW50IGludG8gYSBjdXN0b20gZWxlbWVudC5cbiAqIEBwYXJhbSB7YW55fSBDb21wb25lbnQgIEEgU3ZlbHRlIGNvbXBvbmVudCBmdW5jdGlvblxuICogQHBhcmFtIHtSZWNvcmQ8c3RyaW5nLCBDdXN0b21FbGVtZW50UHJvcERlZmluaXRpb24+fSBwcm9wc19kZWZpbml0aW9uICBUaGUgcHJvcHMgdG8gb2JzZXJ2ZVxuICogQHBhcmFtIHtzdHJpbmdbXX0gc2xvdHMgIFRoZSBzbG90cyB0byBjcmVhdGVcbiAqIEBwYXJhbSB7c3RyaW5nW119IGV4cG9ydHMgIEV4cGxpY2l0bHkgZXhwb3J0ZWQgdmFsdWVzLCBvdGhlciB0aGFuIHByb3BzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZV9zaGFkb3dfZG9tICBXaGV0aGVyIHRvIHVzZSBzaGFkb3cgRE9NXG4gKiBAcGFyYW0geyhjZTogbmV3ICgpID0+IEhUTUxFbGVtZW50KSA9PiBuZXcgKCkgPT4gSFRNTEVsZW1lbnR9IFtleHRlbmRdXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVfY3VzdG9tX2VsZW1lbnQoXG5cdENvbXBvbmVudCxcblx0cHJvcHNfZGVmaW5pdGlvbixcblx0c2xvdHMsXG5cdGV4cG9ydHMsXG5cdHVzZV9zaGFkb3dfZG9tLFxuXHRleHRlbmRcbikge1xuXHRsZXQgQ2xhc3MgPSBjbGFzcyBleHRlbmRzIFN2ZWx0ZUVsZW1lbnQge1xuXHRcdGNvbnN0cnVjdG9yKCkge1xuXHRcdFx0c3VwZXIoQ29tcG9uZW50LCBzbG90cywgdXNlX3NoYWRvd19kb20pO1xuXHRcdFx0dGhpcy4kJHBfZCA9IHByb3BzX2RlZmluaXRpb247XG5cdFx0fVxuXHRcdHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuXHRcdFx0cmV0dXJuIG9iamVjdF9rZXlzKHByb3BzX2RlZmluaXRpb24pLm1hcCgoa2V5KSA9PlxuXHRcdFx0XHQocHJvcHNfZGVmaW5pdGlvbltrZXldLmF0dHJpYnV0ZSB8fCBrZXkpLnRvTG93ZXJDYXNlKClcblx0XHRcdCk7XG5cdFx0fVxuXHR9O1xuXHRvYmplY3Rfa2V5cyhwcm9wc19kZWZpbml0aW9uKS5mb3JFYWNoKChwcm9wKSA9PiB7XG5cdFx0ZGVmaW5lX3Byb3BlcnR5KENsYXNzLnByb3RvdHlwZSwgcHJvcCwge1xuXHRcdFx0Z2V0KCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy4kJGMgJiYgcHJvcCBpbiB0aGlzLiQkYyA/IHRoaXMuJCRjW3Byb3BdIDogdGhpcy4kJGRbcHJvcF07XG5cdFx0XHR9LFxuXHRcdFx0c2V0KHZhbHVlKSB7XG5cdFx0XHRcdHZhbHVlID0gZ2V0X2N1c3RvbV9lbGVtZW50X3ZhbHVlKHByb3AsIHZhbHVlLCBwcm9wc19kZWZpbml0aW9uKTtcblx0XHRcdFx0dGhpcy4kJGRbcHJvcF0gPSB2YWx1ZTtcblx0XHRcdFx0dmFyIGNvbXBvbmVudCA9IHRoaXMuJCRjO1xuXG5cdFx0XHRcdGlmIChjb21wb25lbnQpIHtcblx0XHRcdFx0XHQvLyAvLyBJZiB0aGUgaW5zdGFuY2UgaGFzIGFuIGFjY2Vzc29yLCB1c2UgdGhhdCBpbnN0ZWFkXG5cdFx0XHRcdFx0dmFyIHNldHRlciA9IGdldF9kZXNjcmlwdG9yKGNvbXBvbmVudCwgcHJvcCk/LmdldDtcblxuXHRcdFx0XHRcdGlmIChzZXR0ZXIpIHtcblx0XHRcdFx0XHRcdGNvbXBvbmVudFtwcm9wXSA9IHZhbHVlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb21wb25lbnQuJHNldCh7IFtwcm9wXTogdmFsdWUgfSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xuXHRleHBvcnRzLmZvckVhY2goKHByb3BlcnR5KSA9PiB7XG5cdFx0ZGVmaW5lX3Byb3BlcnR5KENsYXNzLnByb3RvdHlwZSwgcHJvcGVydHksIHtcblx0XHRcdGdldCgpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuJCRjPy5bcHJvcGVydHldO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblx0aWYgKGV4dGVuZCkge1xuXHRcdC8vIEB0cy1leHBlY3QtZXJyb3IgLSBhc3NpZ25pbmcgaGVyZSBpcyBmaW5lXG5cdFx0Q2xhc3MgPSBleHRlbmQoQ2xhc3MpO1xuXHR9XG5cdENvbXBvbmVudC5lbGVtZW50ID0gLyoqIEB0eXBlIHthbnl9ICovIENsYXNzO1xuXHRyZXR1cm4gQ2xhc3M7XG59XG4iLCAiPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgZXhwb3J0IGxldCB2YXJpYWJsZTogbnVtYmVyO1xuPC9zY3JpcHQ+XG5cbjxkaXYgY2xhc3M9XCJudW1iZXJcIj5cbiAgPHNwYW4+TXkgbnVtYmVyIGlzIHt2YXJpYWJsZX0hPC9zcGFuPlxuPC9kaXY+XG5cbjxzdHlsZT5cbiAgLm51bWJlciB7XG4gICAgY29sb3I6IHJlZDtcbiAgfVxuPC9zdHlsZT4iXSwKICAibWFw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Q3BCLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFDQSxNQUFNLFdBQVc7QUFDZixZQUFRLElBQUksa0JBQWtCO0FBQUEsRUFDaEM7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNuQixVQUFNLEVBQUUsVUFBVSxJQUFJLEtBQUs7QUFFM0IsUUFBSSxPQUE2QjtBQUNqQyxVQUFNLFNBQVMsVUFBVSxnQkFBZ0IsaUJBQWlCO0FBRTFELFFBQUksT0FBTyxTQUFTLEdBQUc7QUFFckIsYUFBTyxPQUFPLENBQUM7QUFBQSxJQUNqQixPQUFPO0FBR0wsYUFBTyxVQUFVLGFBQWEsS0FBSztBQUNuQyxhQUFNLDZCQUFNLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixRQUFRLEtBQUs7QUFBQSxJQUNuRTtBQUdBLFFBQUksS0FBTSxXQUFVLFdBQVcsSUFBSTtBQUFBLEVBQ3JDO0FBQ0Y7OztBRGxDQSxJQUFPLGVBQVE7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJzdGFjayIsICJzdGFjayIsICJfYSIsICJfYiIsICJzb3VyY2UiLCAiZWZmZWN0IiwgImNvbXBvbmVudCIsICJnZXRfc3RhY2siLCAiX2EiLCAic3RhY2siLCAibW9kdWxlIiwgImNvbXBvbmVudCIsICJfYSIsICJfYiIsICJjb21wb25lbnQiLCAiX2EiLCAiX2IiLCAic3RhY2siLCAicHJvcCIsICJzb3VyY2UiLCAidmFsdWUiLCAia2V5IiwgImFycmF5X3Byb3RvdHlwZSIsICJpbmRleCIsICJjaGlsZCIsICJ0ZXh0IiwgIl9hIiwgImRlcml2ZWQiLCAiY2hpbGQiLCAiZWZmZWN0IiwgInB1c2giLCAiX2EiLCAiZGVyaXZlZCIsICJlZmZlY3QiLCAicHVzaCIsICJlZmZlY3QiLCAidGVhcmRvd24iLCAibmV4dCIsICJ0cmFuc2l0aW9uIiwgImNoaWxkIiwgInNpYmxpbmciLCAiaXNfbWljcm9fdGFza19xdWV1ZWQiLCAiZWZmZWN0IiwgIl9hIiwgIl9iIiwgImVmZmVjdCIsICJlZmZlY3QiLCAiY29tcG9uZW50X2NvbnRleHQiLCAiX2EiLCAiX2IiLCAic3RhY2siLCAiaW5kZXgiLCAidGVhcmRvd24iLCAiaXNfbWljcm9fdGFza19xdWV1ZWQiLCAic2libGluZyIsICJjaGlsZCIsICJfYSIsICJfYiIsICJkZXJpdmVkIiwgImNvbXBvbmVudCIsICJfYSIsICJfYiIsICJoYXNoIiwgImV2ZW50IiwgIl9hIiwgImh0bWwiLCAiZWZmZWN0IiwgInRleHQiLCAiX2EiLCAiY29tcG9uZW50IiwgIkNvbXBvbmVudCIsICJldmVudHMiLCAicGFzc2l2ZSIsICJ1bm1vdW50IiwgIl9hIiwgInJvb3QiLCAiZWZmZWN0IiwgImZhbGxiYWNrIiwgIl9hIiwgIl9iIiwgIl9hIiwgIl9iIiwgInByb3AiLCAibmV4dCIsICJldmVudCIsICJzbG90IiwgIl9hIiwgImF0dHIiLCAicHJvcCIsICJlbGVtZW50IiwgIl9hIiwgIl9hIl0KfQo=
